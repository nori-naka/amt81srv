{"version":3,"file":"js/app.532129bf.js","mappings":"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EA,8CAGA,kDAEA,0CACA,iCACA,0CAEA,qBAEA,+BAEA,2BACA,2BACA,kBACA,mBACA,qCACA,2CACA,gBACA,sBACA,IAGA,iCAEA,oDACA,sDAEA,uCACA,uDACA,wDACA5c,QAAAA,IACA,iHAEA,qBACA,oCACA,CAEA,EACAwc,QAAAA,CAEA2U,iBACA,sDACA,GACArH,IAAAA,KAAAA,KACAnb,SAAAA,KAAAA,SACA8X,KAAAA,MACArC,EAAAA,KAAAA,EACA5F,EAAAA,KAAAA,EACA5e,KAAAA,GAEA,kDACA,EACAwxB,kBAAAA,GACA,sBACA,gBACA,kDACA,mDACA,kBACA,mBACA,kCACA,oBACA,qBACA,oDAGA,EAEA,iBACA,kCACA,mBAEAnG,EAAAA,iBAAAA,SAAAA,IACA7pB,EAAAA,QAAAA,KACA,+BACA,0CACA,UAEA,+BACA,EACAsrB,SAAAA,GAEA,gBACAlI,EAAAA,UAAAA,iBAAAA,SAAAA,GAAAA,EAAAA,QACA,EACAlB,iBACA,qBACA,8BACA,EACAD,kBACA,oBACA,EACAM,uBACA,kBACA,mBACA,iDACA,qCACA,EACAC,mBACA,kBACA,kBACA,mBACA,uCAEA,8BACA,SACA,SACA,4BACA,oCACA,IAEA,8BACA,wBAEA,YACA,uCACA,wCAEA,8BACA,kCACA,mCAAA5Z,KAAAA,IACA,yBAEA,eAGA,EAUAma,YACA,eACA,wCACA,6BACA,6BACAnkB,QAAAA,IAAAA,SAAAA,KAAAA,SACAA,QAAAA,IAAAA,KAAAA,KAAAA,OAAAA,KAAAA,KACA,oDACA,kBACA,kEACA,6DACA,QAEA,qBACA,mCACA,0BACA,kDACA,IAGA,EACAkkB,YACA,eACA,wCACA,6BACA,6BACAlkB,QAAAA,IAAAA,SAAAA,KAAAA,SACAA,QAAAA,IAAAA,KAAAA,KAAAA,OAAAA,KAAAA,KACA,oDACA,kBACA,kEACA,6DACA,QAEA,qBACA,mCACA,0BACA,kDACA,IAGA,EACAqkB,KAAAA,GACA,mBACA,EAEAb,kBACA,oBACA,2CACA,yCACA,EACAD,iBACA,kDACA,0CACA,EACA8N,eAIA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AEA,0BACA,uCACA,mBACAA,QAAAA,IAAAA,0BAAAA,GAGA,2BACA,mBAOA,EACAsf,MAAAA,CACAgC,QAAAA,GACA,oDACA,2CAEA,KACA,MACA,oDACA,2BACA,sDAIA,kDACA6L,EAAAA,aAAAA,EACA,MACAA,EAAAA,aAAAA,KAGA,CACA,EACAvlB,qBACA,8DAEA,4CACA,qCACA,KAEAkzB,EAEA,+BACA,kDACA3N,EAAAA,aAAAA,EACA,CACA,EAGAgF,YACA,4CACA,oDACA,mBAEA,EACA4I,kBACA/6B,QAAAA,IAAAA,WACA,GAEA2c,SAAAA,CAQAuY,kBACA,qEACA,EACAC,qBACA,yEACA,iCACA,EACA4F,kBACA,kEACA,yDACA,IACA,EACAC,2BACA,4DACA,EACA5rB,0BACA,qDACA,EAGA+iB,YACA,6CACA,EAEA8I,qBACA,wCACA,EACAjH,oBACA,wBACA,EACAO,sBACA,0BACA,EACAJ,YACA,wCACA,EACAF,gBACA,OACA9X,gBAAAA,KAAAA,yBAAAA,UAAAA,WACAwX,QAAAA,KAAAA,yBAAAA,EAAAA,GAEA,EACAW,gBACA,aAKA,EACAjsB,YACA,2CACA,EACAiZ,UACA,2CACA,EACAtL,WACA,iCACA,EACAnH,cACA,yCACA,EACA5C,aACA,wCACA,EACAC,eACA,0CACA,EACApN,OACA,sCACA,EACAD,QACA,uCACA,EACA+I,qBAEA,uDACA,sBACA,SACA,EAEA,wBAEA,EACA1D,qBACA,oDACA,EACAg3B,sBACA,oDACA,EACAt8B,WACA,sCACA,EACAy2B,qBACA,OACAl4B,SAAAA,KAAAA,WAAAA,WAAAA,WACAujB,MAAAA,KAAAA,WAAAA,OAAAA,OACAuF,OAAAA,KAAAA,WAAAA,OAAAA,OAEA,EACA9d,kBACA,iDACA,GAEAqU,QAAAA,CACA8Z,SAAAA,GACAt2B,QAAAA,IAAAA,YACAA,QAAAA,IAAAA,EAAAA,OACA,aACA4Y,cAAAA,KAAAA,oBACA,8BAEA,6BACAqQ,EAAAA,MAAAA,QAAAA,EACA,0CACA,+DACA,4DACA,2CAEA,gBAAAkS,EAAAA,MAAAza,EAAAA,OAAAuF,GAAA,2BAEA,gBADA,cAKA,IACA,IACA,EACAmV,YACA,mBACAp7B,QAAAA,IAAAA,0BACA,EACAo0B,aAAAA,GACAnL,EAAAA,iBACA,6BACA,uBACA,EAEAoS,sBAAAA,EAAAA,GACA,iBACAziB,cAAAA,KAAAA,QAAAA,IAEA,uCACA,WAIA,SAHA,eAGA,wCAGA,GAFA,0CAEA,uBACA,wBACA,6CACA,WACA,+CAEA,6BACA,CACA,qBACA,MACA,4CACA,6CACA,4BAIA,qBACA,6CACA,uBAKA,GACA0iB,EAAAA,qBACAA,EAAAA,oBAAAA,gBACA,CACA,8CAEA,iCACA,qBACAt7B,QAAAA,IAAAA,mBAAAA,KACA,MACA,0CAEA,yCAEA,CACA,2BACA,CAGA,2CACA,6CACAA,QAAAA,IAAAA,cAAAA,EAAAA,YAAAA,eAEA,2CACA,GACA,IACA,EAEAs1B,eAEA,iCACA,0BAEA,uDACA,WACA,gBACA,oBACA,oCACA,yDACAmF,EAAAA,EAAAA,OAEA,CACA,iBACAA,EAAAA,MAAAA,SAAAA,EACA,wBAEAA,EAAAA,MAAAA,SAAAA,EACA,sBAEArB,YAAAA,KACA,4BACA,IACA,EACArE,aACA,2CACA,EACAwG,mBACA,gCAEA,iBACA,6BACA,mBACA,mBACA,qBAGA,8BACA,mBACA,oBAEA,EACAnR,MAAAA,GACA,mBACA,8BACA,mBACA,aACA,8BACA,mBAEA,EACAoK,OACA,mBACA,mBACA,mBAGA,qCACA,EACAgH,gBACA,gCACA,EACA1iB,QACA,uCACA,uCACA9c,OAAAA,KAAAA,KAAAA,SAAAA,SAAAA,IACA4c,cAAAA,KAAAA,QAAAA,GAAAA,IAEA,8BACA,+BACA,8BACA,+BACA,qCACA,GAEAkH,gBACA,6CACA,uCACA,uCACA9jB,OAAAA,KAAAA,KAAAA,SAAAA,SAAAA,IACA4c,cAAAA,KAAAA,QAAAA,GAAAA,IAEA,8BACA,+BACA,8BACA,8BACA,GCjnBoQ,MCQhQ,IAAY,OACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,QCIhC,IACA+F,WAAAA,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KAAOP,GACVA,GAAGQ,OAASR,GACZA,GAAGzgB,MAAQygB,GACXA,GAAGS,KAAOT,GACVA,GAAGG,QAAUH,GAAAA,EAiCb,QAEAkH,OAAAA,CAAAA,IACAlnB,SAAAA,CACAzf,kBACA,4CACA,EACA8d,cACA,yCACA,EAOAsH,mBACA,6CACA,EACAxjB,OACA,sCACA,EACAmQ,MACA,iCACA,EACA5T,MACA,4BACA,EACAiT,SACA,oCACA,GAEA1O,OACA,OACAokD,QAAAA,KACAC,UAAAA,KACAC,eAAAA,CACA,8BACA,+BAEAC,QAAAA,GACAC,MAAAA,GACAC,aAAAA,GACAthC,aAAAA,EACApB,UAAAA,IAAAA,KACA2iC,iBAAAA,EAEAC,UAAAA,KAEAvtC,mBAAAA,EACAmL,WAAAA,GACAqiC,YAAAA,KACApiC,+BAAAA,EACAC,uBAAAA,cACAoiC,WAAAA,KACAC,mBAAAA,EACAjkC,IAAAA,OACAhC,KAAAA,SACA6U,SAAAA,KACA3rB,aAAAA,KAEA,EACAgX,WAAAA,CACAgmC,YAAAA,GACA9iC,YAAAA,GAEA+iC,QAAAA,GACAC,SAAAA,GACAC,WAAAA,GAEAzlC,YAAAA,EACA0lC,QAAAA,GACAC,SAAAA,GACAC,aAAAA,GACAC,iBAAAA,GACAC,mBAAAA,GACAC,WAAAA,IAEA5oC,QAAAA,CACAqC,SAAAA,GACA,iCACA,EACA5e,IAAAA,GACA,gCACA,EACAuX,SAAAA,GACA,iCACA,EAoBA6tC,UAAAA,GACA,mBACA,EACA7pC,gBAAAA,GACA,kBACA,yBACA,EACAvE,mBACA,yBACA,EACAquC,eAGA,kCAEA,EACAC,YACA,WACA,IACA,wDACA,2BACAC,EAAAA,GAAAA,KAAAA,UACA,cACA,YACA,aAKA,CAFA,SACAA,EAAAA,IACA,CAQA,OAPA,UACAA,EAAAA,GAAAA,KAAAA,UACA,oBACA,YACA,cAGA,CACA,EACAzjC,WACA,4DACA,+CACA,EACA0jC,gBACA,wDACA,kCACA,gBAEArsB,WAAAA,KAAAA,cAAAA,IAEA,EACAssB,UAEA,oCACA,kCACAvoB,OAAAA,IAAAA,GAAAA,OAAAA,IAAAA,CAAAx9B,QAEAgB,QAAAA,EACAH,SAAAA,IAIA,0BACAmlD,WAAAA,YACA7kB,OAAAA,KAAAA,YACA8kB,KAAAA,KAAAA,UAIA,oBACAjgD,OAAAA,WACAxG,OAAAA,CAAAA,KAAAA,WACAwiD,KAAAA,KAAAA,QACAnoB,SAAAA,GAAAA,EAAAA,CACAosB,MAAAA,EACAC,aAAAA,EACAC,mBAAAA,CACAC,aAAAA,EACAtnC,KAAAA,QAEAunC,QAAAA,IAEAC,aAAAA,GAAAA,YAAAA,SAAAA,CACAC,oBAAAA,EACAC,aAAAA,MAGA,+BAEA,oBACA,EACAC,iBACA,kCACA,EACAC,MAAAA,EAAAA,GACA,iBACA3pC,aAAAA,KAAAA,aACA,mBACA,sCACA,kCAEA,6DACA4pC,GACA,gEACA,wCACA,IACA,CAEA,oBAEA,kCACA,eAEA,GAkCAC,UACA,iCACA,EACA3pC,UAEA,eACA,yBACA6mC,IAAAA,KAEA,wCAGA,sCACA,8DACAzjD,QAAAA,IAAAA,eAAAA,KAAAA,UAAAA,KAAAA,IAKA,0CACA,kDACAA,QAAAA,IAAAA,kBAAAA,KAKA,MACAA,QAAAA,IACA,2DAGAA,QAAAA,IACA,wDAEA,uCACA,IAwBA48C,GAAAA,SAAAA,IACAzR,EAAAA,MAAAA,MACA,6CAEA,eAEAA,EAAAA,MAAAA,WAAAA,EAAAA,cAEA,eAEAA,EAAAA,MAAAA,WAAAA,EAAAA,cAEA,cAEAA,EAAAA,MAAAA,UAAAA,EAAAA,OACA,IAIA,sCAGA,wCAEA,aACAl9B,EAAAA,GAAAA,MAAAA,EAAAA,GAAAA,MACA,GAuCA,EACA6R,gBACA,iCAGA,GCnfwP,MCQpP,IAAY,OACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,QCqChC,IACAlgB,OACA,OACA4mD,QAAAA,OAAAA,WAAAA,sBACAtvC,WAAAA,EAAAA,KACAF,mBAAAA,EACAV,OAAAA,EAEA,EACAqI,WAAAA,CACA8nC,UAAAA,GACAC,UAAAA,GACAC,SAAAA,GACAtnC,YAAAA,GAEA7C,QAAAA,CACAoqC,WACA,uBACA,kCACA,4DACA,qCACA,sCACA,wCACA,uCACA,uBACA,yBAEA,EACA,eAEA,kCACA5mD,QAAAA,IACA,2EAEA4Y,cAAAA,KAAAA,OAAAA,MAAAA,eACA,+CAEA,iBACA,4BACA,EACAiuC,eACA,sBACA,oBACA,EACAC,EAAAA,mBACAA,EAAAA,sBACAA,EAAAA,yBACAA,EAAAA,oBAEA,qBACA,wBACA,2BACA,uBAEAC,EAAAA,KAAAA,EAEA,EACAC,UACA,4CACA,uDAEA,EACAnoC,SAAAA,GACA,iCACA,EACA5e,IAAAA,GACA,gCACA,EACAuX,SAAAA,GACA,iCACA,EACArL,SAAAA,GACA,GACA,0BACA,iCACA,uDAEA,yCAEA,0CACA,mBACA,8BACA,qCAGA,2BACA,4CAGA,0BAEA,EACAE,SAAAA,EAAAA,GACA,uBACA4R,MAAAA,eACAC,QAAAA,uBACAC,QAAAA,GAAAA,SACAC,cAAAA,IACAC,aAAAA,GAEA,EACApH,mBACA,0BACA,eACA,GAEA,gBAcA,gBACA,aACA,mCACA,MACA,mBACA,iBAIArY,EAAAA,GAAAA,WAAAA,KACAA,EAAAA,KAAAA,OAAAA,CAAAqoD,aAAA,IAEA,mCACA,OAGA,6BAEA,gBACA,cAEA,uBACA,oCACA,iDACA,iDAEA,YAIA,sBACA,iBACA,wCAEA,sCAGA,0CAGA,MAEA,CAEA,WACAjrD,OAAAA,KAAAA,GACA+G,QAAAA,GACA,8CAEA4iB,SAAAA,IACAuhC,EAAAA,GAAAA,EAAAA,EAAAA,IAEA,wBAGA,kCAEA,yCACA,eACA,yBACA,EACApnC,gBAEA,EAEAnD,SAAAA,CACA7d,OACA,sCACA,EACA6P,WACA,sCACA,EACA9P,QACA,uCACA,EACA+U,OACA,uCACA,EACAmB,aACA,iCACA,4BACA,4BAEA,sCACA,EACA7Q,qBACA,oDACA,EACA8R,WACA,iCACA,EACAmxC,oBACA,+BACA,EACA95C,UACA,gCACA,EACAJ,QACA,8BACA,EACAqB,SACA,oCACA,ICtRwP,MCQpP,IAAY,OACd,GACA,EACA,GACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,QCnB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","sources":["webpack://amt81/./node_modules/moment/locale/ sync ^\\.\\/.*$","webpack://amt81/./node_modules/pdfjs-dist/build/ sync","webpack://amt81/./src/App.vue","webpack://amt81/./src/App.vue?0e40","webpack://amt81/./src/store/amt.js","webpack://amt81/./src/store/ptt.js","webpack://amt81/./src/store/memo.js","webpack://amt81/./src/store/rtc.js","webpack://amt81/./src/store/index.js","webpack://amt81/./src/views/HomePage.vue","webpack://amt81/./src/components/userLocation.js","webpack://amt81/./src/components/logger.js","webpack://amt81/./src/components/HeaderComp.vue","webpack://amt81/./src/components/WorkList.vue","webpack://amt81/src/components/WorkList.vue","webpack://amt81/./src/components/WorkList.vue?10fe","webpack://amt81/./src/components/WorkList.vue?7434","webpack://amt81/./src/components/GroupSelect.vue","webpack://amt81/./src/components/GroupList.vue","webpack://amt81/src/components/GroupList.vue","webpack://amt81/./src/components/GroupList.vue?4da7","webpack://amt81/./src/components/GroupList.vue?5fb6","webpack://amt81/src/components/GroupSelect.vue","webpack://amt81/./src/components/GroupSelect.vue?6c42","webpack://amt81/./src/components/GroupSelect.vue?6170","webpack://amt81/./src/components/ModalDialog.vue","webpack://amt81/src/components/ModalDialog.vue","webpack://amt81/./src/components/ModalDialog.vue?b4a4","webpack://amt81/./src/components/ModalDialog.vue?54d2","webpack://amt81/src/components/HeaderComp.vue","webpack://amt81/./src/components/HeaderComp.vue?084d","webpack://amt81/./src/components/HeaderComp.vue?5a41","webpack://amt81/./src/components/BaseField.vue","webpack://amt81/./src/components/PhoneButton.vue","webpack://amt81/src/components/PhoneButton.vue","webpack://amt81/./src/components/PhoneButton.vue?436e","webpack://amt81/./src/components/PhoneButton.vue?a719","webpack://amt81/./src/components/LevelField.vue","webpack://amt81/src/components/LevelField.vue","webpack://amt81/./src/components/LevelField.vue?5cd1","webpack://amt81/./src/components/LevelField.vue?aa0c","webpack://amt81/./src/components/TimeDisp.vue","webpack://amt81/src/components/TimeDisp.vue","webpack://amt81/./src/components/TimeDisp.vue?5ed1","webpack://amt81/./src/components/TimeDisp.vue?dea9","webpack://amt81/src/components/BaseField.vue","webpack://amt81/./src/components/BaseField.vue?a357","webpack://amt81/./src/components/BaseField.vue?375d","webpack://amt81/./src/components/MapField.vue","webpack://amt81/./src/components/RightButton.vue","webpack://amt81/src/components/RightButton.vue","webpack://amt81/./src/components/RightButton.vue?a0a3","webpack://amt81/./src/components/RightButton.vue?ef94","webpack://amt81/./src/components/MapMenu.vue","webpack://amt81/./src/modules/ShareLayer/ShareComponent.vue","webpack://amt81/./src/modules/ShareLayer/openPDF.js","webpack://amt81/./src/modules/ShareLayer/canvasDraw.vue","webpack://amt81/src/modules/ShareLayer/canvasDraw.vue","webpack://amt81/./src/modules/ShareLayer/canvasDraw.vue?410a","webpack://amt81/./src/modules/ShareLayer/canvasDraw.vue?522c","webpack://amt81/./src/modules/ShareLayer/p2p.js","webpack://amt81/./src/modules/ShareLayer/p2g.js","webpack://amt81/src/modules/ShareLayer/ShareComponent.vue","webpack://amt81/./src/modules/ShareLayer/ShareComponent.vue?dc62","webpack://amt81/./src/modules/ShareLayer/ShareComponent.vue?8e9e","webpack://amt81/./src/modules/ShareLayer/index.js","webpack://amt81/./src/modules/RTCLayer/RTCGroup.vue","webpack://amt81/./src/modules/RTCLayer/VideoUnit.vue","webpack://amt81/src/modules/RTCLayer/VideoUnit.vue","webpack://amt81/./src/modules/RTCLayer/VideoUnit.vue?ddf2","webpack://amt81/./src/modules/RTCLayer/VideoUnit.vue?8ffb","webpack://amt81/./src/modules/RTCLayer/RemoteVideo.vue","webpack://amt81/./src/modules/RTCLayer/LevelMeter.vue","webpack://amt81/src/modules/RTCLayer/LevelMeter.vue","webpack://amt81/./src/modules/RTCLayer/LevelMeter.vue?0925","webpack://amt81/./src/modules/RTCLayer/LevelMeter.vue?adcd","webpack://amt81/./src/modules/RTCLayer/P2P.js","webpack://amt81/./src/components/C360Elm.vue","webpack://amt81/src/components/C360Elm.vue","webpack://amt81/./src/components/C360Elm.vue?7733","webpack://amt81/./src/components/C360Elm.vue?e3be","webpack://amt81/src/modules/RTCLayer/RemoteVideo.vue","webpack://amt81/./src/modules/RTCLayer/RemoteVideo.vue?173d","webpack://amt81/./src/modules/RTCLayer/RemoteVideo.vue?05f2","webpack://amt81/src/modules/RTCLayer/RTCGroup.vue","webpack://amt81/./src/modules/RTCLayer/RTCGroup.vue?8a14","webpack://amt81/./src/modules/RTCLayer/RTCGroup.vue?a686","webpack://amt81/./src/modules/RTCLayer/RTCPrivate.vue","webpack://amt81/./src/modules/MemoLayer/MemoLayerPopup.vue","webpack://amt81/src/modules/MemoLayer/MemoLayerPopup.vue","webpack://amt81/./src/modules/MemoLayer/MemoLayerPopup.vue?c526","webpack://amt81/./src/modules/MemoLayer/MemoLayerPopup.vue?5eda","webpack://amt81/./src/modules/MemoLayer/MemoMake.vue","webpack://amt81/./src/modules/MemoLayer/StrMake.vue","webpack://amt81/./src/modules/MemoLayer/sp_recognition.js","webpack://amt81/./src/modules/MemoLayer/common.js","webpack://amt81/src/modules/MemoLayer/StrMake.vue","webpack://amt81/./src/modules/MemoLayer/StrMake.vue?1042","webpack://amt81/./src/modules/MemoLayer/StrMake.vue?079e","webpack://amt81/./src/modules/MemoLayer/MovieMake.vue","webpack://amt81/src/modules/MemoLayer/MovieMake.vue","webpack://amt81/./src/modules/MemoLayer/MovieMake.vue?2ae2","webpack://amt81/./src/modules/MemoLayer/MovieMake.vue?4099","webpack://amt81/./src/modules/MemoLayer/PhotoMake.vue","webpack://amt81/src/modules/MemoLayer/PhotoMake.vue","webpack://amt81/./src/modules/MemoLayer/PhotoMake.vue?8e8e","webpack://amt81/./src/modules/MemoLayer/PhotoMake.vue?0b16","webpack://amt81/src/modules/MemoLayer/MemoMake.vue","webpack://amt81/./src/modules/MemoLayer/MemoMake.vue?e88e","webpack://amt81/./src/modules/MemoLayer/MemoMake.vue?aee2","webpack://amt81/./src/modules/ReviewLayer/reviewComponent.vue","webpack://amt81/src/modules/ReviewLayer/reviewComponent.vue","webpack://amt81/./src/modules/ReviewLayer/reviewComponent.vue?67a5","webpack://amt81/./src/modules/ReviewLayer/reviewComponent.vue?156b","webpack://amt81/./src/components/evemitter.js","webpack://amt81/./src/modules/ReviewLayer/index.js","webpack://amt81/./src/modules/MemoLayer/index.js","webpack://amt81/src/modules/RTCLayer/RTCPrivate.vue","webpack://amt81/./src/modules/RTCLayer/RTCPrivate.vue?876d","webpack://amt81/./src/modules/RTCLayer/RTCPrivate.vue?2117","webpack://amt81/./src/modules/RTCLayer/index.js","webpack://amt81/./src/modules/DrawLayer/DrawComponent.vue","webpack://amt81/./src/modules/DrawLayer/DrawMenue.vue","webpack://amt81/src/modules/DrawLayer/DrawMenue.vue","webpack://amt81/./src/modules/DrawLayer/DrawMenue.vue?355d","webpack://amt81/./src/modules/DrawLayer/DrawMenue.vue?48dd","webpack://amt81/./src/components/MapPopup.vue","webpack://amt81/src/components/MapPopup.vue","webpack://amt81/./src/components/MapPopup.vue?5f27","webpack://amt81/./src/components/MapPopup.vue?928a","webpack://amt81/src/modules/DrawLayer/DrawComponent.vue","webpack://amt81/./src/modules/DrawLayer/DrawComponent.vue?2d0b","webpack://amt81/./src/modules/DrawLayer/DrawComponent.vue?8549","webpack://amt81/./src/modules/DrawLayer/index.js","webpack://amt81/./src/modules/SearchLayer/SearchLayer.vue","webpack://amt81/./src/modules/SearchLayer/SearchComponentList.vue","webpack://amt81/src/modules/SearchLayer/SearchComponentList.vue","webpack://amt81/./src/modules/SearchLayer/SearchComponentList.vue?b0fd","webpack://amt81/./src/modules/SearchLayer/SearchComponentDevice.vue","webpack://amt81/src/modules/SearchLayer/SearchComponentDevice.vue","webpack://amt81/./src/modules/SearchLayer/SearchComponentDevice.vue?0528","webpack://amt81/./src/modules/SearchLayer/SearchComponentDevice.vue?a476","webpack://amt81/./src/modules/SearchLayer/SearchComponentLayer.vue","webpack://amt81/src/modules/SearchLayer/SearchComponentLayer.vue","webpack://amt81/./src/modules/SearchLayer/SearchComponentLayer.vue?ae07","webpack://amt81/./src/modules/SearchLayer/SearchComponentLayer.vue?4add","webpack://amt81/./src/modules/SearchLayer/SearchComponentSmall.vue","webpack://amt81/src/modules/SearchLayer/SearchComponentSmall.vue","webpack://amt81/./src/modules/SearchLayer/SearchComponentSmall.vue?7352","webpack://amt81/./src/modules/SearchLayer/SearchComponentSmall.vue?f2ff","webpack://amt81/src/modules/SearchLayer/SearchLayer.vue","webpack://amt81/./src/modules/SearchLayer/SearchLayer.vue?12cd","webpack://amt81/./src/modules/SearchLayer/SearchLayer.vue?40f1","webpack://amt81/./src/modules/SearchLayer/index.js","webpack://amt81/./src/modules/ManageLayer/ManageLayer.vue","webpack://amt81/./src/modules/ManageLayer/ManageLayerList.vue","webpack://amt81/src/modules/ManageLayer/ManageLayerList.vue","webpack://amt81/./src/modules/ManageLayer/ManageLayerList.vue?11c1","webpack://amt81/./src/modules/ManageLayer/ManageLayerList.vue?6d20","webpack://amt81/src/modules/ManageLayer/ManageLayer.vue","webpack://amt81/./src/modules/ManageLayer/ManageLayer.vue?b4b0","webpack://amt81/./src/modules/ManageLayer/ManageLayer.vue?1baa","webpack://amt81/./src/modules/ManageLayer/index.js","webpack://amt81/./src/modules/locationLayer/locationComponent.vue","webpack://amt81/src/modules/locationLayer/locationComponent.vue","webpack://amt81/./src/modules/locationLayer/locationComponent.vue?9861","webpack://amt81/./src/modules/locationLayer/locationComponent.vue?cb92","webpack://amt81/./src/modules/locationLayer/index.js","webpack://amt81/./src/modules/TrackLayer/TrackLayer.vue","webpack://amt81/src/modules/TrackLayer/TrackLayer.vue","webpack://amt81/./src/modules/TrackLayer/TrackLayer.vue?da8b","webpack://amt81/./src/modules/TrackLayer/TrackLayer.vue?9a31","webpack://amt81/./src/modules/TrackLayer/index.js","webpack://amt81/./src/modules/WeatherLayer/weatherComponent.vue","webpack://amt81/src/modules/WeatherLayer/weatherComponent.vue","webpack://amt81/./src/modules/WeatherLayer/weatherComponent.vue?f799","webpack://amt81/./src/modules/WeatherLayer/weatherComponent.vue?1549","webpack://amt81/./src/modules/WeatherLayer/index.js","webpack://amt81/./src/modules/HazardMapLayer/hazardMapComponent.vue","webpack://amt81/src/modules/HazardMapLayer/hazardMapComponent.vue","webpack://amt81/./src/modules/HazardMapLayer/hazardMapComponent.vue?f1a7","webpack://amt81/./src/modules/HazardMapLayer/hazardMapComponent.vue?c123","webpack://amt81/./src/modules/HazardMapLayer/index.js","webpack://amt81/./src/modules/ChatLayer/ChatLayer.vue","webpack://amt81/./src/modules/ChatLayer/BalloonComp.vue","webpack://amt81/src/modules/ChatLayer/BalloonComp.vue","webpack://amt81/./src/modules/ChatLayer/BalloonComp.vue?e28a","webpack://amt81/./src/modules/ChatLayer/BalloonComp.vue?421e","webpack://amt81/src/modules/ChatLayer/ChatLayer.vue","webpack://amt81/./src/modules/ChatLayer/ChatLayer.vue?965a","webpack://amt81/./src/modules/ChatLayer/ChatLayer.vue?bf5c","webpack://amt81/./src/modules/ChatLayer/index.js","webpack://amt81/./src/modules/layers.js","webpack://amt81/src/components/MapMenu.vue","webpack://amt81/./src/components/MapMenu.vue?cd7b","webpack://amt81/./src/components/MapMenu.vue?b245","webpack://amt81/./src/components/StreamIo.vue","webpack://amt81/src/components/StreamIo.vue","webpack://amt81/./src/components/StreamIo.vue?a225","webpack://amt81/./src/components/StreamIo.vue?7161","webpack://amt81/./src/components/MapClickList.vue","webpack://amt81/src/components/MapClickList.vue","webpack://amt81/./src/components/MapClickList.vue?91a8","webpack://amt81/./src/components/MapClickList.vue?1ac2","webpack://amt81/./src/modules/MemoLayer/ViewLayersLightbox.vue","webpack://amt81/src/modules/MemoLayer/ViewLayersLightbox.vue","webpack://amt81/./src/modules/MemoLayer/ViewLayersLightbox.vue?6a59","webpack://amt81/./src/modules/MemoLayer/ViewLayersLightbox.vue?fd42","webpack://amt81/./src/components/ViewLayersDevice.vue","webpack://amt81/src/components/ViewLayersDevice.vue","webpack://amt81/./src/components/ViewLayersDevice.vue?1958","webpack://amt81/./src/components/ViewLayersDevice.vue?bd25","webpack://amt81/./src/components/CallRec.vue","webpack://amt81/./src/components/rec_pcm.js","webpack://amt81/src/components/CallRec.vue","webpack://amt81/./src/components/CallRec.vue?f7cf","webpack://amt81/./src/components/CallRec.vue?2a24","webpack://amt81/./src/components/wakeupLock.js","webpack://amt81/src/components/MapField.vue","webpack://amt81/./src/components/MapField.vue?3a1a","webpack://amt81/./src/components/MapField.vue?a03b","webpack://amt81/src/views/HomePage.vue","webpack://amt81/./src/views/HomePage.vue?2007","webpack://amt81/./src/views/HomePage.vue?406d","webpack://amt81/./src/views/LoginPage.vue","webpack://amt81/src/views/LoginPage.vue","webpack://amt81/./src/views/LoginPage.vue?8932","webpack://amt81/./src/views/LoginPage.vue?8c34","webpack://amt81/./src/views/RegistPage.vue","webpack://amt81/src/views/RegistPage.vue","webpack://amt81/./src/views/RegistPage.vue?4be9","webpack://amt81/./src/views/RegistPage.vue?6cc4","webpack://amt81/./src/router.js","webpack://amt81/./src/main.js","webpack://amt81/webpack/bootstrap","webpack://amt81/webpack/runtime/chunk loaded","webpack://amt81/webpack/runtime/compat get default export","webpack://amt81/webpack/runtime/define property getters","webpack://amt81/webpack/runtime/ensure chunk","webpack://amt81/webpack/runtime/get javascript chunk filename","webpack://amt81/webpack/runtime/get mini-css chunk filename","webpack://amt81/webpack/runtime/global","webpack://amt81/webpack/runtime/hasOwnProperty shorthand","webpack://amt81/webpack/runtime/load script","webpack://amt81/webpack/runtime/make namespace object","webpack://amt81/webpack/runtime/node module decorator","webpack://amt81/webpack/runtime/publicPath","webpack://amt81/webpack/runtime/jsonp chunk loading","webpack://amt81/webpack/startup"],"sourcesContent":["var map = {\n\t\"./af\": 63906,\n\t\"./af.js\": 63906,\n\t\"./ar\": 40902,\n\t\"./ar-dz\": 3853,\n\t\"./ar-dz.js\": 3853,\n\t\"./ar-kw\": 20299,\n\t\"./ar-kw.js\": 20299,\n\t\"./ar-ly\": 96825,\n\t\"./ar-ly.js\": 96825,\n\t\"./ar-ma\": 66379,\n\t\"./ar-ma.js\": 66379,\n\t\"./ar-sa\": 87700,\n\t\"./ar-sa.js\": 87700,\n\t\"./ar-tn\": 2059,\n\t\"./ar-tn.js\": 2059,\n\t\"./ar.js\": 40902,\n\t\"./az\": 76043,\n\t\"./az.js\": 76043,\n\t\"./be\": 7936,\n\t\"./be.js\": 7936,\n\t\"./bg\": 34078,\n\t\"./bg.js\": 34078,\n\t\"./bm\": 14014,\n\t\"./bm.js\": 14014,\n\t\"./bn\": 29554,\n\t\"./bn-bd\": 17114,\n\t\"./bn-bd.js\": 17114,\n\t\"./bn.js\": 29554,\n\t\"./bo\": 6529,\n\t\"./bo.js\": 6529,\n\t\"./br\": 65437,\n\t\"./br.js\": 65437,\n\t\"./bs\": 19647,\n\t\"./bs.js\": 19647,\n\t\"./ca\": 59951,\n\t\"./ca.js\": 59951,\n\t\"./cs\": 26113,\n\t\"./cs.js\": 26113,\n\t\"./cv\": 37965,\n\t\"./cv.js\": 37965,\n\t\"./cy\": 35858,\n\t\"./cy.js\": 35858,\n\t\"./da\": 33515,\n\t\"./da.js\": 33515,\n\t\"./de\": 62831,\n\t\"./de-at\": 6263,\n\t\"./de-at.js\": 6263,\n\t\"./de-ch\": 51127,\n\t\"./de-ch.js\": 51127,\n\t\"./de.js\": 62831,\n\t\"./dv\": 4510,\n\t\"./dv.js\": 4510,\n\t\"./el\": 68616,\n\t\"./el.js\": 68616,\n\t\"./en-au\": 24595,\n\t\"./en-au.js\": 24595,\n\t\"./en-ca\": 73545,\n\t\"./en-ca.js\": 73545,\n\t\"./en-gb\": 79609,\n\t\"./en-gb.js\": 79609,\n\t\"./en-ie\": 43727,\n\t\"./en-ie.js\": 43727,\n\t\"./en-il\": 93302,\n\t\"./en-il.js\": 93302,\n\t\"./en-in\": 46305,\n\t\"./en-in.js\": 46305,\n\t\"./en-nz\": 39128,\n\t\"./en-nz.js\": 39128,\n\t\"./en-sg\": 84569,\n\t\"./en-sg.js\": 84569,\n\t\"./eo\": 50650,\n\t\"./eo.js\": 50650,\n\t\"./es\": 26358,\n\t\"./es-do\": 64214,\n\t\"./es-do.js\": 64214,\n\t\"./es-mx\": 38639,\n\t\"./es-mx.js\": 38639,\n\t\"./es-us\": 30232,\n\t\"./es-us.js\": 30232,\n\t\"./es.js\": 26358,\n\t\"./et\": 47279,\n\t\"./et.js\": 47279,\n\t\"./eu\": 15515,\n\t\"./eu.js\": 15515,\n\t\"./fa\": 27981,\n\t\"./fa.js\": 27981,\n\t\"./fi\": 37090,\n\t\"./fi.js\": 37090,\n\t\"./fil\": 79208,\n\t\"./fil.js\": 79208,\n\t\"./fo\": 2799,\n\t\"./fo.js\": 2799,\n\t\"./fr\": 23463,\n\t\"./fr-ca\": 2213,\n\t\"./fr-ca.js\": 2213,\n\t\"./fr-ch\": 52848,\n\t\"./fr-ch.js\": 52848,\n\t\"./fr.js\": 23463,\n\t\"./fy\": 41468,\n\t\"./fy.js\": 41468,\n\t\"./ga\": 88163,\n\t\"./ga.js\": 88163,\n\t\"./gd\": 2898,\n\t\"./gd.js\": 2898,\n\t\"./gl\": 76312,\n\t\"./gl.js\": 76312,\n\t\"./gom-deva\": 20682,\n\t\"./gom-deva.js\": 20682,\n\t\"./gom-latn\": 49178,\n\t\"./gom-latn.js\": 49178,\n\t\"./gu\": 31400,\n\t\"./gu.js\": 31400,\n\t\"./he\": 52795,\n\t\"./he.js\": 52795,\n\t\"./hi\": 17009,\n\t\"./hi.js\": 17009,\n\t\"./hr\": 46506,\n\t\"./hr.js\": 46506,\n\t\"./hu\": 69565,\n\t\"./hu.js\": 69565,\n\t\"./hy-am\": 93864,\n\t\"./hy-am.js\": 93864,\n\t\"./id\": 5626,\n\t\"./id.js\": 5626,\n\t\"./is\": 36649,\n\t\"./is.js\": 36649,\n\t\"./it\": 90151,\n\t\"./it-ch\": 95348,\n\t\"./it-ch.js\": 95348,\n\t\"./it.js\": 90151,\n\t\"./ja\": 79830,\n\t\"./ja.js\": 79830,\n\t\"./jv\": 33751,\n\t\"./jv.js\": 33751,\n\t\"./ka\": 63365,\n\t\"./ka.js\": 63365,\n\t\"./kk\": 85980,\n\t\"./kk.js\": 85980,\n\t\"./km\": 99571,\n\t\"./km.js\": 99571,\n\t\"./kn\": 25880,\n\t\"./kn.js\": 25880,\n\t\"./ko\": 16809,\n\t\"./ko.js\": 16809,\n\t\"./ku\": 96773,\n\t\"./ku.js\": 96773,\n\t\"./ky\": 65505,\n\t\"./ky.js\": 65505,\n\t\"./lb\": 50553,\n\t\"./lb.js\": 50553,\n\t\"./lo\": 51237,\n\t\"./lo.js\": 51237,\n\t\"./lt\": 91563,\n\t\"./lt.js\": 91563,\n\t\"./lv\": 61057,\n\t\"./lv.js\": 61057,\n\t\"./me\": 96495,\n\t\"./me.js\": 96495,\n\t\"./mi\": 83096,\n\t\"./mi.js\": 83096,\n\t\"./mk\": 43874,\n\t\"./mk.js\": 43874,\n\t\"./ml\": 46055,\n\t\"./ml.js\": 46055,\n\t\"./mn\": 87747,\n\t\"./mn.js\": 87747,\n\t\"./mr\": 17113,\n\t\"./mr.js\": 17113,\n\t\"./ms\": 8687,\n\t\"./ms-my\": 7948,\n\t\"./ms-my.js\": 7948,\n\t\"./ms.js\": 8687,\n\t\"./mt\": 14532,\n\t\"./mt.js\": 14532,\n\t\"./my\": 4655,\n\t\"./my.js\": 4655,\n\t\"./nb\": 56961,\n\t\"./nb.js\": 56961,\n\t\"./ne\": 2512,\n\t\"./ne.js\": 2512,\n\t\"./nl\": 48448,\n\t\"./nl-be\": 72936,\n\t\"./nl-be.js\": 72936,\n\t\"./nl.js\": 48448,\n\t\"./nn\": 49031,\n\t\"./nn.js\": 49031,\n\t\"./oc-lnc\": 5174,\n\t\"./oc-lnc.js\": 5174,\n\t\"./pa-in\": 30118,\n\t\"./pa-in.js\": 30118,\n\t\"./pl\": 93448,\n\t\"./pl.js\": 93448,\n\t\"./pt\": 33518,\n\t\"./pt-br\": 62447,\n\t\"./pt-br.js\": 62447,\n\t\"./pt.js\": 33518,\n\t\"./ro\": 70817,\n\t\"./ro.js\": 70817,\n\t\"./ru\": 10262,\n\t\"./ru.js\": 10262,\n\t\"./sd\": 58990,\n\t\"./sd.js\": 58990,\n\t\"./se\": 43842,\n\t\"./se.js\": 43842,\n\t\"./si\": 37711,\n\t\"./si.js\": 37711,\n\t\"./sk\": 80756,\n\t\"./sk.js\": 80756,\n\t\"./sl\": 3772,\n\t\"./sl.js\": 3772,\n\t\"./sq\": 6187,\n\t\"./sq.js\": 6187,\n\t\"./sr\": 40732,\n\t\"./sr-cyrl\": 75713,\n\t\"./sr-cyrl.js\": 75713,\n\t\"./sr.js\": 40732,\n\t\"./ss\": 99455,\n\t\"./ss.js\": 99455,\n\t\"./sv\": 69770,\n\t\"./sv.js\": 69770,\n\t\"./sw\": 80959,\n\t\"./sw.js\": 80959,\n\t\"./ta\": 36459,\n\t\"./ta.js\": 36459,\n\t\"./te\": 25302,\n\t\"./te.js\": 25302,\n\t\"./tet\": 67975,\n\t\"./tet.js\": 67975,\n\t\"./tg\": 71294,\n\t\"./tg.js\": 71294,\n\t\"./th\": 2385,\n\t\"./th.js\": 2385,\n\t\"./tk\": 24613,\n\t\"./tk.js\": 24613,\n\t\"./tl-ph\": 58668,\n\t\"./tl-ph.js\": 58668,\n\t\"./tlh\": 58190,\n\t\"./tlh.js\": 58190,\n\t\"./tr\": 74506,\n\t\"./tr.js\": 74506,\n\t\"./tzl\": 63440,\n\t\"./tzl.js\": 63440,\n\t\"./tzm\": 69852,\n\t\"./tzm-latn\": 42350,\n\t\"./tzm-latn.js\": 42350,\n\t\"./tzm.js\": 69852,\n\t\"./ug-cn\": 70730,\n\t\"./ug-cn.js\": 70730,\n\t\"./uk\": 40099,\n\t\"./uk.js\": 40099,\n\t\"./ur\": 72100,\n\t\"./ur.js\": 72100,\n\t\"./uz\": 96002,\n\t\"./uz-latn\": 26322,\n\t\"./uz-latn.js\": 26322,\n\t\"./uz.js\": 96002,\n\t\"./vi\": 14207,\n\t\"./vi.js\": 14207,\n\t\"./x-pseudo\": 24674,\n\t\"./x-pseudo.js\": 24674,\n\t\"./yo\": 10570,\n\t\"./yo.js\": 10570,\n\t\"./zh-cn\": 73644,\n\t\"./zh-cn.js\": 73644,\n\t\"./zh-hk\": 22591,\n\t\"./zh-hk.js\": 22591,\n\t\"./zh-mo\": 89503,\n\t\"./zh-mo.js\": 89503,\n\t\"./zh-tw\": 88080,\n\t\"./zh-tw.js\": 88080\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 68403;\nmodule.exports = webpackEmptyContext;","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=44393485&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&id=44393485&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable */\nimport axios from \"axios\";\n\nlet componentId = 1;\n\nexport default {\n  namespaced: true,\n  state: {\n    myPosition: true, //自位置アイコンのON/OFF\n    layerComponents: [], //onになっているコンポーネント一覧\n    position: {\n      lat: null,\n      lng: null,\n      altitude: null,\n      accuracy: null,\n      altitudeAccuracy: null,\n      heading: null,\n      speed: null,\n    },\n    inSubMenu: null,\n    showed_exit_dialog: false,\n    layer: [],\n    registedLayers: [],\n    isSearchComponent: false,\n    isSearchComponentList: false,\n    isSearchComponentSmall: false,\n    searchDevice: [],\n    searchTargetDevice: [],\n    searchTrack: [],\n    searchMemo: [],\n    searchLayer: [],\n    isSearchSelectDevice: false,\n    isSearchSelectLayer: false,\n  },\n  getters: {\n    map(state, getters, rootState, rootGetters) {\n      return rootState.map;\n    },\n    socketio(state, getters, rootState, rootGetters) {\n      return rootState.socketio;\n    },\n    users(state, getters, rootState, rootGetters) {\n      return rootState.users;\n    },\n    myId(state, getters, rootState, rootGetters) {\n      return rootState.myId;\n    },\n    myPosition(state, getters, rootState, rootGetters) {\n      return state.position;\n    },\n    patrolState(state, getters, rootState, rootGetters) {\n      // 0:休憩中 1:巡回中 2:緊急対応中\n      return rootState.workStatus;\n    },\n    subMenu(state, getters, rootState, rootGetters) {\n      return state.inSubMenu;\n    },\n    exit_dialog(state, getters, rootState, rootGetters) {\n      return state.showed_exit_dialog;\n    },\n    layers(state, getters, rootState, rootGetters) {\n      return state.layer;\n    },\n    registedLayers(state, getters, rootState, rootGetters) {\n      return state.registedLayers;\n    },\n    isSearchComponent(state, getters, rootState, rootGetters) {\n      return state.isSearchComponent;\n    },\n    isSearchComponentList(state, getters, rootState, rootGetters) {\n      return state.isSearchComponentList;\n    },\n    isSearchComponentSmall(state, getters, rootState, rootGetters) {\n      return state.isSearchComponentSmall;\n    },\n    searchDevice(state, getters, rootState, rootGetters) {\n      return state.searchDevice;\n    },\n    searchLayer(state, getters, rootState, rootGetters) {\n      return state.searchLayer;\n    },\n    searchTrack(state, getters, rootState, rootGetters) {\n      return state.searchTrack;\n    },\n    searchMemo(state, getters, rootState, rootGetters) {\n      return state.searchMemo;\n    },\n    isSearchSelectDevice(state, getters, rootState, rootGetters) {\n      return state.isSearchSelectDevice;\n    },\n    isSearchSelectLayer(state, getters, rootState, rootGetters) {\n      return state.isSearchSelectLayer;\n    },\n    searchTargetDevice(state, getters, rootState, rootGetters) {\n      return state.searchTargetDevice;\n    },\n  },\n  actions: {\n    async fetchTrack(context, { userId, begin, end }) {\n      let res = [];\n      const url = \"/api/tracks/\";\n      const data = { userId, begin, end };\n      try {\n        const ctx = await axios.post(url, data);\n        res = ctx.data;\n      } catch (err) {\n        console.log(\"fetchTrack error : \" + err);\n      }\n      return res;\n    },\n    async fetchMemo(context, { userId, begin, end, text }) {\n      let res = [];\n      const url = \"/api/memos/\";\n      const data = { userId, begin, end, text };\n      try {\n        const ctx = await axios.post(url, data);\n        res = ctx.data;\n      } catch (err) {\n        console.log(\"fetchTrack error : \" + err);\n      }\n      return res;\n    },\n    async refreshCredential(context) {\n      const res = await axios.post(\"/api/refreshCredential\");\n      return res.data;\n    },\n    hideMyPosition({ commit, state }) {\n      state.myPosition = false;\n    },\n    showMyPosition({ commit, state }) {\n      state.myPosition = true;\n    },\n    setLayerVisible({ commit, state }, { layerName, visible }) {\n      state.layer[layerName].layer.setVisible(visible);\n    },\n    setLayerOpacity({ commit, state }, { layerName, opacity }) {\n      state.layer[layerName].layer.setOpacity(opacity);\n    },\n    setLayerZIndex({ commit, state }, { layerName, zIndex }) {\n      state.layer[layerName].layer.setZIndex(zIndex);\n    },\n    setSearchDevice({ commit, state }, { device }) {\n      state.searchDevice = device;\n    },\n    resetSearchDevice({ commit, state }) {\n      state.searchDevice = [];\n    },\n    setSearchTrack({ commit, state }, { userId, track }) {\n      let inputData = {\n        userId: userId,\n        track: track,\n      };\n      state.searchTrack.push(inputData);\n    },\n    setSearchLayer({ commit, state }, { layer }) {\n      state.searchLayer = layer;\n    },\n    resetSearchLayer({ commit, state }) {\n      state.searchLayer = [];\n    },\n    resetSearchTrack({ commit, state }) {\n      state.searchTrack = [];\n    },\n    setSearchMemo({ commit, state }, { userId, memo }) {\n      state.searchMemo = memo;\n    },\n    resetSearchMemo({ commit, state }) {\n      state.searchMemo = [];\n    },\n    showSearchComponent({ commit, state }) {\n      state.isSearchComponent = true;\n    },\n    hideSearchComponent({ commit, state }) {\n      state.isSearchComponent = false;\n    },\n    showSearchComponentList({ commit, state }) {\n      state.isSearchComponentList = true;\n    },\n    hideSearchComponentList({ commit, state }) {\n      state.isSearchComponentList = false;\n    },\n    showSearchComponentDevice({ commit, state }) {\n      state.isSearchSelectDevice = true;\n    },\n    hideSearchComponentDevice({ commit, state }) {\n      state.isSearchSelectDevice = false;\n    },\n    showSearchComponentSmall({ commit, state }) {\n      state.isSearchComponentSmall = true;\n    },\n    hideSearchComponentSmall({ commit, state }) {\n      state.isSearchComponentSmall = false;\n    },\n    showSearchComponentLayer({ commit, state }) {\n      state.isSearchSelectLayer = true;\n    },\n    hideSearchComponentLayer({ commit, state }) {\n      state.isSearchSelectLayer = false;\n    },\n    // comfirme_exit({ commit, state }) {\n    //   state.showed_exit_dialog = true;\n    // }\n  },\n  mutations: {\n    //positionのgettersを追加   // userLocaion.js　171行目\n    position(state, position) {\n      state.position = {\n        lat: position.lat,\n        lng: position.lng,\n        altitude: position.altitude,\n        accuracy: position.accuracy,\n        altitudeAccuracy: position.altitudeAccuracy,\n        heading: position.heading,\n        speed: position.speed,\n      };\n    },\n    // コンポーネントがlayerComponentsに含まれていなければ追加\n    // 追加するたびにユニークなIDを振る\n    addComponent(state, component) {\n      if (state.layerComponents.every((c) => c.vue !== component)) {\n        state.layerComponents.push({ id: componentId, vue: component });\n        componentId++;\n      }\n    },\n    // 一旦、コンポーネント削除に確認ダイアログを表示/非表示にする。\n    comfirme_exit(state, val) {\n      state.showed_exit_dialog = val;\n    },\n    // コンポーネントをlayerComponentsから除外\n    removeComponent(state, component) {\n      state.layerComponents = state.layerComponents.filter(\n        (c) => c.vue !== component\n      );\n    },\n    // コンポーネントがlayerComponentsに含まれていなければ追加\n    // 既にある場合は除外\n    toggleComponent(state, component) {\n      if (state.layerComponents.every((c) => c.vue !== component)) {\n        state.layerComponents.push({ id: componentId, vue: component });\n        componentId++;\n      } else {\n        state.layerComponents = state.layerComponents.filter(\n          (c) => c.vue !== component\n        );\n      }\n    },\n    setSubMenu(state, name) {\n      state.inSubMenu = name;\n    },\n    registLayer(state, val) {\n      state.layer[val.name] = val;\n    },\n    registedLayers(state, val) {\n      state.registedLayers = val;\n    },\n    setSearchTargetDevice(state, val) {\n      state.searchTargetDevice = val;\n    },\n  },\n};\n","/* eslint-disable */\nexport default {\n  namespaced: true,\n  state: {\n    touchPTT: false,\n    nativePTT: false,\n    keyPTT: false,\n    peers: -1,\n    audioDests: [], // 送信先 IDのリスト\n    audioSrc: \"\", // 送信元の名称（文字列）--> 送信元のIDに変更\n    recv_active: false,\n    count: 0,\n    connectionState: null,\n    trackState: false,\n    ptt_keycode: 0,\n    rtt_alert: false,\n    devices_len: 0,\n    local_audio_stream: null, // MIC input\n    remote_audio_stream: null, // Speacker output\n  },\n  getters: {\n    pttState(state) {\n      return state.touchPTT || state.nativePTT || state.keyPTT;\n    },\n    pttEnabled(state, gtters, rootState, rootGetters) {\n      // return state.peers > 0;\n      // return true;\n      // return state.audioDests.length > 0;\n      return rootGetters.users_length > 0;\n    },\n    pttActive(state, getters) {\n      return getters.pttState && getters.pttEnabled;\n    },\n    pttRecv(state, getters) {\n      return state.recv_active;\n    },\n    peerState(state, getters) {\n      return state.connectionState;\n    },\n    peerTrackState(state, getters) {\n      return state.trackState;\n    },\n    callStatus(state, getters, rootState, rootGetters) {\n      // if (state.peers === -1) {\n      if (rootGetters.users_length === -1) {\n        return \"圏外\";\n      } else {\n        return \"通話可能\";\n      }\n    },\n    rtt_alert(state) {\n      return state.rtt_alert;\n    },\n    devices_len(state) {\n      return state.devices_len;\n    },\n    local_audio_stream(state) {\n      return state.local_audio_stream;\n    },\n    remote_audio_stream(state) {\n      return state.remote_audio_stream;\n    },\n  },\n  mutations: {\n    touchPTT(state, data) {\n      state.touchPTT = data;\n    },\n    nativePTT(state, data) {\n      state.nativePTT = data;\n    },\n    keyPTT(state, data) {\n      state.keyPTT = data;\n    },\n    peers(state, data) {\n      state.peers = data;\n    },\n    set_audioDests(state, data) {\n      state.audioDests = data;\n    },\n    set_ontrack_src(state, data) {\n      state.audioSrc = data;\n    },\n    set_recv_active(state, data) {\n      state.recv_active = data;\n    },\n    set_connectionState(state, data) {\n      state.connectionState = data;\n    },\n    set_trackState(state, data) {\n      state.trackState = data;\n    },\n    set_rtt_over(state, data) {\n      state.rtt_alert = data;\n    },\n    set_devices_len(state, data) {\n      state.devices_len = data;\n    },\n  },\n  actions: {\n    // PTTイベントハンドラを登録する\n    initPTT({ commit, state }) {\n      // Androidネイティブアプリからのプレス状態通知\n      window.onPressStatusChanged = (data) => {\n        commit(\"nativePTT\", data);\n      };\n\n      // スペースキーDOWN/UPイベント\n      // テキスト編集中のキー入力と区別するため、textareaとinputタグで発生した\n      // イベントは無視する\n      // キーリピートでもDOWNイベント発生するが、イベントのプロパティで区別可能\n      document.addEventListener(\n        \"keydown\",\n        (e) => {\n          const textInput = e.target.closest('textarea, input[type=\"text\"]');\n          if (!textInput && e.keyCode === state.ptt_keycode && !e.repeat) {\n            document.activeElement.blur();\n            commit(\"keyPTT\", true);\n          }\n        },\n        false\n      );\n      document.addEventListener(\n        \"keyup\",\n        (e) => {\n          const textInput = e.target.closest('textarea, input[type=\"text\"]');\n          if (!textInput && e.keyCode === state.ptt_keycode && !e.repeat) {\n            commit(\"keyPTT\", false);\n          }\n        },\n        false\n      );\n\n      var hidden, visibilityChange;\n      if (typeof document.hidden !== \"undefined\") {\n        hidden = \"hidden\";\n        visibilityChange = \"visibilitychange\";\n      } else if (typeof document.mozHidden !== \"undefined\") {\n        hidden = \"mozHidden\";\n        visibilityChange = \"mozvisibilitychange\";\n      } else if (typeof document.msHidden !== \"undefined\") {\n        hidden = \"msHidden\";\n        visibilityChange = \"msvisibilitychange\";\n      } else if (typeof document.webkitHidden !== \"undefined\") {\n        hidden = \"webkitHidden\";\n        visibilityChange = \"webkitvisibilitychange\";\n      }\n      // ページ非表示と表示時に呼ばれる\n      document.addEventListener(\n        visibilityChange,\n        function () {\n          if (document.hidden) {\n            commit(\"touchPTT\", false);\n            commit(\"keyPTT\", false);\n          }\n        },\n        false\n      );\n    },\n    // Web画面のPTTをタッチ\n    touchStart({ commit }) {\n      commit(\"touchPTT\", true);\n    },\n    // Web画面のPTTをリリース\n    touchEnd({ commit }) {\n      commit(\"touchPTT\", false);\n    },\n  },\n};\n","/* eslint-disable */\nimport axios from \"axios\";\n\nexport default {\n  namespaced: true,\n  state: {\n    classify_list: [],\n    classify_name: \"\",\n    is_visible_dialog: false,\n    error_dialog: {\n      is_visible: false,\n      msg: null,\n    },\n    msg_dialog: \"\",\n    viewlayer_status: false,\n    memo_makes_view: false,\n\n    clicked_memo: {}, //地図でクリックされたメモのデータを格納する\n  },\n  getters: {\n    clicked_memo(state) {\n      return state.clicked_memo;\n    },\n    classify_list(state, getters, rootState, rootGetters) {\n      return state.classify_list;\n    },\n    classify_name(state, getters, rootState, rootGetters) {\n      return state.classify_name;\n    },\n    error_msg(state, getters, rootState, rootGetters) {\n      return state.error_dialog.msg;\n    },\n    is_visible_error_dialog(state, getters, rootState, rootGetters) {\n      return state.error_dialog.is_visible;\n    },\n    is_memo_makes_view(state, getters, rootState, rootGetters) {\n      return state.memo_makes_view;\n    },\n  },\n  actions: {\n    async fetchClassify(context) {\n      let res = [];\n      const url = \"/api/classify/\";\n      try {\n        const ctx = await axios.get(url);\n        res = ctx.data;\n      } catch (err) {\n        console.log(\"fetchClassify error : \" + err);\n      }\n      context.commit(\"set_classify_list\", res);\n    },\n  },\n  mutations: {\n    set_clicked_memo(state, val) {\n      state.clicked_memo = val;\n    },\n    set_classify_list(state, val) {\n      state.classify_list = val;\n    },\n    set_classify_name(state, val) {\n      state.classify_name = val;\n    },\n    show_dialog(state, val) {\n      state.is_visible_dialog = val;\n    },\n    set_error_dialog(state, val) {\n      state.error_dialog = val;\n    },\n    setClickedMemo(state, val) {\n      state.clicked_memo[val.id] = val;\n    },\n    setMemoMakesView(state, val) {\n      state.memo_makes_view = val;\n    },\n  },\n};\n","export default {\n  namespaced: true,\n  state: {\n    local_stream: null,\n    local_audio_stream: null, // MIC input\n    remote_audio_stream: null, // Speacker output\n    local_video_stream: null,\n    remote_video_stream: null,\n    dummy_video_stream: null,\n    remote_show: false,\n    local_show: false,\n    personal_id: null,\n    is_front_cam: null, // TRUE as VIDEO facingMode is FRONT\n    func_toggle_cam: null,\n    func_mic_on_off: null,\n    out_level: null,\n  },\n  getters: {\n    local_stream(state) {\n      return state.local_stream;\n    },\n    local_audio_stream(state) {\n      return state.local_audio_stream;\n    },\n    local_audio_track(state) {\n      return state.local_audio_stream\n        ? state.local_audio_stream.getAudioTracks()[0]\n        : null;\n    },\n    remote_audio_stream(state) {\n      return state.remote_audio_stream;\n    },\n    local_video_stream(state) {\n      return state.local_video_stream;\n    },\n    local_video_track(state) {\n      return state.local_video_stream\n        ? state.local_video_stream.getVideoTracks()[0]\n        : null;\n    },\n    remote_video_stream(state) {\n      return state.remote_video_stream;\n    },\n    dummy_video_stream(state) {\n      return state.dummy_video_stream;\n    },\n    remote_show(state) {\n      return state.remote_show;\n    },\n    local_show(state) {\n      return state.local_show;\n    },\n    personal_id(state) {\n      return state.personal_id;\n    },\n    is_front_cam(state) {\n      return state.is_front_cam;\n    },\n    func_toggle_cam(state) {\n      return state.func_toggle_cam;\n    },\n    func_mic_on_off(state) {\n      return state.func_mic_on_off;\n    },\n    out_level(state) {\n      return state.out_level;\n    },\n  },\n  mutations: {\n    set_local_stream(state, data) {\n      state.local_stream = data;\n    },\n    set_local_audio_stream(state, data) {\n      state.local_audio_stream = data;\n    },\n    set_remote_audio_stream(state, data) {\n      state.remote_audio_stream = data;\n    },\n    set_local_video_stream(state, data) {\n      state.local_video_stream = data;\n      if (state.local_video_stream) {\n        const track = state.local_video_stream.getVideoTracks()[0];\n        // const video_constraint = track.getConstraints();\n        const video_constraint = track ? track.getSettings() : null;\n        if (video_constraint && video_constraint.facingMode == \"user\") {\n          state.is_front_cam = true;\n        } else {\n          state.is_front_cam = false;\n        }\n      } else {\n        state.is_front_cam = null;\n      }\n    },\n    set_dummy_video_stream(state, data) {\n      state.dummy_video_stream = data;\n    },\n    set_remote_video_stream(state, data) {\n      state.remote_video_stream = data;\n    },\n    set_remote_show(state, data) {\n      state.remote_show = data;\n    },\n    set_local_show(state, data) {\n      state.local_show = data;\n    },\n    set_personal_id(state, data) {\n      state.personal_id = data;\n    },\n    set_func_toggole_cam(state, data) {\n      state.func_toggle_cam = data;\n    },\n    set_func_mic_on_off(state, data) {\n      state.func_mic_on_off = data;\n    },\n    set_out_level(state, data) {\n      state.out_level = data;\n    },\n  },\n};\n","import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport amt from \"./amt\";\nimport ptt from \"./ptt\";\nimport memo from \"./memo\";\nimport rtc from \"./rtc\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  modules: {\n    amt,\n    ptt,\n    memo,\n    rtc,\n  },\n  state: {\n    // 認証\n    isLogined: false,\n    userId: \"\",\n\n    page: \"\", //\"base\", \"map\", \"tv\"\n    atMap: false,\n    atPhone: false,\n    phoneQuering: null,\n    phoneQuered: null,\n\n    workStatus: 1, //1:巡回中, 2:緊急対応中, 3:休憩中\n\n    socketio: null,\n    p2p: null,\n    userLocation: null,\n\n    activeId: { kind: \"none\", id: null }, //none, group, person\n    prevActiveId: { kind: \"none\", id: null },\n    personalDest: null,\n    per: \"group\", // person, group\n\n    mLevel: 0,\n    sLevel: 0,\n\n    map: null,\n    users: {},\n    user_type: \"\",\n    users_length: -1,\n    memoLayer: null,\n    groups: [],\n    myId: \"\",\n    myName: \"\",\n    myFullName: \"\",\n    myIcon: 1, //1:man, 2:car, 3:helicoptor\n    terminalInfo: null,\n    myCompanyId: \"\",\n    myCompanyName: \"\",\n    initial_lng: null,\n    initial_lat: null,\n    initial_time: null,\n    BASE_ICON_ID: 99,\n    show_track: false,\n    active_share: false,\n    center_trace: 0, // 0以外: center trace mode  0: nomal mode\n    sound_el: null,\n    video_frame: 10,\n    video_width: 320,\n    video_rate: 1000000,\n    video_encode: null,\n    sound_on: null,\n    sound_src: null,\n    toast_on: null,\n    sip_connecting: false,\n    mapChangeEvent: new Vue(),\n    logger: {\n      debug(val) {\n        console.log(val);\n      },\n      info(val) {\n        console.log(val);\n      },\n      error(val) {\n        console.error(val);\n      },\n    },\n    mask: false,\n    mapWindowLock: false,\n\n    phoneStatusNo: 0,\n    phoneStatusStr: \"\",\n    timeStr: \"00:00\",\n\n    alert: {\n      show: false,\n      header: \"\",\n      body: \"\",\n    },\n\n    confirm: {\n      show: false,\n      header: \"\",\n      body: \"\",\n      funcYes: null,\n      funcNo: null,\n    },\n    screen_landscape: window.matchMedia(\"(min-width: 480px)\").matches,\n\n    watch_timerId: null,\n    renew_timerId: null,\n    memo_recording: false,\n    memo_classify: null,\n    groupListShow: false,\n\n    memo_update: {}, // 一覧画面で更新が行われたメモを格納\n\n    click_targets: [],\n    map_click_visible: false,\n    view_layers_device: false,\n    view_layers_device_info: {},\n    memo_downloadable: false,\n    review: false,\n    rec_flag: false,\n    on_chronology: false,\n  },\n  getters: {\n    // 認証\n    isLogined(state) {\n      return state.isLogined;\n    },\n    userId(state) {\n      return state.userId;\n    },\n\n    // @p2p.js分離\n    // 新たに追加\n    // 2021.04.07 user_typeによる判定を追加\n    user_type(state) {\n      return state.user_type;\n    },\n    users_length(state) {\n      const _users = state.users;\n      const same_group_members = Object.keys(_users).filter((id) => {\n        return (\n          _users[id].group_id == state.activeId.id &&\n          _users[id].user_type == \"amt\"\n        );\n      });\n      return Object.keys(same_group_members).length - 1;\n    },\n    group_id(state) {\n      return state.activeId.id;\n    },\n    per(state) {\n      return state.per;\n    },\n    socketio(state) {\n      return state.socketio;\n    },\n    stun_server(state) {\n      return state.stun_server;\n    },\n    tel_type(state) {\n      return state.tel_type;\n    },\n    tel_code(state) {\n      return state.tel_code;\n    },\n    sip_server(state) {\n      return state.sip_server;\n    },\n    sip(state) {\n      return state.sip;\n    },\n    sip_connecting(state) {\n      return state.sip_connecting;\n    },\n    sound_src(state) {\n      return state.sound_src;\n    },\n    video_frame(state) {\n      return state.video_frame;\n    },\n    video_width(state) {\n      return state.video_width;\n    },\n    video_rate(state) {\n      return state.video_rate;\n    },\n    video_encode(state) {\n      return state.video_encode;\n    },\n    speech_recognition(state) {\n      return state.speech_recognition;\n    },\n    auto_play(state) {\n      return state.auto_play;\n    },\n    check_connection_period(state) {\n      return state.check_connection_period;\n    },\n    memo_downloadable(state) {\n      return state.memo_downloadable;\n    },\n    map_urls(state) {\n      return state.map_urls;\n    },\n    review(state) {\n      return state.review;\n    },\n    rec_flag(state) {\n      return state.rec_flag;\n    },\n    on_chronology(state) {\n      return state.on_chronology;\n    },\n  },\n  mutations: {\n    setWatchTimerId(state, val) {\n      state.watch_timerId = val;\n    },\n    setRenewTimerId(state, val) {\n      state.renew_timerId = val;\n    },\n    setMemmo_recording(state, val) {\n      state.memo_recording = val;\n    },\n\n    setPage(state, val) {\n      state.page = val;\n    },\n    setAtMap(state, val) {\n      state.atMap = val;\n    },\n    toggleAtMap(state) {\n      state.atMap = !state.atMap;\n    },\n\n    setMap(state, mapObj) {\n      state.map = mapObj;\n    },\n    setMyId(state, val) {\n      state.myId = val;\n    },\n\n    setUsers(state, newUsers) {\n      state.users = newUsers;\n    },\n\n    setPer(state, per) {\n      state.per = per;\n    },\n    set_screen_landscape(state, val) {\n      state.screen_landscape = val;\n    },\n\n    setAtPhone(state, val) {\n      state.atPhone = val;\n    },\n    toggleAtPhone(state) {\n      state.atPhone = !state.atPhone;\n    },\n    setAtNativePhone(state, val) {\n      state.atNativePhone = val;\n    },\n    setActiveId(state, [kind, id]) {\n      if (state.activeId.kind != \"person\") {\n        state.prevActiveId.kind = state.activeId.kind;\n        state.prevActiveId.id = state.activeId.id;\n      }\n      state.activeId.kind = kind;\n      state.activeId.id = id;\n      if (state.userLocation != null) {\n        state.userLocation.sendRenewNow();\n      }\n    },\n    clearPrevActiveId(state) {\n      state.prevActiveId = { kind: \"none\", id: null };\n    },\n    backActiveId(state) {\n      state.activeId.kind = state.prevActiveId.kind;\n      state.activeId.id = state.prevActiveId.id;\n    },\n    setPersonalDest(state, val) {\n      state.personalDest = val;\n    },\n    clearPersonalDest(state) {\n      state.personalDest = null;\n    },\n    // setGroupActiveById(state, [group_id, val]) {\n    //   state.groups.forEach(group => {\n    //     if (\n    //       (group.group_id != group_id && group.is_active) ||\n    //       (group.group_id == group_id && !val)\n    //     ) {\n    //       group.is_active = false;\n    //       try {\n    //         android.groupLeave(group.group_id);\n    //       } catch (e) {\n    //         console.log(e);\n    //       }\n    //     }\n    //   });\n    //   if (val) {\n    //     const group = state.groups.find(g => g.group_id == group_id);\n    //     if (group != null && !group.is_active) {\n    //       group.is_active = true;\n    //       try {\n    //         android.groupJoin(group.group_id);\n    //       } catch (e) {\n    //         console.log(e);\n    //       }\n    //     }\n    //   }\n    //   if (val || state.activeId.kind == \"group\") {\n    //     state.activeId.kind = \"group\";\n    //     state.activeId.id = val ? group_id : \"\";\n    //   }\n    // },\n    setMLevel(state, level) {\n      state.mLevel = level;\n    },\n    setSLevel(state, level) {\n      state.sLevel = level;\n    },\n\n    //setWeatherTime(state, timeNum) {\n    //  state.weatherTime = timeNum;\n    //},\n    setMemoLayer(state, val) {\n      state.memoLayer = val;\n    },\n    setTrackLayer(state, val) {\n      state.trackLayer = val;\n    },\n    setShareLayer(state, val) {\n      state.shareLayer = val;\n    },\n    setSocketio(state, val) {\n      state.socketio = val;\n    },\n    setP2p(state, val) {\n      state.p2p = val;\n    },\n    setUserLocation(state, val) {\n      state.userLocation = val;\n    },\n    //setVideoUnits(state, val) {\n    //  state.videoUnits = val;\n    //},\n    setWorkStatus(state, val) {\n      state.workStatus = val;\n    },\n    setMyIcon(state, val) {\n      state.myIcon = val;\n    },\n    setPhoneQuering(state, val) {\n      state.phoneQuering = val;\n    },\n    setPhoneQuered(state, val) {\n      state.phoneQuered = val;\n    },\n    setLogMode(state, val) {\n      state.logMode = val;\n    },\n    setLogger(state, val) {\n      state.logger = val;\n    },\n    setCenterTrace(state, val) {\n      state.center_trace = val;\n    },\n    setMask(state, val) {\n      state.mask = val;\n    },\n    setMapWindowLock(state, val) {\n      state.mapWindowLock = val;\n    },\n    setPhoneStatusNo(state, val) {\n      state.phoneStatusNo = val;\n    },\n    setPhoneStatusStr(state, val) {\n      state.phoneStatusStr = val;\n    },\n    setTimeStr(state, val) {\n      state.timeStr = val;\n    },\n    alertOn(state, val) {\n      state.alert = {\n        header: val.header,\n        body: val.body,\n        show: true,\n      };\n    },\n    alertOff(state) {\n      state.alert.show = false;\n    },\n    confirmOn(state, val) {\n      state.confirm = {\n        header: val.header,\n        body: val.body,\n        funcYes: val.funcYes,\n        funcNo: val.funcNo,\n        show: true,\n      };\n    },\n    confirmOff(state) {\n      state.confirm.show = false;\n    },\n    set_sound_el(state, val) {\n      state.sound_el = val;\n    },\n    set_sound_on(state, val) {\n      state.sound_on = val;\n    },\n    set_sound_src(state, val) {\n      state.sound_src = val;\n    },\n    set_toast_on(state, val) {\n      state.toast_on = val;\n    },\n    set_sip_connecting(state, val) {\n      state.sip_connecting = val;\n    },\n    addClickTargets(state, val) {\n      // 一覧画面に表示する物を追加\n      // id     |text            |ユニークID\n      // type   |\"text\" or \"img\" |表示される物を指定\n      // click  |fnction()       |クリックされた時のアクションを指定\n      // text   |text            |typeでtextを指定した時に表示される文字\n      // img    |img             |url込の画像\n      // icon   |img             |左下に表示するアイコン。表示しない場合はnull\n      // info   |text            |説明文\n      state.click_targets.push(val);\n    },\n    setClickTargets(state, val) {\n      state.click_targets = val;\n    },\n    resetClickTargets(state) {\n      state.click_targets = [];\n    },\n    displayClickList(state) {\n      state.map_click_visible = true;\n    },\n    hiddenClickList(state) {\n      state.map_click_visible = false;\n    },\n    setGroupListShow(state, val) {\n      state.groupListShow = val;\n    },\n    setMemoClassify(state, val) {\n      state.memo_classify = val;\n    },\n    setMemoUpdate(state, val) {\n      state.memo_update[val.id] = val;\n    },\n    resetMemoUpdate(state) {\n      state.memo_update = {};\n    },\n    resetMemoUpdateDetail(state, val) {\n      state.memo_update[val] = {};\n    },\n    setViewLayersDevice(state, val) {\n      state.view_layers_device = val;\n    },\n    setViewLayersDeviceInfo(state, val) {\n      state.view_layers_device_info = val;\n    },\n    resetViewLayersDeviceInfo(state) {\n      state.view_layers_device_info = {};\n    },\n    setAuth(state, user) {\n      state.isLogined = true;\n      state.userId = user;\n    },\n    setReview(state, val) {\n      state.review = val;\n    },\n    set_rec_flag(state, val) {\n      state.rec_flag = val;\n    },\n    set_on_chronology(state, val) {\n      state.on_chronology = val;\n    },\n\n    // setUsrsToGroup(state) {\n    //   const h = {};\n    //   for (let uid of Object.keys(state.users)) {\n    //     let gid = state.users[uid].group_id;\n    //     if (h[gid] == null) {\n    //       h[gid] = [uid];\n    //     } else {\n    //       h[gid].push(uid);\n    //     }\n    //   }\n    //   for (let g of state.groups) {\n    //     if (h[g.group_id] == null) {\n    //       g.users = [];\n    //     } else {\n    //       g.users = h[g.group_id];\n    //     }\n    //   }\n    // }\n  },\n  actions: {\n    // 認証\n    // auth_fetch(context, user) {\n    //   context.commit(\"auth\" , user);\n    // },\n\n    async init({ state, dispatch }) {\n      // サーバから設定取得 @todo 例外処理\n      // const res = await fetch(\"/api/config\", { method: \"POST\" });\n      try {\n        const res = await fetch(\"/api/config\", {\n          method: \"POST\",\n          body: JSON.stringify({ user: state.userId }),\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        });\n        // JSONデータを取得\n        const info = await res.json();\n        console.dir(info);\n\n        // 位置情報が取れるまでの初期表示\n        if (info.fixed_pos || !info.last_position) {\n          // 固定局の場合、軌跡データがない場合はuser_configの設定値\n          state.initial_lng = info.default_lng;\n          state.initial_lat = info.default_lat;\n          state.initial_time = null;\n        } else {\n          // 最終位置情報\n          // 現在はサーバの軌跡保持期間が24hのためそれ以上経過で無効になる\n          // last_position.datetimeをチェックすることで保持期間よりも短い時間で\n          // 有効期限切れとすることも可能\n          state.initial_lng = info.last_position.lng;\n          state.initial_lat = info.last_position.lat;\n          state.initial_time = info.last_position.datetime;\n        }\n        // グループリスト初期化\n        state.groups = info.group.map((g) => {\n          return {\n            group_id: g.group_id,\n            group_name: g.group_name,\n            is_active: false,\n            is_person: false,\n          };\n        });\n        // グループ初期選択\n        state.activeId = { kind: \"group\", id: info.group_id };\n        // 設定値をコピー\n        state.myId = info.user_id;\n        state.user_type = info.user_type;\n        state.myName = info.user_name;\n        state.myFullName = info.user_full_name;\n        state.myCompanyId = info.company_id;\n        state.myCompanyName = info.company_name;\n        state.group_id = info.group_id;\n        state.gps_timeout_ms = info.gps_timeout_ms;\n        state.default_lng = info.default_lng;\n        state.default_lat = info.default_lat;\n        state.logMode = info.logMode;\n        state.logLevel = info.logLevel;\n        state.myIcon = info.myIcon;\n        state.myColor = info.myColor;\n        state.stun_server = info.stun_server;\n        state.track_point = info.track_point;\n        state.center_trace = info.center_trace;\n        state.fixed_pos = info.fixed_pos;\n        state.gps_server = info.gps_server;\n        state.volume = info.volume;\n        state.tiles_url = info.tiles_url;\n        state.video_width = info.video_width;\n        state.video_frame = info.video_frame;\n        state.video_rate = info.video_rate;\n        state.video_encode = info.video_encode;\n        state.callrec = info.callrec;\n        state.callrec_display = info.callrec_display;\n        state.ptt_type = info.ptt_type;\n        state.memo_classify = info.memo_classify;\n        state.color_picker = info.color_picker;\n        state.tel_type = info.tel_type;\n        state.tel_code = info.tel_code;\n        state.sip_server = info.sip_server;\n        state.sip = info.sip;\n        state.speech_recognition = info.speech_recognition;\n        state.auto_play = info.auto_play;\n        state.map_urls = info.map_urls;\n        state.check_connection_period = isNaN(info.check_connection_period)\n          ? 10000\n          : info.check_connection_period;\n        state.memo_downloadable = 0 != info.memo_downloadable ? true : false;\n        // 手書きの色指定\n        try {\n          if (\n            info.draw_color.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/) !== null\n          ) {\n            state.draw_color = info.draw_color;\n          } else {\n            state.draw_color = \"#D33115\";\n          }\n        } catch (e) {\n          state.draw_color = \"#D33115\";\n        }\n\n        // jsonからPTT対応のキーコード(16進数)を取得\n        if (info.ptt_keycode) {\n          ptt.state.ptt_keycode = parseInt(info.ptt_keycode, 16);\n        } else {\n          ptt.state.ptt_keycode = 0x1b;\n        }\n\n        // PTTモジュール初期化\n        dispatch(\"ptt/initPTT\");\n      } catch (err) {\n        console.log(err);\n      }\n    },\n  },\n});\n","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.ready)?_c('div',{staticClass:\"home\"},[_c('amtHeader',{staticClass:\"home_header\"}),_c('baseField',{staticClass:\"home_base\"}),_c('mapField',{ref:\"map\",staticClass:\"home_map\"}),(_vm.$store.state.mask)?_c('div',{staticClass:\"home_mask\"}):_vm._e(),(_vm.alert.show)?_c('modalDialog',{on:{\"modalDialogYes\":function($event){return _vm.$store.commit('alertOff')}}},[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(_vm._s(_vm.alert.header))]),_c('span',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(_vm._s(_vm.alert.body))])]):_vm._e(),(_vm.confirm.show)?_c('modalDialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(_vm._s(_vm.confirm.header))]),_c('span',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(_vm._s(_vm.confirm.body))]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.confirm.funcNo()}}},[_vm._v(\"キャンセル\")]),_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.confirm.funcYes()}}},[_vm._v(\"ログアウト\")])],1)]):_vm._e(),(_vm.is_dialog_visible && _vm.user)?_c('modalDialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"AirMultiTalk\")]),_c('span',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(_vm._s(_vm.group_name)+\"/\"+_vm._s(_vm.user.user_name)+\"としてログインしました\")]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.close_msg_dialog}},[_vm._v(\"はい\")])])]):_vm._e(),_c('audio',{ref:\"sound_el\",attrs:{\"src\":this.sound_file}})],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable */\nimport $store from \"@/store\";\nimport io from \"socket.io-client\";\n\n// GPSサーバとのコネクション\nlet gps_socket = null;\n\nexport default function userLocationMaker(socketio, geoOptions) {\n  const position = {}; //自分の位置\n  const gps_server_addr = $store.state.gps_server;\n  const gps_timeout = $store.state.gps_timeout_ms;\n\n  const logDebug = function (msg) {\n    $store.state.logger.debug(msg);\n  };\n  const log = function (msg) {\n    $store.state.logger.info(msg);\n  };\n  const logError = function (msg) {\n    $store.state.logger.error(msg);\n  };\n\n  //---------------------------------------------------------------------------\n  // GPS位置\n  //---------------------------------------------------------------------------\n\n  if (geoOptions == null) {\n    geoOptions = {\n      enableHighAccuracy: true,\n      maximumAge: 0,\n      timeout: 10000,\n    };\n  }\n\n  function sendRenewNow() {\n    position.group_id =\n      $store.state.activeId.kind == \"group\" ? $store.state.activeId.id : null;\n    position.page = $store.state.page;\n    position.icon = $store.state.myIcon;\n    position.status = $store.state.workStatus;\n    position.group_id = $store.state.group_id;\n    socketio.emit(\"renew\", JSON.stringify(position));\n  }\n\n  const errorMessage = {\n    0: \"原因不明のエラーが発生しました。\",\n    1: \"位置情報の取得が許可されませんでした。\",\n    2: \"電波状況などで位置情報が取得できませんでした。\",\n    3: \"位置情報の取得に時間がかかり過ぎてタイムアウトしました。\",\n  };\n\n  function pos_rounddown(pos) {\n    const digit = 6;\n\n    // 小数点第7位を四捨五入\n    return Math.round(pos * Math.pow(10, digit)) / Math.pow(10, digit);\n  }\n\n  function initPos(uid, uname) {\n    //GPS前に送信\n    position.user_id = uid;\n    position.user_type = $store.state.user_type; // 2021.04.07 user_typeを追加（そもそも、ココで正しいか？）\n    position.user_name = uname;\n    position.is_valid = false;\n    position.timestamp = $store.state.initial_time;\n    // 固定局は最初から固定位置を通知、移動局は初回の測位結果が分かるまで緯度経度を通知しない\n    position.lat = $store.state.fixed_pos\n      ? pos_rounddown($store.state.default_lat)\n      : pos_rounddown($store.state.initial_lat);\n    position.lng = $store.state.fixed_pos\n      ? pos_rounddown($store.state.default_lng)\n      : pos_rounddown($store.state.initial_lng);\n    position.heading = null;\n    position.speed = null;\n    position.group_id = $store.state.group_id;\n    position.page = $store.state.page;\n    position.myIcon = $store.state.myIcon;\n    position.status = $store.state.workStatus;\n    position.volume = $store.state.volume;\n    position.expires = 0;\n    position.tel_type = $store.state.tel_type; // 2021.03.31 tel-mode\n    position.tel_code = $store.state.tel_code; // 2021.03.31 tel-mode\n\n    socketio.emit(\"renew\", JSON.stringify(position));\n\n    // 既に位置情報監視中ならいったん解除\n    if ($store.state.watch_timerId) {\n      log(`-------CLEAR TIMER (WATCH ID:${$store.state.watch_timerId})-------`);\n      // navigator.geolocation.clearWatch($store.state.watch_timerId);\n      clearInterval($store.state.watch_timerId);\n    }\n\n    // 既にGPSサーバ接続済みならいったん切断\n    if (gps_socket) {\n      gps_socket.off();\n      gps_socket.close();\n    }\n\n    // 固定局の場合、そもそも、GPS測位を行わない。\n    if ($store.state.fixed_pos) return;\n\n    // GPSサーバから位置情報受信\n    if (gps_server_addr) {\n      gps_socket = io(gps_server_addr);\n      if (gps_socket.connected) {\n        // GPSサーバと接続できている\n        gps_socket.on(\"gps\", (data) => {\n          if (data.fix && data.lat != null && data.lng != null) {\n            if (position.timestamp != data.timestamp) {\n              // タイムスタンプ更新時、このデータの有効期限を延長\n              position.expires = Date.now() + gps_timeout;\n            }\n            position.lat = pos_rounddown(data.lat);\n            position.lng = pos_rounddown(data.lng);\n            position.heading = data.heading;\n            // @todo 本来はgps_serverからm/sに直したspeedが通知されてくるはずが\n            // gps_server側の処理が抜けているため、ここでkm/hからにm/sに変換している\n            // 将来的にはgps_serverでの変換に変更し、その際は通知されるJSONオブジェクトに\n            // インタフェースバージョンを追加してエアマルチサーバ側でgps_serverバージョンの\n            // 混在を許容できるようにする(バージョンなしはkm/hで通知とする)\n            position.speed = data.speed / 3.6;\n            position.timestamp = data.timestamp;\n            position.altitude = data.alt;\n            position.is_valid = true;\n          } else {\n            // 測位するまで初期位置を通知\n            if (position.lat == null && position.lng == null) {\n              position.lat = pos_rounddown($store.state.initial_lat);\n              position.lng = pos_rounddown($store.state.initial_lng);\n              position.timestamp = $store.state.initial_time;\n            }\n          }\n          $store.commit(\"amt/position\", position);\n        });\n\n        // GPSサーバと接続できていればwatchPosition()を呼び出さない\n        return;\n      } else {\n        // GPSサーバと接続できなければGeolocation APIから位置情報を取得する\n        logError(`GPSサーバ(${gps_server_addr})と接続できませんでした。`);\n        gps_socket = null; // connect(open)できていないのでdisconnect(close)しない\n      }\n    }\n\n    const pos_success = (pos) => {\n      // @todo Geolocation APIの仕様上、コールバックされたら必ず位置情報は取得\n      // できているような気もするが、万が一でlat,lngに無効値がセットされて地図表示\n      // がおかしくなるのを防ぐ\n      if (pos.coords.latitude != null && pos.coords.longitude != null) {\n        if (position.timestamp != pos.timestamp) {\n          // タイムスタンプ更新時、このデータの有効期限を延長\n          position.expires = Date.now() + gps_timeout;\n        }\n        position.lat = pos_rounddown(pos.coords.latitude);\n        position.lng = pos_rounddown(pos.coords.longitude);\n        position.heading = pos.coords.heading;\n        position.speed = pos.coords.speed;\n        position.timestamp = pos.timestamp;\n        position.altitude = pos.coords.altitude;\n        position.accuracy = pos.coords.accuracy;\n        position.altitudeAccuracy = pos.coords.altitudeAccuracy;\n        position.is_valid = true;\n        $store.commit(\"amt/position\", position);\n      }\n    };\n\n    const pos_error = (err) => {\n      // 2022/08/04 失敗なんだからis_valid = false;\n      position.is_valid = false;\n      if (errorMessage[err.code]) {\n        logError(\"GEO_ERROR:\" + errorMessage[err.code]);\n      }\n      // 測位するまで初期位置を通知\n      if (position.lat == null && position.lng == null) {\n        position.lat = pos_rounddown($store.state.initial_lat);\n        position.lng = pos_rounddown($store.state.initial_lng);\n        position.timestamp = $store.state.initial_time;\n      }\n    };\n\n    // Geolocation APIによる位置情報監視\n    $store.commit(\n      \"setWatchTimerId\",\n      // navigator.geolocation.watchPosition(pos_success, pos_error, geoOptions)\n      setInterval(() => {\n        navigator.geolocation.getCurrentPosition(pos_success, pos_error, geoOptions)\n      }, 2000)\n    );\n  }\n\n  // 1秒間隔で定期的にGPS測位状態を送信する\n  if ($store.state.renew_timerId) {\n    log(`-------CLEAR TIMER (RENEW ID:${$store.state.renew_timerId})-------`);\n    clearInterval($store.state.renew_timerId);\n  }\n\n  $store.commit(\n    \"setRenewTimerId\",\n    setInterval(() => {\n      position.group_id =\n        $store.state.activeId.kind == \"group\" ? $store.state.activeId.id : null;\n      position.page = $store.state.page;\n      position.myIcon = $store.state.myIcon;\n      position.status = $store.state.workStatus;\n      position.per = $store.state.per;\n      position.volume = $store.state.volume;\n\n      // user_configに設定されたタイムアウト時間を経過したら位置情報無効\n      // position.timestampとの比較だと端末の時刻がずれている場合に誤判定するため\n      // あえてGPSデータの時刻ではなくGPSデータを受信した時刻を基準にしている\n      const now_time = Date.now();\n      if (position.is_valid && now_time > position.expires) {\n        log(\"position data is expired\");\n        position.is_valid = false;\n      }\n      if ($store.state.rtc.local_audio_stream) {\n        socketio.emit(\"renew\", JSON.stringify(position));\n      }\n    }, 1000)\n  );\n\n  return {\n    initPos,\n    getMyPosition() {\n      return position;\n    },\n    setPage(pageName) {\n      position.page = pageName;\n    },\n    sendRenewNow,\n  };\n}\n","export function loggerMaker($store) {\n  let logLevel = 1; //0:all(debug, info, error), 1:info, error, 2: error only\n  let logMode = 1; //0: console, 1: server, 2: both\n\n  function exec(logMsg, level) {\n    if (level >= logLevel || !$store.state.socketio) {\n      if (logMode == 0 || logMode == 2) {\n        if (level <= 1) {\n          console.log(logMsg);\n        } else {\n          console.error(logMsg);\n        }\n      }\n      if (logMode == 1 || logMode == 2) {\n        try {\n          $store.state.socketio.emit(\n            \"log\",\n            JSON.stringify({\n              user_id: $store.state.myId,\n              level: level,\n              log: logMsg,\n            })\n          );\n        } catch {\n          console.log(logMsg);\n        }\n      }\n    }\n  }\n\n  return {\n    setLevel(level) {\n      logLevel = level;\n    },\n    getLevel() {\n      return logLevel;\n    },\n    setMode(mode) {\n      logMode = mode;\n    },\n    getMode() {\n      return logMode;\n    },\n    debug(logMsg) {\n      exec(logMsg, 0);\n    },\n    info(logMsg) {\n      exec(logMsg, 1);\n    },\n    error(logMsg) {\n      exec(logMsg, 2);\n    },\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"amtHeader\",staticClass:\"cHeader\"},[_c('div',{staticClass:\"cHeaderLeft\",attrs:{\"id\":\"headerLeft\"}},[_c('button',{staticClass:\"hiddenBtn\",attrs:{\"title\":\"ログアウト\"},on:{\"click\":_vm.onBackLogin}},[_c('img',{staticClass:\"headerPng\",attrs:{\"src\":_vm.leftButtonSrc}})])]),_c('div',{staticClass:\"cHeaderCenter\",attrs:{\"id\":\"headerCenter\"}},[_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\"}},[_c('div',{staticStyle:{\"width\":\"fit-content\"},on:{\"click\":_vm.my_video_show}},[_c('img',{ref:\"icon_arrow\",staticClass:\"rotate90\",attrs:{\"src\":require(\"@/assets/etc_arrow_01@1x.png\"),\"title\":\"カメラ映像\"}})]),_c('div',{staticClass:\"nosel text_over\",on:{\"click\":_vm.my_memo_classify}},[_vm._v(\" \"+_vm._s(_vm.headerName)+\" \"),(_vm.isLandscape)?_c('div',{staticClass:\"classify_disp_name text_over\"},[_vm._v(\" \"+_vm._s(_vm.classify_disp_name)+\" \")]):_vm._e()])]),(!_vm.isLandscape)?_c('GroupSelect'):_vm._e()],1),_c('div',{staticClass:\"cHeaderRight\",attrs:{\"id\":\"headerRight\"}},[_c('button',{staticClass:\"hiddenBtn\",attrs:{\"title\":\"端末映像共有\"}},[_c('img',{staticClass:\"headerPng\",attrs:{\"src\":require(\"@/assets/map_img@1x.png\")},on:{\"click\":_vm.onVideoButton}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.users_length > 0),expression:\"users_length > 0\"}],staticClass:\"users_length\",on:{\"click\":_vm.onVideoButton}},[_vm._v(\" \"+_vm._s(_vm.users_length)+\" \")])]),(_vm.workListShowing)?_c('workList'):_vm._e(),(_vm.show_msg_dialog)?_c('modalDialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"メモの分類\")]),_c('span',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(\" 作成するメモの分類を変更します \"),_c('div',[_c('b-form-select',{attrs:{\"options\":_vm.classifyListObj},model:{value:(_vm.classify_name),callback:function ($$v) {_vm.classify_name=$$v},expression:\"classify_name\"}})],1)]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.close_msg_dialog()}}},[_vm._v(\" 戻る \")]),_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.ok_classify_memo()}}},[_vm._v(\" 変更 \")])])]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"workList\"}},[_c('ul',_vm._l((_vm.kinds),function(kind){return _c('li',{key:kind.no,style:({ backgroundColor: _vm.colorLine(kind.no) }),on:{\"click\":function($event){return _vm.onClickKind(kind.no)}}},[_vm._v(\"   \"),_c('img',{attrs:{\"src\":_vm.flagSrc(kind.no)}}),_c('span',[_vm._v(\"  \"+_vm._s(kind.name))]),_vm._v(\"   \")])}),0)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"workList\">\n    <ul>\n      <li\n        v-for=\"kind in kinds\"\n        v-bind:key=\"kind.no\"\n        v-bind:style=\"{ backgroundColor: colorLine(kind.no) }\"\n        v-on:click=\"onClickKind(kind.no)\"\n      >\n        &nbsp;\n        <img v-bind:src=\"flagSrc(kind.no)\" />\n        <span>&nbsp;&nbsp;{{ kind.name }}</span>\n        &nbsp;\n      </li>\n    </ul>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      selectedNo: -1,\n      kinds: [\n        {\n          no: 1,\n          name: \"巡回中\",\n        },\n        {\n          no: 2,\n          name: \"緊急対応中\",\n        },\n        {\n          no: 3,\n          name: \"休憩中\",\n        },\n      ],\n    };\n  },\n  methods: {\n    onClickKind(no) {\n      this.selectedNo = no;\n      this.endDelay();\n    },\n    colorLine(no) {\n      if (no == this.selectedNo) {\n        return \"royalblue\";\n      } else {\n        return \"transparent\";\n      }\n    },\n    endDelay() {\n      if (this.endTimer != null) {\n        clearTimeout(this.endTimer);\n      }\n      this.$store.commit(\"setWorkStatus\", this.selectedNo);\n      this.endTimer = setTimeout(() => {\n        this.$parent.workListShowing = false;\n        //this.$parent.$parent.isModal = false;\n        this.$store.commit(\"setMask\", false);\n      }, 400);\n    },\n    flagSrc(workStatus) {\n      switch (workStatus) {\n        case 2:\n          return require(\"../assets/flagRed10.png\");\n        case 3:\n          return require(\"../assets/flagYellow10.png\");\n        default:\n          return require(\"../assets/flag10.png\");\n      }\n    },\n  },\n  computed: {},\n  mounted() {\n    const wl = document.getElementById(\"workList\");\n    wl.style.left = window.innerWidth - wl.clientWidth + \"px\";\n    this.selectedNo = this.$store.state.workStatus;\n  },\n};\n</script>\n<style>\ndiv#workList {\n  position: absolute;\n  top: 8vh;\n  left: 0;\n  width: 12rem;\n  max-height: 68vh;\n  min-height: 10vh;\n  background-color: #39a2c0;\n  font-size: 1.4rem;\n  color: white;\n  overflow: auto;\n  z-index: 21;\n  filter: drop-shadow(-0.3rem 0.3rem 0.3rem rgba(0, 0, 0, 0.6));\n  cursor: pointer;\n}\ndiv#workList ul {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n}\ndiv#workList input {\n  display: none;\n}\ndiv#workList img {\n  width: 1.2rem;\n  height: 1.2rem;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./WorkList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./WorkList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WorkList.vue?vue&type=template&id=09a7733a&\"\nimport script from \"./WorkList.vue?vue&type=script&lang=js&\"\nexport * from \"./WorkList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WorkList.vue?vue&type=style&index=0&id=09a7733a&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{ref:\"groupNameSel\",staticClass:\"groupNameSel nosel text_over\",on:{\"click\":_vm.toggleGroupSel}},[_vm._v(\" \"+_vm._s(_vm.selGroupName)+\" \")]),(_vm.groupListShowing)?_c('groupList',{on:{\"groupSelected\":_vm.groupSelected}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"groupList\"}},[_c('ul',[_vm._l((this.myGroup),function(grp){return [_c('li',{key:'g' + grp.group_id,style:({ backgroundColor: _vm.colorGroup(grp.group_id) }),on:{\"click\":function($event){return _vm.onClickGroup(grp.group_id)}}},[_c('span',{staticClass:\"nosel\"},[_vm._v(\"    \"+_vm._s(grp.group_name))]),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(grp.persons.length > 0),expression:\"grp.persons.length > 0\"}],staticClass:\"groupListImg\",attrs:{\"src\":require(\"../assets/pullOpen.png\")},on:{\"click\":function($event){$event.stopPropagation();return _vm.togglePerson(grp.group_id)}}})]),_vm._l((grp.persons),function(psn){return _c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(grp.group_id == _vm.groupShowing),expression:\"grp.group_id == groupShowing\"}],key:'p' + psn.user_id,style:({\n          backgroundColor: _vm.bgPerson(psn.user_id),\n          color: _vm.colorPerson(psn.user_id),\n        }),attrs:{\"disabled\":\"disabled\"},on:{\"click\":function($event){return _vm.onClickPerson(psn.user_id)}}},[_c('span',{staticClass:\"nosel\"},[_vm._v(\"      \")]),_c('img',{staticStyle:{\"width\":\"20px\",\"height\":\"20px\"},attrs:{\"src\":require(\"../assets/pullMark.png\")}}),_c('span',{staticClass:\"nosel\"},[_vm._v(\" \"+_vm._s(psn.user_name))])])})]})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"groupList\">\n    <ul>\n      <template v-for=\"grp in this.myGroup\">\n        <li\n          v-bind:key=\"'g' + grp.group_id\"\n          v-bind:style=\"{ backgroundColor: colorGroup(grp.group_id) }\"\n          v-on:click=\"onClickGroup(grp.group_id)\"\n        >\n          <span class=\"nosel\"\n            >&nbsp;&nbsp;&nbsp;&nbsp;{{ grp.group_name }}</span\n          >\n          <img\n            src=\"../assets/pullOpen.png\"\n            v-on:click.stop=\"togglePerson(grp.group_id)\"\n            v-show=\"grp.persons.length > 0\"\n            class=\"groupListImg\"\n          />\n        </li>\n        <li\n          v-for=\"psn in grp.persons\"\n          v-bind:key=\"'p' + psn.user_id\"\n          v-show=\"grp.group_id == groupShowing\"\n          v-bind:style=\"{\n            backgroundColor: bgPerson(psn.user_id),\n            color: colorPerson(psn.user_id),\n          }\"\n          v-on:click=\"onClickPerson(psn.user_id)\"\n          disabled=\"disabled\"\n        >\n          <span class=\"nosel\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n          <img src=\"../assets/pullMark.png\" style=\"width: 20px; height: 20px\" />\n          <span class=\"nosel\">&nbsp;{{ psn.user_name }}</span>\n        </li>\n      </template>\n    </ul>\n  </div>\n</template>\n<script>\n/* eslint-disable */\nexport default {\n  data() {\n    return {\n      groupShowing: -1,\n      endTimer: null,\n    };\n  },\n  computed: {\n    pttRecv() {\n      return this.$store.getters[\"ptt/pttRecv\"];\n    },\n  },\n  methods: {\n    at_pttRecv() {\n      this.$bvToast.toast(\"現在着信です。\", {\n        title: \"AirMultiTalk\",\n        toaster: \"b-toaster-top-center\",\n        variant: \"danger\",\n        autoHideDelay: 3000,\n        appendToast: false,\n      });\n    },\n    togglePerson(groupId) {\n      if (groupId == this.groupShowing) {\n        this.groupShowing = \"\";\n      } else {\n        this.groupShowing = groupId;\n      }\n      return false;\n    },\n    onClickGroup(groupId) {\n      if (this.pttRecv) {\n        this.at_pttRecv();\n        return;\n      }\n      // 共有レイヤがonの時はグループの選択ができないように修正 @todo 共有レイヤが無い時の事を考慮\n      if (this.$store.getters[\"amt/subMenu\"] == \"ShareLayer\") {\n        return;\n      }\n      const activeId = this.$store.state.activeId;\n      if (activeId.kind == \"group\" && activeId.id == groupId) {\n        //this.$store.commit(\"setActiveId\", [\"none\", null]);\n      } else {\n        if (activeId.kind == \"person\") {\n          this.$parent.phoneQueryExec(activeId.id, \"end\");\n        }\n        this.$store.commit(\"setActiveId\", [\"group\", groupId]);\n      }\n      this.endDelay();\n    },\n    onClickPerson(userId) {\n      // if (userId != this.$store.state.myId) {\n      //   const activeId = this.$store.state.activeId;\n      //   if (activeId.kind == \"person\" && activeId.id == userId) {\n      //     //this.$store.commit(\"setActiveId\", [\"none\", null]);\n      //   } else {\n      //     if (activeId.kind == \"person\") {\n      //       this.$parent.phoneQueryExec(activeId.id, \"end\");\n      //       this.$store.commit(\"backActiveId\");\n      //     }\n      //     this.$store.commit(\"setPhoneQuering\", userId);\n      //   }\n      //   this.endDelay();\n      // }\n    },\n    colorGroup(groupId) {\n      const activeId = this.$store.state.activeId;\n      if (activeId.kind == \"group\" && activeId.id == groupId) {\n        return \"royalblue\";\n      } else {\n        return \"transparent\";\n      }\n    },\n    bgPerson(userId) {\n      const activeId = this.$store.state.activeId;\n      if (\n        (activeId.kind == \"person\" && activeId.id == userId) ||\n        this.$store.state.phoneQuering == userId\n      ) {\n        return \"royalblue\";\n      } else {\n        return \"transparent\";\n      }\n    },\n    colorNoSel() {\n      if (this.$store.state.activeId.kind == \"none\") {\n        return \"royalblue\";\n      } else {\n        return \"transparent\";\n      }\n    },\n    colorPerson(userId) {\n      // if (userId == this.$store.state.myId) {\n      //   return \"gray\";\n      // } else {\n      //   return \"white\";\n      // }\n      return \"lightgray\";\n    },\n    endDelay() {\n      if (this.endTimer != null) {\n        clearTimeout(this.endTimer);\n      }\n      this.endTimer = setTimeout(() => {\n        this.$emit(\"groupSelected\");\n      }, 200);\n    },\n  },\n  beforeCreate() {\n    let users = this.$store.state.users;\n    let groups = this.$store.state.groups;\n    const h = {};\n    for (let uid of Object.keys(users)) {\n      let gid = users[uid].group_id;\n      // if (uid != this.$store.state.myId) {\n      if (uid != this.$store.state.myId && users[uid].user_type == \"amt\") {\n        let user = { user_id: uid, user_name: users[uid].user_name };\n        if (h[gid] == null) {\n          h[gid] = [user];\n        } else {\n          h[gid].push(user);\n        }\n      }\n    }\n    this.myGroup = [];\n    for (let g of groups) {\n      let group = {\n        group_id: g.group_id,\n        group_name: g.group_name,\n        persons: [],\n      };\n      if (h[g.group_id] != null) {\n        for (let user of h[g.group_id]) {\n          group.persons.push(user);\n        }\n      }\n      this.myGroup.push(group);\n    }\n  },\n  mounted() {\n    const gl = document.getElementById(\"groupList\");\n    let left = (gl.parentNode.clientWidth - gl.clientWidth) / 2;\n    if (left < 10) {\n      left = 10;\n    }\n    gl.style.left = left + \"px\";\n  },\n};\n</script>\n<style>\ndiv#groupList {\n  position: absolute;\n  top: 15vh;\n  left: 0;\n  width: 20rem;\n  max-height: 68vh;\n  min-height: 5vh;\n  background-color: #39a2c0;\n  font-size: 1.4rem;\n  color: white;\n  overflow: auto;\n  z-index: 21;\n  cursor: pointer;\n  text-align: left;\n}\ndiv#groupList ul {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n}\ndiv#groupList input {\n  display: none;\n}\ndiv#groupList li {\n  padding-top: 0.5rem;\n  padding-bottom: 0.5rem;\n}\n.groupListImg {\n  border: solid 2px #fff;\n  padding: 6px 3px;\n  margin-left: 10px;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GroupList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GroupList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GroupList.vue?vue&type=template&id=79061331&\"\nimport script from \"./GroupList.vue?vue&type=script&lang=js&\"\nexport * from \"./GroupList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GroupList.vue?vue&type=style&index=0&id=79061331&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <div\n      ref=\"groupNameSel\"\n      v-on:click=\"toggleGroupSel\"\n      class=\"groupNameSel nosel text_over\"\n    >\n      {{ selGroupName }}\n    </div>\n    <groupList\n      v-if=\"groupListShowing\"\n      v-on:groupSelected=\"groupSelected\"\n    ></groupList>\n  </div>\n</template>\n\n<script>\nimport GroupList from \"../components/GroupList.vue\";\nexport default {\n  data() {\n    return {\n      // groupListShowing: false\n    };\n  },\n  components: {\n    groupList: GroupList,\n  },\n  methods: {\n    logDebug(msg) {\n      this.$store.state.logger.debug(msg);\n    },\n    log(msg) {\n      this.$store.state.logger.info(msg);\n    },\n    logError(msg) {\n      this.$store.state.logger.error(msg);\n    },\n    setGroupShow(on) {\n      this.$store.commit(\"setGroupListShow\", on);\n      // this.groupListShowing = on;\n      this.$store.commit(\"setMask\", on);\n      // const el = this.$refs.groupNameSel;\n      if (on) {\n        this.$refs.groupNameSel.style[\"z-index\"] = 21;\n      } else {\n        this.$refs.groupNameSel.style[\"z-index\"] = \"\";\n      }\n    },\n    toggleGroupSel() {\n      if (this.pttRecv) {\n        this.at_pttRecv();\n        return;\n      }\n      // 共有レイヤがonの時はグループの選択ができないように修正 @todo 共有レイヤが無い時の事を考慮\n      if (this.$store.getters[\"amt/subMenu\"] == \"ShareLayer\") {\n        return;\n      }\n      this.setGroupShow(!this.$store.state.groupListShow);\n    },\n    groupSelected() {\n      this.setGroupShow(false);\n      // this.$emit(\"goupSelected\");\n    },\n    at_pttRecv() {\n      this.$bvToast.toast(\"現在着信です。\", {\n        title: \"AirMultiTalk\",\n        toaster: \"b-toaster-top-center\",\n        variant: \"danger\",\n        autoHideDelay: 3000,\n        appendToast: false,\n      });\n    },\n  },\n  computed: {\n    pttRecv() {\n      return this.$store.getters[\"ptt/pttRecv\"];\n    },\n    selGroupName() {\n      const activeId = this.$store.state.activeId;\n      if (\n        this.$store.state.phoneQuering != null &&\n        this.phoneQueryCnt % 2 == 0\n      ) {\n        return this.$store.state.users[this.$store.state.phoneQuering]\n          .user_name;\n      } else if (activeId.kind == \"group\" && activeId.id != null) {\n        return this.$store.state.groups.find((g) => g.group_id == activeId.id)\n          .group_name;\n      } else if (activeId.kind == \"person\" && activeId.id != null) {\n        if (this.$store.state.users[activeId.id] != null) {\n          return this.$store.state.users[activeId.id].user_name;\n        } else {\n          this.$store.commit(\"backActiveId\");\n          return \"\";\n        }\n      } else {\n        return \"選択なし\";\n      }\n    },\n    groupListShowing() {\n      return this.$store.state.groupListShow;\n    },\n  },\n};\n</script>\n\n<style>\n.groupNameSel {\n  /* position: absolute; */\n  left: 0;\n  /* top: 8vh; */\n  width: 90%;\n  margin-left: 5%;\n  margin-right: 5%;\n  height: 7rh;\n  color: white;\n  font-size: 1.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GroupSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GroupSelect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GroupSelect.vue?vue&type=template&id=02731e06&\"\nimport script from \"./GroupSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./GroupSelect.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GroupSelect.vue?vue&type=style&index=0&id=02731e06&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('transition',{attrs:{\"name\":\"modal\"}},[_c('div',{staticClass:\"vmodal-mask\"},[_c('div',{staticClass:\"vmodal-wrapper\"},[_c('div',{staticClass:\"vmodal-container\"},[_c('div',{staticClass:\"vmodal-header\"},[_vm._t(\"header\",function(){return [_vm._v(\" タイトル \")]})],2),_c('div',{staticClass:\"vmodal-body\"},[_vm._t(\"body\",function(){return [_vm._v(\" 確認事項 \")]})],2),_c('div',{staticClass:\"vmodal-footer\"},[_vm._t(\"footer\",function(){return [_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.$emit('modalDialogYes')}}},[_vm._v(\" OK \")])]})],2)])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <transition name=\"modal\">\n    <div class=\"vmodal-mask\">\n      <div class=\"vmodal-wrapper\">\n        <div class=\"vmodal-container\">\n          <div class=\"vmodal-header\">\n            <slot name=\"header\"> タイトル </slot>\n          </div>\n\n          <div class=\"vmodal-body\">\n            <slot name=\"body\"> 確認事項 </slot>\n          </div>\n\n          <div class=\"vmodal-footer\">\n            <slot name=\"footer\">\n              <button class=\"btn btn-primary\" @click=\"$emit('modalDialogYes')\">\n                OK\n              </button>\n            </slot>\n          </div>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      clickable: false,\n    };\n  },\n};\n</script>\n\n<style>\n.vmodal-mask {\n  position: fixed;\n  z-index: 9998;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: table;\n  transition: opacity 0.3s ease;\n}\n\n.vmodal-wrapper {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.vmodal-container {\n  width: 20rem;\n  margin: 0px auto;\n  padding: 1rem 1.5rem;\n  background-color: #fff;\n  border-radius: 0.2rem;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.33);\n  transition: all 0.3s ease;\n}\n\n.vmodal-header {\n  margin-top: 0;\n  color: #42b983;\n}\n\n.vmodal-body {\n  margin: 1.5rem 0;\n}\n\n.vmodal-footer {\n  margin: 0;\n  padding: 0;\n  /* height: 2.5rem; */\n  height: fit-content;\n  min-height: 2.5rem;\n}\n.vmodal-footer button {\n  float: right;\n  margin-left: 1rem;\n}\n\n/*\n * The following styles are auto-applied to elements with\n * transition=\"modal\" when their visibility is toggled\n * by Vue.js.\n *\n * You can easily play with the modal transition by editing\n * these styles.\n */\n\n.modal-enter {\n  opacity: 0;\n}\n\n.modal-leave-active {\n  opacity: 0;\n}\n\n.modal-enter .modal-container,\n.modal-leave-active .modal-container {\n  -webkit-transform: scale(1.1);\n  transform: scale(1.1);\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModalDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModalDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModalDialog.vue?vue&type=template&id=9393fd78&\"\nimport script from \"./ModalDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./ModalDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModalDialog.vue?vue&type=style&index=0&id=9393fd78&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div ref=\"amtHeader\" class=\"cHeader\">\n    <div id=\"headerLeft\" class=\"cHeaderLeft\">\n      <button class=\"hiddenBtn\" v-on:click=\"onBackLogin\" title=\"ログアウト\">\n        <img v-bind:src=\"leftButtonSrc\" class=\"headerPng\" />\n      </button>\n    </div>\n    <div id=\"headerCenter\" class=\"cHeaderCenter\">\n      <div style=\"display: flex; align-items: center\">\n        <div @click=\"my_video_show\" style=\"width: fit-content\">\n          <img\n            ref=\"icon_arrow\"\n            src=\"@/assets/etc_arrow_01@1x.png\"\n            class=\"rotate90\"\n            title=\"カメラ映像\"\n          />\n        </div>\n        <div class=\"nosel text_over\" @click=\"my_memo_classify\">\n          {{ headerName }}\n          <div class=\"classify_disp_name text_over\" v-if=\"isLandscape\">\n            {{ classify_disp_name }}\n          </div>\n        </div>\n      </div>\n      <GroupSelect v-if=\"!isLandscape\"></GroupSelect>\n    </div>\n    <div id=\"headerRight\" class=\"cHeaderRight\">\n      <button class=\"hiddenBtn\" title=\"端末映像共有\">\n        <img\n          src=\"@/assets/map_img@1x.png\"\n          class=\"headerPng\"\n          v-on:click=\"onVideoButton\"\n        />\n      </button>\n      <div\n        class=\"users_length\"\n        v-on:click=\"onVideoButton\"\n        v-show=\"users_length > 0\"\n      >\n        {{ users_length }}\n      </div>\n    </div>\n    <workList v-if=\"workListShowing\"></workList>\n\n    <modalDialog v-if=\"show_msg_dialog\">\n      <span slot=\"header\">メモの分類</span>\n      <span slot=\"body\">\n        作成するメモの分類を変更します\n        <!-- <classifyList>\n          <b-form-select\n            v-model=\"classify_name\"\n            :options=\"classifyListObj\"\n          ></b-form-select>\n        </classifyList> -->\n        <div>\n          <b-form-select\n            v-model=\"classify_name\"\n            :options=\"classifyListObj\"\n          ></b-form-select>\n        </div>\n      </span>\n      <div slot=\"footer\">\n        <button class=\"btn btn-primary\" @click=\"close_msg_dialog()\">\n          戻る\n        </button>\n        <button class=\"btn btn-primary\" @click=\"ok_classify_memo()\">\n          変更\n        </button>\n      </div>\n    </modalDialog>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport WorkList from \"./WorkList.vue\";\nimport GroupSelect from \"../components/GroupSelect\";\nimport ModalDialog from \"@/components/ModalDialog.vue\";\nexport default {\n  data() {\n    return {\n      // headerName: this.$store.state.myCompanyName,\n      headerName: this.$store.state.myName,\n      workListShowing: false,\n      show_msg_dialog: false,\n      classify_name: \"\",\n      classify_userAgent: \"\",\n    };\n  },\n  // props: [\"my_video_showed\"],\n  components: {\n    workList: WorkList,\n    GroupSelect: GroupSelect,\n    modalDialog: ModalDialog,\n  },\n  watch: {\n    // my_video_showed() {\n    //   if (this.my_video_showed) {\n    //     this.$refs.icon_arrow.classList.remove(\"rotate90\");\n    //     this.$store.state.p2p.start_localVideoElm();\n    //   } else {\n    //     this.$refs.icon_arrow.classList.add(\"rotate90\");\n    //     this.$store.state.p2p.stop_localVideoElm();\n    //   }\n    // },\n    rtt_alert() {\n      if (this.rtt_alert) {\n        this.$refs.amtHeader.classList.add(\"blinking\");\n      } else {\n        this.$refs.amtHeader.classList.remove(\"blinking\");\n      }\n    },\n  },\n  methods: {\n    my_video_show() {\n      this.$store.state.sound_on();\n      // this.$emit(\"my_video_show\");\n      // const toggle = this.$store.getters[\"rtc/func_toggle_cam\"];\n      // toggle();\n      if (this.is_local_video_showed) {\n        this.$refs.icon_arrow.classList.add(\"rotate90\");\n        this.$store.commit(\"rtc/set_local_show\", false);\n      } else {\n        this.$refs.icon_arrow.classList.remove(\"rotate90\");\n        this.$store.commit(\"rtc/set_local_show\", true);\n      }\n    },\n    async my_memo_classify() {\n      this.$store.state.sound_on();\n      // 初期値を持たせる\n      this.classify_name = this.$store.state.memo_classify;\n      await this.$store.dispatch(\"memo/fetchClassify\");\n      this.show_msg_dialog = true;\n    },\n    ok_classify_memo() {\n      this.$store.state.sound_on();\n      this.$store.commit(\"setMemoClassify\", this.classify_name);\n      this.show_msg_dialog = false;\n    },\n    close_msg_dialog() {\n      this.$store.state.sound_on();\n      this.show_msg_dialog = false;\n    },\n    onBackLogin() {\n      this.$store.state.sound_on();\n      if (this.$store.state.mapWindowLock) return;\n      // 確認ダイアログ表示\n      this.$store.commit(\"confirmOn\", {\n        body: \"ログアウトします。よろしいですか？\",\n        // Yes => ログアウトする\n        funcYes: async () => {\n          // location.href = \"/logout\";\n          if (this.$store.state.renew_timerId) {\n            console.log(\n              `-------CLEAR TIMER (RENEW ID:${this.$store.state.renew_timerId})-------`\n            );\n            clearInterval(this.$store.state.renew_timerId);\n            this.$store.state.socketio.disconnect();\n          }\n          await this.ldb.clear();\n          this.$store.commit(\"confirmOff\");\n          this.$store.commit(\"setReview\", false);\n          // this.$router.push(\"/Regist\");\n          this.$router.go({\n            path: this.$router.currentRoute.path,\n            force: true,\n          });\n        },\n        // No => ダイアログを閉じる\n        funcNo: () => {\n          this.$store.commit(\"confirmOff\");\n        },\n      });\n    },\n    onVideoButton() {\n      this.$store.state.sound_on();\n      if (this.$store.state.mapWindowLock) return;\n      // this.$store.state.mapChangeEvent.$emit(\"togglePeepDisp\");\n      if (this.$store.getters[\"rtc/remote_show\"]) {\n        this.$store.commit(\"rtc/set_remote_show\", false);\n      } else {\n        this.$store.commit(\"rtc/set_remote_show\", true);\n      }\n    },\n    onWorkStatusButton() {\n      const on = !this.workListShowing;\n      this.workListShowing = on;\n      const el = document.getElementById(\"workStatusButton\");\n      if (on) {\n        el.style[\"z-index\"] = 11;\n      } else {\n        el.style[\"z-index\"] = \"\";\n      }\n      this.$store.commit(\"setMask\", on);\n    },\n  },\n  computed: {\n    isLandscape() {\n      return this.$store.state.screen_landscape;\n    },\n    leftButtonSrc() {\n      return require(\"../assets/logout10.png\");\n    },\n    flagSrc() {\n      switch (this.$store.state.workStatus) {\n        case 2:\n          return require(\"../assets/flagRed10.png\");\n        case 3:\n          return require(\"../assets/flagYellow10.png\");\n        default:\n          return require(\"../assets/flag10.png\");\n      }\n    },\n    users() {\n      return this.$store.getters[\"amt/users\"];\n    },\n    users_length() {\n      return this.$store.getters[\"users_length\"];\n    },\n    // 2021.04.07 user_typeによる判定を追加\n    // users_length() {\n    //   const same_group_members = Object.keys(this.users).filter(id => {\n    //     return (\n    //       this.users[id].group_id == this.$store.state.activeId.id &&\n    //       this.users[id].user_type == \"amt\"\n    //     );\n    //   });\n    //   return Object.keys(same_group_members).length - 1;\n    // },\n    classifyListObj() {\n      // オブジェクトの形に変換\n      let options = [{ value: \"\", text: \"\" }]; // 空(全選択)を行えるように\n      let obj = {};\n      this.$store.state.memo.classify_list.forEach((data, i) => {\n        if (data) {\n          obj = { value: data, text: data };\n          options.push(obj);\n        }\n      });\n      return options;\n    },\n    rtt_alert() {\n      return this.$store.getters[\"ptt/rtt_alert\"];\n    },\n    classify_disp_name() {\n      if (this.$store.state.memo_classify) {\n        return \"分類 : \" + this.$store.state.memo_classify;\n      } else {\n        // ローディング時に分類が未選択だとundefinedになる為\n        return \"分類 : \";\n      }\n    },\n    is_local_video_showed() {\n      return this.$store.getters[\"rtc/local_show\"];\n    },\n  },\n  mounted() {\n    this.$store.state.mapChangeEvent.$on(\"closeWorkingListAndLock\", () => {\n      this.workListShowing = false;\n      //this.$parent.isModal = false;\n      //this.$store.commit(\"setMask\", false);\n      this.$store.commit(\"setMapWindowLock\", true);\n    });\n    // userAgentから端末を判断する。Androidかその他で判別\n    var ua = navigator.userAgent;\n    if (ua.indexOf(\"Android\") > 0) {\n      this.classify_userAgent = \"Android\";\n    } else {\n      this.classify_userAgent = \"Win64\";\n    }\n  },\n  beforeDestroy() {\n    this.$store.state.mapChangeEvent.$off(\"closeWorkingListAndLock\");\n  },\n};\n</script>\n\n<style>\n.text_over {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\ndiv.cHeader {\n  display: flex;\n  height: 10vh;\n  width: 100%;\n  background-color: #39a2c0;\n}\n.blinking {\n  animation: blink 1.5s ease-in-out infinite alternate;\n}\n@keyframes blink {\n  0% {\n    background-color: #ffa2c0;\n  }\n  100% {\n    background-color: #39a2c0;\n  }\n}\ndiv.cHeaderLeft {\n  flex-basis: 15%;\n  display: flex;\n  align-items: center;\n  margin-left: -0.8rem;\n}\ndiv.cHeaderCenter {\n  flex-basis: 70%;\n  display: flex;\n  align-items: baseline;\n  align-items: center;\n  font-size: 1.5rem;\n  color: white;\n}\ndiv.cHeaderCenter div {\n  width: 100%;\n  text-align: center;\n}\ndiv.cHeaderRight {\n  flex-basis: 15%;\n  display: flex;\n  align-items: center;\n}\nimg.headerPng {\n  width: 1.8rem;\n  height: 1.8rem;\n}\ndiv.cHeaderLeft button {\n  margin-left: 2rem;\n  padding: 0px;\n}\ndiv#headerRight button:first-child {\n  margin-left: auto;\n  margin-right: 0.5rem;\n  padding: 0px;\n}\ndiv#headerRight button:nth-child(2) {\n  margin-left: 0;\n  margin-right: 1rem;\n}\ndiv#headerRight button:nth-child(3) {\n  margin-left: 0;\n  margin-right: 1rem;\n}\nbutton.hiddenBtn {\n  width: 2.5rem;\n  height: 2.5rem;\n  background: rgba(42, 121, 142, 0);\n  border: none;\n  border-radius: 3rem;\n  -moz-border-radius: 3rem;\n  -webkit-border-radius: 3rem;\n  color: white;\n  outline: none !important;\n  transition: background-color, color 0.3s ease-in;\n}\nbutton.hiddenBtn:active {\n  background-color: rgba(42, 121, 142, 0.9);\n  box-shadow: 0 0 5px rgba(42, 121, 142, 0.9);\n}\n.users_length {\n  position: absolute;\n  width: 30px;\n  height: 30px;\n  top: 5px;\n  right: 10px;\n  border-radius: 15px;\n  font-size: 1.2rem;\n  text-align: center;\n  color: #39a2c0;\n  background-color: #fff;\n  z-index: 11;\n  cursor: pointer;\n  user-select: none;\n}\n.rotate90 {\n  transform: rotate(-90deg);\n}\n.classify_disp_name {\n  width: 40%;\n  padding-left: 5%;\n  font-size: 19px;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HeaderComp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HeaderComp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HeaderComp.vue?vue&type=template&id=129e27bb&\"\nimport script from \"./HeaderComp.vue?vue&type=script&lang=js&\"\nexport * from \"./HeaderComp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HeaderComp.vue?vue&type=style&index=0&id=129e27bb&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"baseField\"}},[(_vm.isLandscape)?_c('phoneButton'):_vm._e(),(_vm.isLandscape)?_c('GroupSelect',{staticClass:\"base_group_select\"}):_vm._e(),_c('time-disp'),_c('div',{staticClass:\"nosel\",attrs:{\"id\":\"statusDisp\"}},[_vm._v(_vm._s(_vm.callStatus))]),_c('levelField')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"phoneButtonDiv\"}},[_c('button',{ref:\"phoneBtn\",staticClass:\"circleBigBtn\",style:(_vm.phoneButtonSrc),attrs:{\"id\":\"phoneBtn\",\"title\":\"PTT\"},on:{\"touchstart\":_vm.phoneTouchStart,\"touchend\":_vm.phoneTouchEnd,\"mousedown\":_vm.phoneTouchStart,\"mouseup\":_vm.phoneTouchEnd,\"mouseout\":_vm.phoneTouchEnd}},[_c('img',{staticClass:\"unselect\",style:(_vm.mic_class),attrs:{\"src\":_vm.mic,\"oncontextmenu\":\"return false;\"}}),_c('audio',{ref:\"audio_press\",attrs:{\"src\":_vm.audio_url}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"phoneButtonDiv\">\n    <button\n      v-on:touchstart=\"phoneTouchStart\"\n      v-on:touchend=\"phoneTouchEnd\"\n      v-on:mousedown=\"phoneTouchStart\"\n      v-on:mouseup=\"phoneTouchEnd\"\n      v-on:mouseout=\"phoneTouchEnd\"\n      id=\"phoneBtn\"\n      ref=\"phoneBtn\"\n      class=\"circleBigBtn\"\n      :style=\"phoneButtonSrc\"\n      title=\"PTT\"\n    >\n      <img\n        :src=\"mic\"\n        :style=\"mic_class\"\n        class=\"unselect\"\n        oncontextmenu=\"return false;\"\n      />\n      <audio ref=\"audio_press\" :src=\"audio_url\"></audio>\n    </button>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      clearId: {},\n      audio_level: 0, // 0 - 1.0 // 0.001以下で無着信と判断する。\n      last_audio_level: 0,\n      audio_url: require(\"../assets/press.wav\"),\n      audio_press: null,\n      mic: require(\"../assets/mic.png\"),\n    };\n  },\n  mounted() {\n    this.audio_press = this.$refs.audio_press;\n    this.btn = document.getElementById(\"phoneBtn\");\n  },\n  methods: {\n    phoneTouchStart() {\n      this.$store.dispatch(\"ptt/touchStart\");\n      this.audio_press.play();\n    },\n    phoneTouchEnd() {\n      this.$store.dispatch(\"ptt/touchEnd\");\n    },\n  },\n  computed: {\n    phoneButtonSrc() {\n      return {\n        backgroundColor:\n          this.pttRecv || this.out_level > 0\n            ? \"#4cc444\"\n            : this.pttActive\n            ? \"#c44444\"\n            : this.pttEnabled\n            ? \"#4c44c4\"\n            : \"#c4c4c4\",\n      };\n    },\n    pttRecv() {\n      return this.$store.getters[\"ptt/pttRecv\"];\n    },\n    pttActive() {\n      return this.$store.getters[\"ptt/pttActive\"];\n    },\n    pttEnabled() {\n      return this.$store.getters[\"ptt/pttEnabled\"];\n    },\n    mic_class() {\n      if (this.pttActive) {\n        return {\n          position: \"absolute\",\n          top: \"calc(13%)\",\n          left: \"calc(13%)\",\n          width: \"80%\",\n        };\n      } else {\n        return {\n          position: \"absolute\",\n          top: \"calc(10%)\",\n          left: \"calc(10%)\",\n          width: \"80%\",\n        };\n      }\n    },\n    remote_audio_stream() {\n      return this.$store.getters[\"rtc/remote_audio_stream\"];\n    },\n    out_level() {\n      return this.$store.getters[\"rtc/out_level\"];\n    },\n  },\n  beforeDestroy() {\n    Object.keys(this.clearId).forEach((key) => {\n      clearInterval(this.clearId[key]);\n    });\n  },\n};\n</script>\n\n<style>\ndiv#phoneButtonDiv {\n  position: absolute;\n  /* position: fixed; */\n  bottom: 3vh;\n  left: calc(50% - 52px);\n  z-index: 100;\n}\nbutton.circleBigBtn {\n  width: auto;\n  padding: 0;\n  margin: 0;\n  /* background: none; */\n  border: 0;\n  font-size: 0;\n  line-height: 0;\n  overflow: visible;\n  cursor: pointer;\n  outline: none !important;\n  user-select: none;\n  border-radius: 50%;\n  width: 100px;\n  height: 100px;\n  /* background-color: gray; */\n}\n.greenBtn {\n  background-color: green;\n}\n.redBtn {\n  background-color: red;\n}\n.blueBtn {\n  background-color: blue;\n}\n.grayBtn {\n  background-color: gray;\n}\n.unselect {\n  user-select: none;\n  -webkit-user-drag: none;\n  -webkit-touch-callout: none;\n}\n.mic {\n  position: absolute;\n  top: calc(10%);\n  left: calc(10%);\n  width: 80%;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PhoneButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PhoneButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PhoneButton.vue?vue&type=template&id=3c528818&\"\nimport script from \"./PhoneButton.vue?vue&type=script&lang=js&\"\nexport * from \"./PhoneButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PhoneButton.vue?vue&type=style&index=0&id=3c528818&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"levelField\"}},[_c('div',[_c('svg',{staticStyle:{\"background-color\":\"rgba(255, 255, 255, 0.05)\"},attrs:{\"x\":\"0\",\"y\":\"0\",\"width\":\"100%\",\"height\":\"100%\",\"viewBox\":\"0 0 100 3\",\"preserveAspectRatio\":\"none\"}},[_c('defs',[_c('linearGradient',{attrs:{\"gradientUnits\":\"userSpaceOnUse\",\"id\":\"gradation0\",\"x1\":\"0\",\"y1\":\"0\",\"x2\":\"100\",\"y2\":\"0\",\"spreadMethod\":\"pad\"}},[_c('stop',{attrs:{\"offset\":\"0%\",\"stop-color\":\"#afc6e8\"}}),_c('stop',{attrs:{\"offset\":\"100%\",\"stop-color\":\"#2e5bcc\"}})],1)],1),_c('rect',{attrs:{\"x\":\"0\",\"y\":\"0\",\"width\":_vm.in_level,\"height\":\"3\",\"fill\":\"url(#gradation0)\"}})]),_c('span',[_vm._v(\"MIC\")])]),_c('div',[_c('svg',{staticStyle:{\"background-color\":\"rgba(255, 255, 255, 0.13)\"},attrs:{\"x\":\"0\",\"y\":\"0\",\"width\":\"100%\",\"height\":\"100%\",\"viewBox\":\"0 0 100 3\",\"preserveAspectRatio\":\"none\"}},[_c('linearGradient',{attrs:{\"gradientUnits\":\"userSpaceOnUse\",\"id\":\"gradation1\",\"x1\":\"0\",\"y1\":\"0\",\"x2\":\"100\",\"y2\":\"0\",\"spreadMethod\":\"pad\"}},[_c('stop',{attrs:{\"offset\":\"0%\",\"stop-color\":\"#B7C7E9\"}}),_c('stop',{attrs:{\"offset\":\"100%\",\"stop-color\":\"#22b2cc\"}})],1),_c('rect',{attrs:{\"x\":\"0\",\"y\":\"0\",\"width\":_vm.out_level,\"height\":\"3\",\"fill\":\"url(#gradation1)\"}})],1),_c('span',[_vm._v(\"SP\")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"levelField\">\n    <div>\n      <svg\n        x=\"0\"\n        y=\"0\"\n        width=\"100%\"\n        height=\"100%\"\n        style=\"background-color: rgba(255, 255, 255, 0.05)\"\n        viewBox=\"0 0 100 3\"\n        preserveAspectRatio=\"none\"\n      >\n        <defs>\n          <linearGradient\n            gradientUnits=\"userSpaceOnUse\"\n            id=\"gradation0\"\n            x1=\"0\"\n            y1=\"0\"\n            x2=\"100\"\n            y2=\"0\"\n            spreadMethod=\"pad\"\n          >\n            <stop offset=\"0%\" stop-color=\"#afc6e8\" />\n            <stop offset=\"100%\" stop-color=\"#2e5bcc\" />\n          </linearGradient>\n        </defs>\n        <rect\n          x=\"0\"\n          y=\"0\"\n          v-bind:width=\"in_level\"\n          height=\"3\"\n          fill=\"url(#gradation0)\"\n        />\n      </svg>\n      <span>MIC</span>\n    </div>\n    <div>\n      <svg\n        x=\"0\"\n        y=\"0\"\n        width=\"100%\"\n        height=\"100%\"\n        style=\"background-color: rgba(255, 255, 255, 0.13)\"\n        viewBox=\"0 0 100 3\"\n        preserveAspectRatio=\"none\"\n      >\n        <linearGradient\n          gradientUnits=\"userSpaceOnUse\"\n          id=\"gradation1\"\n          x1=\"0\"\n          y1=\"0\"\n          x2=\"100\"\n          y2=\"0\"\n          spreadMethod=\"pad\"\n        >\n          <stop offset=\"0%\" stop-color=\"#B7C7E9\" />\n          <stop offset=\"100%\" stop-color=\"#22b2cc\" />\n        </linearGradient>\n        <rect\n          x=\"0\"\n          y=\"0\"\n          v-bind:width=\"out_level\"\n          height=\"3\"\n          fill=\"url(#gradation1)\"\n        />\n      </svg>\n      <span>SP</span>\n    </div>\n  </div>\n</template>\n\n<script>\nconst AudioContext = window.AudioContext || window.webkitAudioContext;\nexport default {\n  data() {\n    return {\n      in_level: 0,\n      // out_level: 0,\n      audio_ctx: null,\n      clearId: {},\n    };\n  },\n  computed: {\n    local_audio_stream() {\n      return this.$store.getters[\"rtc/local_audio_stream\"];\n    },\n    remote_audio_stream() {\n      return this.$store.getters[\"rtc/remote_audio_stream\"];\n    },\n    out_level() {\n      return this.$store.getters[\"rtc/out_level\"];\n    },\n  },\n  watch: {\n    // 送信音声ストリームの変化を検出して、再初期化を行う。\n    local_audio_stream() {\n      if (this.local_audio_stream) {\n        this.in_init(this.local_audio_stream);\n        this.clearId[\"get_in_level\"] = setInterval(() => {\n          this.get_in_level();\n        }, 200);\n      } else {\n        clearInterval(this.clearId[\"get_in_level\"]);\n      }\n    },\n    // 送信音声ストリームの変化を検出して、再初期化を行う。\n    remote_audio_stream() {\n      if (this.remote_audio_stream) {\n        this.out_init(this.remote_audio_stream);\n        this.clearId[\"get_out_level\"] = setInterval(() => {\n          this.get_out_level();\n        }, 200);\n      } else {\n        this.$store.commit(\"rtc/set_out_level\", 0);\n        clearInterval(this.clearId[\"get_out_level\"]);\n      }\n    },\n  },\n  methods: {\n    in_init(stream) {\n      // const AudioContext = window.AudioContext || window.webkitAudioContext;\n      if (stream.active == false) return;\n\n      this.audio_ctx = new AudioContext();\n      const input = this.audio_ctx.createMediaStreamSource(stream);\n      this.in_analyser = this.audio_ctx.createAnalyser();\n      input.connect(this.in_analyser);\n    },\n    out_init(stream) {\n      if (stream.active == false) return;\n\n      const input = this.audio_ctx.createMediaStreamSource(stream);\n      this.out_analyser = this.audio_ctx.createAnalyser();\n      input.connect(this.out_analyser);\n    },\n    get_in_level() {\n      const times = new Uint8Array(this.in_analyser.fftSize);\n      this.in_analyser.getByteTimeDomainData(times);\n      // どうも、正側の最大値のみを拾って、0～1間で正規化している様子。\n      this.in_level =\n        ((times.reduce((acc, val) => (val > acc ? val : acc), 128) - 128) /\n          127) *\n        100;\n    },\n    get_out_level() {\n      const times = new Uint8Array(this.out_analyser.fftSize);\n      this.out_analyser.getByteTimeDomainData(times);\n      // どうも、正側の最大値のみを拾って、0～1間で正規化している様子。\n      const out_level =\n        ((times.reduce((acc, val) => (val > acc ? val : acc), 128) - 128) /\n          127) *\n        100;\n      this.$store.commit(\"rtc/set_out_level\", out_level);\n    },\n  },\n  beforeDestroy() {\n    Object.keys(this.clearId).forEach((key) => {\n      clearInterval(this.clearId[key]);\n    });\n  },\n};\n</script>\n\n<style>\ndiv#levelField {\n  position: absolute;\n  left: 0;\n  top: 45vh;\n  width: 86%;\n  margin-left: 7%;\n  margin-right: 7%;\n  height: 1.2rem;\n  font-size: 0.5rem;\n}\ndiv#levelField div {\n  position: relative;\n  width: 100%;\n  height: 0.6rem;\n}\ndiv#levelField span {\n  position: absolute;\n  top: 0;\n  left: 0;\n  color: white;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LevelField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LevelField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LevelField.vue?vue&type=template&id=4b4c688e&\"\nimport script from \"./LevelField.vue?vue&type=script&lang=js&\"\nexport * from \"./LevelField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LevelField.vue?vue&type=style&index=0&id=4b4c688e&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"nosel\",attrs:{\"id\":\"timeDisp\"}},[_vm._v(_vm._s(_vm.timeStr))])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"timeDisp\" class=\"nosel\">{{ timeStr }}</div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      timeSec: 0,\n      timer_id: null,\n    };\n  },\n  watch: {\n    at_send() {\n      if (this.at_send) {\n        this.startTimer();\n      } else {\n        this.stopTimer();\n      }\n    },\n    at_recv() {\n      if (this.at_recv) {\n        this.startTimer();\n      } else {\n        this.stopTimer();\n      }\n    },\n  },\n  computed: {\n    at_send() {\n      return this.$store.getters[\"ptt/pttActive\"];\n    },\n    at_recv() {\n      return this.$store.getters[\"ptt/pttRecv\"];\n    },\n    timeStr() {\n      let s = this.timeSec;\n      const s1 = s % 10;\n      s = (s - s1) / 10;\n      const s2 = s % 6;\n      s = (s - s2) / 6;\n      const m1 = s % 10;\n      s = (s - m1) / 10;\n      const m2 = s % 6;\n      return \"\" + m2 + m1 + \":\" + s2 + s1;\n    },\n  },\n  methods: {\n    startTimer() {\n      if (this.timer_id != null) {\n        clearInterval(this.timer_id);\n        this.timer_id = null;\n      }\n      this.timeSec = 0;\n      this.timer_id = setInterval(() => {\n        this.timeSec++;\n        // this.$store.commit(\"setTimeStr\", this.timeStr);\n      }, 1000);\n    },\n    stopTimer() {\n      if (this.timer_id != null) {\n        clearInterval(this.timer_id);\n        this.timer_id = null;\n      }\n      this.timeSec = 0;\n      // this.$store.commit(\"setTimeStr\", this.timeStr);\n    },\n  },\n  beforeDestroy() {\n    clearInterval(this.timer_id);\n  },\n};\n</script>\n<style scoped>\ndiv#timeDisp {\n  position: absolute;\n  top: 28vh;\n  width: 100%;\n  height: 7rh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TimeDisp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TimeDisp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TimeDisp.vue?vue&type=template&id=3817d2ba&scoped=true&\"\nimport script from \"./TimeDisp.vue?vue&type=script&lang=js&\"\nexport * from \"./TimeDisp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TimeDisp.vue?vue&type=style&index=0&id=3817d2ba&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3817d2ba\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"baseField\">\n    <phoneButton v-if=\"isLandscape\"></phoneButton>\n    <GroupSelect v-if=\"isLandscape\" class=\"base_group_select\"></GroupSelect>\n    <time-disp></time-disp>\n    <div id=\"statusDisp\" class=\"nosel\">{{ callStatus }}</div>\n    <levelField></levelField>\n  </div>\n</template>\n\n<script>\nimport PhoneButton from \"../components/PhoneButton.vue\";\nimport LevelField from \"../components/LevelField.vue\";\nimport GroupSelect from \"../components/GroupSelect\";\nimport TimeDisp from \"@/components/TimeDisp.vue\";\n\nexport default {\n  data() {\n    return {\n      phoneStatusNo: 0,\n      phoneStatusStr: \"\",\n      renewTime: new Date(),\n    };\n  },\n  components: {\n    levelField: LevelField,\n    phoneButton: PhoneButton,\n    GroupSelect: GroupSelect,\n    TimeDisp: TimeDisp,\n  },\n  methods: {\n    logDebug(msg) {\n      this.$store.state.logger.debug(msg);\n    },\n    log(msg) {\n      this.$store.state.logger.info(msg);\n    },\n    logError(msg) {\n      this.$store.state.logger.error(msg);\n    },\n  },\n  computed: {\n    callStatus() {\n      return this.$store.getters[\"ptt/callStatus\"];\n    },\n    isLandscape() {\n      return this.$store.state.screen_landscape;\n    },\n  },\n};\n</script>\n\n<style>\n.base_group_select {\n  top: 8vh;\n  position: absolute;\n  width: 100%;\n}\n\ndiv#statusDisp {\n  position: absolute;\n  top: 35vh;\n  width: 100%;\n  height: 7rh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 1.5rem;\n}\n\ndiv#speakerDisp {\n  position: absolute;\n  top: 56vh;\n  width: 100%;\n  height: 7rh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\ndiv#speakerDisp img {\n  width: 2rem;\n  height: 2rem;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BaseField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BaseField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BaseField.vue?vue&type=template&id=4423fcfa&\"\nimport script from \"./BaseField.vue?vue&type=script&lang=js&\"\nexport * from \"./BaseField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BaseField.vue?vue&type=style&index=0&id=4423fcfa&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"mapField\"}},[_c('mapMenu',{ref:\"mapMenu\"}),(!_vm.isLandscape)?_c('phoneButton'):_vm._e(),_c('rightButton',{on:{\"toCenter\":_vm.toCenter}}),_c('div',{staticStyle:{\"display\":\"none\"}},[_c('div',{attrs:{\"id\":\"iconMenu\"}},[_c('button',{staticClass:\"mapBtn\",attrs:{\"id\":\"mapVideoBtn\"},on:{\"click\":_vm.onMapVideoBtn}},[_c('img',{attrs:{\"src\":require(\"@/assets/menu_video@0,5x.png\")}})]),_c('button',{staticClass:\"mapBtn\",attrs:{\"id\":\"mapTelBtn\"},on:{\"click\":_vm.onMapTelBtn}},[_c('img',{attrs:{\"src\":require(\"@/assets/menu_tel@0,5x.png\")}})]),_c('button',{staticClass:\"mapBtn\",attrs:{\"id\":\"mapSipBtn\"},on:{\"click\":_vm.onMapSipBtn}},[_c('img',{attrs:{\"src\":require(\"@/assets/menu_tel@0,5x.png\")}})])])]),(_vm.is_dialog_visible)?_c('modalDialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"}),_c('span',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(_vm._s(_vm.dialog_msg))]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.close_msg_dialog}},[_vm._v(\"はい\")])])]):_vm._e(),(_vm.is_serveralive_dialog_visible)?_c('modalDialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"}),_c('span',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(_vm._s(_vm.serveralive_dialog_msg))]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"})]):_vm._e(),_c('rtc-group',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.is_remote_showed),expression:\"is_remote_showed\"}]}),_c('rtc-private',{ref:\"rtc_private\"}),_vm._l((_vm.layerComponents),function(layer){return [_c(layer.vue,{key:layer.id,tag:\"component\"})]}),_c('review-comp',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.review),expression:\"review\"}]}),(_vm.$store.state.callrec)?_c('callRec'):_vm._e(),_c('mapClickList'),_c('viewLayersDevice'),_c('viewLayersLightbox'),_c('stream-io',{ref:\"stream_io\"}),_c('div',{staticClass:\"credit\"},[_vm._v(\"©OpenStreetMap contributors\")])],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"rightButtonDiv\"}},[_c('button',{ref:\"location_btn\",staticClass:\"circleBtn\",class:_vm.btnClass,attrs:{\"title\":\"自アイコン追従\"},on:{\"click\":_vm.toggle_center_mode}},[_c('img',{attrs:{\"src\":require(\"@/assets/location10.png\"),\"alt\":\"Center Button\"}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"rightButtonDiv\">\n    <!-- <button v-on:click=\"$emit('toCenter')\" class=\"circleBtn\"> -->\n    <button\n      @click=\"toggle_center_mode\"\n      ref=\"location_btn\"\n      class=\"circleBtn\"\n      :class=\"btnClass\"\n      title=\"自アイコン追従\"\n    >\n      <img src=\"@/assets/location10.png\" alt=\"Center Button\" />\n    </button>\n  </div>\n</template>\n\n<script>\nexport default {\n  computed: {\n    btnClass() {\n      return this.$store.state.center_trace > 0 ? \"circleBtnSelected\" : null;\n    },\n  },\n  // mounted() {\n  //   if (this.$store.state.center_trace > 0) {\n  //     this.$refs.location_btn.classList.add(\"circleBtnSelected\");\n  //   }\n  // },\n  methods: {\n    toggle_center_mode() {\n      this.$store.state.sound_on();\n      if (this.$store.state.center_trace == 0) {\n        this.$store.commit(\"setCenterTrace\", Date.now());\n        // this.$refs.location_btn.classList.add(\"circleBtnSelected\");\n      } else {\n        this.$store.commit(\"setCenterTrace\", 0);\n        // this.$refs.location_btn.classList.remove(\"circleBtnSelected\");\n      }\n    },\n  },\n};\n</script>\n\n<style>\ndiv#rightButtonDiv {\n  /* position: absolute; */\n  position: fixed;\n  right: 10px;\n  bottom: 20px;\n  z-index: 10;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RightButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RightButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RightButton.vue?vue&type=template&id=76d7e913&\"\nimport script from \"./RightButton.vue?vue&type=script&lang=js&\"\nexport * from \"./RightButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RightButton.vue?vue&type=style&index=0&id=76d7e913&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"mapLayerMenu\"}},[_c('div',[_c('button',{staticClass:\"circleBtn\",attrs:{\"title\":_vm.backButtonTitle},on:{\"click\":_vm.backBtnClick}},[_c('img',{attrs:{\"src\":_vm.backButtonSrc}})])]),_vm._l((_vm.menus),function(layer){return [_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showMapMenu && !_vm.inSubMenu && layer.addMenu),expression:\"showMapMenu && !inSubMenu && layer.addMenu\"}],key:layer.name},[_c('button',{staticClass:\"circleBtn\",attrs:{\"title\":layer.displayname},on:{\"click\":function($event){return _vm.activate(layer)}}},[_c('img',{attrs:{\"src\":layer.icon}})])])]})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"sytle\":\"position: relative\"}},[(_vm.show_daialog)?_c('modalDialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.share_owner))]),_vm._v(\"より共有の開始が行われました。\")]),_c('span',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(\"共有を開始しますか？\")]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.share_start_yes}},[_vm._v(\" 開始 \")]),_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.share_start_no}},[_vm._v(\" キャンセル \")])])]):_vm._e(),(_vm.$store.getters['amt/exit_dialog'])?_c('modalDialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"共有機能\")]),_c('span',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(\"共有を停止しますか？\")]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.exit_dialog_no()}}},[_vm._v(\" キャンセル \")]),_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.exit_dialog_yes()}}},[_vm._v(\"停止\")])])]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.inSubMenu && _vm.menu_enable),expression:\"!inSubMenu && menu_enable\"}],staticClass:\"share_submenu\",attrs:{\"id\":\"share_menu\"}},[_c('div',{staticClass:\"writeItem\"},[_c('div',[_c('button',{staticClass:\"circleBtn subMenu\",class:_vm.isActive ? 'circleBtnSelected' : null,attrs:{\"title\":\"デスクトップ共有\"},on:{\"click\":_vm.active_share_desktop}},[_c('img',{attrs:{\"src\":require(\"./assets/share_desktop@1x.png\")}})])])]),_c('div',{staticClass:\"writeItem\"},[_c('div',[_c('button',{staticClass:\"circleBtn subMenu\",attrs:{\"title\":\"PDF共有\"},on:{\"click\":_vm.active_share_pdf}},[_c('img',{attrs:{\"src\":require(\"./assets/share_pdf@1x.png\")}})])])])]),_c('div',{staticClass:\"pdf_page_menu\"},[(_vm.page_menu)?_c('div',{staticStyle:{\"display\":\"flex\"},attrs:{\"id\":\"pdf_page_menu\"}},[_c('div',{staticClass:\"writeItem\"},[_c('div',[_c('button',{staticClass:\"circleBtn page_menu_left\",class:_vm.isActive ? 'circleBtnSelected' : null,attrs:{\"title\":\"前のページ\"},on:{\"click\":_vm.pdf.prev}},[_c('img',{attrs:{\"src\":require(\"./assets/share_back@1x.png\")}})])])]),_c('div',{staticClass:\"writeItem\"},[_c('div',[_c('button',{staticClass:\"circleBtn page_menu_right\",class:_vm.isActive ? 'circleBtnSelected' : null,attrs:{\"title\":\"次のページ\"},on:{\"click\":_vm.pdf.next}},[_c('img',{attrs:{\"src\":require(\"./assets/share_next@1x.png\")}})])])])]):_vm._e(),(_vm.scale_menu)?_c('div',{staticStyle:{\"display\":\"flex\"},attrs:{\"id\":\"pdf_page_menu\"}},[_c('div',[_c('div',[_c('button',{staticClass:\"circleBtn\",attrs:{\"title\":\"縮小\"},on:{\"click\":_vm.scale_dec}},[_c('img',{attrs:{\"src\":require(\"./assets/share_zoom_out@1x.png\")}})])])]),_c('div',[_c('div',[_c('button',{staticClass:\"circleBtn\",attrs:{\"title\":\"拡大\"},on:{\"click\":_vm.scale_inc}},[_c('img',{attrs:{\"src\":require(\"./assets/share_zoom_in@1x.png\")}})])])])]):_vm._e()]),_c('canvasDraw',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.inSubMenu),expression:\"inSubMenu\"}],ref:\"canvas_draw\",attrs:{\"w\":_vm.w,\"h\":_vm.h,\"page\":_vm.page},on:{\"move\":_vm.move}}),_c('canvas',{ref:\"pdf_canvas\",staticClass:\"pdf_canvas\",style:(_vm.canvas_style)}),_c('video',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show_video),expression:\"show_video\"}],ref:\"desktop_video\",staticClass:\"desktop_video\",style:(_vm.canvas_style),attrs:{\"playsinline\":\"\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable */\n// import pdfjsLib from \"pdfjs-dist\";\nimport pdfjsLib from \"pdfjs-dist/webpack\";\n// pdfjsLib.GlobalWorkerOptions.workerSrc = require('pdfjs-dist/build/pdf.worker.min.js');\n\nexport default function (elm, url) {\n  this.canvas = elm || document.createElement(\"canvas\");\n  this.ctx = this.canvas.getContext(\"2d\");\n  this.page_num = 1;\n  this.scale = 1;\n  this.started = false;\n  // const pdfjsLib = require(\"pdfjs-dist/webpack\");\n\n  this.readFileAsync = async (file_obj) => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => {\n        resolve(reader.result);\n      };\n      reader.onerror = reject;\n      reader.readAsArrayBuffer(file_obj);\n    });\n  };\n\n  this.callback = {};\n  this.on = (key, func_name) => {\n    this.callback[key] = func_name;\n  };\n  this.off = (key) => {\n    delete this.callback[key];\n  };\n  this.all_off = () => {\n    Object.keys(this.callback).forEach((key) => {\n      this.off(key);\n    });\n  };\n\n  this.renderPDF = async () => {\n    try {\n      const page = await this.pdfDoc.getPage(this.page_num);\n      const viewport = page.getViewport({ scale: this.scale });\n\n      this.canvas.height = viewport.height;\n      this.canvas.width = viewport.width;\n\n      const renderTask = await page.render({\n        canvasContext: this.ctx,\n        viewport: viewport,\n      }).promise;\n      // レンダリング完了後に実行される\n      console.log(\"Page rendered\");\n      if (!this.started) {\n        this.callback[\"start\"]();\n        this.started = true;\n      }\n      this.callback[\"resize\"](this.canvas.width, this.canvas.height);\n      this.callback[\"page\"](this.page_num);\n      await page.cleanup();\n    } catch (err) {\n      console.log(`ERROR:${err}`);\n    }\n  };\n\n  this.readFileAsync_url = async (url) => {\n    const res = await fetch(url);\n    const blob = await res.blob();\n    const fileData = await this.readFileAsync(blob);\n    this.pdfDoc = await pdfjsLib.getDocument({ data: fileData });\n    this.renderPDF();\n  };\n\n  if (url) {\n    this.readFileAsync_url(url);\n  } else {\n    this.input = document.createElement(\"input\");\n    this.input.type = \"file\";\n    this.input.accept = \"application/pdf\";\n    this.input.style = \"display: none\";\n    this.input.onchange = async () => {\n      const fileData = await this.readFileAsync(this.input.files[0]);\n      this.pdfDoc = await pdfjsLib.getDocument({ data: fileData }).promise;\n      this.renderPDF();\n    };\n    this.open = () => this.input.click();\n  }\n  this.close = () => {\n    this.pdfDoc.cleanup();\n    this.pdfDoc.destroy();\n    this.pdfDoc = null;\n    this.all_off();\n  };\n  this.next = () => {\n    this.page_num =\n      this.page_num < this.pdfDoc.numPages ? this.page_num + 1 : this.page_num;\n    this.renderPDF();\n  };\n  this.prev = () => {\n    this.page_num = this.page_num > 1 ? this.page_num - 1 : this.page_num;\n    this.renderPDF();\n  };\n  this.page = (page_num, val) => {\n    if (val) this.set_scale(val);\n    if (0 < page_num && this.pdfDoc.numPages >= page_num) {\n      this.page_num = page_num;\n      this.renderPDF();\n    }\n  };\n  this.set_scale = (val) => {\n    this.scale = val;\n  };\n  this.canvas.onclick = this.next;\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"sytle\":\"position: relative\"}},[_c('div',{staticClass:\"share_submenu\",attrs:{\"id\":\"writeMenu\"}},[_c('div',{staticClass:\"writeItem\"},[_c('div',{staticStyle:{\"position\":\"relative\"}},[_c('button',{staticClass:\"circleBtn\",class:_vm.selected_kind == 'size' ? 'circleBtnSelected' : null,attrs:{\"title\":\"太さ調節\"},on:{\"click\":_vm.sizeBtnClick}},[_c('img',{attrs:{\"src\":require(\"@/assets/menu_size@1x.png\"),\"alt\":\"Size Button\"}})]),_c('div',{staticClass:\"batch\",class:_vm.selected_kind == 'size' ? 'circleBtnSelected' : null},[_c('span',[_vm._v(_vm._s(_vm.drawLineSize))])])]),(_vm.selected_kind == 'size')?_c('div',{staticClass:\"writeContent\",attrs:{\"id\":\"slideContent\"}},[_c('vue-slider',{ref:\"slider\",attrs:{\"value\":_vm.drawLineSize,\"data\":_vm.lineSizeTicks,\"marks\":true},on:{\"change\":_vm.change_size}})],1):_vm._e()]),_c('div',{staticClass:\"writeItem\"},[_c('div',[_c('button',{ref:\"colorBtn\",staticClass:\"circleBtn\",class:_vm.selected_kind == 'color' ? 'circleBtnSelected' : null,style:({ backgroundColor: _vm.drawLineColor }),attrs:{\"title\":\"色選択\"},on:{\"click\":_vm.colorBtnClick}},[_c('img',{attrs:{\"src\":require(\"@/assets/menu_color@1x.png\"),\"alt\":\"Color Button\"}})])]),(_vm.selected_kind == 'color')?_c('div',{staticClass:\"writeContent colorpicker\"},[(_vm.picker == 'chrome')?_c('chrome-picker',{ref:\"colorPicker\",attrs:{\"value\":_vm.drawLineColor,\"disableAlpha\":true},on:{\"input\":_vm.change_color}}):_c('compact-picker',{ref:\"colorPicker\",attrs:{\"value\":_vm.drawLineColor,\"disableAlpha\":true},on:{\"input\":_vm.change_color}})],1):_vm._e()]),_c('div',[_c('div',[_c('button',{staticClass:\"circleBtn\",class:_vm.mode_move ? 'circleBtnDisabled' : null,attrs:{\"title\":_vm.mode_write ? 'ペン' : '消しゴム'},on:{\"click\":_vm.toggle_mode_write}},[(_vm.mode_write)?_c('img',{attrs:{\"src\":require(\"@/assets/menu_hand@1x.png\")}}):_c('img',{attrs:{\"src\":require(\"@/assets/menu_eraser@1x.png\")}})])])]),_c('div',[_c('div',[_c('button',{staticClass:\"circleBtn\",class:_vm.mode_move ? 'circleBtnSelected' : null,attrs:{\"title\":\"移動\"},on:{\"click\":_vm.toggle_mode_move}},[_c('img',{staticStyle:{\"width\":\"auto\"},attrs:{\"src\":require(\"./assets/share_scroll@1x.png\")}})])])])]),_c('canvas',{ref:\"canvas_draw\",staticClass:\"canvas_draw\",style:(_vm.pos_style),attrs:{\"width\":_vm.w,\"height\":_vm.h}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div sytle=\"position: relative\">\n    <div id=\"writeMenu\" class=\"share_submenu\">\n      <!-- ペン太さボタン -->\n      <div class=\"writeItem\">\n        <div style=\"position: relative\">\n          <button\n            v-on:click=\"sizeBtnClick\"\n            v-bind:class=\"selected_kind == 'size' ? 'circleBtnSelected' : null\"\n            class=\"circleBtn\"\n            title=\"太さ調節\"\n          >\n            <img src=\"@/assets/menu_size@1x.png\" alt=\"Size Button\" />\n          </button>\n          <div\n            v-bind:class=\"selected_kind == 'size' ? 'circleBtnSelected' : null\"\n            class=\"batch\"\n          >\n            <span>{{ drawLineSize }}</span>\n          </div>\n        </div>\n        <div\n          id=\"slideContent\"\n          class=\"writeContent\"\n          v-if=\"selected_kind == 'size'\"\n        >\n          <vue-slider\n            ref=\"slider\"\n            v-bind:value=\"drawLineSize\"\n            v-bind:data=\"lineSizeTicks\"\n            v-bind:marks=\"true\"\n            v-on:change=\"change_size\"\n          ></vue-slider>\n        </div>\n      </div>\n      <!-- ペン色ボタン -->\n      <div class=\"writeItem\">\n        <div>\n          <button\n            ref=\"colorBtn\"\n            v-on:click=\"colorBtnClick\"\n            v-bind:class=\"selected_kind == 'color' ? 'circleBtnSelected' : null\"\n            v-bind:style=\"{ backgroundColor: drawLineColor }\"\n            class=\"circleBtn\"\n            title=\"色選択\"\n          >\n            <img src=\"@/assets/menu_color@1x.png\" alt=\"Color Button\" />\n          </button>\n        </div>\n        <div class=\"writeContent colorpicker\" v-if=\"selected_kind == 'color'\">\n          <chrome-picker\n            ref=\"colorPicker\"\n            v-bind:value=\"drawLineColor\"\n            v-bind:disableAlpha=\"true\"\n            v-on:input=\"change_color\"\n            v-if=\"picker == 'chrome'\"\n          ></chrome-picker>\n          <compact-picker\n            ref=\"colorPicker\"\n            v-bind:value=\"drawLineColor\"\n            v-bind:disableAlpha=\"true\"\n            v-on:input=\"change_color\"\n            v-else\n          ></compact-picker>\n        </div>\n      </div>\n      <!-- ペン/消しゴムボタン -->\n      <div>\n        <div>\n          <button\n            v-on:click=\"toggle_mode_write\"\n            v-bind:class=\"mode_move ? 'circleBtnDisabled' : null\"\n            class=\"circleBtn\"\n            v-bind:title=\"mode_write ? 'ペン' : '消しゴム'\"\n          >\n            <img v-if=\"mode_write\" src=\"@/assets/menu_hand@1x.png\" />\n            <img v-else src=\"@/assets/menu_eraser@1x.png\" />\n          </button>\n        </div>\n      </div>\n      <!-- <div>\n        <div>\n          <button\n            v-on:click=\"move_pen_erase\"\n            v-bind:class=\"\n              mode_pen == 'erase' || mode_pen == 'pen'\n                ? 'circleBtnSelected'\n                : null\n            \"\n            class=\"circleBtn\"\n          >\n            <img\n              v-if=\"mode_pen === 'erase'\"\n              src=\"@/assets/menu_eraser@1x.png\"\n            />\n            <img\n              v-else-if=\"mode_pen === 'pen'\"\n              src=\"@/assets/menu_hand@1x.png\"\n            />\n            <img\n              v-else\n              src=\"./assets/share_scroll@1x.png\"\n              style=\"width: auto\"\n            />\n          </button>\n        </div>\n      </div> -->\n      <!-- 移動ボタン -->\n      <div>\n        <div>\n          <button\n            v-on:click=\"toggle_mode_move\"\n            v-bind:class=\"mode_move ? 'circleBtnSelected' : null\"\n            class=\"circleBtn\"\n            title=\"移動\"\n          >\n            <img src=\"./assets/share_scroll@1x.png\" style=\"width: auto\" />\n          </button>\n        </div>\n      </div>\n    </div>\n    <canvas\n      ref=\"canvas_draw\"\n      class=\"canvas_draw\"\n      :width=\"w\"\n      :height=\"h\"\n      :style=\"pos_style\"\n    ></canvas>\n  </div>\n</template>\n<script>\n/* eslint-disable */\n// import $store from \"@/store\";\nimport { shareEvent } from \"./index.js\";\nimport VueSlider from \"vue-slider-component\";\nimport \"vue-slider-component/theme/default.css\";\nimport { Compact } from \"vue-color\";\nimport { Chrome } from \"vue-color\";\n\nexport default {\n  data() {\n    return {\n      sdb: null,\n      ctx: null,\n      show_share_submenu: false,\n      selected_kind: null,\n      picker: \"\",\n      drawLineSize: 2,\n      lineSizeTicks: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\n      drawLineColor: this.$store.state.draw_color,\n\n      color: \"#F44E3B\",\n      size: 2,\n      at_erase: false,\n      at_line: false,\n      at_move: false,\n      //------------------------------------------------------------------\n      // 変更 2020/09/01\n      // メニューとして、移動/ペン/消しゴムが一つであったが、移動とペン/消しゴムの二つに分離する。\n      // それに伴い、モード値もmode_move_penとmode_write_eraseの二種類にする。\n      // mode_pen: \"move\", // move, pen, erase\n      mode_move: false, // true=移動/false=非移動\n      mode_write: true, // true=ペン/false=消しゴム\n      //------------------------------------------------------------------\n      pos_style: {\n        top: \"0px\",\n        left: \"0px\",\n      },\n      last_p: null,\n      socketio: null,\n      // ----------------------------------------------------------------\n      // array_lines: [line0, line1, line2, ....];\n      // line       : [point0, point1, point2, ...];\n      // point0     : { at_start: UUID, page: page番号,\n      //                color: 16進色番号, size: ペン幅px, x: x座標, y: y座標, w: 描画領域幅, h: 描画領域縦};\n      // point1..N  : { color: 16進色番号, size: ペン幅px, x: x座標, y: y座標, w: 描画領域幅, h: 描画領域縦};\n      // remote_array_lines: { リモートID1: array_lines, リモートID2: array_lines, ...};\n      //\n      // lineの先頭にあるpoint情報には、pageとして、page番号を持つ。\n      // lineの先頭にあるpoint情報には、at_startとして、UUIDによる識別子を持つ。\n      // line削除では、カーソル座標とlineの各pointの距離算出を行い、10px以下を「hit」として、\n      // そのline[0].at_startを拾い、削除対象とする。\n      // ----------------------------------------------------------------\n      page: 1,\n      array_lines: [],\n      remote_array_lines: {},\n      move_timer_id: null,\n      array_send_point: [],\n      clearId: {},\n    };\n  },\n  components: {\n    vueSlider: VueSlider,\n    \"chrome-picker\": Chrome,\n    \"compact-picker\": Compact,\n  },\n  props: [\"w\", \"h\"],\n  methods: {\n    _uuidv4() {\n      return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n        var r = (Math.random() * 16) | 0,\n          v = c == \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n      });\n    },\n    isTouch(ev) {\n      // return \"ontouchstart\" in window.document;\n      return (\n        ev.type == \"touchstart\" ||\n        ev.type == \"touchmove\" ||\n        ev.type == \"touchend\"\n      );\n    },\n    getPoint(ev) {\n      let x, y;\n      if (this.isTouch(ev)) {\n        x = ev.touches[0].pageX;\n        y = ev.touches[0].pageY;\n      } else {\n        x = ev.pageX;\n        y = ev.pageY;\n      }\n      // 要素（canvas）の画面上の位置を取得する。\n      const elm_BCRect = this.sdb.getBoundingClientRect();\n      // 画面自体の絶対位置(window.pageYOffset)を加算して要素の絶対位置を算出\n      const elRect = {\n        left: elm_BCRect.left + window.pageXOffset,\n        top: elm_BCRect.top + window.pageYOffset,\n      };\n      return {\n        x: x - elRect.left,\n        y: y - elRect.top,\n        w: this.sdb.width,\n        h: this.sdb.height,\n        color: this.drawLineColor,\n        size: this.drawLineSize,\n      };\n    },\n    getPos(ev) {\n      let x, y;\n      if (this.isTouch(ev)) {\n        x = ev.touches[0].pageX;\n        y = ev.touches[0].pageY;\n      } else {\n        x = ev.pageX;\n        y = ev.pageY;\n      }\n      return {\n        x: x,\n        y: y,\n      };\n    },\n    // 保存された際のthis.sdb.width、heightから、現状のthis.sdb.width、heightに合わせて正規化されたpointにする。\n    ajust(p) {\n      return {\n        x: p.x * (this.sdb.width / p.w),\n        y: p.y * (this.sdb.height / p.h),\n      };\n    },\n    erase_hit(line, p) {\n      let hit = false;\n      line.forEach((line_p) => {\n        const point = this.ajust(line_p);\n        const dx = point.x - p.x;\n        const dy = point.y - p.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        if (distance < 10) {\n          hit = true;\n        }\n      });\n      return hit;\n    },\n    // 自端末でのerase時にhitが発生した場合、その際のpoint（これはカーソル座標）に\n    // p.erase_idとして、対象lineのline[0].at_start識別子を与えて、send_pointで\n    // リモート端末に送信し、削除を依頼する。\n    erase(array_lines, p) {\n      array_lines.forEach((line, index) => {\n        // 現在のページ番号でなければ抜ける。\n        if (line[0].page != this.page) return;\n\n        const judge = this.erase_hit(line, p);\n        if (judge) {\n          p.erase_id = line[0].at_start;\n          this.send_point(p);\n          array_lines.splice(index, 1);\n          return;\n        }\n      });\n    },\n    // -----------------------------------------------------------------------------------\n    // 2020/11/04 中村 修正\n    // 処理の軽量化\n    // ・単一point処理を複数point処理にしてsocketioのオーバヘッド量を軽減する\n    // ・同一グループ内userに個別に送信していたが、サーバ側のROOM配信に変更\n    send_point(point) {\n      this.array_send_point.push(point);\n    },\n    _send_points() {\n      if (this.array_send_point.length == 0) return;\n\n      const json = {\n        src: this.myId,\n        group_id: this.$store.state.activeId.id,\n        type: \"line\",\n        points: this.array_send_point,\n      };\n      this.socketio.emit(\"share_draw\", JSON.stringify(json));\n      this.array_send_point = [];\n    },\n    resize(w, h) {\n      this.sdb.width = w;\n      this.sdb.height = h;\n      // this.redraw();\n      console.log(\"Draw: ON_RESIZE\");\n    },\n    clear() {\n      this.ctx.clearRect(0, 0, this.sdb.width, this.sdb.height); // Clears the canvas\n    },\n    draw(array_lines) {\n      // this.clear();\n      array_lines.forEach((line) => {\n        // 現在のページ番号でなければ抜ける。\n        if (line[0].page != this.page) return;\n\n        this.ctx.beginPath();\n        this.ctx.strokeStyle = line[0].color;\n        this.ctx.lineJoin = this.ctx.lineCap = \"round\";\n        this.ctx.lineWidth = line[0].size;\n        for (let i = 0; i < line.length - 1; i++) {\n          let p1 = this.ajust(line[i]);\n          let p2 = this.ajust(line[i + 1]);\n          // let p3 = this.ajust(line[i + 2]);\n          this.ctx.moveTo(p1.x, p1.y);\n          this.ctx.lineTo(p2.x, p2.y);\n          // this.ctx.quadraticCurveTo(p2.x, p2.y, p3.x, p3.y);\n        }\n        this.ctx.stroke();\n      });\n    },\n    change_size(ev) {\n      console.log(ev);\n      this.drawLineSize = ev;\n    },\n    change_color(ev) {\n      console.log(ev);\n      this.drawLineColor = ev.hex;\n      // this.selected_kind = null;\n    },\n    sizeBtnClick() {\n      this.selected_kind = this.selected_kind == \"size\" ? null : \"size\";\n    },\n    colorBtnClick() {\n      this.selected_kind = this.selected_kind == \"color\" ? null : \"color\";\n    },\n    // eraserBtnClick() {\n    //   this.at_erase = !this.at_erase;\n    // },\n    // ----------------------------------------------------------------------------\n    // メニュー変更に伴い修正\n    // move_pen_erase() {\n    //   if (this.mode_pen == \"move\") {\n    //     this.mode_pen = \"pen\";\n    //   } else if (this.mode_pen == \"pen\") {\n    //     this.mode_pen = \"erase\";\n    //   } else {\n    //     this.mode_pen = \"move\";\n    //   }\n    // },\n    toggle_mode_move() {\n      this.mode_move = !this.mode_move;\n    },\n    toggle_mode_write() {\n      this.mode_write = !this.mode_write;\n    },\n    // ----------------------------------------------------------------------------\n    all_draw() {\n      this.clear();\n      this.draw(this.array_lines);\n      Object.keys(this.remote_array_lines).forEach((id) => {\n        this.draw(this.remote_array_lines[id]);\n      });\n    },\n    start(ev) {\n      ev.preventDefault();\n      const p = this.getPoint(ev);\n      // if (this.mode_pen == \"erase\") {\n      if (!this.mode_move && !this.mode_write) {\n        // if (this.at_erase) {\n        // erase処理でarray_lines上より、対象lineを削除後、一旦、白紙化して、再描画する。\n        this.at_erase = true;\n        p.at_erase = true;\n        this.erase(this.array_lines, this.ajust(p));\n        // -----------------------------------------------------------------------\n        // 削除処理で、他端末の描画LINEも対象とする。\n        Object.keys(this.remote_array_lines).forEach((id) => {\n          this.erase(this.remote_array_lines[id], this.ajust(p));\n        });\n        // -----------------------------------------------------------------------\n        this.clear();\n        this.draw(this.array_lines);\n        Object.keys(this.remote_array_lines).forEach((id) => {\n          this.draw(this.remote_array_lines[id]);\n        });\n        this.send_point(p);\n        // } else if (this.mode_pen == \"pen\") {\n      } else if (!this.mode_move && this.mode_write) {\n        // } else {\n        p.at_start = this._uuidv4();\n        p.page = this.page;\n        this.at_line = true;\n        this.array_lines.push([p]);\n        // this.tick_draw();\n        this.send_point(p);\n        // } else if (this.mode_pen == \"move\") {\n      } else if (this.mode_move) {\n        this.at_move = true;\n        this.last_p = this.getPos(ev);\n      }\n    },\n    next(ev) {\n      if (this.move_timer_id) return;\n      this.move(ev);\n      this.move_timer_id = setTimeout(() => {\n        this.move_timer_id = null;\n      }, 10);\n    },\n    move(ev) {\n      ev.preventDefault();\n      const p = this.getPoint(ev); // pは表示版位置\n      // if (this.mode_pen == \"erase\") {\n      if (!this.mode_move && !this.mode_write) {\n        if (this.at_erase) {\n          p.at_erase = true;\n          this.erase(this.array_lines, this.ajust(p));\n          // -----------------------------------------------------------------------\n          // 削除処理で、他端末の描画LINEも対象とする。\n          Object.keys(this.remote_array_lines).forEach((id) => {\n            this.erase(this.remote_array_lines[id], this.ajust(p));\n          });\n          // -----------------------------------------------------------------------\n          this.clear();\n          this.draw(this.array_lines);\n          Object.keys(this.remote_array_lines).forEach((id) => {\n            this.draw(this.remote_array_lines[id]);\n          });\n          this.send_point(p);\n        }\n        // } else if (this.mode_pen == \"pen\") {\n      } else if (!this.mode_move && this.mode_write) {\n        if (this.at_line) {\n          p.at_line = true;\n          this.array_lines[this.array_lines.length - 1].push(p);\n\n          this.clear();\n          this.draw(this.array_lines);\n          Object.keys(this.remote_array_lines).forEach((id) => {\n            this.draw(this.remote_array_lines[id]);\n          });\n          this.send_point(p);\n        }\n        // } else if (this.mode_pen == \"move\") {\n      } else if (this.mode_move) {\n        if (this.at_move) {\n          const pos = this.getPos(ev);\n          console.log(`pos.x=${pos.x} pos.y=${pos.y}`);\n          this.pos_style.top =\n            parseInt(this.pos_style.top) + (pos.y - this.last_p.y) + \"px\";\n          this.pos_style.left =\n            parseInt(this.pos_style.left) + (pos.x - this.last_p.x) + \"px\";\n          this.$emit(\"move\", this.pos_style);\n          this.last_p = pos;\n        }\n      }\n    },\n    end(ev) {\n      ev.preventDefault();\n      this.at_line = false;\n      this.at_erase = false;\n      this.at_move = false;\n      this.last_p = null;\n    },\n  },\n  mounted() {\n    this.socketio = this.$store.state.socketio;\n\n    this.sdb = this.$refs.canvas_draw;\n    this.ctx = this.sdb.getContext(\"2d\");\n\n    this.sdb.addEventListener(\"mousedown\", this.start, false);\n    this.sdb.addEventListener(\"mousemove\", this.move, false);\n    this.sdb.addEventListener(\"mouseup\", this.end, false);\n    this.sdb.addEventListener(\"mouseleave\", this.end, false);\n    this.sdb.addEventListener(\"touchstart\", this.start, false);\n    this.sdb.addEventListener(\"touchmove\", this.move, false);\n    this.sdb.addEventListener(\"touchend\", this.end, false);\n\n    // カラーピッカーをユーザのjsonファイルから選択\n    this.picker = this.$store.state.color_picker;\n\n    this.clearId[\"_send_points\"] = setInterval(this._send_points, 100);\n\n    // \"share_draw\"イベントで受信したjsonデータ（json_ev）に対して\n    // (1)宛先が自分か？\n    // (2)送信元のremote_array_linesが無ければ[]で用意\n    // (3)受信したpoint情報にerase_idがあれば、削除処理\n    // (4)受信したpoint情報にat_startがあれば、新しいlineとして、配列ごと登録\n    // (5)上記(3),(4)に該当しなければ、最後のlineの最後のpointとして登録\n    // 2021.04.22 中村\n    // json_evにtypeを追加する。線描画はtype=\"line\"とする\n    this.socketio.on(\"share_draw\", (json_ev) => {\n      const data = JSON.parse(json_ev);\n      if (data.type != \"line\") return; //ここを追加\n      if (data.group_id == this.$store.state.activeId.id) {\n        if (!this.remote_array_lines[data.src]) {\n          this.remote_array_lines[data.src] = [];\n        }\n        const r_lines = this.remote_array_lines[data.src];\n\n        // -----------------------------------------------------------------\n        // 追加 20201103 中村\n        // 受信データ:単一point処理から複数のpoint処理に変更。\n        data.points.forEach((point) => {\n          if (point.erase_id) {\n            r_lines.forEach((line, index) => {\n              if (line[0].at_start == point.erase_id) {\n                r_lines.splice(index, 1);\n                return;\n              }\n            });\n            //----------------------------------------------------------------\n            // 追加 20200901 中村\n            // 他端末からの削除に対応するため、\n            // 受信したpoint情報が削除処理であった場合、自分のarray_linesも対象にする。\n            this.array_lines.forEach((line, index) => {\n              if (line[0].at_start == point.erase_id) {\n                this.array_lines.splice(index, 1);\n                return;\n              }\n            });\n            Object.keys(this.remote_array_lines).forEach((id) => {\n              this.remote_array_lines[id].forEach((line, index) => {\n                if (line[0].at_start == point.erase_id) {\n                  this.remote_array_lines[id].splice(index, 1);\n                  return;\n                }\n              });\n            });\n            //----------------------------------------------------------------\n          } else if (point.at_start) {\n            r_lines.push([point]);\n          } else if (point.at_line) {\n            r_lines[r_lines.length - 1].push(point);\n          } else if (point.page) {\n            this.page = point.page;\n          }\n        });\n      }\n      this.clear();\n      this.draw(this.array_lines);\n      Object.keys(this.remote_array_lines).forEach((id) => {\n        this.draw(this.remote_array_lines[id]);\n      });\n    });\n  },\n  computed: {\n    users: function () {\n      return this.$store.getters[\"amt/users\"];\n    },\n    myId: function () {\n      return this.$store.getters[\"amt/myId\"];\n    },\n    myPosition: function () {\n      return this.$store.getters[\"amt/myPosition\"];\n    },\n    patrolState: function () {\n      return this.$store.getters[\"amt/patrolState\"];\n    },\n    share_owner() {\n      const id = this.share.layer.get_info(\"share_owner\")\n        ? this.share.layer.get_info(\"share_owner\")\n        : this.myId;\n      return this.users[id].user_name;\n    },\n  },\n  beforeDestroy() {\n    // this.sdb = null;\n    // this.ctx = null;\n    // this.at_erase = false;\n    // this.at_line = false;\n    // this.socketio = null;\n    // this.sdb.removeEventListener(\"mousedown\", this.start, false);\n    // this.sdb.removeEventListener(\"mousemove\", this.move, false);\n    // this.sdb.removeEventListener(\"mouseup\", this.end, false);\n    // this.sdb.removeEventListener(\"mouseleave\", this.end, false);\n    // this.sdb.removeEventListener(\"touchstart\", this.start, false);\n    // this.sdb.removeEventListener(\"touchmove\", this.move, false);\n    // this.sdb.removeEventListener(\"touchend\", this.end, false);\n    // this.sdb = null;\n    // this.ctx = null;\n\n    Object.keys(this.clearId).forEach((id) => {\n      clearInterval(id);\n    });\n    this.page = 1;\n    this.array_lines = [];\n    this.remote_array_lines = {};\n  },\n};\n</script>\n<style>\n.batch {\n  position: absolute;\n  width: 30px;\n  height: 30px;\n  bottom: 0px;\n  right: 0px;\n  border-radius: 15px;\n  font-size: 1.2rem;\n  text-align: center;\n  color: #fff;\n  background-color: #f00;\n  user-select: none;\n}\n.canvas_draw {\n  z-index: 98;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  /* padding: 0px; */\n  /* width: 100%; */\n  /* height: 100%; */\n}\n.share_submenu .colorpicker {\n  bottom: 5rem;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./canvasDraw.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./canvasDraw.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./canvasDraw.vue?vue&type=template&id=7bb1d674&\"\nimport script from \"./canvasDraw.vue?vue&type=script&lang=js&\"\nexport * from \"./canvasDraw.vue?vue&type=script&lang=js&\"\nimport style0 from \"./canvasDraw.vue?vue&type=style&index=0&id=7bb1d674&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Version 20.04.20\n//\n// p2p.js\n// <<使い方>>\n//\n// import {P2P} from \"./P2P.js\";    /* モジュールのインポート (MUST)*/\n// const peer = new P2P({           /* P2Pインスタンスの生成 */\n//     my_id: my_id,                /* 自分のID (MUST)*/\n//     remote_id: remote_id,        /* 対向先のID (MUST) */\n//     group_id: group_id           /* グループID (デフォルト値: g1) (MUST) */\n//     direction: direction,        /* 方向 sendonly | recvonly | sendrecv (option)*/\n//     type: type,                  /* 種類 audio | video | both (MUST)*/\n//     stream: stream,              /* 自デバイスのstream (option)*/\n//     socket: socket,              /* 外部にあるsocketを使用する場合に指定する(option) */\n//     EVENT_KEY: event_key,        /* socket.ioでのメッセージキー。指定しないとpublishになる */\n//     options: options,            /* 別途iceサーバを使用する場合に指定する(option) */\n// });\n// peer.call_in();                   /* 発呼 */\n// peer.call_out();                  /* 切断 */\n// peer.on(\"call_in\", (stream) => {  /* 他デバイスのstream */\n//     /* ここで着信時の処理*/\n// });\n// peer.on(\"call_out\", (stream) = {  /* 他デバイスのstream */\n//     /* ここで、切断時の処理 */\n// }\n\n// import io from \"socket.io-client\";\nexport function P2P(args) {\n  this.name = args.name;\n  //--------------------------------------------------\n  // LOG\n  //--------------------------------------------------\n  const self = this;\n  this.LOG = function (title, s, style) {\n    // const NO_DISP = [\"OFFER\", \"ANSWER\", \"ICE\"]\n    const NO_DISP = [];\n    if (NO_DISP.includes(title)) return;\n\n    if (style) {\n      console.log(`${self.my_id} in ${this.name}: ${title}: %c${s}`, style, \"\");\n    } else {\n      console.log(`${self.my_id} in ${this.name}: ${title}: ${s}`);\n    }\n  };\n  //--------------------------------------------------\n  // Setting\n  //--------------------------------------------------\n  // const options = args.options || {\n  //   iceServers: [{ urls: `stun:${args.stun_server}` }]\n  // };\n  const options = args.options || {\n    iceServers: args.stun_server,\n  };\n\n  if (!args.my_id || !args.remote_id || !args.type) {\n    throw new Error(\"missing setting(args.XXX)\");\n  }\n\n  this.closed = false;\n  this.socketio = args.socket;\n  // this.socketio = io.connect();\n  this.my_id = args.my_id;\n  this.remote_id = args.remote_id;\n  this.group_id = args.group_id || \"g1\";\n  this.stream = args.stream;\n  this.direction = args.direction;\n  this.type = args.type;\n  this.EVENT_KEY = args.EVENT_KEY || \"publish\";\n\n  this.recv_audio_track = null;\n  this.recv_video_track = null;\n  this.timerIds = {};\n\n  //--------------------------------------------------\n  // Regist\n  // 本モジュール外部でサーバ側に登録している場合には不要\n  //--------------------------------------------------\n  // this.socketio.emit(\"regist\", JSON.stringify({ id: this.my_id, group_id: this.group_id }));\n\n  //--------------------------------------------------\n  // PeerConnection\n  //--------------------------------------------------\n  this.pc = new RTCPeerConnection(options);\n  this.check_types = {\n    \"inbound-rtp\": [\"packetsLost\"],\n    \"outbound-rtp\": [\"bytesSent\"],\n    \"remote-inbound-rtp\": [\"packetsLost\"],\n    \"remote-outbound-rtp\": [\"bytesSent\"],\n  };\n  this.timerIds[\"getStats\"] = setInterval(async () => {\n    const reports = await this.pc\n      .getStats(null)\n      .catch((err) => console.log(err));\n    let flag = false;\n    let res_str = \"\";\n    let check_items = [];\n    reports.forEach((report) => {\n      Object.keys(this.check_types).forEach((check_type) => {\n        if (check_type == report.type) {\n          flag = true;\n          res_str = `${new Date(report.timestamp).toLocaleTimeString()}: ${\n            report.type\n          } : ${report.id}  `;\n          console.log(\n            `-------------------${res_str}-------------------------------`\n          );\n\n          check_items = this.check_types[check_type];\n        } else {\n          flag = false;\n          check_items = [];\n        }\n\n        if (flag) {\n          check_items.forEach((item) => {\n            if (\n              // this.check_states.includes(statName) &&\n              item !== \"id\" &&\n              item !== \"timestamp\" &&\n              item !== \"type\"\n            ) {\n              console.log(`${item} : ${report[item]}`);\n            }\n          });\n        }\n      });\n    });\n  }, 1000);\n\n  //--------------------------------------------------\n  // destroy\n  //--------------------------------------------------\n  this.close = () => {\n    Object.keys(this.timerIds).forEach((id) => {\n      clearInterval(this.timerIds[id]);\n    });\n    // this.pc.close();\n    this.addTrack = null;\n    this.pc.onicecandidate = null;\n    this.pc.onsignalingstatechange = null;\n    this.pc.oniceconnectionstatechange = null;\n    this.pc.ontrack = null;\n    this.call_in = null;\n    this.call_out = null;\n    this.callback = null;\n    this.on = null;\n    this.offer_addTrack = null;\n    this.answer_addTrack = null;\n    this.LOG = null;\n    this.pc = null;\n    this.closed = true;\n    // this.socketio.off(this.EVENT_KEY);\n    this.socketio.off(this.EVENT_KEY, this.recv_msg);\n    this.socketio = null;\n    this.my_id = null;\n    this.remote_id = null;\n    this.group_id = null;\n    this.stream = null;\n    this.direction = null;\n    this.type = null;\n    this.EVENT_KEY = null;\n    this.recv_audio_track = null;\n    this.recv_video_track = null;\n  };\n\n  //--------------------------------------------------\n  // setStream\n  //--------------------------------------------------\n  this.setStream = (stream) => {\n    this.stream = stream;\n  };\n  //--------------------------------------------------\n  // addTrack for Offer\n  //--------------------------------------------------\n  this.offer_addTrack = (local_direction) => {\n    const audio_track = this.stream ? this.stream.getAudioTracks()[0] : null;\n    const video_track = this.stream ? this.stream.getVideoTracks()[0] : null;\n    //--------------------SEND RECV OR ONLY------------------------------\n    if (local_direction == \"sendrecv\" || local_direction == \"sendonly\") {\n      if (this.type == \"both\" || this.type == \"audio\") {\n        if (this.a_transceiver) {\n          this.a_transceiver.sender.replaceTrack(audio_track);\n        } else {\n          const sender = this.pc.addTrack(audio_track, this.stream);\n          this.a_transceiver = this.pc\n            .getTransceivers()\n            .find((tr) => tr.sender === sender);\n        }\n        this.a_transceiver.direction = local_direction;\n      }\n      if (this.type == \"both\" || this.type == \"video\") {\n        if (this.v_transceiver) {\n          this.v_transceiver.sender.replaceTrack(video_track);\n        } else {\n          const sender = this.pc.addTrack(video_track, this.stream);\n          this.v_transceiver = this.pc\n            .getTransceivers()\n            .find((tr) => tr.sender === sender);\n        }\n        this.v_transceiver.direction = local_direction;\n      }\n      //--------------------RECV ONLY------------------------------\n    } else if (local_direction == \"recvonly\") {\n      if (this.type == \"both\" || this.type == \"audio\") {\n        if (this.a_transceiver) {\n          this.a_transceiver.sender.replaceTrack(null);\n        } else {\n          this.a_transceiver = this.pc.addTransceiver(\"audio\", {\n            streams: [new MediaStream()],\n            direction: \"recvonly\",\n          });\n        }\n        this.a_transceiver.direction = \"recvonly\";\n      }\n      if (this.type == \"both\" || this.type == \"video\") {\n        if (this.v_transceiver) {\n          this.v_transceiver.sender.replaceTrack(null);\n        } else {\n          this.v_transceiver = this.pc.addTransceiver(\"video\", {\n            streams: [new MediaStream()],\n            direction: \"recvonly\",\n          });\n        }\n        this.v_transceiver.direction = \"recvonly\";\n      }\n    }\n  };\n\n  //--------------------------------------------------\n  // addTrack for Answer\n  //--------------------------------------------------\n  this.answer_addTrack = (local_direction) => {\n    const audio_track = this.stream ? this.stream.getAudioTracks()[0] : null;\n    const video_track = this.stream ? this.stream.getVideoTracks()[0] : null;\n    //------------- SEND RECV ---------------------\n    if (local_direction == \"sendrecv\" || local_direction == \"sendonly\") {\n      if (this.type == \"both\" || this.type == \"audio\") {\n        if (this.a_transceiver) {\n          this.a_transceiver.sender.replaceTrack(audio_track);\n        } else {\n          const sender = this.pc.addTrack(audio_track, this.stream);\n          this.a_transceiver = this.pc\n            .getTransceivers()\n            .find((tr) => tr.sender === sender);\n        }\n        this.a_transceiver.direction = local_direction;\n      }\n      if (this.type == \"both\" || this.type == \"video\") {\n        if (this.v_transceiver) {\n          this.v_transceiver.sender.replaceTrack(video_track);\n        } else {\n          const sender = this.pc.addTrack(video_track, this.stream);\n          this.v_transceiver = this.pc\n            .getTransceivers()\n            .find((tr) => tr.sender === sender);\n        }\n        this.v_transceiver.direction = local_direction;\n      }\n    } else if (local_direction == \"recvonly\") {\n      if (this.a_transceiver) {\n        this.a_transceiver.direction =\n          this.type == \"both\" || this.type == \"audio\" ? local_direction : null;\n      } else {\n        this.a_transceiver = this.pc\n          .getTransceivers()\n          .find((tr) => tr.receiver.track.kind == \"audio\");\n      }\n      if (this.v_transceiver) {\n        this.v_transceiver.direction =\n          this.type == \"both\" || this.type == \"video\" ? local_direction : null;\n      } else {\n        this.v_transceiver = this.pc\n          .getTransceivers()\n          .find((tr) => tr.receiver.track.kind == \"video\");\n      }\n    }\n  };\n\n  this.addTrack = (local_direction) => {\n    const audio_track = this.stream ? this.stream.getAudioTracks()[0] : null;\n    const video_track = this.stream ? this.stream.getVideoTracks()[0] : null;\n    //------------- SEND RECV ---------------------\n    if (local_direction == \"sendrecv\" || local_direction == \"sendonly\") {\n      if (this.type == \"both\" || this.type == \"audio\") {\n        if (this.a_transceiver) {\n          this.a_transceiver.sender.replaceTrack(audio_track);\n          this.a_transceiver.direction = local_direction;\n        } else {\n          const sender = this.pc.addTrack(audio_track, this.stream);\n          this.a_transceiver = this.pc\n            .getTransceivers()\n            .find((tr) => tr.sender === sender);\n        }\n        this.a_transceiver.direction = local_direction;\n      }\n      if (this.type == \"both\" || this.type == \"video\") {\n        if (this.v_transceiver) {\n          this.v_transceiver.sender.replaceTrack(video_track);\n          this.v_transceiver.direction = local_direction;\n        } else {\n          const sender = this.pc.addTrack(video_track, this.stream);\n          this.v_transceiver = this.pc\n            .getTransceivers()\n            .find((tr) => tr.sender === sender);\n        }\n        this.v_transceiver.direction = local_direction;\n      }\n\n      //------------- RECV ONLY ---------------------\n    } else if (local_direction == \"recvonly\") {\n      if (this.type == \"both\" || this.type == \"audio\") {\n        if (this.a_transceiver) {\n          this.a_transceiver.sender.replaceTrack(null);\n          this.a_transceiver.direction = \"recvonly\";\n        } else {\n          this.a_transceiver = this.pc.addTransceiver(\"audio\", {\n            streams: [new MediaStream()],\n            direction: \"recvonly\",\n          });\n        }\n      } else {\n        if (this.v_transceiver) {\n          this.v_transceiver.sender.replaceTrack(null);\n          this.v_transceiver.direction = \"recvonly\";\n        } else {\n          this.v_transceiver = this.pc.addTransceiver(\"video\", {\n            streams: [new MediaStream()],\n            direction: \"recvonly\",\n          });\n        }\n      }\n    }\n  };\n\n  this.pc.onicecandidate = (ev) => {\n    if (ev.candidate) {\n      const data = {\n        dest: this.remote_id,\n        src: this.my_id,\n        type: \"candidate\",\n        candidate: ev.candidate,\n      };\n      this.LOG(\"ICE\", JSON.stringify(data));\n      this.LOG(\"ICE\", `SEND to ${data.dest}`);\n      this.socketio.emit(this.EVENT_KEY, JSON.stringify(data));\n    }\n  };\n  this.pc.addEventListener(\"signalingstatechange\", () => {\n    if (this.pc) {\n      this.LOG(\"SIGNAL\", this.pc.signalingState);\n    } else {\n      console.dir(this);\n    }\n  });\n  this.pc.addEventListener(\"iceconnectionstatechange\", () => {\n    if (this.pc) {\n      this.LOG(\"CONNECT\", this.pc.iceConnectionState);\n    }\n  });\n\n  this.recv_msg = async (msg) => {\n    if (this.closed) {\n      return;\n    }\n\n    const data = JSON.parse(msg);\n    if (!(data.src == this.remote_id && data.dest == this.my_id)) return;\n\n    if (data.type == \"offer\") {\n      this.LOG(\"着信OFFER\", msg);\n      try {\n        if (this.pc.signalingState != \"stable\") return;\n      } catch (err) {\n        this.LOG(\n          \"ERR\",\n          `this.my_id=${this.my_id}`,\n          \"color:red; font-size: large;\"\n        );\n      }\n\n      await this.pc.setRemoteDescription(data);\n      await this.answer_addTrack(data.direction);\n      await this.pc\n        .createAnswer()\n        .then((answer) => this.pc.setLocalDescription(answer));\n      const _data = {\n        dest: this.remote_id,\n        src: this.my_id,\n        type: \"answer\",\n        sdp: this.pc.localDescription.sdp,\n      };\n      this.socketio.emit(this.EVENT_KEY, JSON.stringify(_data));\n      this.LOG(\"SDP\", `応答SEND to ${_data.dest}`);\n    } else if (data.type == \"answer\") {\n      this.LOG(\"着信ANSWER\", msg);\n      if (this.pc.signalingState != \"have-local-offer\") return;\n      await this.pc.setRemoteDescription(data);\n    } else if (data.type == \"candidate\") {\n      this.LOG(\"着信ICE\", msg);\n      try {\n        await this.pc.addIceCandidate(data.candidate);\n      } catch (err) {\n        this.LOG(\"ERR\", `CANDIDATE ERRO=${err}`);\n        // console.log(JSON.stringify(data.candidate));\n      }\n    }\n  };\n  this.socketio.on(this.EVENT_KEY, this.recv_msg);\n\n  //--------------------------------------------------\n  // remote_direction\n  //--------------------------------------------------\n  this.remote_direction = (local_direction) => {\n    if (local_direction == \"sendrecv\") return \"sendrecv\";\n    else if (local_direction == \"sendonly\") return \"recvonly\";\n    else if (local_direction == \"recvonly\") return \"sendonly\";\n    else return \"inactive\";\n  };\n\n  //--------------------------------------------------\n  // 発呼\n  //--------------------------------------------------\n  this.call_in = async (local_direction) => {\n    console.log(\n      `---------CALL_IN:${this.my_id} > ${this.remote_id}:------------------`\n    );\n    this.offer_addTrack(local_direction);\n    await this.pc\n      .createOffer()\n      .then((offer) => this.pc.setLocalDescription(offer));\n    const data = {\n      dest: this.remote_id,\n      src: this.my_id,\n      type: \"offer\",\n      direction: this.remote_direction(local_direction),\n      sdp: this.pc.localDescription.sdp,\n    };\n    // this.LOG(\"LOCAL SDP\", JSON.stringify(data));\n    this.LOG(\"SDP\", `発呼SEND to ${data.dest}`);\n    this.socketio.emit(this.EVENT_KEY, JSON.stringify(data));\n    // this.socketio.emit(\"publish\", data);\n  };\n\n  //--------------------------------------------------\n  // 切断\n  //--------------------------------------------------\n  this.call_out = async () => {\n    console.log(\n      `---------CALL_OUT:${this.my_id} > ${this.remote_id}:------------------`\n    );\n    this.addTrack(\"recvonly\");\n    await this.pc\n      .createOffer()\n      .then((offer) => this.pc.setLocalDescription(offer));\n    const data = {\n      dest: this.remote_id,\n      src: this.my_id,\n      type: \"offer\",\n      direction: \"recvonly\",\n      sdp: this.pc.localDescription.sdp,\n    };\n    // this.LOG(\"LOCAL SDP\", JSON.stringify(data));\n    this.LOG(\"SDP\", `切断SEND to ${data.dest}`);\n    this.socketio.emit(this.EVENT_KEY, JSON.stringify(data));\n  };\n\n  this.callback = {};\n  this.on = (key, func_name) => {\n    this.callback[key] = func_name;\n  };\n  this.last_stream;\n  this.pc.ontrack = (ev) => {\n    this.LOG(\n      \"CALL_IN\",\n      `ev.track.kind=${ev.track.kind}`,\n      \"color: blue; font-size: large;\"\n    );\n    // if (this.last_stream === ev.streams[0]) return;\n    if (this.type == \"both\" || this.type == \"audio\") {\n      if (ev.track.kind == \"audio\") {\n        this.recv_audio_track = ev.track;\n        this.recv_audio_track.onmute = () => {\n          if (this.callback && this.callback.call_out) this.callback.call_out();\n        };\n      }\n    } else {\n      this.recv_audio_track = true;\n    }\n\n    if (this.type == \"both\" || this.type == \"video\") {\n      if (ev.track.kind == \"video\") {\n        this.recv_video_track = ev.track;\n        this.recv_video_track.onmute = () => {\n          if (this.callback && this.callback.call_out) this.callback.call_out();\n        };\n      }\n    } else {\n      this.recv_video_track = true;\n    }\n\n    if (this.recv_audio_track && this.recv_video_track) {\n      if (this.type == \"both\") {\n        this.callback.call_in(\n          new MediaStream([this.recv_audio_track, this.recv_video_track])\n        );\n      } else if (this.type == \"audio\") {\n        this.callback.call_in(new MediaStream([this.recv_audio_track]));\n      } else if (this.type == \"video\") {\n        this.callback.call_in(new MediaStream([this.recv_video_track]));\n      }\n    }\n\n    // ev.streams[0].onremovetrack = () => this.callback.call_out();\n    // ev.track.onmute = () => {\n    //   this.callback.call_out();\n    //   // ev.track.onmute = null;\n    // };\n    // this.last_stream = ev.streams[0];\n  };\n}\n\n// <<使い方>>\n//\n// import {getStream} from \"./P2P.js\"; /* モジュールのインポート */\n// const stream = getStream (          /* 返値:MediaStream */\n//     elm,                            /* MediaStreamを表示するvideo要素 or audio要素 */\n//     mConstruction,                  /* 制約(デフォルト値: {video:true, audio:true}) */\n// );\n\nexport async function getStream(elm, mConstruction) {\n  const construction = mConstruction || {\n    video: true,\n    audio: true,\n  };\n  const stream = await navigator.mediaDevices.getUserMedia(construction);\n  if (elm) {\n    elm.srcObject = stream;\n    await elm.play();\n    elm.style = \"display: block\";\n  }\n  return stream;\n}\n\nexport async function getDesktopStream(elm, mConstruction) {\n  const construction = mConstruction || {\n    video: {\n      displaySurface: \"application\",\n      frameRate: 3,\n      // width: 640\n    },\n    audio: false,\n  };\n  elm.style = \"display: none\";\n  const stream = await navigator.mediaDevices.getDisplayMedia(construction);\n  if (elm) {\n    elm.srcObject = stream;\n    await elm.play();\n    elm.style = \"display: block\";\n  }\n  return stream;\n}\n\n// <<使い方>>\n//\n// import {stats} from \"./P2P.js\";     /* モジュールのインポート */\n// stats (                             /* 返値:無し */\n//     pc,                             /* ステータスを取得する対象:PeerConnection */\n//     elm,                            /* 結果を表示するdiv要素相当 */\n// );\n\nexport function stats(pc, elm) {\n  this.timerId = setInterval(function () {\n    pc.getStats(null).then((stats) => {\n      let statsOutput = \"\";\n\n      stats.forEach((report) => {\n        statsOutput +=\n          `<h2>Report: ${report.type}</h3>\\n<strong>ID:</strong> ${report.id}<br>\\n` +\n          `<strong>Timestamp:</strong> ${report.timestamp}<br>\\n`;\n\n        // Now the statistics for this report; we intentially drop the ones we\n        // sorted to the top above\n\n        Object.keys(report).forEach((statName) => {\n          if (\n            statName !== \"id\" &&\n            statName !== \"timestamp\" &&\n            statName !== \"type\"\n          ) {\n            statsOutput += `<strong>${statName}:</strong> ${report[statName]}<br>\\n`;\n          }\n        });\n      });\n\n      elm.innerHTML = statsOutput;\n    });\n  }, 1000);\n  this.clear = () => {\n    clearInterval(this.timerId);\n  };\n}\n","/* eslint-disable */\nimport { P2P, getDesktopStream, getStream } from \"./p2p.js\";\nimport $store from \"@/store\";\nimport io from \"socket.io-client\";\n\n//--------------------------------------------------\n// LOG\n// <<使い方>>\n// LOG(\n//   TITLE,       /* タイトル */\n//   message,     /* 表示したいメッセージ */\n//   style        /* CSSと同じスタイル（オプション） */\n// )\n// 配列NO_DISPに、このTITLEを含めると、表示しなくなる。\n//--------------------------------------------------\nconst NO_DISP = [];\nconst LOG = function (title, s, style) {\n  // const NO_DISP = [\"OFFER\", \"ANSWER\", \"ICE\"]\n  if (NO_DISP.includes(title)) return;\n\n  if (style) {\n    console.log(`${title}: %c${s}`, style, \"\");\n  } else {\n    console.log(`${title}: ${s}`);\n  }\n};\n\nexport function P2G(socketio) {\n  this.closed = false;\n  this.socketio = socketio ? socketio : io.connect();\n  // this.socketio = io.connect();\n  const my_id = $store.state.myId;\n  const group_id = $store.state.activeId.id;\n  const stun_server = $store.state.stun_server;\n  let userHash = {};\n  let last_user_ids = null;\n  this.remotes = {};\n  this.local_stream;\n\n  //--------------------------------------------------\n  // Regist\n  //--------------------------------------------------\n  // this.socketio.emit(\"regist\", JSON.stringify({ id: my_id, group_id: \"g1\" }));\n\n  //--------------------------------------------------\n  // Regist\n  //--------------------------------------------------\n  // setInterval(() => {\n  //   this.socketio.emit(\"renew\", JSON.stringify({ id: my_id, group_id: \"g1\" }));\n  // }, 1500);\n\n  //--------------------------------------------------\n  // Callback登録\n  //--------------------------------------------------\n  const callbacks = {};\n  this.on = (event_name, callback_func) => {\n    callbacks[event_name] = callback_func;\n  };\n\n  this.on_renew = (msg) => {\n    // if (!local_stream) return;\n    if (this.closed) {\n      return;\n    }\n\n    let new_users = []; // 追加したリモート先\n    let del_users = []; // 削除するリモート先\n    userHash = JSON.parse(msg);\n    const user_ids = Object.keys(userHash).filter(\n      (id) => id !== \"system\" && userHash[id].group_id == group_id\n    );\n    if (user_ids.includes(my_id)) user_ids.splice(user_ids.indexOf(my_id), 1);\n    last_user_ids = Object.keys(this.remotes);\n    // console.log(`last_user_ids=${last_user_ids}`);\n\n    // 前回のRenew通知と比較して増えた分が、new_users、\n    // 減った分がdel_usersとして抽出する。\n    if (last_user_ids.length > 0) {\n      new_users = user_ids.filter((user) => {\n        return !last_user_ids.includes(user);\n      });\n      del_users = last_user_ids.filter((user) => {\n        return !user_ids.includes(user);\n      });\n    } else {\n      new_users = user_ids;\n    }\n\n    new_users.forEach((user) => {\n      if (my_id == user) return;\n      const peer = new P2P({\n        my_id: my_id,\n        remote_id: user,\n        group_id: group_id,\n        socket: this.socketio,\n        direction: \"sendonly\",\n        type: \"video\",\n        EVENT_KEY: \"share\",\n        stun_server: stun_server,\n      });\n\n      // 各接続先から着信イベントで発火する。\n      peer.on(\"call_in\", (stream) => {\n        callbacks.call_in(stream);\n      });\n      // 各接続先から着信したtrackのmuteイベントで発火する。\n      peer.on(\"call_out\", () => {\n        callbacks.call_out();\n      });\n      this.remotes[user] = { peer: peer };\n    });\n    del_users.forEach((user) => {\n      delete this.remotes[user];\n    });\n\n    last_user_ids = user_ids;\n  };\n\n  this.socketio.on(\"renew\", this.on_renew);\n\n  // this.getStream = () => {\n  //   getDesktopStream(null).then(stream => {\n  //     this.local_stream = stream;\n  //   });\n  // };\n\n  this.call_in = async (elm) => {\n    if (elm.getContext) {\n      this.local_stream = elm.captureStream();\n    } else {\n      this.local_stream = await getDesktopStream(elm);\n    }\n    Object.keys(this.remotes).forEach((id) => {\n      if (my_id == id) return;\n      this.remotes[id].peer.setStream(this.local_stream);\n      this.remotes[id].peer.call_in(\"sendonly\");\n      // this.remotes[id].peer.call_in(\"sendonly\", this.local_stream);\n    });\n    return this.local_stream;\n  };\n\n  this.call_out = () => {\n    Object.keys(this.remotes).forEach((id) => {\n      if (my_id == id) return;\n      this.remotes[id].peer.call_out();\n    });\n  };\n\n  this.close = () => {\n    this.closed = true;\n    Object.keys(this.remotes).forEach((id) => {\n      if (my_id == id) return;\n      // this.remotes[id].peer.call_out();\n      // this.socketio = null;\n      // this.socketio.off(\"renew\");\n      this.socketio.off(\"renew\", this.on_renew);\n      this.remotes[id].peer.close();\n      delete this.remotes[id].peer;\n      delete this.remotes[id];\n      this.last_user_ids = null;\n    });\n  };\n}\n\nconst _uuidv4 = () => {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = (Math.random() * 16) | 0,\n      v = c == \"x\" ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n};\n","<template>\n  <div sytle=\"position: relative\">\n    <modalDialog v-if=\"show_daialog\">\n      <span slot=\"header\"\n        ><span style=\"color: red\">{{ share_owner }}</span\n        >より共有の開始が行われました。</span\n      >\n      <span slot=\"body\">共有を開始しますか？</span>\n      <div slot=\"footer\">\n        <button class=\"btn btn-primary\" v-on:click=\"share_start_yes\">\n          開始\n        </button>\n        <button class=\"btn btn-primary\" v-on:click=\"share_start_no\">\n          キャンセル\n        </button>\n      </div>\n    </modalDialog>\n    <!-- コンポーネント削除確認ダイアログ -->\n    <modalDialog v-if=\"$store.getters['amt/exit_dialog']\">\n      <span slot=\"header\">共有機能</span>\n      <span slot=\"body\">共有を停止しますか？</span>\n      <div slot=\"footer\">\n        <button class=\"btn btn-primary\" @click=\"exit_dialog_no()\">\n          キャンセル\n        </button>\n        <button class=\"btn btn-primary\" @click=\"exit_dialog_yes()\">停止</button>\n      </div>\n    </modalDialog>\n\n    <div\n      id=\"share_menu\"\n      v-show=\"!inSubMenu && menu_enable\"\n      class=\"share_submenu\"\n    >\n      <div class=\"writeItem\">\n        <div>\n          <button\n            v-on:click=\"active_share_desktop\"\n            v-bind:class=\"isActive ? 'circleBtnSelected' : null\"\n            class=\"circleBtn subMenu\"\n            title=\"デスクトップ共有\"\n          >\n            <img src=\"./assets/share_desktop@1x.png\" />\n          </button>\n        </div>\n      </div>\n      <div class=\"writeItem\">\n        <div>\n          <button\n            class=\"circleBtn subMenu\"\n            v-on:click=\"active_share_pdf\"\n            title=\"PDF共有\"\n          >\n            <img src=\"./assets/share_pdf@1x.png\" />\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"pdf_page_menu\">\n      <div id=\"pdf_page_menu\" v-if=\"page_menu\" style=\"display: flex\">\n        <div class=\"writeItem\">\n          <div>\n            <button\n              v-on:click=\"pdf.prev\"\n              v-bind:class=\"isActive ? 'circleBtnSelected' : null\"\n              class=\"circleBtn page_menu_left\"\n              title=\"前のページ\"\n            >\n              <img src=\"./assets/share_back@1x.png\" />\n            </button>\n          </div>\n        </div>\n        <div class=\"writeItem\">\n          <div>\n            <button\n              v-on:click=\"pdf.next\"\n              v-bind:class=\"isActive ? 'circleBtnSelected' : null\"\n              class=\"circleBtn page_menu_right\"\n              title=\"次のページ\"\n            >\n              <img src=\"./assets/share_next@1x.png\" />\n            </button>\n          </div>\n        </div>\n      </div>\n      <div id=\"pdf_page_menu\" v-if=\"scale_menu\" style=\"display: flex\">\n        <!-- 縮小 -->\n        <div>\n          <div>\n            <button v-on:click=\"scale_dec\" class=\"circleBtn\" title=\"縮小\">\n              <img src=\"./assets/share_zoom_out@1x.png\" />\n            </button>\n          </div>\n        </div>\n        <!-- 拡大 -->\n        <div>\n          <div>\n            <button v-on:click=\"scale_inc\" class=\"circleBtn\" title=\"拡大\">\n              <img src=\"./assets/share_zoom_in@1x.png\" />\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <canvasDraw\n      ref=\"canvas_draw\"\n      v-show=\"inSubMenu\"\n      :w=\"w\"\n      :h=\"h\"\n      :page=\"page\"\n      @move=\"move\"\n    ></canvasDraw>\n    <canvas ref=\"pdf_canvas\" class=\"pdf_canvas\" :style=\"canvas_style\"></canvas>\n    <video\n      ref=\"desktop_video\"\n      v-show=\"show_video\"\n      class=\"desktop_video\"\n      :style=\"canvas_style\"\n      playsinline\n    ></video>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\n// import $store from \"@/store\";\nimport { shareEvent } from \"./index.js\";\nimport openPDF from \"./openPDF\";\nimport layerModules from \"@/modules/layers\";\nimport CanvasDraw from \"./canvasDraw\";\nimport ModalDialog from \"@/components/ModalDialog.vue\";\nimport { P2G } from \"./p2g\";\n\nexport default {\n  data() {\n    return {\n      inSubMenu: false,\n      page_menu: false,\n      scale_menu: false,\n      isActive: false,\n      show_daialog: false,\n      show_video: false,\n      current_stream_src: null,\n      pdf: null,\n      pdf_ctx: null,\n      p2g: null,\n      playing: false,\n      canvas_style: {\n        top: \"0px\",\n        left: \"0px\",\n      },\n      img: null,\n      w: 300,\n      h: 150,\n      org_w: 300,\n      org_h: 150,\n      page: 1,\n      scale: 1,\n      scale_period: 0.1,\n    };\n  },\n  components: {\n    canvasDraw: CanvasDraw,\n    modalDialog: ModalDialog,\n  },\n  mounted() {\n    // layer.js中の自分\n    this.share = layerModules.find((m) => m.name == \"ShareLayer\");\n    // mapMenuの「メニューボタン」を「戻るボタン」にする。\n    // this.$parent.$refs.mapMenu.inSubMenu = true;\n    this.$store.commit(\"amt/setSubMenu\", \"ShareLayer\");\n    // 共有機能がonになった時はグループの変更ができないように\n    this.$store.commit(\"setGroupListShow\", false); // グループの選択リストを閉じる\n    this.$store.commit(\"setMask\", false); // マップにかぶさっているマスクを外す\n    this.$parent.$refs.mapMenu.showMapMenu = true;\n    // 共有開始のダイアログ表示\n    this.show_daialog = true;\n\n    this.p2g = new P2G(this.socketio);\n    // this.p2g = new P2G();\n    this.p2g.on(\"call_in\", (stream) => {\n      if (!this.$refs.desktop_video) return;\n      this.inSubMenu = true;\n      this.scale_menu = true;\n      this.$refs.desktop_video.srcObject = stream;\n      this.$refs.desktop_video.play().then(() => {\n        this.playing = true;\n        this.show_video = true;\n      });\n    });\n    // 切断イベント着信による発火\n    this.p2g.on(\"call_out\", () => {});\n\n    this.pdf_ctx = this.$refs.pdf_canvas.getContext(\"2d\");\n    this.socketio.on(\"share_draw\", this.on_call_in_canvas);\n\n    this.$refs.desktop_video.onresize = () => {\n      this.w = this.org_w = this.$refs.desktop_video.clientWidth;\n      this.h = this.org_h = this.$refs.desktop_video.clientHeight;\n      console.log(\n        `desktop_video: ON_RESIZE w=${this.$refs.desktop_video.clientWidth} h=${this.$refs.desktop_video.clientHeight}`\n      );\n      this.$nextTick(() => {\n        this.$refs.canvas_draw.all_draw();\n      });\n    };\n  },\n  methods: {\n    // Canvas socket\n    call_in_canvas() {\n      const data = this.$refs.pdf_canvas.toDataURL(\"image/webp\");\n      const pdf_data = {\n        src: this.myId,\n        group_id: this.group_id,\n        type: \"pdf\",\n        w: this.w,\n        h: this.h,\n        data: data,\n      };\n      this.socketio.emit(\"share_draw\", JSON.stringify(pdf_data));\n    },\n    on_call_in_canvas(msg) {\n      const data = JSON.parse(msg);\n      if (data.type == \"pdf\") {\n        this.w = this.org_w = this.$refs.pdf_canvas.width = data.w;\n        this.h = this.org_h = this.$refs.pdf_canvas.height = data.h;\n        this.inSubMenu = true;\n        this.scale_menu = true;\n        this.img = new Image(this.w, this.h);\n        this.img.src = data.data;\n        this.img.onload = () => {\n          this.pdf_ctx.drawImage(this.img, 0, 0, this.w, this.h);\n        };\n      }\n    },\n    // WebRTC\n    async call_in(elm) {\n      const stream = await this.p2g.call_in(elm);\n      this.show_video = true;\n      // 自分の送信ストリーム（chrome自体の共有）が切れたら、自分の映像表示も落とす。\n      stream.getVideoTracks().forEach((track) => {\n        track.onended = () => {\n          this.share.layer.setActive(false);\n          this.$store.commit(\"amt/setSubMenu\", null);\n        };\n      });\n      await this.$refs.desktop_video.play();\n    },\n    call_out(elm) {\n      // 映像の停止\n      if (elm && elm.srcObject)\n        elm.srcObject.getVideoTracks().forEach((t) => t.stop());\n    },\n    share_start_no() {\n      this.show_daialog = false;\n      this.share.layer.setActive(false);\n    },\n    share_start_yes() {\n      this.show_daialog = false;\n    },\n    active_share_desktop() {\n      this.inSubMenu = true;\n      this.scale_menu = true;\n      this.current_stream_src = this.$refs.desktop_video;\n      this.call_in(this.current_stream_src);\n    },\n    active_share_pdf() {\n      this.inSubMenu = true;\n      this.page_menu = true;\n      this.scale_menu = true;\n      this.pdf = new openPDF(this.$refs.pdf_canvas);\n\n      this.pdf.on(\"resize\", (w, h) => {\n        this.w = w;\n        this.h = h;\n        this.$nextTick().then(() => {\n          this.$refs.canvas_draw.all_draw();\n        });\n      });\n      this.pdf.on(\"start\", () => {});\n      this.pdf.on(\"page\", (page) => {\n        // ページ更新時に一度だけ、pdf_canvasから転写\n        this.page = page;\n        this.org_w = this.$refs.pdf_canvas.width;\n        this.org_h = this.$refs.pdf_canvas.height;\n        // 手書きcanvas表示用ページも更新し、再描画する\n        this.$refs.canvas_draw.page = page;\n        this.$refs.canvas_draw.all_draw();\n        this.$refs.canvas_draw.send_point({ page: page });\n        this.call_in_canvas();\n      });\n      this.pdf.open();\n      // this.current_stream_src = this.$refs.remote_canvas;\n      // this.call_in(this.current_stream_src);\n    },\n    // ------------------------------------------------------------------\n    // scale\n    //   pdfレンダリング      -> this.w, this.h\n    //                       -> pdf_canvasの内部canvasのwidth, height\n    //   video着信(onresize)  -> this.w, this.h\n    //   this.w, this.hの変更 -> canvasDrawの内部canvasのwidth, height\n    //                        -> video.width, .height\n    //                       -> pdf_canvasの内部canvasのwidth, height\n    // ------------------------------------------------------------------\n    scale_inc() {\n      if (this.scale < 2.0) {\n        this.scale = this.scale + this.scale_period;\n        this.w = this.org_w * this.scale;\n        this.h = this.org_h * this.scale;\n        console.log(`SCALE=${this.scale}`);\n        console.log(`w=${this.w} h=${this.w}`);\n        if (this.page_menu) this.pdf.page(this.page, this.scale);\n        if (this.scale_menu) {\n          this.$refs.desktop_video.width = this.$refs.pdf_canvas.width = this.w;\n          this.$refs.desktop_video.height = this.$refs.pdf_canvas.height =\n            this.h;\n        }\n        this.$nextTick(() => {\n          this.$refs.canvas_draw.all_draw();\n          if (!this.page_menu && this.img) {\n            this.pdf_ctx.drawImage(this.img, 0, 0, this.w, this.h);\n          }\n        });\n      }\n    },\n    scale_dec() {\n      if (this.scale > 0) {\n        this.scale = this.scale - this.scale_period;\n        this.w = this.org_w * this.scale;\n        this.h = this.org_h * this.scale;\n        console.log(`SCALE=${this.scale}`);\n        console.log(`w=${this.w} h=${this.w}`);\n        if (this.page_menu) this.pdf.page(this.page, this.scale);\n        if (this.scale_menu) {\n          this.$refs.desktop_video.width = this.$refs.pdf_canvas.width = this.w;\n          this.$refs.desktop_video.height = this.$refs.pdf_canvas.height =\n            this.h;\n        }\n        this.$nextTick(() => {\n          this.$refs.canvas_draw.all_draw();\n          if (!this.page_menu && this.img) {\n            this.pdf_ctx.drawImage(this.img, 0, 0, this.w, this.h);\n          }\n        });\n      }\n    },\n    move(pos_style) {\n      this.canvas_style = pos_style;\n    },\n    // Comfirme Exit\n    exit_dialog_yes() {\n      this.exit_subMenu();\n      this.$store.commit(\"amt/comfirme_exit\", false);\n      this.$store.commit(\"amt/setSubMenu\", null);\n    },\n    exit_dialog_no() {\n      this.$store.commit(\"amt/setSubMenu\", \"ShareLayer\");\n      this.$store.commit(\"amt/comfirme_exit\", false);\n    },\n    exit_subMenu() {\n      // サブメニューを抜ける\n      // this.inSubMenu = false;\n      // this.$store.commit(\"amt/setSubMenu\", false);\n      this.share.layer.setActive(false);\n      // layerModules.forEach(m => m.layer.setActive(false));\n    },\n  },\n  computed: {\n    menu_enable() {\n      return [\"win32\"].includes(navigator.platform.toLowerCase());\n    },\n    users() {\n      return this.$store.getters[\"amt/users\"];\n    },\n    myId() {\n      return this.$store.getters[\"amt/myId\"];\n    },\n    group_id() {\n      return this.$store.getters[\"group_id\"];\n    },\n    myPosition() {\n      return this.$store.getters[\"amt/myPosition\"];\n    },\n    patrolState() {\n      return this.$store.getters[\"amt/patrolState\"];\n    },\n    share_owner() {\n      const id = this.share.layer.get_info(\"share_owner\")\n        ? this.share.layer.get_info(\"share_owner\")\n        : this.myId;\n      return this.users[id].user_name;\n    },\n    socketio() {\n      return this.$store.getters[\"socketio\"];\n    },\n  },\n  beforeDestroy() {\n    clearInterval(this.clearId);\n    if (this.pdf) {\n      this.pdf.close();\n      this.pdf = null;\n    }\n    this.page_menu = false;\n    this.scale_menu = false;\n    this.inSubMenu = false;\n    this.call_out(this.current_stream_src);\n    this.p2g.close();\n    this.socketio.off(\"share_draw\", this.on_call_in_canvas);\n    // this.$parent.$refs.mapMenu.inSubMenu = false;\n    // this.$store.commit(\"setSbuMenu\", false);\n    this.$store.commit(\"amt/setSubMenu\", null);\n    this.$parent.$refs.mapMenu.showMapMenu = true;\n    // this.local_ctx = null;\n    // this.remote_ctx = null;\n    // 2020-11-30 共有停止確認ダイアログを表示したタイミングで共有主が終了した時の動作を修正\n    this.$store.commit(\"amt/comfirme_exit\", false);\n  },\n};\n</script>\n\n<style>\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  /* 縦向き */\n  .share_submenu {\n    left: 0vw;\n  }\n}\n@media screen and (min-width: 480px) {\n  /* 横向き */\n  .share_submenu {\n    left: 15vw;\n  }\n}\n.share_submenu {\n  display: flex;\n  flex-direction: column-reverse;\n  position: fixed;\n  z-index: 100;\n  padding-left: 10px;\n  padding-bottom: 15px;\n  bottom: 5rem;\n}\n\n.share_submenu::-webkit-scrollbar {\n  display: none;\n}\n.circleBtn {\n  margin-right: 5px;\n  margin-top: 5px;\n}\n.pdf_page_menu {\n  position: absolute;\n  z-index: 100;\n  top: 0px;\n  left: 0px;\n  display: flex;\n  opacity: 0.4; /* 変更 0.2 -> 0.4 2020/09/01 中村 */\n}\n.pdf_page_menu:hover {\n  opacity: 1;\n}\n.page_menu_left {\n  margin-left: 5px;\n}\n.pdf_canvas {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  z-index: 97;\n}\n.dummy_canvas {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  display: none;\n}\n.desktop_video {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  z-index: 3;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ShareComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ShareComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShareComponent.vue?vue&type=template&id=5d40a1ea&\"\nimport script from \"./ShareComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./ShareComponent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShareComponent.vue?vue&type=style&index=0&id=5d40a1ea&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import $store from \"@/store\";\nimport ShareComponent from \"./ShareComponent.vue\";\n// import { P2G } from \"./p2g\";\n\nimport Vue from \"vue\";\nexport const shareEvent = new Vue();\n\nexport function ShareLayer() {\n  const noop = () => {};\n\n  let infos = {};\n  let isActive = false;\n\n  function add() {\n    // 他の端末から共有が始めれた場合。\n    $store.state.socketio.on(\"share\", (msg) => {\n      // share通知中の送信元が、共有オーナーだった場合には、共有自体を終了する。\n      const data = JSON.parse(msg);\n\n      // グループが違っていたら処理しないで抜ける。\n      if (data.group_id != $store.state.activeId.id) return;\n\n      // 既にshare_ownerの登録がある場合、セッション中と判断して、STARTは受けない\n\n      // share通知（type=START）を受けると、送信元を共有オーナとして保存して、共有機能をロードする。\n      if (data.type == \"START\" && !get_info(\"share_owner\")) {\n        infos[\"share_owner\"] = data.src;\n        $store.commit(\"amt/addComponent\", ShareComponent);\n\n        // 共有オーナからのshare通知（type=END）を受けると、共有機能を削除する。\n      } else if (data.type == \"END\" && data.src == get_info(\"share_owner\")) {\n        $store.commit(\"amt/removeComponent\", ShareComponent);\n        infos = {};\n      }\n    });\n  }\n\n  function get_info(item) {\n    return infos ? infos[item] : null;\n  }\n\n  function setActive(active) {\n    const users = $store.getters[\"amt/users\"];\n    const myId = $store.getters[\"amt/myId\"];\n    const my_group_id =\n      $store.state.activeId.kind == \"group\" ? $store.state.activeId.id : null;\n\n    isActive = active;\n\n    Object.keys(users).forEach((id) => {\n      const data = {\n        dest: id,\n        src: myId,\n        group_id: my_group_id,\n        type: active ? \"START\" : \"END\",\n      };\n      if (id != myId) {\n        $store.state.socketio.emit(\"share\", JSON.stringify(data));\n      }\n    });\n    if (active) {\n      infos[\"share_owner\"] = myId;\n      infos[\"group_id\"] = my_group_id;\n      $store.commit(\"amt/setSubMenu\", \"ShareLayer\");\n      $store.commit(\"amt/addComponent\", ShareComponent);\n    } else {\n      $store.commit(\"amt/setSubMenu\", null);\n      $store.commit(\"amt/removeComponent\", ShareComponent);\n      infos = {};\n    }\n  }\n\n  function getActive() {\n    return isActive;\n  }\n\n  return {\n    add, // マップ初期化時に呼び出し\n    get_info,\n    remove: noop, // マップ破棄時に呼び出し\n    update: noop, // 現在のバージョンでは呼び出されない\n    setOpacity: noop, // 現在のバージョンでは呼び出されない\n    setVisible: noop, // 現在のバージョンでは呼び出されない\n    setActive, // メニュー操作でトグル\n    getActive,\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"videoContainer2\",staticClass:\"videoContainer2\"},_vm._l((_vm.remote_users),function(user,remote_id){return _c('video-unit',{key:remote_id,attrs:{\"is_showed\":_vm.is_showed},on:{\"zIndex_up\":_vm.zIndex_down}},[_c('remote-video',{attrs:{\"user\":user,\"remote_id\":remote_id,\"mode\":_vm.mode},on:{\"call_end\":_vm.call_end}})],1)}),1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"videoUnit\",style:(_vm.styleObj)},[_c('div',{ref:\"videoContainer\",staticClass:\"videoContainer\",style:(_vm.videoStyleObj),on:{\"mousedown\":_vm.pre_mdown,\"mousemove\":_vm.mmove,\"mouseup\":_vm.mup,\"mouseleave\":_vm.mup,\"touchstart\":_vm.pre_mdown,\"touchmove\":_vm.mmove,\"touchend\":_vm.mup}},[_vm._t(\"default\")],2),_c('div',{ref:\"resize_grip\",staticClass:\"resize_grip\",style:(_vm.gripStyleObj),on:{\"mousedown\":function($event){$event.preventDefault();return _vm.rdown.apply(null, arguments)},\"mousemove\":function($event){$event.preventDefault();return _vm.rmove.apply(null, arguments)},\"mouseup\":function($event){$event.preventDefault();return _vm.rup.apply(null, arguments)},\"touchstart\":function($event){$event.preventDefault();return _vm.rdown.apply(null, arguments)},\"touchmove\":function($event){$event.preventDefault();return _vm.rmove.apply(null, arguments)},\"touchend\":function($event){$event.preventDefault();return _vm.rup.apply(null, arguments)}}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :style=\"styleObj\" ref=\"videoUnit\">\n    <div\n      ref=\"videoContainer\"\n      class=\"videoContainer\"\n      :style=\"videoStyleObj\"\n      @mousedown=\"pre_mdown\"\n      @mousemove=\"mmove\"\n      @mouseup=\"mup\"\n      @mouseleave=\"mup\"\n      @touchstart=\"pre_mdown\"\n      @touchmove=\"mmove\"\n      @touchend=\"mup\"\n    >\n      <slot></slot>\n    </div>\n    <div\n      ref=\"resize_grip\"\n      class=\"resize_grip\"\n      :style=\"gripStyleObj\"\n      @mousedown.prevent=\"rdown\"\n      @mousemove.prevent=\"rmove\"\n      @mouseup.prevent=\"rup\"\n      @touchstart.prevent=\"rdown\"\n      @touchmove.prevent=\"rmove\"\n      @touchend.prevent=\"rup\"\n    ></div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nexport default {\n  data() {\n    return {\n      move_flag: false,\n      move_once: false,\n      resize_flag: false,\n      top: 0,\n      left: 0,\n      init_pos: { top: 0, left: 0 },\n      last_pos: {},\n      watching: false, // 映像表示を行っているか、いないか。\n    };\n  },\n  props: [\"is_showed\"],\n  mounted() {\n    document.body.addEventListener(\"mousemove\", this.rmove, false);\n    document.body.addEventListener(\"mouseup\", this.rup, false);\n    document.body.addEventListener(\"touchend\", this.rup, false);\n  },\n  methods: {\n    pre_mdown(ev) {\n      ev.stopPropagation();\n      if (\"getContext\" in ev.target) return;\n\n      this.$refs.videoUnit.addEventListener(\"mouseup\", this.pre_mup, false);\n      this.$refs.videoUnit.addEventListener(\"touchend\", this.pre_mup, false);\n      this.clearId = setTimeout(() => {\n        this.mdown(ev);\n        this.$refs.videoUnit.removeEventListener(\n          \"mouseup\",\n          this.pre_mup,\n          false\n        );\n        this.$refs.videoUnit.removeEventListener(\n          \"touchend\",\n          this.pre_mup,\n          false\n        );\n      }, 200);\n    },\n    pre_mup(ev) {\n      clearTimeout(this.clearId);\n      this.$refs.videoUnit.removeEventListener(\"mouseup\", this.pre_mup, false);\n      this.$refs.videoUnit.removeEventListener(\"touchend\", this.pre_mup, false);\n    },\n    mdown(ev) {\n      const _ev = ev.touches ? ev.touches[0] : ev;\n      this.$store.state.sound_on();\n\n      if (!this.move_once) {\n        this.init_width = this.$refs.videoUnit.clientHeight;\n      }\n      this.move_flag = true;\n      this.move_once = true;\n      this.top = this.$refs.videoUnit.offsetTop;\n      this.left = this.$refs.videoUnit.offsetLeft;\n      this.width = this.$refs.videoUnit.clientWidth;\n      this.last_pos = { x: _ev.clientX, y: _ev.clientY };\n\n      this.$emit(\"zIndex_up\", this);\n    },\n    mmove(ev) {\n      if (this.move_flag) {\n        const _ev = ev.touches ? ev.touches[0] : ev;\n        this.top = this.top + (_ev.clientY - this.last_pos.y);\n        this.left = this.left + (_ev.clientX - this.last_pos.x);\n        this.$refs.videoUnit.style.width = this.width + \"px\";\n        this.last_pos = { x: _ev.clientX, y: _ev.clientY };\n      }\n    },\n    mup(ev) {\n      this.move_flag = false;\n    },\n    rdown(ev) {\n      const _ev = ev.touches ? ev.touches[0] : ev;\n      this.resize_flag = true;\n      this.width = this.$refs.videoUnit.clientWidth;\n      this.last_pos = { x: _ev.clientX, y: _ev.clientY };\n    },\n    rmove(ev) {\n      if (this.resize_flag) {\n        const _ev = ev.touches ? ev.touches[0] : ev;\n        this.width = this.width + (_ev.clientX - this.last_pos.x);\n        this.$refs.videoUnit.style.width = this.width + \"px\";\n        this.last_pos = { x: _ev.clientX, y: _ev.clientY };\n      }\n    },\n    rup(ev) {\n      this.resize_flag = false;\n    },\n  },\n  watch: {\n    is_showed() {\n      if (!this.is_showed) {\n        this.move_once = false;\n        this.top = this.init_pos.top;\n        this.left = this.init_pos.left;\n        this.width = \"100%\";\n      }\n    },\n  },\n  computed: {\n    styleObj() {\n      return {\n        position: this.move_once ? \"absolute\" : \"relative\",\n        borderRadius: this.move_once ? \"10px\" : \"0px\",\n        top: this.top + \"px\",\n        left: this.left + \"px\",\n        width: this.width == \"100%\" ? \"100%\" : this.width + \"px\",\n        Opacity: this.move_flag ? 0.5 : 1,\n        border: this.move_flag ? \"4px solid #f00\" : \"0px\",\n        minWidth: \"150px\",\n        // backgroundColor: \"#37a3c0\",\n        zIndex: this.focus_flag ? 1000 : 100,\n        backgroundColor: this.focus_flag ? \"#ffa2c0\" : \"#38a2c0\",\n        overflow: \"hidden\",\n      };\n    },\n    videoStyleObj() {\n      return {\n        width: \"100%\",\n      };\n    },\n    gripStyleObj() {\n      return {\n        borderBottomColor: this.resize_flag ? \"#c03838\" : \"#37a3c0\",\n      };\n    },\n  },\n  beforeDestroy() {\n    document.body.removeEventListener(\"mousemove\", this.rmove, false);\n    document.body.removeEventListener(\"mouseup\", this.rup, false);\n    document.body.removeEventListener(\"touchend\", this.rup, false);\n  },\n};\n</script>\n\n<style>\n.videoContainer {\n  /* width: 100%; */\n  min-width: 150px;\n  position: relative;\n}\n.videoContainer video {\n  display: block;\n  height: auto;\n  width: 100%;\n  /* object-fit: cover; */\n}\n\n.resize_grip {\n  width: 0;\n  height: 0;\n  bottom: 0px;\n  right: 0px;\n  border-left: 30px solid transparent;\n  border-bottom: 30px solid #37a3c0;\n  position: absolute;\n  text-align: center;\n  z-index: 1000;\n}\n.gripped {\n  border-bottom-color: #c03838;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VideoUnit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VideoUnit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoUnit.vue?vue&type=template&id=7c2aba96&\"\nimport script from \"./VideoUnit.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoUnit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VideoUnit.vue?vue&type=style&index=0&id=7c2aba96&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"remote_box\"},[(_vm.is_group_in_local)?[_c('div',{staticClass:\"videoTitle\",style:(_vm.titleStyleObj)},[_c('div',{staticClass:\"videoTitleLeft\"},[_c('img',{staticClass:\"icon_img\",attrs:{\"src\":_vm.img_menu}})]),_c('div',{staticClass:\"videoTitleCenter\"},[_vm._v(\" \"+_vm._s(_vm.user && _vm.user.user_name + _vm.talk_mode)+\" \")]),_c('div',{staticClass:\"videoTitleRight\",on:{\"click\":_vm.onTitleClick}},[_c('img',{staticClass:\"icon_img\",class:{ rotate90: !_vm.show_video },attrs:{\"src\":_vm.downButtonSrc}})])])]:_vm._e(),(_vm.is_private_in_local)?[_c('div',{staticClass:\"videoTitle\"},[_c('div',{staticClass:\"videoTitleLeft\"},[_c('img',{staticClass:\"icon_img\",attrs:{\"src\":_vm.img_menu}})]),_c('div',{staticClass:\"videoTitleCenter\"},[_vm._v(_vm._s(_vm.user && _vm.user.user_name)+\":個別\")]),_c('div',{staticClass:\"videoTitleRight\",attrs:{\"title\":\"通話終了\"},on:{\"click\":_vm.stop}},[_c('img',{attrs:{\"src\":_vm.img_close}})])])]:_vm._e(),_c('level-meter',{staticClass:\"levelMeter\",attrs:{\"audio_level\":_vm.audio_level}}),(_vm.is_loading)?_c('div',{staticStyle:{\"width\":\"100%\",\"z-index\":\"100\"}},[_c('div',{staticClass:\"loaderContainer\"},[_vm._m(0),_c('div',{staticStyle:{\"color\":\"white\"}},[_vm._v(\" \"+_vm._s(_vm.connectionState)+\"/\"+_vm._s(_vm.signalingState)+\" \")])])]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show_video && !_vm.is_loading),expression:\"show_video && !is_loading\"}],staticClass:\"remote_video_box\"},[_c('video',{ref:\"remote_video\",staticClass:\"remote_video\",class:{ remote_video_none: _vm.onC360play },attrs:{\"muted\":\"\",\"autoplay\":\"\",\"playsinline\":\"\"},domProps:{\"muted\":true},on:{\"dblclick\":_vm.fullscreen}}),(_vm.onC360play)?_c('c-360-elm',{staticClass:\"remote_canvas\",attrs:{\"videoElm\":_vm.$refs.remote_video,\"width\":_vm.settings_height,\"height\":_vm.settings_height}}):_vm._e(),_c('div',{staticClass:\"remote_settings\"},[_vm._v(\" \"+_vm._s(_vm.settings_height)+\"@\"+_vm._s(_vm.settings_frameRate)+\"fps \")])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show_audio && !_vm.is_loading),expression:\"show_audio && !is_loading\"}],staticClass:\"remote_audio_box\",style:(_vm.style_remote_audio),on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.audio_on_off.apply(null, arguments)},\"touchstart\":function($event){$event.stopPropagation();return _vm.audio_on_off.apply(null, arguments)}}},[_c('img',{staticClass:\"img_mic\",attrs:{\"src\":_vm.img_mic}})]),_c('audio',{ref:\"remote_audio\",attrs:{\"autoplay\":\"\"}})],2)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"spinner-border text-light\",attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"levelMeter\"}},[_c('div',[_c('svg',{staticStyle:{\"background-color\":\"rgba(255, 255, 255, 0.05)\"},attrs:{\"x\":\"0\",\"y\":\"0\",\"width\":\"100%\",\"height\":\"100%\",\"viewBox\":\"0 0 100 3\",\"preserveAspectRatio\":\"none\"}},[_c('linearGradient',{attrs:{\"gradientUnits\":\"userSpaceOnUse\",\"id\":\"gradation2\",\"x1\":\"0\",\"y1\":\"0\",\"x2\":\"100\",\"y2\":\"0\",\"spreadMethod\":\"pad\"}},[_c('stop',{attrs:{\"offset\":\"0%\",\"stop-color\":\"#afc6e8\"}}),_c('stop',{attrs:{\"offset\":\"100%\",\"stop-color\":\"#2e5bcc\"}})],1),_c('rect',{attrs:{\"x\":\"0\",\"y\":\"0\",\"width\":_vm.draw_level,\"height\":\"3\",\"fill\":\"url(#gradation2)\"}})],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"levelMeter\">\n    <div>\n      <svg\n        x=\"0\"\n        y=\"0\"\n        width=\"100%\"\n        height=\"100%\"\n        style=\"background-color: rgba(255, 255, 255, 0.05)\"\n        viewBox=\"0 0 100 3\"\n        preserveAspectRatio=\"none\"\n      >\n        <linearGradient\n          gradientUnits=\"userSpaceOnUse\"\n          id=\"gradation2\"\n          x1=\"0\"\n          y1=\"0\"\n          x2=\"100\"\n          y2=\"0\"\n          spreadMethod=\"pad\"\n        >\n          <stop offset=\"0%\" stop-color=\"#afc6e8\" />\n          <stop offset=\"100%\" stop-color=\"#2e5bcc\" />\n          <!-- <stop offset=\"0%\" stop-color=\"#B7C7E9\" />\n          <stop offset=\"100%\" stop-color=\"#22b2cc\" /> -->\n        </linearGradient>\n        <rect\n          x=\"0\"\n          y=\"0\"\n          v-bind:width=\"draw_level\"\n          height=\"3\"\n          fill=\"url(#gradation2)\"\n        />\n      </svg>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      draw_level: 0,\n      clearId: {},\n    };\n  },\n  props: [\"audio_level\"],\n  mounted() {\n    this.clearId[\"level\"] = setInterval(() => {\n      this.draw_level = this.audio_level * 100;\n    }, 200);\n  },\n  beforeDestroy() {\n    Object.keys(this.clearId).forEach((key) => {\n      clearInterval(this.clearId[key]);\n    });\n  },\n};\n</script>\n\n<style>\ndiv#levelMeter {\n  /* position: absolute; */\n  left: 0px;\n  top: 0px;\n  width: 100%;\n  /* margin-left: 7%;\n  margin-right: 7%; */\n  height: 0.8rem;\n  font-size: 0.5rem;\n}\ndiv#levelMeter div {\n  position: relative;\n  width: 100%;\n  height: 0.6rem;\n}\ndiv#levelMeter span {\n  position: absolute;\n  top: 0;\n  left: 0;\n  color: white;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LevelMeter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LevelMeter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LevelMeter.vue?vue&type=template&id=e48fdffc&\"\nimport script from \"./LevelMeter.vue?vue&type=script&lang=js&\"\nexport * from \"./LevelMeter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LevelMeter.vue?vue&type=style&index=0&id=e48fdffc&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable */\nexport default function P2P(args) {\n  this.kind = args.kind;\n  this.myId = args.myId;\n  this.remote_id = args.remote_id;\n  this.mode = args.mode;\n  this.stream = args.stream;\n  this.socketio = args.socketio;\n  this.stun_server = args.stun_server;\n  this.callback = args.callback;\n  this.target_id = args.target_id ? args.target_id : null;\n  this.peer = null;\n  this.sender = null;\n  this.video_rate = args.video_rate ? args.video_rate : null;\n  this.video_encode = args.video_encode ? args.video_encode : null;\n  this.signalingState = null;\n  this.connectionState = null;\n  this.clearId = {};\n  this.err_flag = false;\n  this.check_connection_period = args.check_connection_period || 10000;\n  this.last_remoteTimestamp = 0;\n  this.codecs = [];\n\n  if (this.kind === \"video\") {\n    this.codecs = RTCRtpSender.getCapabilities(\"video\").codecs;\n    const _mimeType_list = this.codecs.map(codec => { return codec.mimeType });\n    this.mimeType_list = [...new Set(_mimeType_list)];\n    console.log(this.mimeType_list); // 何がサポートされているか\n  }\n\n  this.create_peer = (msg) => {\n    this.peer = new RTCPeerConnection({\n      iceServers: this.stun_server,\n    });\n    this.peer.onicecandidate = this.on_icecandidate;\n    this.peer.ontrack = this.on_track;\n    this.peer.oniceconnectionstatechange = this.on_iceconnectionstatechange;\n    this.peer.onconnectionstatechange = this.on_connectionstatechange;\n    this.peer.onsignalingstatechange = this.on_signalingstatechange;\n    console.log(`PEERを作りました:${msg}`);\n  };\n  this.delete_peer = (msg) => {\n    if (this.peer) {\n      this.peer.onicecandidate = null;\n      this.peer.ontrack = null;\n      this.peer.oniceconnectionstatechange = null;\n      this.peer.onconnectionstatechange = null;\n      this.peer.onsignalingstatechange = null;\n      this.peer.close();\n      this.signalingState = null;\n      this.connectionState = null;\n    }\n    this.peer = null;\n    console.log(`PEERを削除しました:${msg}`);\n  };\n  this.close = () => {\n    if (this.peer) {\n      this.delete_peer();\n    }\n    this.signalingState = null;\n    this.connectionState = null;\n    this.socketio.off(\"publish\", this.recved_msg);\n    Object.keys(this.callback).forEach((cb_name) => {\n      this.callback[cb_name] = null;\n    });\n    Object.keys(this.clearId).forEach((id) => {\n      clearInterval(this.clearId[id]);\n      console.log(\"setIntervalはクリアしたよ！\");\n    });\n  };\n  this.on_icecandidate = (ev) => {\n    if (ev.candidate) {\n      const msg = {\n        type: \"candidate\",\n        kind: this.kind,\n        mode: this.mode,\n        target_id: this.target_id,\n        dest: this.remote_id,\n        src: this.myId,\n        candidate: ev.candidate,\n      };\n      console.log(`SEND:${JSON.stringify(msg)}`);\n      this.socketio.emit(\"publish\", msg);\n    }\n  };\n  this.on_track = async (ev) => {\n    console.log(\n      `RTC: %cKIND = ${this.kind} / MUTE = ${ev.track.muted}`,\n      \"color: green;\"\n    );\n    // if (this.kind == \"audio\") {\n    //   this.clearId[\"getstats\"] = setInterval(() => {\n    //     this.get_stats();\n    //   }, 200);\n    // }\n    if (this.callback.ontrack) {\n      this.callback.ontrack(ev);\n    }\n  };\n  this.on_iceconnectionstatechange = (ev) => {\n    if (!this.peer) return;\n\n    const iceState = this.peer.iceConnectionState;\n    console.log(`${this.kind}.${this.myId} ICE STATE = ${iceState}`);\n    switch (iceState) {\n      case \"new\":\n      case \"checking\":\n      case \"connected\":\n      case \"completed\":\n        break;\n      case \"failed\":\n      case \"disconnected\":\n      case \"closed\":\n        break;\n    }\n  };\n  this.on_connectionstatechange = (ev) => {\n    if (!this.peer) return;\n\n    this.connectionState = this.peer.connectionState;\n    if (this.callback.con_state_emit)\n      this.callback.con_state_emit({\n        connectionState: this.connectionState,\n      });\n\n    console.log(\n      `${this.kind}.${this.myId} CON STATE = ${this.connectionState}`\n    );\n    switch (this.connectionState) {\n      case \"new\":\n      case \"connecting\":\n        break;\n      case \"connected\":\n        this.get_currentDirection();\n        // 初期接続時にAudioをconnectedにするため、offerを開始して、\n        // connectedになったら、trackをnullに置換する。\n        if (this.kind == \"audio\" && this.mode == \"group\" && this.sender) {\n          this.sender.replaceTrack(null);\n        }\n        break;\n      case \"disconnected\":\n      // break;\n      // falls through\n      case \"failed\":\n        console.log(\"★★★★★★★★★★★ CONNECTION FAILED ★★★★★★★★★★★★★★★\");\n        if (this.callback.on_failed) this.callback.on_failed();\n        break;\n      case \"closed\":\n        break;\n    }\n  };\n  this.on_signalingstatechange = (ev) => {\n    if (!this.peer) return;\n\n    this.signalingState = this.peer.signalingState;\n    if (this.callback.sig_state_emit)\n      this.callback.sig_state_emit({\n        signalingState: this.signalingState,\n      });\n\n    console.log(`${this.kind}.${this.myId} SIG STATE = ${this.signalingState}`);\n    switch (this.signalingState) {\n      case \"stable\":\n        this.get_currentDirection();\n        break;\n      case \"have-local-offer\":\n      case \"have-remote-offer\":\n      case \"have-local-pranswer\":\n      case \"have-remote-pranswer\":\n        break;\n    }\n  };\n\n  this.get_currentDirection = () => {\n    this.peer.getTransceivers().forEach((tr) => {\n      if (tr.sender && tr.sender.track) {\n        console.log(\n          `RTC: %cKIND = ${this.kind}.${this.myId} / CUR_DIRECTION = ${tr.currentDirection}`,\n          \"color: red;\"\n        );\n      }\n    });\n  };\n  this.get_stats = async (res_stats) => {\n    if (!this.peer) return;\n\n    let _stats;\n    for (let recv of this.peer.getReceivers()) {\n      _stats = await recv.getStats();\n      _stats.forEach((report) => {\n        const _type = report.type.replace(/-/g, \"_\");\n        res_stats[_type] = { ...report };\n      });\n    }\n\n    // 音声レベル\n    if (res_stats.track && res_stats.track.audioLevel) {\n      console.log(res_stats.track.audioLevel);\n    }\n\n    return _stats;\n  };\n  this.change_stream = (stream) => {\n    this.stream = stream;\n  };\n  this.change_encode = (encode) => {\n    // 符号化指定\n    if (this.kind === \"video\" && encode && encode !== \"\") {\n      const selected_codecs = this.codecs.filter(codec => {\n        return codec.mimeType === encode;\n      });\n      console.log(selected_codecs);\n      if (selected_codecs) {\n        const [tr] = this.peer.getTransceivers();\n        tr.setCodecPreferences(selected_codecs);\n        console.log(`符号化を${encode}に設定しました`)\n      }\n    }\n  };\n  this.change_rate = (rate) => {\n    // 帯域制御\n    this.sender = this.get_sender();\n    if (this.sender && rate) {\n      const params = this.sender.getParameters();\n      if (params && params.encodings && params.encodings[0]) {\n        params.encodings[0].maxBitrate = rate;\n        this.sender.setParameters(params);\n      }\n    }\n  };\n\n  this.start_offer = async (direction) => {\n    try {\n      // peerが無い場合には作成する。\n      // 既にpeerが存在する場合には、directionを更新し、送信側trackの更新のみ行う。\n      console.log(\n        `RTC: %c${this.kind}.${this.myId} / DIR=${direction} / ${this.signalingState} START_OFFER`,\n        \"color: orange;\"\n      );\n      if (this.signalingState != null && this.signalingState != \"stable\")\n        return;\n\n      const track = this.stream.getTracks()[0];\n      let first_times = false;\n\n      if (this.peer) {\n        const [tr] = this.peer.getTransceivers();\n        if (tr) {\n          tr.direction = direction;\n          tr.sender.replaceTrack(track);\n        } else {\n          console.log(\"trが無いよ\");\n        }\n      } else {\n        first_times = true;\n        this.create_peer(\"こちらはOFFERだよ\");\n        if (direction == \"recvonly\") {\n          this.peer.addTransceiver(this.kind, { direction: \"recvonly\" });\n          // 受信のみの場合、何もしない方が良いらしい\n        } else {\n          // 自分が送信する場合(sendonly, sendrecv)\n          if (direction == \"sendonly\") {\n            console.log(\"★★★★★★★★★  START_OFFER ADDTRANSCEIVER  ★★★★★★★★★★★★★\");\n            const tr = this.peer.addTransceiver(track, {\n              streams: [this.stream],\n              direction: \"sendonly\",\n            });\n            this.sender = tr.sender;\n          } else if (direction == \"sendrecv\") {\n            this.sender = this.peer.addTrack(track, this.stream);\n          }\n        }\n      }\n      // 対象peerに対して、offer作成、local側SDP登録、local側SDPの送信を実施\n      const offer = await this.peer.createOffer();\n      await this.peer.setLocalDescription(offer);\n\n      //送信速度変更\n      if (direction == \"sendonly\" || direction == \"sendrecv\") {\n        this.change_encode(this.video_encode);\n        this.change_rate(this.video_rate);\n      }\n\n      const send_msg = {\n        type: \"offer\",\n        kind: this.kind,\n        mode: this.mode,\n        target_id: this.target_id,\n        dest: this.remote_id,\n        src: this.myId,\n        sdp: this.peer.localDescription,\n        first_times: first_times,\n      };\n      // console.log(`SEND:${JSON.stringify(send_msg)}`);\n      console.log(`start_offer: first_times: ${send_msg.first_times}`);\n      this.socketio.emit(\"publish\", send_msg);\n    } catch (err) {\n      console.log(\"★★★★★★★★★  START_OFFER ERROR  ★★★★★★★★★★★★★\");\n      console.log(err);\n      // if (this.callback.on_failed) this.callback.on_failed();\n      this.err_flag = true;\n      this.delete_peer(); // peerを廃棄する。\n    }\n  };\n\n  this.recv_offer = async (msg) => {\n    try {\n      console.log(\n        `RTC: %c${msg.kind}.${msg.target_id} / ${this.signalingState} RECV_OFFER`,\n        \"color: orange;\"\n      );\n      const track = this.stream.getTracks()[0];\n      console.log(`recv_offer: first_times: ${msg.first_times}`);\n      if (!this.peer || msg.first_times) {\n        this.create_peer(\"こちらはANSWERだよ\");\n        this.peer.addTrack(track, this.stream);\n      } else {\n        const [sender] = this.peer.getSenders();\n        if (sender) {\n          sender.replaceTrack(track);\n        } else {\n          this.peer.addTrack(track, this.stream);\n        }\n      }\n\n      await this.peer.setRemoteDescription(msg.sdp);\n      const answer = await this.peer.createAnswer();\n      await this.peer.setLocalDescription(answer);\n\n      //送信速度変更\n      if (msg.first_times) {\n        this.change_encode(this.video_encode);\n        this.change_rate(this.video_rate);\n      }\n\n      const send_msg = {\n        type: \"answer\",\n        kind: msg.kind,\n        mode: this.mode,\n        target_id: msg.target_id,\n        dest: this.remote_id,\n        src: this.myId,\n        sdp: this.peer.localDescription,\n      };\n      console.log(\n        `RTC: %c${msg.kind}.${msg.target_id} RECV_OFFER`,\n        \"color: green;\"\n      );\n      this.socketio.emit(\"publish\", send_msg);\n    } catch (err) {\n      console.log(`${Date.now()}: ${err}`);\n      // if (this.callback.on_failed) this.callback.on_failed();\n      this.err_flag = true;\n      this.delete_peer(); // peerを廃棄する。\n    }\n  };\n\n  this.get_sender = () => {\n    if (!this.sender && this.peer) {\n      const [tr] = this.peer.getTransceivers();\n      this.sender = tr && tr.sender;\n    }\n    return this.sender;\n  };\n\n  this.recv_answer = async (msg) => {\n    console.log(\n      `RTC: %c${msg.kind}.${msg.target_id} / RECV_ANSWER`,\n      \"color: green;\"\n    );\n    try {\n      await this.peer.setRemoteDescription(msg.sdp);\n      if (this.kind == \"audio\" && this.mode == \"group\" && this.sender) {\n        console.log(\"OFFにしたよー\");\n        this.sender.replaceTrack(null);\n      }\n    } catch (err) {\n      console.log(`${Date.now()}: ${err}`);\n      if (this.callback.on_failed) this.callback.on_failed();\n      this.err_flag = true;\n      this.delete_peer(); // peerを廃棄する。\n    }\n  };\n  this.recv_candidate = async (msg) => {\n    console.log(\n      `RTC: %c${msg.kind}.${msg.target_id} / RECV_CANDIDATE`,\n      \"color: green;\"\n    );\n    if (this.peer) {\n      await this.peer.addIceCandidate(msg.candidate);\n    }\n  };\n\n  this.recv_reconnect = () => {\n    console.log(\"再接続要求されました！\");\n    this.err_flag = false;\n    this.delete_peer();\n    const msg = {\n      type: \"reconnect-aggree\",\n      kind: this.kind,\n      mode: this.mode,\n      target_id: this.target_id,\n      dest: this.remote_id,\n      src: this.myId,\n    };\n    console.log(`SEND:${JSON.stringify(msg)}`);\n    this.socketio.emit(\"publish\", msg);\n  };\n\n  this.recv_aggree = () => {\n    console.log(\"再接続要求受理されたので再接続します！\");\n    this.err_flag = false;\n    this.delete_peer();\n    setTimeout(() => {\n      this.sv_start();\n    }, 1000);\n  };\n\n  // recved_msgで処理されるモノははWebRTC規格のメッセージのみ\n  // candidate、offer、answer以外は処理されない。\n  this.recved_msg = (msg) => {\n    console.log(\n      `RTC: %c${msg.kind}.${msg.target_id} TYPE=${msg.type} SIGSTATE=${this.signalingState}`,\n      \"color: gray;\"\n    );\n\n    if (\n      msg.dest == this.myId &&\n      msg.src == this.remote_id &&\n      msg.mode == this.mode &&\n      msg.kind == this.kind &&\n      msg.target_id == this.target_id\n    ) {\n      if (msg.type == \"candidate\") {\n        this.recv_candidate(msg);\n      } else if (msg.type == \"offer\") {\n        this.recv_offer(msg);\n      } else if (msg.type == \"answer\") {\n        this.recv_answer(msg);\n      } else if (msg.type == \"reconnect\") {\n        this.recv_reconnect();\n      } else if (msg.type == \"reconnect-aggree\") {\n        this.recv_aggree();\n      }\n    }\n  };\n  this.socketio.on(\"publish\", this.recved_msg);\n  this.start = () => {\n    if (this.mode == \"group\") {\n      if (this.kind == \"video\") {\n        this.start_offer(\"recvonly\");\n      } else {\n        this.start_offer(\"sendonly\");\n      }\n    } else {\n      this.start_offer(\"sendrecv\");\n    }\n  };\n  this.sv_start = () => {\n    this.delete_peer();\n    this.start();\n    setTimeout(() => {\n      if (this.connectionState != \"connected\" || this.err_flag == true) {\n        const msg = {\n          type: \"reconnect\",\n          kind: this.kind,\n          mode: this.mode,\n          target_id: this.target_id,\n          dest: this.remote_id,\n          src: this.myId,\n        };\n        console.log(`SEND:${JSON.stringify(msg)}`);\n        console.log(\"再接続要求しまーす\");\n        this.socketio.emit(\"publish\", msg);\n      }\n    }, this.check_connection_period);\n  };\n  this.stop = () => {\n    if (this.connectionState == \"connected\") {\n      this.start_offer(\"inactive\");\n    }\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('canvas',{ref:\"cvsRef\",staticClass:\"cvsRef\",attrs:{\"width\":_vm.width,\"height\":_vm.height}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <canvas\n      ref=\"cvsRef\"\n      :width=\"width\"\n      :height=\"height\"\n      class=\"cvsRef\"\n    ></canvas>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\nimport { DeviceOrientationControls } from \"three/examples/jsm/controls/DeviceOrientationControls.js\";\n\nexport default {\n  props: [\"videoElm\", \"width\", \"height\"],\n  data() {\n    return {\n      scene: null,\n      camera: null,\n      controls: null,\n      renderer: null,\n    };\n  },\n  mounted() {\n    this.init();\n  },\n  methods: {\n    async init() {\n      //windowサイズを画面サイズに合わせる\n      // シーンの作成\n      this.scene = new THREE.Scene();\n      // カメラの作成\n      this.camera = new THREE.PerspectiveCamera(\n        75,\n        this.width / this.height,\n        1,\n        1000\n      );\n      this.camera.position.set(0, 0, 0);\n      this.scene.add(this.camera);\n      // 球体の形状を作成\n      const geometry = new THREE.SphereGeometry(5, 60, 40);\n      geometry.scale(-1, 1, 1);\n      // テクスチャー\n      const texture = new THREE.VideoTexture(this.videoElm);\n      texture.minFilter = THREE.LinearFilter;\n      texture.magFilter = THREE.LinearFilter;\n      texture.format = THREE.RGBFormat;\n      //球体のマテリアルを生成\n      const material = new THREE.MeshBasicMaterial({ map: texture });\n      // 球体(形状)にマテリアル(質感)を貼り付けて物体を作成\n      const sphere = new THREE.Mesh(geometry, material);\n      //　シーンに追加\n      this.scene.add(sphere);\n      // レンダラーの作成\n      this.renderer = new THREE.WebGLRenderer({ canvas: this.$refs.cvsRef });\n      // レンダラーをサイズに合わせる\n      this.renderer.setSize(this.width, this.height);\n      this.renderer.setClearColor({ color: 0x000000 });\n      // const element = this.renderer.domElement;\n      // // document.getElementById(\"stage\").appendChild(element);\n      // element.style.width = \"500\";\n      // element.style.height = \"500\";\n      // elm.appendChild(element);\n      this.renderer.render(this.scene, this.camera);\n\n      // デバイスの判別\n      let isAndroid = false;\n      let isIOS = false;\n      if (navigator.userAgent.indexOf(\"Android\") != -1) {\n        //　デバイスがAndroidの場合\n        isAndroid = true;\n      } else if (\n        /(iPad|iPhone|iPod|macintosh)/g.test(navigator.userAgent) &&\n        \"ontouchend\" in document\n      ) {\n        //　デバイスがiOSの場合\n        isIOS = true;\n      }\n      // if (isAndroid || isIOS) {\n      //   // デバイスがスマートフォンまたはタブレット端末の場合\n      //   // ジャイロセンサーで視点操作を可能にする\n      //   window.addEventListener(\"deviceorientation\", this.setOrientationControls, true);\n      // } else {\n      //   // パソコンの場合\n      //   // マウスドラッグで視点操作を可能にする\n      //   this.setOrbitControls();\n      // }\n      if (isAndroid) {\n        // デバイスがスマートフォンまたはタブレット端末の場合\n        // ジャイロセンサーで視点操作を可能にする\n        window.addEventListener(\n          \"deviceorientation\",\n          this.setOrientationControls,\n          true\n        );\n        // } else if (isIOS) {\n        //   const res = await DeviceOrientationEvent.requestPermission();\n        //   if (res === \"granted\") {\n        //     window.addEventListener(\"deviceorientation\", this.setOrientationControls, true);\n        //   } else {\n        //     this.setOrbitControls();\n        //   }\n      } else {\n        // パソコンの場合\n        // マウスドラッグで視点操作を可能にする\n        this.setOrbitControls();\n      }\n      this.render();\n    },\n    // リサイズ処理\n    handleResize() {\n      this.renderer.setSize(window.innerWidth, window.innerHeight);\n      this.camera.aspect = window.innerWidth / window.innerHeight;\n      this.camera.updateProjectionMatrix();\n    },\n    setOrbitControls() {\n      // パソコン閲覧時マウスドラッグで視点操作する\n      // controls = new THREE.OrbitControls(camera, element);\n      this.controls = new OrbitControls(this.camera, this.$refs.cvsRef);\n      this.controls.target.set(\n        this.camera.position.x + 0.15,\n        this.camera.position.y,\n        this.camera.position.z\n      );\n      // 視点操作のイージングをONにする\n      this.controls.enableDamping = true;\n      // 視点操作のイージングの値\n      this.controls.dampingFactor = 0.2;\n      // 視点変更の速さ\n      // this.controls.rotateSpeed = 0.1;\n      this.controls.rotateSpeed = -0.2;\n      // ズーム禁止\n      this.controls.noZoom = false;\n      // パン操作禁止\n      this.controls.noPan = false;\n    },\n    // ジャイロセンサーで視点操作する\n    setOrientationControls(e) {\n      // スマートフォン以外で処理させない\n      if (!e.alpha) {\n        // ジャイロが効いていない場合\n        return;\n      }\n      // controls = new THREE.DeviceOrientationControls(camera, true);\n      this.controls = new DeviceOrientationControls(this.camera, true);\n      this.controls.connect();\n      this.controls.update();\n      window.removeEventListener(\n        \"deviceorientation\",\n        this.setOrientationControls,\n        true\n      );\n    },\n    render() {\n      requestAnimationFrame(this.render);\n      this.renderer.render(this.scene, this.camera);\n      this.controls.update();\n    },\n  },\n};\n</script>\n\n<style>\n.cvsRef {\n  width: 100% !important;\n  height: 100% !important;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./C360Elm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./C360Elm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./C360Elm.vue?vue&type=template&id=0ee5af22&\"\nimport script from \"./C360Elm.vue?vue&type=script&lang=js&\"\nexport * from \"./C360Elm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./C360Elm.vue?vue&type=style&index=0&id=0ee5af22&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"remote_box\">\n    <template v-if=\"is_group_in_local\">\n      <div class=\"videoTitle\" :style=\"titleStyleObj\">\n        <div class=\"videoTitleLeft\">\n          <img :src=\"img_menu\" class=\"icon_img\" />\n        </div>\n        <div class=\"videoTitleCenter\">\n          {{ user && user.user_name + talk_mode }}\n        </div>\n        <div class=\"videoTitleRight\" @click=\"onTitleClick\">\n          <img\n            :src=\"downButtonSrc\"\n            class=\"icon_img\"\n            :class=\"{ rotate90: !show_video }\"\n          />\n        </div>\n      </div>\n    </template>\n    <template v-if=\"is_private_in_local\">\n      <div class=\"videoTitle\">\n        <div class=\"videoTitleLeft\">\n          <img :src=\"img_menu\" class=\"icon_img\" />\n        </div>\n        <div class=\"videoTitleCenter\">{{ user && user.user_name }}:個別</div>\n        <div class=\"videoTitleRight\" @click=\"stop\" title=\"通話終了\">\n          <img :src=\"img_close\" />\n        </div>\n      </div>\n    </template>\n    <level-meter :audio_level=\"audio_level\" class=\"levelMeter\"></level-meter>\n    <div v-if=\"is_loading\" style=\"width: 100%; z-index: 100\">\n      <div class=\"loaderContainer\">\n        <div class=\"spinner-border text-light\" role=\"status\">\n          <span class=\"sr-only\">Loading...</span>\n        </div>\n        <div style=\"color: white\">\n          {{ connectionState }}/{{ signalingState }}\n        </div>\n      </div>\n    </div>\n    <div v-show=\"show_video && !is_loading\" class=\"remote_video_box\">\n      <video\n        ref=\"remote_video\"\n        :class=\"{ remote_video_none: onC360play }\"\n        class=\"remote_video\"\n        muted\n        autoplay\n        playsinline\n        @dblclick=\"fullscreen\"\n      ></video>\n      <c-360-elm\n        class=\"remote_canvas\"\n        v-if=\"onC360play\"\n        :videoElm=\"$refs.remote_video\"\n        :width=\"settings_height\"\n        :height=\"settings_height\"\n      ></c-360-elm>\n      <div class=\"remote_settings\">\n        {{ settings_height }}@{{ settings_frameRate }}fps\n      </div>\n    </div>\n    <div\n      v-show=\"show_audio && !is_loading\"\n      class=\"remote_audio_box\"\n      :style=\"style_remote_audio\"\n      @mousedown.stop=\"audio_on_off\"\n      @touchstart.stop=\"audio_on_off\"\n    >\n      <img :src=\"img_mic\" class=\"img_mic\" />\n    </div>\n    <audio ref=\"remote_audio\" autoplay></audio>\n  </div>\n</template>\n\n<script>\nimport LevelMeter from \"./LevelMeter\";\nimport P2P from \"./P2P\";\nimport c360Elm from \"@/components/C360Elm.vue\";\n\nexport default {\n  data() {\n    return {\n      audio_level: 0,\n      audio_on_once: false,\n      last_audio_level: 0,\n      show_video: false,\n      show_audio: false,\n      is_loading: false,\n      connectionState: \"\",\n      signalingState: \"\",\n      img_mic: require(\"@/assets/mic.png\"),\n      audio_on_off_flag: false,\n      start_audio_once: false,\n      offer_video_peer: null,\n      offer_audio_peer: null,\n      answer_video_peer: null,\n      answer_audio_peer: null,\n      audio_sender: null,\n      clearId: {},\n      img_close: require(\"@/assets/etc_close@1x.png\"),\n      img_menu: require(\"./assets/menu@1x.png\"),\n      onC360play: false,\n      remote_video_settings: null,\n      remote_settings_id: null,\n    };\n  },\n  components: {\n    levelMeter: LevelMeter,\n    c360Elm,\n  },\n  props: [\"remote_id\", \"user\", \"mode\"],\n  mounted() {\n    console.log(\"★★★★★★★★★  REMOTE_VIDEO MOUNTED  ★★★★★★★★★★★★★\");\n\n    this.offer_video_peer = new P2P({\n      kind: \"video\",\n      target_id: this.myId,\n      myId: this.myId,\n      remote_id: this.remote_id,\n      mode: this.mode,\n      stream: this.local_video_stream,\n      socketio: this.socketio,\n      stun_server: this.stun_server,\n      video_rate: this.video_rate,\n      video_encode: this.video_encode,\n      callback: {\n        ontrack: (ev) => {\n          this.on_track(ev);\n          this.$refs.remote_video.srcObject = new MediaStream([ev.track]);\n          this.show_video = true;\n          // -------------------------------------------------------------\n          // android対策\n          // 何故か、trackがendedになっている時がある。\n          ev.track.onended = () => {\n            this.show_video = false;\n            this.start_stop_video();\n          };\n          // -------------------------------------------------------------\n          // iOS対策\n          // 何故か、autoplayが効かない時がある。\n          setTimeout(() => {\n            this.$refs.remote_video.play();\n          }, 500);\n        },\n        // on_failed: () => {\n        //   this.stop();\n        // },\n        con_state_emit: (ev) => {\n          this.connectionState = ev.connectionState;\n          if (ev.connectionState == \"connected\") {\n            this.is_loading = false;\n          }\n        },\n        sig_state_emit: (ev) => {\n          this.signalingState = ev.signalingState;\n        },\n      },\n    });\n    this.answer_video_peer = new P2P({\n      kind: \"video\",\n      target_id: this.remote_id,\n      myId: this.myId,\n      remote_id: this.remote_id,\n      mode: this.mode,\n      stream: this.local_video_stream,\n      socketio: this.socketio,\n      stun_server: this.stun_server,\n      video_rate: this.video_rate,\n      video_encode: this.video_encode,\n      callback: {\n        ontrack: (ev) => {\n          this.on_track(ev);\n          this.$refs.remote_video.srcObject = new MediaStream([ev.track]);\n          this.show_video = true;\n        },\n        // on_failed: () => {\n        //   this.stop();\n        // },\n        con_state_emit: (ev) => {\n          if (this.is_private_in_local) {\n            this.connectionState = ev.connectionState;\n            if (ev.connectionState == \"connected\") {\n              this.$store.state.toast_on(\n                `${this.user.user_name}が閲覧を開始しました`,\n                \"success\"\n              );\n            } else {\n              this.is_loading = false;\n            }\n          }\n        },\n        sig_state_emit: (ev) => {\n          if (this.is_private_in_local) {\n            this.signalingState = ev.signalingState;\n          }\n        },\n      },\n    });\n    // --------------------------------------------\n    this.offer_audio_peer = new P2P({\n      kind: \"audio\",\n      target_id: this.myId,\n      myId: this.myId,\n      remote_id: this.remote_id,\n      mode: this.mode,\n      stream: this.local_audio_stream,\n      socketio: this.socketio,\n      stun_server: this.stun_server,\n      check_connection_period: this.check_connection_period,\n      callback: {\n        ontrack: (ev) => {\n          this.$refs.remote_audio.srcObject = new MediaStream([ev.track]);\n          // const tr = ev.transceiver;\n          // tr.sender.track.enabled = true;\n          // this.audio_sender = tr.sender;\n          // this.img_mic = require(\"@/assets/mic.png\");\n          if (this.mode == \"private\") this.show_audio = true;\n          this.start_get_audio_level(this.offer_audio_peer, \"offer_audio\");\n        },\n        on_failed: () => {\n          this.audio_restart();\n        },\n        con_state_emit: (ev) => {\n          if (ev.connectionState == \"connected\") {\n            this.is_loading = false;\n          }\n        },\n      },\n    });\n    this.answer_audio_peer = new P2P({\n      kind: \"audio\",\n      target_id: this.remote_id,\n      myId: this.myId,\n      remote_id: this.remote_id,\n      mode: this.mode,\n      stream: this.local_audio_stream,\n      socketio: this.socketio,\n      stun_server: this.stun_server,\n      check_connection_period: this.check_connection_period,\n      callback: {\n        ontrack: (ev) => {\n          this.$refs.remote_audio.srcObject = new MediaStream([ev.track]);\n          // const tr = ev.transceiver;\n          // tr.sender.track.enabled = true;\n          // this.audio_sender = tr.sender;\n          // this.img_mic = require(\"@/assets/mic.png\");\n          if (this.mode == \"private\") this.show_audio = true;\n          this.start_get_audio_level(this.answer_audio_peer, \"answer_audio\");\n        },\n        // on_failed: () => {\n        //   this.stop();\n        // },\n        con_state_emit: (ev) => {\n          if (ev.connectionState == \"connected\") {\n            this.is_loading = false;\n          }\n        },\n      },\n    });\n    if (this.mode == \"group\" && this.start_audio_once == false) {\n      this.start_audio_once = true;\n      setTimeout(() => {\n        this.offer_audio_peer.sv_start();\n        // this.offer_audio_peer.start();\n        console.log(\"こっちは、mountedの中で起動されたsv_startだよ～\");\n      }, 3000);\n    }\n    if (this.$refs.remote_video) {\n      this.$refs.remote_video.oncanplay = () => {\n        this.is_loading = false;\n        console.log(\"★★★★★★ CAN PLAY ★★★★★★★\");\n      };\n    }\n    if (this.is_private_in_local) {\n      this.is_loading = true;\n    }\n\n    // this.socketio.on(\"publish\", this.recved_msg);\n    // setTimeout(() => {\n    //   this.start_offer(\"audio\");\n    // }, 3000);\n  },\n  watch: {\n    at_send(val) {\n      if (this.ptt_type == \"webrtc\" && this.is_group_in_local) {\n        const sender = this.offer_audio_peer.get_sender();\n\n        if (sender) {\n          if (val) {\n            if (this.offer_audio_peer.connectionState != \"connected\") {\n              this.$store.state.toast_on(\n                `${this.user.user_name}と接続されていません。接続後に呼び出しを行ってください。`\n              );\n            }\n\n            const [audio_track] = this.local_audio_stream.getAudioTracks();\n            sender.replaceTrack(audio_track);\n          } else {\n            sender.replaceTrack(null);\n          }\n        }\n      }\n    },\n    local_video_stream() {\n      this.answer_video_peer.change_stream(this.local_video_stream);\n\n      const answer_video_peer_sender = this.answer_video_peer.get_sender();\n      const offer_video_peer_sender = this.offer_video_peer.get_sender();\n      const sender = answer_video_peer_sender\n        ? answer_video_peer_sender\n        : offer_video_peer_sender;\n\n      if (this.local_video_stream && sender) {\n        const [video_track] = this.local_video_stream.getVideoTracks();\n        sender.replaceTrack(video_track);\n      }\n    },\n    // 2021/12/01 by noriaki.nakamura\n    // 映像共有ボタンOFF時に映像共有を停止させる。\n    is_showed() {\n      if (this.is_showed == false && this.is_group_in_local) {\n        this.offer_video_peer && this.offer_video_peer.stop();\n        this.show_video = false;\n      }\n    },\n    remote_video_id() {\n      console.log(\"切り替わったよ～\");\n    },\n  },\n  computed: {\n    // is_loading() {\n    //   if (this.show_video || this.show_audio) {\n    //     return false;\n    //   } else {\n    //     return this.signalingState != \"\" || this.connectionState != \"\";\n    //   }\n    // },\n    settings_height() {\n      return this.remote_video_settings ? this.remote_video_settings.height : 0;\n    },\n    settings_frameRate() {\n      const frameRate = this.remote_video_settings && this.remote_video_settings.frameRate;\n      return !isNaN(frameRate) ? Math.floor(frameRate) : \"-\";\n    },\n    remote_video_id() {\n      return this.$refs.remote_video && this.$refs.remote_video.srcObject\n        ? this.$refs.remote_video.srcObject.getVideoTracks()[0].id\n        : null;\n    },\n    is_offer_video_available() {\n      return this.signalingState == \"stable\" || this.signalingState == \"\";\n    },\n    check_connection_period() {\n      return this.$store.getters[\"check_connection_period\"];\n    },\n    // 2021/12/01 by noriaki.nakamura\n    // 映像共有ボタンOFF時に映像共有を停止させる。\n    is_showed() {\n      return this.$store.getters[\"rtc/remote_show\"];\n    },\n    // renew通知にて、接続先がグループ通話可能か？を示す。\n    is_group_in_remote() {\n      return this.user && this.user.per == \"group\";\n    },\n    is_group_in_local() {\n      return this.mode == \"group\";\n    },\n    is_private_in_local() {\n      return this.mode == \"private\";\n    },\n    talk_mode() {\n      return this.is_group_in_remote ? \"\" : \"(個別)\";\n    },\n    titleStyleObj() {\n      return {\n        backgroundColor: this.is_offer_video_available ? \"#39a2c0\" : \"darkgray\",\n        Opacity: this.is_offer_video_available ? 1.0 : 0.7,\n      };\n    },\n    downButtonSrc() {\n      return require(\"./assets/etc_arrow_01@1x.png\");\n\n      // return this.watching\n      //   ? require(\"./assets/etc_arrow_01@1x.png\")\n      //   : require(\"./assets/etc_arrow_01@1x.png\");\n    },\n    out_level() {\n      return this.$store.getters[\"rtc/out_level\"];\n    },\n    at_send() {\n      return this.$store.getters[\"ptt/pttActive\"];\n    },\n    ptt_type() {\n      return this.$store.state.ptt_type;\n    },\n    stun_server() {\n      return this.$store.getters[\"stun_server\"];\n    },\n    video_rate() {\n      return this.$store.getters[\"video_rate\"];\n    },\n    video_encode() {\n      return this.$store.getters[\"video_encode\"];\n    },\n    myId() {\n      return this.$store.getters[\"amt/myId\"];\n    },\n    users() {\n      return this.$store.getters[\"amt/users\"];\n    },\n    local_video_stream() {\n      // return this.$store.getters[\"rtc/local_video_stream\"];\n      const stream = this.$store.getters[\"rtc/local_video_stream\"];\n      const [track] = stream.getVideoTracks();\n      if (track) {\n        return stream;\n      } else {\n        return this.dummy_video_staream;\n      }\n    },\n    local_audio_stream() {\n      return this.$store.getters[\"rtc/local_audio_stream\"];\n    },\n    dummy_video_staream() {\n      return this.$store.getters[\"rtc/dummy_video_stream\"];\n    },\n    socketio() {\n      return this.$store.getters[\"socketio\"];\n    },\n    style_remote_audio() {\n      return {\n        position: this.show_video ? \"absolute\" : \"relative\",\n        width: this.show_video ? \"3rem\" : \"100%\",\n        height: this.show_video ? \"3rem\" : \"100%\",\n      };\n    },\n    func_toggle_cam() {\n      return this.$store.getters[\"rtc/func_toggle_cam\"];\n    },\n  },\n  methods: {\n    on_track(ev) {\n      console.log(`ev.track`);\n      console.dir(ev.track);\n      const clear_settings_id = () => {\n        clearInterval(this.remote_settings_id);\n        this.remote_settings_id = null;\n      };\n      if (this.remote_settings_id) clear_settings_id();\n      ev.track.onended = clear_settings_id;\n      this.remote_settings_id = setInterval(() => {\n        if (this.$refs.remote_video && this.$refs.remote_video.srcObject) {\n          const [track] = this.$refs.remote_video.srcObject.getVideoTracks();\n          this.remote_video_settings = track.getSettings();\n          // console.log(this.remote_video_settings.aspectRatio);\n          let { aspectRatio, width, height } = this.remote_video_settings;\n          if (aspectRatio === 2 || width / height === 2) {\n            this.onC360play = true;\n          } else {\n            this.onC360play = false;\n          }\n        }\n      }, 1000);\n    },\n    oncanplay() {\n      this.is_loading = false;\n      console.log(\"★★★★★★ CAN PLAY ★★★★★★★\");\n    },\n    onTitleClick(ev) {\n      ev.preventDefault();\n      this.$store.state.sound_on();\n      this.start_stop_video();\n    },\n\n    start_get_audio_level(p2p, id) {\n      if (this.clearId[id]) {\n        clearInterval(this.clearId[id]);\n      }\n      this.clearId[id] = setInterval(async () => {\n        const stats = {};\n        await p2p.get_stats(stats);\n\n        // 音声レベル\n        if (stats.inbound_rtp && stats.inbound_rtp.audioLevel) {\n          this.audio_level = stats.inbound_rtp.audioLevel;\n\n          if (this.audio_level > 0.0003) {\n            if (!this.audio_on_once) {\n              this.$store.commit(\"ptt/set_recv_active\", true);\n              const txt = `${\n                this.users[this.remote_id].user_name\n              }より着信しました`;\n              this.$store.state.toast_on(txt);\n            }\n            this.audio_on_once = true;\n          } else {\n            if (this.audio_on_once && this.audio_level < 0.0001) {\n              this.$store.commit(\"ptt/set_recv_active\", false);\n              this.audio_on_once = false;\n            }\n          }\n        } else {\n          if (this.audio_on_once) {\n            this.$store.commit(\"ptt/set_recv_active\", false);\n            this.audio_on_once = false;\n          }\n        }\n\n        // 遅延時間\n        if (\n          stats.remote_outbound_rtp &&\n          stats.remote_outbound_rtp.remoteTimestamp\n        ) {\n          const remoteTimestamp = stats.remote_outbound_rtp.remoteTimestamp;\n\n          if (remoteTimestamp != this.last_remoteTimestamp) {\n            const sa = Date.now() - remoteTimestamp;\n            console.log(`タイムスタンプが更新されました。${sa}`);\n            if (sa > 2000) {\n              this.$store.commit(\"ptt/set_rtt_over\", true);\n            } else {\n              this.$store.commit(\"ptt/set_rtt_over\", false);\n            }\n          }\n          this.last_remoteTimestamp = remoteTimestamp;\n        }\n\n        // パケットロス\n        if (stats.inbound_rtp && stats.inbound_rtp.packetsLost) {\n          if (this.packetsLost != stats.inbound_rtp.packetsLost) {\n            console.log(`packetLoss=${stats.inbound_rtp.packetsLost}`);\n          }\n          this.packetsLost = stats.inbound_rtp.packetsLost;\n        }\n      }, 200);\n    },\n\n    audio_on_off() {\n      // audio_on_off_flagはチャタ防止で、一度触れると、1秒操作を防止する。\n      if (this.audio_on_off_flag) return;\n      this.audio_on_off_flag = true;\n\n      const audio_peers = [this.offer_audio_peer, this.answer_audio_peer];\n      let audio_sender = null;\n      for (let peer of audio_peers) {\n        if (!peer.peer) continue;\n        const tr = peer.peer.getTransceivers()[0];\n        if (tr.sender && tr.sender.track && tr.sender.track.kind == \"audio\") {\n          audio_sender = tr.sender;\n        }\n      }\n      if (audio_sender.track.enabled) {\n        audio_sender.track.enabled = false;\n        this.img_mic = require(\"@/assets/mic_off.png\");\n      } else {\n        audio_sender.track.enabled = true;\n        this.img_mic = require(\"@/assets/mic.png\");\n      }\n      setTimeout(() => {\n        this.audio_on_off_flag = false;\n      }, 1000);\n    },\n    fullscreen() {\n      this.$refs.remote_video.requestFullscreen();\n    },\n    start_stop_video() {\n      if (!this.is_offer_video_available) return;\n\n      if (this.show_video) {\n        this.offer_video_peer.stop();\n        this.show_video = false;\n        this.is_loading = false;\n        this.onC360play = false;\n        // this.$emit(\"call_end\", this.remote_id);\n      } else {\n        this.offer_video_peer.start();\n        this.show_video = true;\n        this.is_loading = true;\n      }\n    },\n    start(kind) {\n      this.is_loading = true;\n      this.offer_audio_peer.start();\n      this.show_audio = true;\n      if (kind == \"video\") {\n        this.offer_video_peer.start();\n        this.show_video = true;\n      }\n    },\n    stop() {\n      this.show_video = false;\n      this.show_audio = false;\n      this.is_loading = false;\n      // this.offer_video_peer.stop();\n      // this.offer_audio_peer.stop();\n      this.$emit(\"call_end\", this.remote_id);\n    },\n    audio_restart() {\n      this.offer_audio_peer.sv_start();\n    },\n    close() {\n      this.$refs.remote_video.srcObject = null;\n      this.$refs.remote_audio.srcObject = null;\n      Object.keys(this.clearId).forEach((id) => {\n        clearInterval(this.clearId[id]);\n      });\n      this.offer_video_peer.close();\n      this.answer_video_peer.close();\n      this.offer_audio_peer.close();\n      this.answer_audio_peer.close();\n      this.$emit(\"call_end\", this.remote_id);\n    },\n  },\n  beforeDestroy() {\n    this.$store.commit(\"ptt/set_recv_active\", false);\n    this.$refs.remote_video.srcObject = null;\n    this.$refs.remote_audio.srcObject = null;\n    Object.keys(this.clearId).forEach((id) => {\n      clearInterval(this.clearId[id]);\n    });\n    this.offer_video_peer.close();\n    this.answer_video_peer.close();\n    this.offer_audio_peer.close();\n    this.answer_audio_peer.close();\n  },\n};\n</script>\n\n<style>\n.remote_video_box {\n  position: relative;\n}\n.remote_canvas {\n  width: 100%;\n  position: relative;\n  top: 0px;\n}\n.remote_video_none {\n  /* display: none !important; */\n  position: absolute !important;\n}\n.icon_img {\n  width: 30px;\n}\n.rotate90 {\n  transform: rotate(-90deg);\n}\n.remote_settings {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  font-size: 1rem;\n  color: white;\n  background-color: black;\n}\n/* --------------Remote Box-------------------- */\n/* 縦向きの場合 */\n@media screen and (orientation: portrait) {\n  .remote_box {\n    position: relative;\n    overflow: hidden;\n    box-sizing: border-box;\n    /* min-height: 3rem; */\n    width: 100%;\n  }\n  .remote_video {\n    position: relative;\n    width: 100%;\n    /* bottom: 0%; */\n  }\n}\n/* 横向きの場合 */\n@media screen and (orientation: landscape) {\n  .remote_box {\n    position: relative;\n    overflow: hidden;\n    box-sizing: border-box;\n    /* min-height: 3rem; */\n    /* height: 90vw; */\n    width: 100%;\n  }\n  .remote_video {\n    /* position: absolute; */\n    position: relative;\n    width: 100%;\n    /* bottom: 0px; */\n    /* right: 0px; */\n  }\n}\n.loaderContainer {\n  width: 100%;\n  display: flex; /* 子要素をflexboxで揃える */\n  flex-direction: column; /* 子要素をflexboxにより縦方向に揃える */\n  justify-content: center; /* 子要素をflexboxにより中央に配置する */\n  align-items: center; /* 子要素をflexboxにより中央に配置する */\n  height: 100px;\n}\n.levelMeter {\n  width: 100%;\n}\n.remote_audio_box {\n  bottom: 0px;\n  left: 0px;\n  z-index: 100;\n}\n.img_mic {\n  max-width: 100%;\n  max-height: 100px;\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n}\n.videoTitle {\n  width: 100%;\n  min-width: 150px;\n  height: 3rem;\n  text-align: center;\n  background-color: #39a2c0;\n  color: white;\n  display: flex;\n}\n.videoTitleLeft {\n  height: 100%;\n  flex-basis: 15%;\n  font-size: 1.5rem;\n  vertical-align: middle;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  user-select: none;\n  cursor: pointer;\n}\n.videoTitleRight {\n  height: 100%;\n  flex-basis: 15%;\n  font-size: 1.5rem;\n  vertical-align: middle;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  user-select: none;\n  cursor: pointer;\n}\n.videoTitleCenter {\n  flex-basis: 80%;\n  font-size: 1.5rem;\n  vertical-align: middle;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  user-select: none;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n/* .videoTitleRight {\n  flex-basis: 15%;\n  padding-left: auto;\n  padding-right: auto;\n  vertical-align: middle;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  user-select: none;\n} */\n/* .videoTitleRight img {\n  width: 1rem;\n  height: 1rem;\n} */\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RemoteVideo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RemoteVideo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RemoteVideo.vue?vue&type=template&id=cf129d5c&\"\nimport script from \"./RemoteVideo.vue?vue&type=script&lang=js&\"\nexport * from \"./RemoteVideo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RemoteVideo.vue?vue&type=style&index=0&id=cf129d5c&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"videoContainer2\" ref=\"videoContainer2\">\n    <video-unit\n      v-for=\"(user, remote_id) in remote_users\"\n      :key=\"remote_id\"\n      :is_showed=\"is_showed\"\n      @zIndex_up=\"zIndex_down\"\n    >\n      <remote-video\n        :user=\"user\"\n        :remote_id=\"remote_id\"\n        :mode=\"mode\"\n        @call_end=\"call_end\"\n      >\n      </remote-video>\n    </video-unit>\n  </div>\n</template>\n\n<script>\nimport VideoUnit from \"./VideoUnit\";\nimport RemoteVideo from \"./RemoteVideo\";\n\nexport default {\n  components: {\n    videoUnit: VideoUnit,\n    remoteVideo: RemoteVideo,\n  },\n  data() {\n    return {\n      mode: \"group\",\n    };\n  },\n  methods: {\n    call_end(id) {\n      delete this.remote_users[id];\n    },\n    zIndex_down(vm) {\n      const child_elms = this.$refs.videoContainer2.children;\n      for (let i = 0; i < child_elms.length; i++) {\n        child_elms[i].style.zIndex = 2;\n      }\n      // vm.zIndex = 10;\n      vm.$refs.videoUnit.style.zIndex = 10;\n    },\n  },\n  computed: {\n    socketio() {\n      return this.$store.getters[\"socketio\"];\n    },\n    is_showed() {\n      return this.$store.getters[\"rtc/remote_show\"];\n    },\n    is_in_private() {\n      return this.$store.getters[\"per\"] == \"person\";\n    },\n    group_id() {\n      return this.$store.getters[\"group_id\"];\n    },\n    remote_users() {\n      const remote_users = {};\n\n      // 自分ではなく、且つ、個別通話中でないremote_idを抽出する。\n      // 2021.04.07 user_typeによる判定を追加\n      Object.keys(this.users).forEach((user_id) => {\n        if (\n          user_id != this.myId &&\n          this.users[user_id].per !== \"person\" &&\n          this.users[user_id].user_type === \"amt\" &&\n          this.users[user_id].group_id === this.group_id\n        ) {\n          remote_users[user_id] = this.users[user_id];\n        }\n      });\n\n      if (this.is_in_private) {\n        return {};\n      } else {\n        return remote_users;\n      }\n      // return remote_users;\n    },\n    users() {\n      return this.$store.getters[\"amt/users\"];\n    },\n    myId() {\n      return this.$store.getters[\"amt/myId\"];\n    },\n    myPosition() {\n      return this.$store.getters[\"amt/myPosition\"];\n    },\n    personal_remote_id() {\n      return this.$store.getters[\"rtc/personal_id\"];\n    },\n  },\n};\n</script>\n\n<style>\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  /* 縦向き */\n  .videoContainer2 {\n    width: 150px;\n  }\n}\n@media screen and (min-width: 480px) {\n  /* 横向き */\n  .videoContainer2 {\n    width: 20vw;\n  }\n}\n.videoContainer2 {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  z-index: 100;\n  top: 0px;\n  right: 0px;\n}\n\n.videoContainer2::-webkit-scrollbar {\n  display: none;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RTCGroup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RTCGroup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RTCGroup.vue?vue&type=template&id=ba03aa72&\"\nimport script from \"./RTCGroup.vue?vue&type=script&lang=js&\"\nexport * from \"./RTCGroup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RTCGroup.vue?vue&type=style&index=0&id=ba03aa72&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{ref:\"videoContainer2\",staticClass:\"videoContainer_private\"},[(_vm.is_showed)?_c('video-unit',{on:{\"zIndex_up\":_vm.zIndex_down}},[_c('remote-video',{ref:\"remoteVideo\",attrs:{\"user\":_vm.user,\"remote_id\":_vm.remote_id,\"mode\":_vm.mode},on:{\"call_end\":_vm.call_end}})],1):_vm._e()],1),(_vm.is_callee_dialog_visible)?_c('modal-dialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"}),_c('span',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(\" \"+_vm._s(_vm.user_name)+\"から個別通話 \"+_vm._s(_vm.media_type)+\"が着信しました。応答しますか \")]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-around\"}},[_c('div',{staticClass:\"circle\",staticStyle:{\"background-color\":\"red\"},attrs:{\"title\":\"拒否\"},on:{\"click\":_vm.call_end}},[_c('img',{staticClass:\"circle_img\",attrs:{\"src\":_vm.hook_down}})]),_c('div',{staticClass:\"circle\",staticStyle:{\"background-color\":\"green\"},attrs:{\"title\":\"応答\"},on:{\"click\":_vm.call_accept}},[_c('img',{staticClass:\"circle_img\",attrs:{\"src\":_vm.hook_up}})])])])]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"memo_popup\",attrs:{\"id\":\"memo_popup_elm\"}},[(_vm.show_select_btns)?_c('div',{staticClass:\"box_padding10\"},[_c('div',{staticClass:\"classify_name_view\"},[_vm._v(\"分類 : \"+_vm._s(_vm.memo_classify))]),_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-around\"}},[_c('div',{staticClass:\"memolayer_btn\",attrs:{\"title\":\"テキストメモ作成\"},on:{\"click\":_vm.on_click_memo}},[_c('img',{staticClass:\"select_btns_icon\",attrs:{\"src\":_vm.icon_memo}})]),_c('div',{staticClass:\"memolayer_btn\",attrs:{\"title\":\"写真メモ作成\"},on:{\"click\":_vm.on_click_photo}},[_c('img',{staticClass:\"select_btns_icon\",attrs:{\"src\":_vm.icon_photo}})]),_c('div',{staticClass:\"memolayer_btn\",attrs:{\"title\":\"映像メモ作成\"},on:{\"click\":_vm.on_click_movie}},[_c('img',{staticClass:\"select_btns_icon\",attrs:{\"src\":_vm.icon_movie}})])])]):_vm._e(),(_vm.is_dialog_visible)?_c('modalDialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"}),_c('span',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(\"ビデオデバイスが機能していないため、\"+_vm._s(_vm.dialog_msg)+\"は使用出来ません。\")]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.close_msg_dialog}},[_vm._v(\"はい\")])])]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"memo_popup_elm\" class=\"memo_popup\">\n    <!-- 最初に表示される選択ボタン -->\n    <div v-if=\"show_select_btns\" class=\"box_padding10\">\n      <div class=\"classify_name_view\">分類 : {{ memo_classify }}</div>\n      <div style=\"display: flex; justify-content: space-around\">\n        <div\n          class=\"memolayer_btn\"\n          @click=\"on_click_memo\"\n          title=\"テキストメモ作成\"\n        >\n          <img :src=\"icon_memo\" class=\"select_btns_icon\" />\n        </div>\n        <div class=\"memolayer_btn\" @click=\"on_click_photo\" title=\"写真メモ作成\">\n          <img :src=\"icon_photo\" class=\"select_btns_icon\" />\n        </div>\n        <div class=\"memolayer_btn\" @click=\"on_click_movie\" title=\"映像メモ作成\">\n          <img :src=\"icon_movie\" class=\"select_btns_icon\" />\n        </div>\n      </div>\n    </div>\n    <modalDialog v-if=\"is_dialog_visible\">\n      <span slot=\"header\"></span>\n      <span slot=\"body\"\n        >ビデオデバイスが機能していないため、{{\n          dialog_msg\n        }}は使用出来ません。</span\n      >\n      <div slot=\"footer\">\n        <button class=\"btn btn-primary\" @click=\"close_msg_dialog\">はい</button>\n      </div>\n    </modalDialog>\n\n    <!-- <MemoBtns v-if=\"show_memo_box\"></MemoBtns>\n    <PhotoBtns v-if=\"show_photo_box\" ref=\"photo\"></PhotoBtns>\n    <MovieBtns v-if=\"show_video_box\" ref=\"video\"></MovieBtns> -->\n  </div>\n</template>\n\n<script>\nimport $store from \"@/store\";\nimport { memoEvent } from \"./index.js\";\n// import BtnMemo from \"./BtnMemo\";\n// import MemoBtns from \"./MemoBtns\";\n// import PhotoBtns from \"./PhotoBtns\";\n// import MovieBtns from \"./MovieBtns\";\nimport ModalDialog from \"@/components/ModalDialog.vue\";\n\nimport { Map, View, Overlay, Feature } from \"ol\";\nimport * as olLayer from \"ol/layer\";\nimport * as olControl from \"ol/control\";\nimport * as olInteraction from \"ol/interaction\";\nimport * as olProj from \"ol/proj\";\nimport * as olSource from \"ol/source\";\nimport * as olStyle from \"ol/style\";\nimport * as olGeom from \"ol/geom\";\n\nconst ol = {};\nol.Map = Map;\nol.View = View;\nol.Overlay = Overlay;\nol.Feature = Feature;\nol.layer = olLayer;\nol.control = olControl;\nol.interaction = olInteraction;\nol.proj = olProj;\nol.source = olSource;\nol.style = olStyle;\nol.geom = olGeom;\n\nexport default {\n  data() {\n    return {\n      // stream: null,\n      icon_memo: require(\"./assets/memo_text@1x.png\"),\n      icon_photo: require(\"./assets/memo_photo@1x.png\"),\n      icon_movie: require(\"./assets/memo_movie@1x.png\"),\n      show_memo_box: false,\n      show_video_box: false,\n      show_photo_box: false,\n      show_select_btns: true,\n      is_dialog_visible: false,\n      dialog_msg: \"\",\n      video_track: null,\n    };\n  },\n  components: {\n    // MemoBtns: MemoBtns,\n    // PhotoBtns: PhotoBtns,\n    // MovieBtns: MovieBtns,\n    modalDialog: ModalDialog,\n  },\n  mounted() {\n    memoEvent.$on(\"BACK_MEMO\", () => {\n      this.reset();\n    });\n\n    const map = $store.getters[\"amt/map\"];\n    let memo_popup_elm = document.getElementById(\"memo_popup_elm\");\n    let memoPop = new ol.Overlay({\n      element: memo_popup_elm,\n      positioning: \"bottom-center\",\n      autoPan: true,\n      autoPanAnimation: {\n        duration: 250,\n      },\n    });\n    map.addOverlay(memoPop);\n    memoEvent.$emit(\"INIT_MEMO_POP\", memoPop);\n  },\n  methods: {\n    close_msg_dialog() {\n      this.is_dialog_visible = false;\n      this.dialog_msg = \"\";\n    },\n    re_stream() {\n      // if (this.show_video_box) this.on_click_movie();\n      // if (this.show_photo_box) this.on_click_photo();\n      // if (this.show_video_box) this.$refs.video.init();\n      // if (this.show_photo_box) this.$refs.photo.init();\n    },\n    reset() {\n      // this.show_select_btns = true;\n      this.show_memo_box = false;\n      this.show_video_box = false;\n      this.show_photo_box = false;\n    },\n    on_click_memo() {\n      this.$store.state.sound_on();\n      // this.$store.commit(\"memo/setMemoMakesView\", true);\n      memoEvent.$emit(\"TEXT_MEMO_MAKE\");\n      // 次の画面に行った時は作成ポップアップを非表示\n      memoEvent.$emit(\"BACK_MEMO\");\n    },\n    on_click_photo() {\n      [this.track] = this.local_video_stream.getVideoTracks();\n      if (this.track) {\n        this.$store.state.sound_on();\n        // this.$store.commit(\"memo/setMemoMakesView\", true);\n        memoEvent.$emit(\"PHOTO_MEMO_MAKE\");\n        // 次の画面に行った時は作成ポップアップを非表示\n        memoEvent.$emit(\"BACK_MEMO\");\n      } else {\n        this.dialog_msg = \"写真メモ作成\";\n        this.is_dialog_visible = true;\n      }\n    },\n    on_click_movie() {\n      [this.track] = this.local_video_stream.getVideoTracks();\n      if (this.track) {\n        this.$store.state.sound_on();\n        // this.$store.commit(\"memo/setMemoMakesView\", true);\n        memoEvent.$emit(\"MOVIE_MEMO_MAKE\");\n        // 次の画面に行った時は作成ポップアップを非表示\n        memoEvent.$emit(\"BACK_MEMO\");\n      } else {\n        this.dialog_msg = \"映像メモ作成\";\n        this.is_dialog_visible = true;\n      }\n    },\n  },\n  computed: {\n    memo_classify() {\n      return this.$store.state.memo_classify;\n    },\n    local_video_stream() {\n      return this.$store.getters[\"rtc/local_video_stream\"];\n    },\n    socketio() {\n      return this.$store.state.socketio;\n    },\n  },\n  beforeDestroy() {\n    // this.stream.getTracks().forEach(track => {\n    //   track.stop();\n    // });\n  },\n};\n</script>\n\n<style>\n.front_class {\n  transform: scaleX(-1);\n}\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  /* スマホ */\n  .memo_popup {\n    width: 200px;\n  }\n}\n@media screen and (min-width: 480px) {\n  /* スマホ以上 */\n  .memo_popup {\n    width: 300px;\n  }\n}\n.memo_popup {\n  /* width: 300px; */\n  position: relative;\n  /* display: inline-block; */\n  margin: 1.5em 0;\n  /* padding: 7px 10px; */\n  padding: 0px;\n  min-width: 120px;\n  max-width: 100%;\n  color: #555;\n  font-size: 16px;\n  background: #eeffff;\n  box-sizing: border-box;\n  border-radius: 10px;\n  filter: drop-shadow(8px 8px 5px #333);\n}\n.memo_popup:before {\n  content: \"\";\n  position: absolute;\n  bottom: -24px;\n  left: 50%;\n  margin-left: -15px;\n  border: 12px solid transparent;\n  border-top: 12px solid #eeffff;\n  z-index: 2;\n  filter: drop-shadow(8px 8px 5px #333);\n}\n\n.memo_popup:after {\n  content: \"\";\n  position: absolute;\n  bottom: -30px;\n  left: 50%;\n  margin-left: -17px;\n  border: 14px solid transparent;\n  border-top: 14px solid #555;\n  z-index: 1;\n}\n\n.memolayer_btn {\n  width: 4rem;\n  height: 4rem;\n  background-color: #37a3c0;\n  border: none;\n  border-radius: 50%;\n  -webkit-border-radius: 5rem;\n  color: white;\n  outline: none !important;\n  transition: background-color, color 0.7s ease-in;\n  user-select: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1rem;\n}\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  /* スマホ */\n  .memolayer_btn {\n    width: 3rem;\n    height: 3rem;\n  }\n}\n\n.memolayer_btn:active {\n  background-color: #c00;\n}\n.memolayer_btn:hover {\n  /* background-color: #2a3dc0; */\n  filter: drop-shadow(8px 8px 5px #333);\n}\n\n.select_btns_icon {\n  width: 60%;\n  height: auto;\n  margin: 20%;\n}\n\n.memo_video {\n  width: 100%;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n}\n.memo_video_box {\n  width: 100%;\n  border-radius: 10px;\n  overflow: hidden;\n}\n.dummy_div {\n  width: 100%;\n  height: 100%;\n  padding: 0px;\n  margin: 0px;\n}\n/* #memo_text {\n  width: 100%;\n  height: 10rem;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n} */\n.memo_popup p {\n  margin: 0;\n  padding: 0;\n}\n.box_padding10 {\n  padding: 10px;\n}\n.btns {\n  position: absolute;\n  bottom: 0px;\n  right: 0px;\n  z-index: 1001;\n}\n\n.classify_name_view {\n  text-align: center;\n  font-size: 15px;\n  padding-bottom: 5px;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MemoLayerPopup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MemoLayerPopup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MemoLayerPopup.vue?vue&type=template&id=7b41ea10&\"\nimport script from \"./MemoLayerPopup.vue?vue&type=script&lang=js&\"\nexport * from \"./MemoLayerPopup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MemoLayerPopup.vue?vue&type=style&index=0&id=7b41ea10&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"memo_layer\"},[(_vm.show_memo)?_c('StrMake',{on:{\"end_flag\":_vm.end_flag}}):_vm._e(),(_vm.show_photo)?_c('PhotoMake',{on:{\"end_flag\":_vm.end_flag}}):_vm._e(),(_vm.show_movie)?_c('MovieMake',{on:{\"end_flag\":_vm.end_flag}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"memo_makes\"},[_c('div',{staticClass:\"memo_makes_header\"},[_c('h3',[_vm._v(\"メモ作成画面\")]),_c('button',{staticClass:\"closeBtn\",attrs:{\"title\":\"閉じる\"}},[_c('img',{staticClass:\"btnImg\",attrs:{\"src\":require(\"@/assets/close05.png\")},on:{\"click\":function($event){return _vm.close_button()}}})])]),_c('div',{staticClass:\"arow-wrap\"},[_c('div',{staticClass:\"memo_makes_middle\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text_memo),expression:\"text_memo\"}],attrs:{\"id\":\"memo_text\"},domProps:{\"value\":(_vm.text_memo)},on:{\"input\":function($event){if($event.target.composing)return;_vm.text_memo=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"text_fade\",on:{\"click\":_vm.text_area_focus}},[_vm._v(\"メモ\")])])]),_c('div',{staticClass:\"status_button\"},[(_vm.is_not_ios)?_c('div',{staticClass:\"memolayer_btn memolayer_btn_margin\",style:(_vm.mic_btn_color),on:{\"click\":_vm.on_click_mic}},[_c('img',{staticClass:\"memolayer_btn_icon\",attrs:{\"src\":_vm.icon_mic}})]):_vm._e(),_c('div',{staticClass:\"memolayer_btn\",attrs:{\"title\":\"アップロード\"},on:{\"click\":_vm.on_UPLOAD}},[_c('img',{staticClass:\"memolayer_btn_icon\",attrs:{\"src\":_vm.icon_upload}})])]),(_vm.is_dialog_visible)?_c('modalDialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"地点メモ作成\")]),_c('span',{staticStyle:{\"color\":\"black\"},attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(_vm._s(_vm.dialog_msg))]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.dialog_yes}},[_vm._v(\"はい\")]),_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.dialog_no}},[_vm._v(\"いいえ\")])])]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const SpeechRecognition =\n  window.webkitSpeechRecognition || window.SpeechRecognition;\nlet recognition = null;\n\nconst sp_start = ({ speech_text, before, next, end, error }) => {\n  if (before) before();\n  recognition = new SpeechRecognition();\n  recognition.lang = \"ja-JP\";\n  // recognition.interimResults = true;\n  // recognition.continuous = true;\n\n  if (speech_text != \"\") speech_text = speech_text + \"\\n\";\n\n  let result_text = \"\";\n  recognition.onresult = (ev) => {\n    for (let i = ev.resultIndex; i < ev.results.length; i++) {\n      let transcript = ev.results[i][0].transcript;\n      if (ev.results[i].isFinal) {\n        result_text = transcript;\n      }\n    }\n    speech_text += result_text;\n    console.log(speech_text);\n    if (next) next(speech_text);\n  };\n  recognition.onerror = () => {\n    if (error) error();\n  };\n  recognition.onend = () => {\n    if (end) end();\n    recognition = null;\n  };\n\n  recognition.start();\n};\n\nconst sp_stop = ({ next }) => {\n  recognition.stop();\n  if (next) next();\n};\n\nexport { sp_start, sp_stop };\n","import { sp_start, sp_stop } from \"./sp_recognition\";\nimport { memoEvent } from \"./index.js\";\n\nconst memo_common = {\n  computed: {\n    is_not_ios() {\n      const ua = navigator.userAgent.toLowerCase();\n      if (\n        ua.indexOf(\"iphone\") > -1 ||\n        ua.indexOf(\"ipad\") > -1 ||\n        (ua.indexOf(\"macintosh\") && document.ontouchend)\n      ) {\n        return false;\n      } else {\n        return true;\n      }\n    },\n    local_audio_stream() {\n      return this.$store.getters[\"rtc/local_audio_stream\"];\n    },\n    local_video_stream() {\n      return this.$store.getters[\"rtc/local_video_stream\"];\n    },\n    mic_btn_color() {\n      return { backgroundColor: this.mic_btn_flag ? \"red\" : \"#37a3c0\" };\n    },\n    mic_on_off() {\n      return this.$store.getters[\"rtc/func_mic_on_off\"];\n    },\n    is_front() {\n      return this.$store.getters[\"rtc/is_front_cam\"];\n    },\n  },\n  methods: {\n    is_left() {\n      const rect = document.querySelector(\".slides\").getBoundingClientRect();\n      const video_rect = document\n        .getElementById(\"memo_video\")\n        .getBoundingClientRect();\n      const center = (rect.right + rect.left) / 2;\n      if (center < video_rect.right) {\n        this.left_view = true;\n      } else {\n        this.left_view = false;\n      }\n    },\n    on_click_mic() {\n      if (this.mic_btn_flag) {\n        sp_stop({\n          next: async () => {\n            await this.mic_on_off(\"start\");\n            this.mic_btn_flag = false;\n            // this.init();\n          },\n        });\n      } else {\n        sp_start({\n          speech_text: this.text_memo,\n          before: async () => {\n            await this.mic_on_off(\"stop\");\n            this.mic_btn_flag = true;\n          },\n          next: (text) => {\n            this.text_memo = text;\n          },\n          end: () => {\n            sp_stop({\n              next: async () => {\n                await this.mic_on_off(\"start\");\n                this.mic_btn_flag = false;\n                document.getElementById(\"memo_text\").blur();\n                // this.init();\n              },\n            });\n          },\n          error: () => {\n            console.log(\"sp_recognition ERROR\");\n          },\n        });\n      }\n    },\n    async close_button() {\n      if (this.mic_btn_flag) {\n        this.dialog_msg = \"音声認識中ですが、終了させますか\";\n        this.is_dialog_visible = true;\n      } else if (this.recorder && this.recorder.state == \"recording\") {\n        this.dialog_msg = \"録画中ですが、終了させますか\";\n        this.is_dialog_visible = true;\n      } else {\n        memoEvent.$emit(\"BACK_MEMO\");\n        this.init_clear();\n      }\n    },\n    err_exit(message) {\n      memoEvent.$emit(\"BACK_MEMO\");\n      this.init_clear();\n      this.$store.commit(\"memo/set_error_dialog\", {\n        is_visible: true,\n        msg: message,\n      });\n    },\n    async init() {\n      this.$nextTick(() => {\n        if (this.$refs.video) {\n          this.$refs.video.srcObject = this.local_video_stream;\n        }\n      });\n      setTimeout(() => {\n        const txt_elm = document.querySelector(\".text_fade\");\n        if (txt_elm) {\n          txt_elm.classList.add(\"fade\");\n        }\n      }, 1000);\n    },\n    gen_file_name() {\n      const _d = new Date().toLocaleString().split(/\\/|:|\\s/gi);\n      const cur_date = `${_d[0]}年${_d[1]}月${_d[2]}日${_d[3]}時${_d[4]}分${_d[5]}秒`;\n      if (this.last_date == cur_date) {\n        this.count_date++;\n      } else {\n        this.count_date = 0;\n      }\n      this.last_date = cur_date;\n      return `${this.$store.state.myName}_${cur_date}_${this.count_date}`;\n    },\n    post_file(file_name, b64) {\n      let formData = new FormData();\n      formData.append(\"data\", b64, encodeURIComponent(file_name));\n      console.log(...formData.entries());\n\n      fetch(this.url, {\n        method: \"post\",\n        mode: \"no-cors\",\n        body: formData,\n      })\n        .then((response) => {\n          if (response.status == 200) {\n            console.log(response);\n          } else {\n            this.err_exit(\n              \"ファイルの転送に失敗しました。再度地点メモの登録をお願いします。\"\n            );\n          }\n        })\n        .catch((error) => {\n          this.err_exit(`${error}:ファイルの転送に失敗しました`);\n        });\n    },\n    toBlob(base64, myType) {\n      // Base64からバイナリへ変換\n      var bin = atob(base64.replace(/^.*,/, \"\"));\n      var buffer = new Uint8Array(bin.length);\n      for (var i = 0; i < bin.length; i++) {\n        buffer[i] = bin.charCodeAt(i);\n      }\n      // Blobを作成\n      var blob = new Blob([buffer.buffer], { type: myType });\n      return blob;\n    },\n    drawCanvas(img) {\n      this.$parent.show_photo = true;\n      this.$parent.show_video = false;\n      const canvas = document.createElement(\"canvas\");\n      //-----------------------------------------------------------\n      // サイズ縮小\n      // 縦横で長い方を2048とする。\n      // そもそも、画像の長径が2048以下の場合、サイズ圧縮しない\n      //-----------------------------------------------------------\n      const IMG_LENGTH = 2048;\n      if (img.width > img.height) {\n        if (img.width < IMG_LENGTH) {\n          canvas.width = img.width;\n          canvas.height = img.height;\n        } else {\n          canvas.width = IMG_LENGTH;\n          canvas.height = img.height * (IMG_LENGTH / img.width);\n        }\n      } else {\n        if (img.height < IMG_LENGTH) {\n          canvas.width = img.width;\n          canvas.height = img.height;\n        } else {\n          canvas.height = IMG_LENGTH;\n          canvas.width = img.width * (IMG_LENGTH / img.height);\n        }\n      }\n      canvas.getContext(\"2d\").clearRect(0, 0, canvas.width, canvas.height);\n      canvas\n        .getContext(\"2d\")\n        .drawImage(\n          img,\n          0,\n          0,\n          img.width,\n          img.height,\n          0,\n          0,\n          canvas.width,\n          canvas.height\n        );\n\n      let b64 = canvas.toDataURL(\"image/jpeg\", 0.75); // 画質0.75\n      b64 = this.toBlob(b64, this.myType);\n      return b64;\n    },\n    // async imageCaptureTakePhoto(stream) {\n    async imageCaptureTakePhoto(stream, canvas, video) {\n      // FirefoxでImageCaptureが使えない問題の対処\n      // if (\"ImageCapture\" in window) {\n      //   // Chromeは使える\n      //   const track = stream.getVideoTracks()[0];\n      //   this.imageCapture = new ImageCapture(track);\n      //   return this.imageCapture.takePhoto();\n      // } else {\n      if (\"ImageCapture\" in window) {\n        const track = stream.getVideoTracks()[0];\n        const imageCapture = new ImageCapture(track);\n        const imageBitmap = await imageCapture.grabFrame();\n        // const canvas = document.createElement(\"canvas\");\n        const context = canvas.getContext(\"2d\");\n\n        canvas.width = imageBitmap.width;\n        canvas.height = imageBitmap.height;\n        return new Promise((resolve, reject) => {\n          try{\n            context.drawImage(imageBitmap, 0, 0, imageBitmap.width, imageBitmap.height);\n            canvas.toBlob(resolve, \"image/jpeg\");\n          } catch (err) {\n            reject(err);\n          }\n        })\n      } else {\n        // Firefoxは使えない\n        // const video = document.createElement(\"video\");\n        // const canvas = document.createElement(\"canvas\");\n        const context = canvas.getContext(\"2d\");\n        video.srcObject = stream;\n        // video.playsInline = true;\n        // video.muted = true;\n        return new Promise((resolve, reject) => {\n          video.addEventListener(\"loadeddata\", async () => {\n            const { videoWidth, videoHeight } = video;\n            canvas.width = videoWidth;\n            canvas.height = videoHeight;\n            try {\n              await video.play();\n              context.drawImage(video, 0, 0, videoWidth, videoHeight);\n              canvas.toBlob(resolve, \"image/jpeg\");\n            } catch (error) {\n              reject(error);\n            }\n          });\n        });\n      }\n    },\n  },\n  async beforeDestroy() {\n    // 音声認識が動いていたら停止させる。\n    if (this.mic_btn_flag) {\n      this.mic_btn_flag = false;\n      sp_stop();\n      await this.mic_on_off(\"start\");\n    }\n    if (this.recorder && this.recorder.state == \"recording\") {\n      this.recorder.stop();\n    }\n    this.init_clear();\n  },\n};\n\nexport { memo_common };\n","<template>\n  <div class=\"memo_makes\">\n    <div class=\"memo_makes_header\">\n      <h3>メモ作成画面</h3>\n      <button class=\"closeBtn\" title=\"閉じる\">\n        <!-- 非表示化するボタン -->\n        <img\n          src=\"@/assets/close05.png\"\n          class=\"btnImg\"\n          @click=\"close_button()\"\n        />\n      </button>\n    </div>\n\n    <div class=\"arow-wrap\">\n      <div class=\"memo_makes_middle\">\n        <textarea id=\"memo_text\" v-model=\"text_memo\" />\n        <div class=\"text_fade\" @click=\"text_area_focus\">メモ</div>\n      </div>\n    </div>\n\n    <div class=\"status_button\">\n      <!-- Speech Recognition -->\n      <div\n        v-if=\"is_not_ios\"\n        class=\"memolayer_btn memolayer_btn_margin\"\n        :style=\"mic_btn_color\"\n        @click=\"on_click_mic\"\n      >\n        <img :src=\"icon_mic\" class=\"memolayer_btn_icon\" />\n      </div>\n\n      <!-- アップロード -->\n      <div @click=\"on_UPLOAD\" class=\"memolayer_btn\" title=\"アップロード\">\n        <img :src=\"icon_upload\" class=\"memolayer_btn_icon\" />\n      </div>\n    </div>\n    <modalDialog v-if=\"is_dialog_visible\">\n      <span slot=\"header\">地点メモ作成</span>\n      <span slot=\"body\" style=\"color: black\">{{ dialog_msg }}</span>\n      <div slot=\"footer\">\n        <button class=\"btn btn-primary\" @click=\"dialog_yes\">はい</button>\n        <button class=\"btn btn-primary\" @click=\"dialog_no\">いいえ</button>\n      </div>\n    </modalDialog>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport { memoEvent } from \"./index.js\";\nimport { sp_start, sp_stop } from \"./sp_recognition\";\nimport ModalDialog from \"@/components/ModalDialog.vue\";\nimport { memo_common } from \"./common.js\";\n\n// テキスト入力状態でボタン押下時すると次の作成タイミングで<>ボタンが出なくなる\n// ※compudedのon_left_endとon_right_endが呼ばれなくなる\n// テキスト入力解除と初期化処理の時間を300msec開ける(200msecではだめだった)\nconst CLOSE_TIMEOUT = 300;\nexport default {\n  mixins: [memo_common],\n  components: {\n    modalDialog: ModalDialog,\n  },\n  data() {\n    return {\n      // テキストメモ\n      text_memo: \"\",\n      // 動画メモ\n      url: \"/api/upload\",\n      // 写真メモ\n      icon_upload: require(\"./assets/icon_upload.png\"),\n      icon_mic: require(\"@/assets/mic.png\"),\n      imageCapture: null,\n      imageDataBuf: null,\n      mic_btn_flag: false,\n      is_dialog_visible: false,\n      dialog_msg: \"\",\n    };\n  },\n  mounted() {\n    console.log(\"HELLO, I am StrMake.vue\");\n    this.init(); // init in common.js\n  },\n  methods: {\n    async dialog_yes() {\n      this.is_dialog_visible = false;\n      if (this.mic_btn_flag) {\n        this.mic_btn_flag = false;\n        sp_stop();\n        await this.mic_on_off(\"start\");\n      }\n      memoEvent.$emit(\"BACK_MEMO\");\n      this.init_clear();\n    },\n    dialog_no() {\n      this.is_dialog_visible = false;\n    },\n    init_clear() {\n      this.file_name = \"\";\n      this.text_memo = \"\";\n      console.log(\"end_flag: 終了だ\");\n      this.$emit(\"end_flag\"); // これでコンポーネントを終了する。\n    },\n    on_UPLOAD() {\n      this.file_name = this.gen_file_name();\n      const data = { file_name: this.file_name, info: this.text_memo };\n      memoEvent.$emit(\"SEND_JSON_MEMO\", data);\n\n      memoEvent.$emit(\"BACK_MEMO\");\n      this.init_clear();\n    },\n    text_area_focus() {\n      document.getElementById(\"memo_text\").focus();\n    },\n  },\n};\n</script>\n\n<style scoped>\n.text_fade {\n  position: absolute;\n  top: calc(50% - 50px);\n  padding: 0px;\n  width: 100%;\n  height: 100px;\n  font: bolder;\n  font-size: 5rem;\n  color: #999;\n  text-align: center;\n  -webkit-transition: all 2s;\n  -moz-transition: all 2s;\n  -ms-transition: all 2s;\n  -o-transition: all 2s;\n  transition: all 2s;\n  opacity: 1;\n}\n.fade {\n  opacity: 0;\n}\n\n.arow-wrap {\n  width: 90%;\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  z-index: 200;\n}\n/* 左 */\n.arrow-left {\n  position: relative;\n}\n/* ボタン左の中身（三角を擬似要素で表現） */\n.arrow-left:before {\n  content: \"\";\n  width: 30px;\n  height: 30px;\n  border-top: 2px solid #fefefe;\n  border-left: 2px solid #fefefe;\n  position: absolute;\n  transform: translate(-30%, -50%) rotate(-45deg);\n}\n/* 右 */\n.arrow-right {\n  position: relative;\n}\n/* ボタン右の中身（三角を擬似要素で表現） */\n.arrow-right:before {\n  content: \"\";\n  width: 30px;\n  height: 30px;\n  border-top: 2px solid #fefefe;\n  border-left: 2px solid #fefefe;\n  position: absolute;\n  transform: translate(-70%, -50%) rotate(135deg);\n}\n\ntextarea {\n  scroll-snap-align: start;\n  flex-shrink: 0;\n  width: 100%;\n  border-radius: 10px;\n  transform-origin: center center;\n  transform: scale(1);\n  transition: transform 0.5s;\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.5em;\n}\n\n.memolayer_btn {\n  width: 5rem;\n  height: 5rem;\n  background-color: #37a3c0;\n  border: none;\n  border-radius: 50%;\n  -webkit-border-radius: 50%;\n  color: white;\n  outline: none !important;\n  transition: background-color, color 0.7s ease-in;\n  user-select: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.5rem;\n}\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  /* スマホ */\n  .memolayer_btn {\n    width: 5rem;\n    height: 5rem;\n  }\n}\n\n.memolayer_btn:active {\n  background-color: #c00;\n}\n.memolayer_btn:hover {\n  /* background-color: #2a3dc0; */\n  filter: drop-shadow(8px 8px 5px #333);\n}\n.on_REC {\n  background-color: #c00;\n}\n\n.memolayer_btn_margin {\n  margin-right: 1rem;\n}\n.memo_makes {\n  box-sizing: border-box;\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 200;\n  color: rgb(255, 255, 255);\n}\n\n.memo_makes_header {\n  position: relative;\n  top: 0px;\n  left: 10vw;\n  width: 80vw;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\nbutton.closeBtn {\n  width: 2.5rem;\n  height: 2.5rem;\n  background: rgba(42, 121, 142, 0);\n  border: none;\n  border-radius: 3rem;\n  -moz-border-radius: 3rem;\n  -webkit-border-radius: 3rem;\n  color: white;\n  outline: none !important;\n  transition: background-color, color 0.3s ease-in;\n  margin-left: auto;\n  z-index: 200;\n}\nbutton.closeBtn:active {\n  background-color: rgba(42, 121, 142, 0.9);\n  box-shadow: 0 0 5px rgba(42, 121, 142, 0.9);\n}\n.memo_makes_header button {\n  width: 65px;\n  height: 65px;\n  top: 0px;\n}\n.memo_makes_middle {\n  display: flex;\n  position: relative;\n  top: 0px;\n  width: 80vw;\n  height: 60vh;\n  margin: 0 auto 0 auto;\n}\n#memo_text {\n  position: relative;\n  resize: none;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  border-width: 0px;\n  border-radius: 5px;\n  vertical-align: middle;\n}\n.front_class {\n  transform: scaleX(-1);\n}\n.video_cont {\n  background: #bbb;\n}\n.status_button {\n  /* position: fixed; */\n  position: relative;\n  display: flex;\n  justify-content: flex-end;\n  right: 10%;\n  padding-top: 15px;\n}\n\n.memolayer_btn_icon {\n  width: 60%;\n}\n\n.memolayer_btn_rec {\n  background-color: #c00;\n}\n\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  .memo_makes h3 {\n    margin-top: 17px;\n    margin-left: 10px;\n  }\n\n  .memo_makes_header button {\n    right: 10%;\n  }\n\n  #memo_text {\n    /* position: absolute; */\n    position: relative;\n    resize: none;\n    top: 0;\n    bottom: 0;\n    display: inline-block; /* 横並びにする指定 */\n    width: 100%;\n    height: 60vh;\n    vertical-align: initial;\n  }\n  .status_button {\n    position: relative;\n    padding-top: 10px;\n    right: 10%;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StrMake.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StrMake.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StrMake.vue?vue&type=template&id=b2e7ab3e&scoped=true&\"\nimport script from \"./StrMake.vue?vue&type=script&lang=js&\"\nexport * from \"./StrMake.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StrMake.vue?vue&type=style&index=0&id=b2e7ab3e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b2e7ab3e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"memo_makes\"},[_c('div',{staticClass:\"memo_makes_header\"},[_c('h3',[_vm._v(\"メモ作成画面\")]),_c('button',{staticClass:\"closeBtn\",attrs:{\"title\":\"閉じる\"}},[_c('img',{staticClass:\"btnImg\",attrs:{\"src\":require(\"@/assets/close05.png\")},on:{\"click\":function($event){return _vm.close_button()}}})])]),_c('div',{staticClass:\"arow-wrap\"},[_c('div',[_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.left_view),expression:\"!left_view\"}],staticClass:\"arrow-left\",attrs:{\"href\":\"#memo_video\"}})]),_c('div',{staticClass:\"memo_makes_middle\"},[_c('div',{staticClass:\"slides\",on:{\"scroll\":_vm.is_left}},[_c('div',{staticClass:\"video_cont\"},[_c('video',{ref:\"video\",class:{ front_class: _vm.is_front },attrs:{\"id\":\"memo_video\",\"muted\":\"\",\"playsinline\":\"\",\"autoplay\":\"\"},domProps:{\"muted\":true}}),_c('div',{staticClass:\"text_fade\"},[_vm._v(\"映像\")])]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text_memo),expression:\"text_memo\"}],attrs:{\"id\":\"memo_text\"},domProps:{\"value\":(_vm.text_memo)},on:{\"input\":function($event){if($event.target.composing)return;_vm.text_memo=$event.target.value}}})])]),_c('div',[_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.left_view),expression:\"left_view\"}],staticClass:\"arrow-right\",attrs:{\"href\":\"#memo_text\"}})])]),_c('div',{staticClass:\"status_button\"},[_c('a',{attrs:{\"href\":\"#memo_text\"}},[(_vm.is_not_ios)?_c('div',{staticClass:\"memolayer_btn memolayer_btn_margin\",style:(_vm.mic_btn_color),on:{\"click\":_vm.on_click_mic}},[_c('img',{staticClass:\"memolayer_btn_icon\",attrs:{\"src\":_vm.icon_mic}})]):_vm._e()]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.movie_btn_state == 'close'),expression:\"movie_btn_state == 'close'\"}],staticClass:\"memolayer_btn\",attrs:{\"title\":\"アップロード\"},on:{\"click\":_vm.on_UPLOAD}},[_c('img',{staticClass:\"memolayer_btn_icon\",attrs:{\"src\":_vm.icon_upload}})]),_c('a',{attrs:{\"href\":\"#memo_video\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.movie_btn_state == 'REC'),expression:\"movie_btn_state == 'REC'\"}],staticClass:\"memolayer_btn\",attrs:{\"title\":\"録画開始\"},on:{\"click\":_vm.on_REC}},[_vm._v(\" REC \")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.movie_btn_state == 'STOP'),expression:\"movie_btn_state == 'STOP'\"}],staticClass:\"memolayer_btn on_REC\",attrs:{\"title\":\"録画停止\"},on:{\"click\":_vm.on_STOP}},[_vm._v(\" STOP \")])]),(_vm.is_dialog_visible)?_c('modalDialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"地点メモ作成\")]),_c('span',{staticStyle:{\"color\":\"black\"},attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(_vm._s(_vm.dialog_msg))]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.dialog_yes}},[_vm._v(\"はい\")]),_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.dialog_no}},[_vm._v(\"いいえ\")])])]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"memo_makes\">\n    <div class=\"memo_makes_header\">\n      <h3>メモ作成画面</h3>\n      <button class=\"closeBtn\" title=\"閉じる\">\n        <!-- 非表示化するボタン -->\n        <img\n          src=\"@/assets/close05.png\"\n          class=\"btnImg\"\n          @click=\"close_button()\"\n        />\n      </button>\n    </div>\n\n    <div class=\"arow-wrap\">\n      <div>\n        <a href=\"#memo_video\" class=\"arrow-left\" v-show=\"!left_view\" />\n      </div>\n      <div class=\"memo_makes_middle\">\n        <div class=\"slides\" @scroll=\"is_left\">\n          <div class=\"video_cont\">\n            <video\n              id=\"memo_video\"\n              ref=\"video\"\n              muted\n              playsinline\n              autoplay\n              :class=\"{ front_class: is_front }\"\n            ></video>\n            <div class=\"text_fade\">映像</div>\n          </div>\n          <textarea id=\"memo_text\" v-model=\"text_memo\" />\n        </div>\n      </div>\n      <div>\n        <a href=\"#memo_text\" class=\"arrow-right\" v-show=\"left_view\" />\n      </div>\n    </div>\n\n    <div class=\"status_button\">\n      <!-- Speech Recognition -->\n      <a href=\"#memo_text\">\n        <div\n          v-if=\"is_not_ios\"\n          class=\"memolayer_btn memolayer_btn_margin\"\n          :style=\"mic_btn_color\"\n          @click=\"on_click_mic\"\n        >\n          <img :src=\"icon_mic\" class=\"memolayer_btn_icon\" />\n        </div>\n      </a>\n\n      <!-- 動画 -->\n      <div\n        v-show=\"movie_btn_state == 'close'\"\n        @click=\"on_UPLOAD\"\n        class=\"memolayer_btn\"\n        title=\"アップロード\"\n      >\n        <img :src=\"icon_upload\" class=\"memolayer_btn_icon\" />\n      </div>\n      <a href=\"#memo_video\">\n        <div\n          v-show=\"movie_btn_state == 'REC'\"\n          @click=\"on_REC\"\n          class=\"memolayer_btn\"\n          title=\"録画開始\"\n        >\n          REC\n        </div>\n      </a>\n      <div\n        v-show=\"movie_btn_state == 'STOP'\"\n        @click=\"on_STOP\"\n        class=\"memolayer_btn on_REC\"\n        title=\"録画停止\"\n      >\n        STOP\n      </div>\n    </div>\n    <modalDialog v-if=\"is_dialog_visible\">\n      <span slot=\"header\">地点メモ作成</span>\n      <span slot=\"body\" style=\"color: black\">{{ dialog_msg }}</span>\n      <div slot=\"footer\">\n        <button class=\"btn btn-primary\" @click=\"dialog_yes\">はい</button>\n        <button class=\"btn btn-primary\" @click=\"dialog_no\">いいえ</button>\n      </div>\n    </modalDialog>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport { memoEvent } from \"./index.js\";\nimport { sp_start, sp_stop } from \"./sp_recognition\";\nimport ModalDialog from \"@/components/ModalDialog.vue\";\nimport { memo_common } from \"./common.js\";\n\n// テキスト入力状態でボタン押下時すると次の作成タイミングで<>ボタンが出なくなる\n// ※compudedのon_left_endとon_right_endが呼ばれなくなる\n// テキスト入力解除と初期化処理の時間を300msec開ける(200msecではだめだった)\nconst CLOSE_TIMEOUT = 300;\nexport default {\n  mixins: [memo_common],\n  components: {\n    modalDialog: ModalDialog,\n  },\n  data() {\n    return {\n      btn_title: \"\",\n      // テキストメモ\n      text_memo: \"\",\n      // 動画メモ\n      url: \"/api/upload\",\n      recorder: null,\n      movie_btn_state: \"REC\",\n      movieDataBuf: null,\n      moveDataChunks: [],\n      // 写真メモ\n      icon_upload: require(\"./assets/icon_upload.png\"),\n      icon_mic: require(\"@/assets/mic.png\"),\n      imageCapture: null,\n      imageDataBuf: null,\n      mic_btn_flag: false,\n      left_view: true,\n      is_dialog_visible: false,\n      dialog_msg: \"\",\n      on_end_recorder: null,\n    };\n  },\n  mounted() {\n    console.log(\"HELLO, I am MovieMake.vue\");\n    this.init();\n  },\n  methods: {\n    async dialog_yes() {\n      this.is_dialog_visible = false;\n      if (this.mic_btn_flag) {\n        this.mic_btn_flag = false;\n        sp_stop();\n        await this.mic_on_off(\"start\");\n        memoEvent.$emit(\"BACK_MEMO\");\n        this.init_clear();\n      } else if (this.recorder && this.recorder.state == \"recording\") {\n        this.on_end_recorder = () => {\n          memoEvent.$emit(\"BACK_MEMO\");\n          this.init_clear();\n        };\n        this.recorder.stop();\n      }\n    },\n    dialog_no() {\n      this.is_dialog_visible = false;\n    },\n    init_clear() {\n      this.movie_btn_state = \"REC\";\n      this.imageDataBuf = null;\n      this.moveDataChunks = [];\n      this.movieDataBuf = null;\n      this.file_name = \"\";\n      this.text_memo = \"\";\n      this.on_end_recorder = null;\n      if (this.recorder && this.recorder.state == \"recording\") {\n        return new Promise((resolve, reject) => {\n          this.recorder.stop();\n          console.log(\"recorderをSTOPしたよ\");\n          resolve();\n        }).then(() => {\n          console.log(\"recorderをnullにしたよ\");\n          this.recorder = null;\n        });\n      } else {\n        this.recorder = null;\n      }\n      this.left_view = true;\n      history.replaceState(null, \"\", location.pathname);\n      console.log(\"end_flag: 終了だ\");\n      this.$emit(\"end_flag\"); // これでコンポーネントを終了する。\n    },\n    on_UPLOAD() {\n      // サーバへサムネイルをアップロード\n      const b64 = this.drawCanvas(this.imageDataBuf);\n      this.post_file(this.file_name + \"_thumb.jpg\", b64);\n      // ムービーデータをアップロード\n      this.post_file(this.file_name + \".webm\", this.movieDataBuf);\n\n      // 地点メモのピン建て\n      const data = { file_name: this.file_name, info: this.text_memo };\n      memoEvent.$emit(\"SEND_JSON_VIDEO\", data);\n\n      memoEvent.$emit(\"BACK_MEMO\");\n      this.init_clear();\n    },\n    async on_REC() {\n      this.movie_btn_state = \"STOP\";\n      if (!this.recorder) await this.init_recorder();\n      this.recorder.start();\n    },\n    on_STOP() {\n      this.movie_btn_state = \"close\";\n      this.recorder.stop();\n    },\n    async init_recorder() {\n      return new Promise((resolve, reject) => {\n        try {\n          const video_track = this.local_video_stream.getVideoTracks()[0];\n          const audio_track = this.local_audio_stream.getAudioTracks()[0];\n          this.stream = new MediaStream([video_track, audio_track]);\n        } catch (e) {\n          console.log(e);\n          this.stream = null;\n        }\n\n        // const self = this;\n        const myType_primary = \"video/webm; codecs=vp8\";\n        const myType_secondary = \"video/webm\";\n        const myType_3rd = \"video/mp4\";\n        const myType_4th = \"video/webm; codecs=h264\";\n        const ua = navigator.userAgent;\n\n        try {\n          if (\n            MediaRecorder.isTypeSupported(myType_primary) &&\n            ua.indexOf(\"Firefox\") <= 0\n          ) {\n            // FirefoxはisTypeSupportedがtrueでもMediaRecorderインスタンス生成でエラーになる\n            this.recorder = new MediaRecorder(this.stream, {\n              mimeType: myType_primary,\n            });\n          } else if (MediaRecorder.isTypeSupported(myType_primary)) {\n            this.recorder = new MediaRecorder(this.stream, {\n              mimeType: myType_secondary,\n            });\n          } else {\n            this.recorder = new MediaRecorder(this.stream, {\n              mimeType: myType_3rd,\n            });\n          }\n        } catch (error) {\n          this.err_exit(`${error.name}:録画が開始出来ません`);\n        }\n        this.recorder.ondataavailable = (ev) => {\n          this.moveDataChunks.push(ev.data);\n        };\n        this.recorder.onstart = () => {\n          // サムネイルのサイズを設定\n          var width;\n          var height;\n          if (window.innerHeight > window.innerWidth) {\n            // 縦向き表示中は長辺を縦とした画像\n            height = this.$store.state.video_width;\n            // 横幅は長辺の3/4(3対4)\n            width = (height / 4) * 3;\n          } else {\n            // 横向き表示中は長辺を横とした画像\n            width = this.$store.state.video_width;\n            // 高さは長辺の3/4(3対4)\n            height = (width / 4) * 3;\n          }\n          this.$store.commit(\"setMemmo_recording\", true);\n\n          // サムネイル作成\n          if (this.imageCapture) {\n            this.imageCapture\n              .takePhoto()\n              .then((blob) =>\n                createImageBitmap(blob, {\n                  resizeWidth: width,\n                  resizeHeight: height,\n                })\n              )\n              .then((imageBitmap) => {\n                // サムネイルデータを一時保存\n                this.imageDataBuf = imageBitmap;\n              })\n              .catch((error) => {\n                console.log(error);\n                this.err_exit(error);\n              });\n          } else {\n            const video = document.createElement(\"video\");\n            const canvas = document.createElement(\"canvas\");\n            this.imageCaptureTakePhoto(this.stream, canvas, video)\n            // this.imageCaptureTakePhoto(this.stream)\n              .then((blob) => createImageBitmap(blob))\n              .then((imageBitmap) => {\n                // サムネイルデータを一時保存\n                this.imageDataBuf = imageBitmap;\n              })\n              .catch((error) => {\n                console.log(error);\n                this.err_exit(error);\n              });\n          }\n        };\n        this.recorder.onstop = () => {\n          this.$store.commit(\"setMemmo_recording\", false);\n          // 録画停止時刻をファイル名にする\n          this.file_name = this.gen_file_name();\n          this.movieDataBuf = new Blob(this.moveDataChunks, {\n            type: this.recorder.mimeType,\n          });\n          if (this.on_end_recorder) this.on_end_recorder();\n        };\n        this.recorder.onerror = (ev) => {\n          this.err_exit(`${ev.error.name}:録画出来ません`);\n        };\n        resolve();\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\na {\n  text-decoration: none;\n}\n\n.text_fade {\n  position: absolute;\n  width: 100%;\n  font: bolder;\n  font-size: 5rem;\n  text-align: center;\n  -webkit-transition: all 2s;\n  -moz-transition: all 2s;\n  -ms-transition: all 2s;\n  -o-transition: all 2s;\n  transition: all 2s;\n  opacity: 1;\n}\n.fade {\n  opacity: 0;\n}\n\n.arow-wrap {\n  width: 90%;\n  /* height: 100%; */\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  z-index: 200;\n}\n/* 左 */\n.arrow-left {\n  position: relative;\n}\n/* ボタン左の中身（三角を擬似要素で表現） */\n.arrow-left:before {\n  content: \"\";\n  width: 30px;\n  height: 30px;\n  border-top: 2px solid #fefefe;\n  border-left: 2px solid #fefefe;\n  position: absolute;\n  transform: translate(-30%, -50%) rotate(-45deg);\n}\n/* 右 */\n.arrow-right {\n  position: relative;\n}\n/* ボタン右の中身（三角を擬似要素で表現） */\n.arrow-right:before {\n  content: \"\";\n  width: 30px;\n  height: 30px;\n  border-top: 2px solid #fefefe;\n  border-left: 2px solid #fefefe;\n  position: absolute;\n  transform: translate(-70%, -50%) rotate(135deg);\n}\n\n.slides {\n  display: flex;\n  overflow-x: auto;\n  scroll-snap-type: x mandatory;\n  scroll-behavior: smooth;\n  -webkit-overflow-scrolling: touch;\n  white-space: nowrap; /* 横スクロールの指定 */\n  scroll-snap-points-x: repeat(300px);\n  scroll-snap-type: mandatory;\n  width: 80vw;\n  height: 60vh;\n\n  /* height: 60vh; */\n}\n.slides::-webkit-scrollbar {\n  width: 10px;\n  height: 10px;\n}\n.slides::-webkit-scrollbar-thumb {\n  background: #eee;\n  border-radius: 10px;\n}\n.slides::-webkit-scrollbar-track {\n  background: transparent;\n}\n.slides > div,\n.slides > textarea {\n  scroll-snap-align: start;\n  flex-shrink: 0;\n  width: 100%;\n  border-radius: 10px;\n  transform-origin: center center;\n  transform: scale(1);\n  transition: transform 0.5s;\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.5em;\n}\n\n.memolayer_btn {\n  width: 5rem;\n  height: 5rem;\n  background-color: #37a3c0;\n  border: none;\n  border-radius: 50%;\n  -webkit-border-radius: 50%;\n  color: white;\n  outline: none !important;\n  transition: background-color, color 0.7s ease-in;\n  user-select: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.5rem;\n}\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  /* スマホ */\n  .memolayer_btn {\n    width: 5rem;\n    height: 5rem;\n  }\n}\n\n.memolayer_btn:active {\n  background-color: #c00;\n}\n.memolayer_btn:hover {\n  /* background-color: #2a3dc0; */\n  filter: drop-shadow(8px 8px 5px #333);\n}\n.on_REC {\n  background-color: #c00;\n}\n\n.memolayer_btn_margin {\n  margin-right: 1rem;\n}\n.memo_makes {\n  box-sizing: border-box;\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 200;\n  color: rgb(255, 255, 255);\n}\n\n.memo_makes_header {\n  position: relative;\n  top: 0px;\n  left: 10vw;\n  width: 80vw;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\nbutton.closeBtn {\n  width: 2.5rem;\n  height: 2.5rem;\n  background: rgba(42, 121, 142, 0);\n  border: none;\n  border-radius: 3rem;\n  -moz-border-radius: 3rem;\n  -webkit-border-radius: 3rem;\n  color: white;\n  outline: none !important;\n  transition: background-color, color 0.3s ease-in;\n  margin-left: auto;\n  z-index: 200;\n}\nbutton.closeBtn:active {\n  background-color: rgba(42, 121, 142, 0.9);\n  box-shadow: 0 0 5px rgba(42, 121, 142, 0.9);\n}\n\n.memo_makes_header button {\n  width: 65px;\n  height: 65px;\n  top: 0px;\n}\n\n.memo_makes_middle {\n  display: flex;\n  position: relative;\n  top: 0px;\n  width: 80vw;\n  height: fit-content;\n}\n\n#memo_text {\n  position: relative;\n  resize: none;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  border-width: 0px;\n  border-radius: 5px;\n  vertical-align: middle;\n}\n#memo_video {\n  width: auto;\n  height: auto;\n  max-width: 100%;\n  max-height: 100%;\n  border-width: 0px;\n  border-radius: 5px;\n  vertical-align: middle;\n}\n.front_class {\n  transform: scaleX(-1);\n}\n.video_cont {\n  background: #bbb;\n}\n.status_button {\n  /* position: fixed; */\n  position: relative;\n  display: flex;\n  justify-content: flex-end;\n  right: 10%;\n  padding-top: 15px;\n}\n\n.memolayer_btn_icon {\n  width: 60%;\n}\n\n.memolayer_btn_rec {\n  background-color: #c00;\n}\n\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  .slides {\n    display: flex;\n    overflow-x: auto;\n    scroll-snap-type: x mandatory;\n    scroll-behavior: smooth;\n    -webkit-overflow-scrolling: touch;\n    white-space: nowrap; /* 横スクロールの指定 */\n    scroll-snap-points-x: repeat(300px);\n    scroll-snap-type: mandatory;\n    width: 80vw;\n    height: 100%;\n  }\n\n  .memo_makes h3 {\n    margin-top: 17px;\n    margin-left: 10px;\n  }\n\n  .memo_makes_header button {\n    right: 10%;\n  }\n\n  #memo_text {\n    /* position: absolute; */\n    position: relative;\n    resize: none;\n    top: 0;\n    bottom: 0;\n    display: inline-block; /* 横並びにする指定 */\n    width: 100%;\n    height: 60vh;\n    vertical-align: initial;\n  }\n  /* #memo_text:focus {\n    height: 30vh;\n  } */\n  #memo_video {\n    display: inline-block; /* 横並びにする指定 */\n    width: 100%;\n    /* height: 380px; 横スクロールする範囲の高さを指定 */\n    /*margin-left: 10px;*/\n    vertical-align: initial;\n  }\n\n  .status_button {\n    position: relative;\n    padding-top: 10px;\n    right: 10%;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MovieMake.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MovieMake.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MovieMake.vue?vue&type=template&id=322acd54&scoped=true&\"\nimport script from \"./MovieMake.vue?vue&type=script&lang=js&\"\nexport * from \"./MovieMake.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MovieMake.vue?vue&type=style&index=0&id=322acd54&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"322acd54\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"memo_makes\"},[_c('div',{staticClass:\"memo_makes_header\"},[_c('h3',[_vm._v(\"メモ作成画面\")]),_c('button',{staticClass:\"closeBtn\",attrs:{\"title\":\"閉じる\"}},[_c('img',{staticClass:\"btnImg\",attrs:{\"src\":require(\"@/assets/close05.png\")},on:{\"click\":function($event){return _vm.close_button()}}})])]),_c('div',{staticClass:\"arow-wrap\"},[_c('div',[_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.left_view),expression:\"!left_view\"}],staticClass:\"arrow-left\",attrs:{\"href\":\"#memo_video\"}})]),_c('div',{staticClass:\"memo_makes_middle\"},[_c('div',{staticClass:\"slides\",on:{\"scroll\":_vm.is_left}},[_c('div',{staticClass:\"video_cont\"},[_c('video',{ref:\"video\",class:{ front_class: _vm.is_front },attrs:{\"id\":\"memo_video\",\"muted\":\"\",\"playsinline\":\"\",\"autoplay\":\"\"},domProps:{\"muted\":true}}),_c('div',{staticClass:\"text_fade\"},[_vm._v(\"写真\")])]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text_memo),expression:\"text_memo\"}],attrs:{\"id\":\"memo_text\"},domProps:{\"value\":(_vm.text_memo)},on:{\"input\":function($event){if($event.target.composing)return;_vm.text_memo=$event.target.value}}})])]),_c('div',[_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.left_view),expression:\"left_view\"}],staticClass:\"arrow-right\",attrs:{\"href\":\"#memo_text\"}})])]),_c('div',{staticClass:\"status_button\"},[_c('a',{attrs:{\"href\":\"#memo_text\"}},[(_vm.is_not_ios)?_c('div',{staticClass:\"memolayer_btn memolayer_btn_margin\",style:(_vm.mic_btn_color),on:{\"click\":_vm.on_click_mic}},[_c('img',{staticClass:\"memolayer_btn_icon\",attrs:{\"src\":_vm.icon_mic}})]):_vm._e()]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.photo_btn_state == 'close'),expression:\"photo_btn_state == 'close'\"}],staticClass:\"memolayer_btn\",attrs:{\"title\":\"アップロード\"},on:{\"click\":_vm.on_UPLOAD}},[_c('img',{staticClass:\"memolayer_btn_icon\",attrs:{\"src\":_vm.icon_upload}})]),_c('a',{attrs:{\"href\":\"#memo_video\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.photo_btn_state == 'PHOTO'),expression:\"photo_btn_state == 'PHOTO'\"}],staticClass:\"memolayer_btn\",attrs:{\"title\":\"撮影\"},on:{\"click\":_vm.on_PHOTO}},[_c('img',{staticClass:\"memolayer_btn_icon\",attrs:{\"src\":_vm.icon_shatter}})])])]),(_vm.is_dialog_visible)?_c('modalDialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"地点メモ作成\")]),_c('span',{staticStyle:{\"color\":\"black\"},attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(_vm._s(_vm.dialog_msg))]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.dialog_yes}},[_vm._v(\"はい\")]),_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.dialog_no}},[_vm._v(\"いいえ\")])])]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"memo_makes\">\n    <div class=\"memo_makes_header\">\n      <h3>メモ作成画面</h3>\n      <button class=\"closeBtn\" title=\"閉じる\">\n        <!-- 非表示化するボタン -->\n        <img\n          src=\"@/assets/close05.png\"\n          class=\"btnImg\"\n          @click=\"close_button()\"\n        />\n      </button>\n    </div>\n\n    <div class=\"arow-wrap\">\n      <div>\n        <a href=\"#memo_video\" class=\"arrow-left\" v-show=\"!left_view\" />\n      </div>\n      <div class=\"memo_makes_middle\">\n        <div class=\"slides\" @scroll=\"is_left\">\n          <div class=\"video_cont\">\n            <video\n              id=\"memo_video\"\n              ref=\"video\"\n              muted\n              playsinline\n              autoplay\n              :class=\"{ front_class: is_front }\"\n            ></video>\n            <div class=\"text_fade\">写真</div>\n          </div>\n          <textarea id=\"memo_text\" v-model=\"text_memo\" />\n        </div>\n      </div>\n      <div>\n        <a href=\"#memo_text\" class=\"arrow-right\" v-show=\"left_view\" />\n      </div>\n    </div>\n\n    <div class=\"status_button\">\n      <!-- Speech Recognition -->\n      <a href=\"#memo_text\">\n        <div\n          v-if=\"is_not_ios\"\n          class=\"memolayer_btn memolayer_btn_margin\"\n          :style=\"mic_btn_color\"\n          @click=\"on_click_mic\"\n        >\n          <img :src=\"icon_mic\" class=\"memolayer_btn_icon\" />\n        </div>\n      </a>\n\n      <!-- 写真 -->\n      <div\n        v-show=\"photo_btn_state == 'close'\"\n        @click=\"on_UPLOAD\"\n        class=\"memolayer_btn\"\n        title=\"アップロード\"\n      >\n        <img :src=\"icon_upload\" class=\"memolayer_btn_icon\" />\n      </div>\n      <a href=\"#memo_video\">\n        <div\n          v-show=\"photo_btn_state == 'PHOTO'\"\n          @click=\"on_PHOTO\"\n          class=\"memolayer_btn\"\n          title=\"撮影\"\n        >\n          <img :src=\"icon_shatter\" class=\"memolayer_btn_icon\" />\n        </div>\n      </a>\n    </div>\n    <modalDialog v-if=\"is_dialog_visible\">\n      <span slot=\"header\">地点メモ作成</span>\n      <span slot=\"body\" style=\"color: black\">{{ dialog_msg }}</span>\n      <div slot=\"footer\">\n        <button class=\"btn btn-primary\" @click=\"dialog_yes\">はい</button>\n        <button class=\"btn btn-primary\" @click=\"dialog_no\">いいえ</button>\n      </div>\n    </modalDialog>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport { memoEvent } from \"./index.js\";\nimport { sp_start, sp_stop } from \"./sp_recognition\";\nimport ModalDialog from \"@/components/ModalDialog.vue\";\nimport { memo_common } from \"./common.js\";\n\n// テキスト入力状態でボタン押下時すると次の作成タイミングで<>ボタンが出なくなる\n// ※compudedのon_left_endとon_right_endが呼ばれなくなる\n// テキスト入力解除と初期化処理の時間を300msec開ける(200msecではだめだった)\nconst CLOSE_TIMEOUT = 300;\nexport default {\n  mixins: [memo_common],\n  components: {\n    modalDialog: ModalDialog,\n  },\n  data() {\n    return {\n      btn_title: \"\",\n      // テキストメモ\n      text_memo: \"\",\n      // 動画メモ\n      url: \"/api/upload\",\n      photo_btn_state: \"PHOTO\",\n      movieDataBuf: null,\n      moveDataChunks: [],\n      // 写真メモ\n      icon_upload: require(\"./assets/icon_upload.png\"),\n      icon_shatter: require(\"@/assets/photo_shatter.png\"),\n      icon_mic: require(\"@/assets/mic.png\"),\n      imageCapture: null,\n      now_keep_out: false,\n      imageDataBuf: null,\n      mic_btn_flag: false,\n      left_view: true,\n      is_dialog_visible: false,\n      dialog_msg: \"\",\n    };\n  },\n  mounted() {\n    console.log(\"HELLO, I am PhotoMake.vue\");\n    this.init();\n  },\n  methods: {\n    async dialog_yes() {\n      this.is_dialog_visible = false;\n      if (this.mic_btn_flag) {\n        this.mic_btn_flag = false;\n        sp_stop();\n        await this.mic_on_off(\"start\");\n      }\n      memoEvent.$emit(\"BACK_MEMO\");\n      this.init_clear();\n    },\n    dialog_no() {\n      this.is_dialog_visible = false;\n    },\n    init_clear() {\n      this.photo_btn_state = \"PHOTO\"; // 初期化へ戻す\n      this.imageDataBuf = null;\n      this.moveDataChunks = [];\n      this.movieDataBuf = null;\n      this.file_name = \"\";\n      this.text_memo = \"\";\n      this.left_view = true;\n      history.replaceState(null, \"\", location.pathname);\n      console.log(\"end_flag: 終了だ\");\n      this.$emit(\"end_flag\"); // これでコンポーネントを終了する。\n    },\n    on_UPLOAD() {\n      // サーバへアップロード\n      const b64 = this.drawCanvas(this.imageDataBuf);\n      this.post_file(this.file_name + \".jpg\", b64);\n      // 地点メモのピン建て\n      const data = { file_name: this.file_name, info: this.text_memo };\n      memoEvent.$emit(\"SEND_JSON_PHOTO\", data);\n\n      memoEvent.$emit(\"BACK_MEMO\");\n      this.init_clear();\n    },\n    on_PHOTO() {\n      this.$store.state.sound_on();\n      // 画像変換中はクリックされても処理しない。\n      if (this.now_keep_out) return;\n\n      // シャッターを押した感じとして、映像を一時停止\n      this.$refs.video.pause();\n      this.now_keep_out = true;\n\n      const video = document.createElement(\"video\");\n      const canvas = document.createElement(\"canvas\");\n      // this.imageCaptureTakePhoto(this.local_video_stream)\n      this.imageCaptureTakePhoto(this.local_video_stream, canvas, video)\n        .then((blob) => {\n          return createImageBitmap(blob)\n        })\n        .then((imageBitmap) => {\n          // 画像変換中フラグ解除\n          this.now_keep_out = false;\n          // シャッターを押した時点がファイル名の日時\n          this.file_name = this.gen_file_name() + \".jpg\";\n          // シャッターを切った時点で一旦データ保存\n          this.imageDataBuf = imageBitmap;\n          this.photo_btn_state = \"close\";\n        })\n        .catch((error) => {\n          console.log(error);\n          this.err_exit(error);\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.text_fade {\n  position: absolute;\n  width: 100%;\n  font: bolder;\n  font-size: 5rem;\n  text-align: center;\n  -webkit-transition: all 2s;\n  -moz-transition: all 2s;\n  -ms-transition: all 2s;\n  -o-transition: all 2s;\n  transition: all 2s;\n  opacity: 1;\n}\n.fade {\n  opacity: 0;\n}\n\n.arow-wrap {\n  width: 90%;\n  /* height: 100%; */\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  z-index: 200;\n}\n/* 左 */\n.arrow-left {\n  position: relative;\n}\n/* ボタン左の中身（三角を擬似要素で表現） */\n.arrow-left:before {\n  content: \"\";\n  width: 30px;\n  height: 30px;\n  border-top: 2px solid #fefefe;\n  border-left: 2px solid #fefefe;\n  position: absolute;\n  transform: translate(-30%, -50%) rotate(-45deg);\n}\n/* 右 */\n.arrow-right {\n  position: relative;\n}\n/* ボタン右の中身（三角を擬似要素で表現） */\n.arrow-right:before {\n  content: \"\";\n  width: 30px;\n  height: 30px;\n  border-top: 2px solid #fefefe;\n  border-left: 2px solid #fefefe;\n  position: absolute;\n  transform: translate(-70%, -50%) rotate(135deg);\n}\n\n.slides {\n  display: flex;\n  overflow-x: auto;\n  scroll-snap-type: x mandatory;\n  scroll-behavior: smooth;\n  -webkit-overflow-scrolling: touch;\n  white-space: nowrap; /* 横スクロールの指定 */\n  scroll-snap-points-x: repeat(300px);\n  scroll-snap-type: mandatory;\n  width: 80vw;\n  height: 60vh;\n\n  /* height: 60vh; */\n}\n.slides::-webkit-scrollbar {\n  width: 10px;\n  height: 10px;\n}\n.slides::-webkit-scrollbar-thumb {\n  background: #eee;\n  border-radius: 10px;\n}\n.slides::-webkit-scrollbar-track {\n  background: transparent;\n}\n.slides > div,\n.slides > textarea {\n  scroll-snap-align: start;\n  flex-shrink: 0;\n  width: 100%;\n  border-radius: 10px;\n  transform-origin: center center;\n  transform: scale(1);\n  transition: transform 0.5s;\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.5em;\n}\n\n.memolayer_btn {\n  width: 5rem;\n  height: 5rem;\n  background-color: #37a3c0;\n  border: none;\n  border-radius: 50%;\n  -webkit-border-radius: 50%;\n  color: white;\n  outline: none !important;\n  transition: background-color, color 0.7s ease-in;\n  user-select: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.5rem;\n}\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  /* スマホ */\n  .memolayer_btn {\n    width: 5rem;\n    height: 5rem;\n  }\n}\n\n.memolayer_btn:active {\n  background-color: #c00;\n}\n.memolayer_btn:hover {\n  /* background-color: #2a3dc0; */\n  filter: drop-shadow(8px 8px 5px #333);\n}\n.on_REC {\n  background-color: #c00;\n}\n\n.memolayer_btn_margin {\n  margin-right: 1rem;\n}\n.memo_makes {\n  box-sizing: border-box;\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 200;\n  color: rgb(255, 255, 255);\n}\n\n.memo_makes_header {\n  position: relative;\n  top: 0px;\n  left: 10vw;\n  width: 80vw;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\nbutton.closeBtn {\n  width: 2.5rem;\n  height: 2.5rem;\n  background: rgba(42, 121, 142, 0);\n  border: none;\n  border-radius: 3rem;\n  -moz-border-radius: 3rem;\n  -webkit-border-radius: 3rem;\n  color: white;\n  outline: none !important;\n  transition: background-color, color 0.3s ease-in;\n  margin-left: auto;\n  z-index: 200;\n}\nbutton.closeBtn:active {\n  background-color: rgba(42, 121, 142, 0.9);\n  box-shadow: 0 0 5px rgba(42, 121, 142, 0.9);\n}\n\n.memo_makes_header button {\n  width: 65px;\n  height: 65px;\n  top: 0px;\n}\n\n.memo_makes_middle {\n  display: flex;\n  position: relative;\n  top: 0px;\n  width: 80vw;\n  height: fit-content;\n}\n\n#memo_text {\n  position: relative;\n  resize: none;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  border-width: 0px;\n  border-radius: 5px;\n  vertical-align: middle;\n}\n#memo_video {\n  width: auto;\n  height: auto;\n  max-width: 100%;\n  max-height: 100%;\n  border-width: 0px;\n  border-radius: 5px;\n  vertical-align: middle;\n}\n.front_class {\n  transform: scaleX(-1);\n}\n.video_cont {\n  background: #bbb;\n}\n.status_button {\n  /* position: fixed; */\n  position: relative;\n  display: flex;\n  justify-content: flex-end;\n  right: 10%;\n  padding-top: 15px;\n}\n\n.memolayer_btn_icon {\n  width: 60%;\n}\n\n.memolayer_btn_rec {\n  background-color: #c00;\n}\n\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  .slides {\n    display: flex;\n    overflow-x: auto;\n    scroll-snap-type: x mandatory;\n    scroll-behavior: smooth;\n    -webkit-overflow-scrolling: touch;\n    white-space: nowrap; /* 横スクロールの指定 */\n    scroll-snap-points-x: repeat(300px);\n    scroll-snap-type: mandatory;\n    width: 80vw;\n    height: 100%;\n  }\n\n  .memo_makes h3 {\n    margin-top: 17px;\n    margin-left: 10px;\n  }\n\n  .memo_makes_header button {\n    right: 10%;\n  }\n\n  #memo_text {\n    /* position: absolute; */\n    position: relative;\n    resize: none;\n    top: 0;\n    bottom: 0;\n    display: inline-block; /* 横並びにする指定 */\n    width: 100%;\n    height: 60vh;\n    vertical-align: initial;\n  }\n  /* #memo_text:focus {\n    height: 30vh;\n  } */\n  #memo_video {\n    display: inline-block; /* 横並びにする指定 */\n    width: 100%;\n    /* height: 380px; 横スクロールする範囲の高さを指定 */\n    /*margin-left: 10px;*/\n    vertical-align: initial;\n  }\n\n  .status_button {\n    position: relative;\n    padding-top: 10px;\n    right: 10%;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PhotoMake.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PhotoMake.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PhotoMake.vue?vue&type=template&id=447a15b1&scoped=true&\"\nimport script from \"./PhotoMake.vue?vue&type=script&lang=js&\"\nexport * from \"./PhotoMake.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PhotoMake.vue?vue&type=style&index=0&id=447a15b1&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"447a15b1\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"memo_layer\">\n    <StrMake v-if=\"show_memo\" @end_flag=\"end_flag\"></StrMake>\n    <PhotoMake v-if=\"show_photo\" @end_flag=\"end_flag\"></PhotoMake>\n    <MovieMake v-if=\"show_movie\" @end_flag=\"end_flag\"></MovieMake>\n  </div>\n</template>\n\n<script>\nimport { memoEvent } from \"./index.js\";\nimport StrMake from \"./StrMake.vue\";\nimport MovieMake from \"./MovieMake.vue\";\nimport PhotoMake from \"./PhotoMake.vue\";\nexport default {\n  components: {\n    StrMake: StrMake,\n    MovieMake: MovieMake,\n    PhotoMake: PhotoMake,\n  },\n  data() {\n    return {\n      show_memo: false,\n      show_photo: false,\n      show_movie: false,\n    };\n  },\n  mounted() {\n    memoEvent.$on(\"TEXT_MEMO_MAKE\", () => {\n      this.show_memo = true;\n      this.show_photo = false;\n      this.show_movie = false;\n    });\n    memoEvent.$on(\"PHOTO_MEMO_MAKE\", () => {\n      this.show_memo = false;\n      this.show_photo = true;\n      this.show_movie = false;\n    });\n    memoEvent.$on(\"MOVIE_MEMO_MAKE\", () => {\n      this.show_memo = false;\n      this.show_photo = false;\n      this.show_movie = true;\n    });\n  },\n  methods: {\n    end_flag() {\n      this.show_memo = false;\n      this.show_photo = false;\n      this.show_movie = false;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.memo_layer {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MemoMake.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MemoMake.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MemoMake.vue?vue&type=template&id=7e0b6a18&scoped=true&\"\nimport script from \"./MemoMake.vue?vue&type=script&lang=js&\"\nexport * from \"./MemoMake.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MemoMake.vue?vue&type=style&index=0&id=7e0b6a18&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7e0b6a18\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"review_place\",staticClass:\"review_menu\"},[_c('div',{staticClass:\"replay-icon\",on:{\"click\":_vm.toggleReplay}},[(!_vm.now_on_replay)?_c('img',{staticClass:\"icon-img\",attrs:{\"src\":require('./assets/replay.png')}}):_c('img',{staticClass:\"icon-img\",attrs:{\"src\":require('./assets/stop.png')}})]),_c('div',{staticClass:\"replay-text\"},[_c('div',{on:{\"click\":_vm.toggleStartDateTime}},[_c('div',[_vm._v(\" \"+_vm._s(_vm.start_time ? new Date(_vm.start_time).toLocaleDateString() : \"開始時刻\")+\" \")]),(_vm.start_time)?_c('div',[_vm._v(\" \"+_vm._s(new Date(_vm.start_time).toLocaleTimeString())+\" \")]):_vm._e()])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isVisbleStartTime),expression:\"isVisbleStartTime\"}],ref:\"map_popup_down\",staticClass:\"map_popup_down\",style:({ top: _vm.popup_top + 'px', left: _vm.popup_left + 'px' })},_vm._l((_vm.start_times),function(stime){return _c('p',{key:stime,on:{\"click\":function($event){return _vm.selectStartTime(stime)}}},[_vm._v(\" \"+_vm._s(new Date(Number(stime)).toLocaleDateString())+\" \"+_vm._s(new Date(Number(stime)).toLocaleTimeString())+\" \")])}),0),_c('div',{staticClass:\"replay-slider\"},[_c('vue-slider',{attrs:{\"min\":_vm.min,\"max\":_vm.max,\"tooltip\":'always',\"process-style\":{ backgroundColor: 'orange' }},scopedSlots:_vm._u([{key:\"tooltip\",fn:function({ value }){return [_c('div',{class:[_vm.classBox1, { no_display: value === _vm.max || value === _vm.min }]},[_c('div',{staticClass:\"custom-tooltip\"},[_c('p',[_vm._v(\" \"+_vm._s(value === 0 ? \"-日時-\" : new Date(Number(value)).toLocaleDateString())+\" \")]),_c('p',[_vm._v(\" \"+_vm._s(value === 0 ? \"-時刻-\" : new Date(Number(value)).toLocaleTimeString())+\" \")])])])]}}]),model:{value:(_vm.t_value),callback:function ($$v) {_vm.t_value=$$v},expression:\"t_value\"}})],1),_c('div',{staticClass:\"replay-text\"},[_c('div',[_c('div',[_vm._v(\" \"+_vm._s(_vm.end_time ? new Date(_vm.end_time).toLocaleDateString() : \"終了時刻\")+\" \")]),(_vm.end_time)?_c('div',[_vm._v(_vm._s(new Date(_vm.end_time).toLocaleTimeString()))]):_vm._e()])]),(_vm.errMessage)?_c('modalDialog',{on:{\"modalDialogYes\":_vm.dialogClose}},[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"時刻指定エラー\")]),_c('span',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(_vm._s(_vm.errMessage))])]):_vm._e(),_c('div',{staticClass:\"submenu writeItem\"},[_c('div',[_c('button',{staticClass:\"circleBtn subMenu\",class:_vm.isRecord ? 'circleBtnSelected' : null,attrs:{\"title\":\"クロノロジー記録\"},on:{\"click\":_vm.on_record}},[_c('img',{attrs:{\"src\":require(\"./assets/share_desktop@1x.png\")}})])])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"review_menu\" ref=\"review_place\">\n    <div class=\"replay-icon\" @click=\"toggleReplay\">\n      <img\n        :src=\"require('./assets/replay.png')\"\n        class=\"icon-img\"\n        v-if=\"!now_on_replay\"\n      />\n      <img :src=\"require('./assets/stop.png')\" class=\"icon-img\" v-else />\n    </div>\n    <div class=\"replay-text\">\n      <div @click=\"toggleStartDateTime\">\n        <div>\n          {{\n            start_time ? new Date(start_time).toLocaleDateString() : \"開始時刻\"\n          }}\n        </div>\n        <div v-if=\"start_time\">\n          {{ new Date(start_time).toLocaleTimeString() }}\n        </div>\n      </div>\n    </div>\n    <div\n      v-show=\"isVisbleStartTime\"\n      class=\"map_popup_down\"\n      ref=\"map_popup_down\"\n      :style=\"{ top: popup_top + 'px', left: popup_left + 'px' }\"\n    >\n      <p\n        v-for=\"stime in start_times\"\n        :key=\"stime\"\n        @click=\"selectStartTime(stime)\"\n      >\n        {{ new Date(Number(stime)).toLocaleDateString() }}\n        {{ new Date(Number(stime)).toLocaleTimeString() }}\n      </p>\n    </div>\n    <div class=\"replay-slider\">\n      <vue-slider\n        v-model=\"t_value\"\n        :min=\"min\"\n        :max=\"max\"\n        :tooltip=\"'always'\"\n        :process-style=\"{ backgroundColor: 'orange' }\"\n      >\n        <template v-slot:tooltip=\"{ value }\">\n          <div\n            :class=\"[classBox1, { no_display: value === max || value === min }]\"\n          >\n            <div class=\"custom-tooltip\">\n              <p>\n                {{\n                  value === 0\n                    ? \"-日時-\"\n                    : new Date(Number(value)).toLocaleDateString()\n                }}\n              </p>\n              <p>\n                {{\n                  value === 0\n                    ? \"-時刻-\"\n                    : new Date(Number(value)).toLocaleTimeString()\n                }}\n              </p>\n            </div>\n          </div>\n        </template>\n      </vue-slider>\n    </div>\n    <div class=\"replay-text\">\n      <div>\n        <div>\n          {{ end_time ? new Date(end_time).toLocaleDateString() : \"終了時刻\" }}\n        </div>\n        <div v-if=\"end_time\">{{ new Date(end_time).toLocaleTimeString() }}</div>\n      </div>\n      <!-- <input\n        type=\"datetime-local\"\n        ref=\"end_time\"\n        v-else\n        @blur=\"toggleEndDateTime\"\n        v-model=\"end_time\"\n      /> -->\n    </div>\n    <modalDialog v-if=\"errMessage\" @modalDialogYes=\"dialogClose\">\n      <span slot=\"header\">時刻指定エラー</span>\n      <span slot=\"body\">{{ errMessage }}</span>\n    </modalDialog>\n    <div class=\"submenu writeItem\">\n      <div>\n        <button\n          :class=\"isRecord ? 'circleBtnSelected' : null\"\n          class=\"circleBtn subMenu\"\n          title=\"クロノロジー記録\"\n          @click=\"on_record\"\n        >\n          <img src=\"./assets/share_desktop@1x.png\" />\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n/* eslint-disable */\nimport { Map, View, Feature, Overlay } from \"ol\";\nimport * as olLayer from \"ol/layer\";\nimport * as olControl from \"ol/control\";\nimport * as olInteraction from \"ol/interaction\";\nimport * as olProj from \"ol/proj\";\nimport * as olSource from \"ol/source\";\nimport * as olStyle from \"ol/style\";\nimport * as olGeom from \"ol/geom\";\nimport * as olEasing from \"ol/easing\";\nimport * as olObservable from \"ol/Observable\";\n\nimport { reviewEvent, evEmitter, evEmitter_s } from \"./index.js\";\n\nimport ModalDialog from \"@/components/ModalDialog.vue\";\nimport VueSlider from \"vue-slider-component\";\nimport \"vue-slider-component/theme/default.css\";\n// import { Datetime } from 'vue-datetime'\n// import 'vue-datetime/dist/vue-datetime.css'\n\nvar ol = {};\nol.Map = Map;\nol.View = View;\nol.layer = olLayer;\nol.control = olControl;\nol.interaction = olInteraction;\nol.proj = olProj;\nol.source = olSource;\nol.style = olStyle;\nol.geom = olGeom;\nol.Feature = Feature;\nol.Overlay = Overlay;\nol.easing = olEasing;\nol.Observable = olObservable;\n\nexport default {\n  components: {\n    modalDialog: ModalDialog,\n    vueSlider: VueSlider,\n    // datetime: Datetime\n  },\n  data() {\n    return {\n      t_value: 0,\n      t_id: null,\n      now_on_replay: false,\n      min: 0,\n      max: 100,\n      isVisbleStartTime: false,\n      isVisbleEndTime: true,\n      // str_start_time: \"0\",\n      start_time: null,\n      end_time: null,\n      classBox1: \"box1\",\n      errMessage: null,\n      isRecord: false,\n      start_times: [],\n      end_times: [],\n      popup_top: 0,\n      popup_left: 0,\n    };\n  },\n  computed: {\n    users() {\n      return this.$store.getters[\"amt/users\"];\n    },\n    map() {\n      return this.$store.state.map;\n    },\n    myId() {\n      return this.$store.state.myId;\n    },\n    socketio() {\n      return this.$store.state.socketio;\n    },\n  },\n  methods: {\n    toast(msg) {\n      this.$bvToast.toast(msg, {\n        title: \"AirMultiTalk\",\n        toaster: \"b-toaster-top-center\",\n        variant: \"danger\",\n        autoHideDelay: 3000,\n        appendToast: false,\n      });\n    },\n    async on_record() {\n      this.isRecord = !this.isRecord;\n      const res = await fetch(\n        `/api/record/${this.isRecord ? \"start\" : \"stop\"}`\n      );\n      if (res.ok) {\n        const { state } = await res.json();\n        if (state) {\n          // console.log(\"クロノロジー記録が開始されました\");\n          this.toast(\"クロノロジー記録が開始されました\");\n        } else {\n          // console.log(\"クロノロジー記録が停止しました\");\n          this.toast(\"クロノロジー記録が停止しました\");\n        }\n      }\n    },\n    dialogClose() {\n      this.errMessage = null;\n    },\n    // toggleStartDateTime() {\n    //   this.isVisbleStartTime = !this.isVisbleStartTime;\n    //   // document.querySelector(\"input\").click();\n    //   if (this.isVisbleStartTime && this.start_time) {\n    //     if (Date.parse(this.start_time) >= Date.now()) {\n    //       this.errMessage = \"過去の時刻を設定してください\";\n    //       this.start_time = null;\n    //     } else {\n    //       this.end_time = new Date().toString();\n    //     }\n    //   }\n    // },\n    async toggleStartDateTime(ev) {\n      console.log(ev);\n      this.popup_top = ev.layerY;\n      this.popup_left = ev.layerX - 100;\n\n      this.isVisbleStartTime = !this.isVisbleStartTime;\n      if (this.isVisbleStartTime) {\n        const url = \"api/record/state\";\n        const res = await fetch(url);\n        if (res.ok) {\n          const { state, files } = await res.json();\n          console.log(files);\n          // 時刻を取り出して、昇降順でソートする\n          const file_times = files\n            .map((file) => file.time - 60000)\n            .sort((a, b) => {\n              if (a < b) return -1;\n              if (a > b) return 1;\n              return 0;\n            });\n          this.start_times = file_times.filter((file_time, index, arr) => {\n            if (index == 0 || file_time - arr[index - 1] > 60000 * 2) {\n              return true;\n            } else {\n              return false;\n            }\n          });\n          this.end_times = file_times\n            .filter((file_time, index, arr) => {\n              if (\n                arr.length - 1 == index ||\n                this.start_times.includes(arr[index + 1])\n              ) {\n                return true;\n              } else {\n                return false;\n              }\n            })\n            .map((t) => t + 60000);\n          // file_times.forEach(t => console.log(new Date(Number(t)).toLocaleTimeString()))\n          // console.log(\"---------------------------------\")\n          // this.start_times.forEach(t => console.log(new Date(Number(t)).toLocaleTimeString()))\n          // console.log(\"---------------------------------\")\n          // this.end_times.forEach(t => console.log(new Date(Number(t)).toLocaleTimeString()))\n          // const start_times_el = document.getElementById(\"start_times\");\n        }\n      }\n    },\n    selectStartTime(stime) {\n      this.start_time = Number(stime);\n      this.end_time = Number(this.end_times[this.start_times.indexOf(stime)]);\n      this.isVisbleStartTime = false;\n    },\n    // toggleEndDateTime() {\n    //   this.isVisbleEndTime = !this.isVisbleEndTime;\n    // },\n    async toggleReplay() {\n      console.log(\"toggleReplay\");\n      this.now_on_replay = !this.now_on_replay;\n\n      if (this.now_on_replay) {\n        try {\n          const num_start_time = this.start_time\n            ? new Date(this.start_time).getTime()\n            : 0;\n          const num_end_time = this.end_time\n            ? new Date(this.end_time).getTime()\n            : 0;\n          const url = `/api/review?start=${num_start_time}&end=${num_end_time}`;\n          const res = await fetch(url);\n          if (res.ok) {\n            this.review_data = await res.json();\n\n            // t_dataは記録された時刻の配列\n            const t_data = Object.keys(this.review_data);\n\n            console.log(t_data);\n            const PERIOD = 200;\n\n            // 割当開始時刻が保存ファイルの時刻より、後の場合、「そこから開始したい」と想定しそのまま開始する\n            // 割当開始時刻が保存ファイルの時刻より、前の場合、「適当に割当した」から、保存ファイルの時刻にして開始する。\n            // そもそも、割当開始時間なしで、開始した場合、全部返されるので、最古から開始する。\n            let pre_t;\n            // 保存ファイルが空の場合、Buttonを戻して抜ける\n            if (t_data.length === 0) {\n              console.log(\"保存ファイルがありません\");\n              this.now_on_replay = false;\n              return;\n            }\n            // 割当開始時間なしで、開始した場合\n            if (\n              (num_start_time === 0 && num_end_time === 0) ||\n              num_start_time < Number(t_data[0])\n            ) {\n              pre_t = Number(t_data[0]);\n              this.end_time = this.max = Number(t_data[t_data.length - 1]);\n            } else {\n              pre_t = num_start_time;\n              this.max = num_end_time;\n            }\n            this.start_time = this.min = pre_t;\n            let cur_t = pre_t + PERIOD;\n\n            this.t_id = setInterval(() => {\n              console.log(\n                `pre_t=${new Date(pre_t).toLocaleTimeString()} cur_t=${new Date(\n                  cur_t\n                ).toLocaleTimeString()}`\n              );\n              const arr_t = t_data.filter((t) => {\n                return t >= pre_t && t < cur_t;\n              });\n              // console.log(arr_t);\n              arr_t.forEach((t) => {\n                const { event, msg } = this.review_data[t];\n                console.log(`${event}: ${msg}`);\n                evEmitter_s.emit(event, msg);\n              });\n              pre_t = cur_t;\n              cur_t = cur_t + PERIOD;\n              this.t_value = cur_t;\n              if (cur_t > this.end_time) {\n                clearInterval(this.t_id);\n                this.t_value = this.min;\n                this.now_on_replay = false;\n                this.start_time = null;\n                this.end_time = null;\n                return;\n              }\n            }, PERIOD / 10);\n          } else {\n            console.log(\"データがありません \");\n          }\n        } catch (err) {\n          console.log(err);\n        }\n      } else {\n        if (this.t_id) {\n          clearInterval(this.t_id);\n        }\n        this.t_value = this.min;\n      }\n    },\n    on_record_state(msg) {\n      this.isRecord = msg.state;\n    },\n  },\n  async mounted() {\n    // document.querySelector(\"input\").style.display = \"none\";\n    console.log(\"---------クロノロジー機能です---------\");\n    const res = await fetch(\"/api/record/state\");\n    if (res.ok) {\n      const { state, files } = await res.json();\n      if (state) {\n        this.isRecord = true;\n      }\n    }\n    this.socketio.on(\"record\", (msg) => this.on_record_state(msg));\n    reviewEvent.$on(\"SETOPACITY\", (val) => {\n      this.$refs.review_place.style.opacity = val;\n    });\n    reviewEvent.$on(\"SETZINDEX\", (val) => {\n      this.$refs.review_place.style.zIndex = val;\n    });\n  },\n  beforeDestroy() {\n    if (this.t_id) clearInterval(this.t_id);\n    this.socketio.off(this.on_record_state);\n  },\n};\n</script>\n<style scoped>\n.review_menu {\n  z-index: 1;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  /* justify-content: center; */\n  top: 30px;\n  left: 20px;\n  width: 90%;\n  height: 50px;\n  border-radius: 25px 25px 25px 25px;\n  background-color: #39a2c0;\n}\n.replay-icon {\n  width: 35px;\n  margin: auto;\n}\n.icon-img {\n  width: 100%;\n}\n.replay-text {\n  color: white;\n  margin: auto;\n  cursor: pointer;\n}\n.replay-text:hover {\n  color: lightcoral;\n}\n.replay-slider {\n  margin: auto;\n  width: 60%;\n}\n.box1 {\n  position: absolute;\n  left: -60px;\n  top: 15px;\n}\n.no_display {\n  display: none;\n}\n.custom-tooltip {\n  position: relative;\n  display: inline-block;\n  margin: 1.5em 0;\n  padding: 7px 10px;\n  min-width: 120px;\n  max-width: 100%;\n  color: #555;\n  font-size: 16px;\n  background: lightcoral;\n  border-radius: 15px;\n}\n.custom-tooltip:before {\n  content: \"\";\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  margin-left: -15px;\n  border: 15px solid transparent;\n  border-bottom: 15px solid lightcoral;\n}\n.custom-tooltip p {\n  margin: 0;\n  padding: 0;\n}\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  /* 縦向き */\n  .submenu {\n    left: 0vw;\n  }\n}\n@media screen and (min-width: 480px) {\n  /* 横向き */\n  .submenu {\n    left: 15vw;\n  }\n}\n.submenu {\n  display: flex;\n  flex-direction: column-reverse;\n  position: fixed;\n  z-index: 100;\n  padding-left: 10px;\n  padding-bottom: 15px;\n  bottom: 5rem;\n}\n\n.submenu::-webkit-scrollbar {\n  display: none;\n}\n\nbutton.circleBtnSelected {\n  background-color: #c03838;\n}\n.map_popup_down {\n  position: absolute;\n  /* top: 10px;\n  left: 10%; */\n  display: inline-block;\n  margin: 1.5em 0;\n  padding: 7px 10px;\n  width: 200px;\n  min-width: 120px;\n  max-width: 100%;\n  color: #555;\n  font-size: 16px;\n  background: #e0edff;\n  border-radius: 10px;\n  filter: drop-shadow(8px 8px 5px #333);\n}\n\n.map_popup_down:before {\n  content: \"\";\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  margin-left: -15px;\n  border: 15px solid transparent;\n  border-bottom: 15px solid #e0edff;\n}\n\n.map_popup_down p {\n  margin: 0;\n  padding: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./reviewComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./reviewComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./reviewComponent.vue?vue&type=template&id=639e08d8&scoped=true&\"\nimport script from \"./reviewComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./reviewComponent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./reviewComponent.vue?vue&type=style&index=0&id=639e08d8&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"639e08d8\",\n  null\n  \n)\n\nexport default component.exports","\"use strict\";\n\nconst send_fns = {};\nconst recv_fns = {};\n\n// クライアント側\nexport function evEmitter_client() {\n  const id = 1;\n  function on(ev, fn) {\n    if (recv_fns[ev]) {\n      recv_fns[ev].add(fn);\n    } else {\n      recv_fns[ev] = new Set([fn]);\n    }\n    console.log(`クライアント側onで登録: ${recv_fns}`);\n  }\n  function off(ev, fn) {\n    if (recv_fns[ev]) {\n      recv_fns[ev].delete(fn);\n    }\n  }\n  function emit(ev, args) {\n    for (const fn of send_fns[ev] || []) {\n      // console.log(`クライアント側で発火: ${args}`)\n      fn(args);\n    }\n  }\n  function disconnect() {\n    console.log(\"DISCONNECT\");\n  }\n  return { on, off, emit, id, disconnect };\n}\n\n// サーバ側\nexport function evEmitter_serv() {\n  function on(ev, fn) {\n    if (send_fns[ev]) {\n      send_fns[ev].add(fn);\n    } else {\n      send_fns[ev] = new Set([fn]);\n    }\n  }\n  function off(ev, fn) {\n    if (send_fns[ev]) {\n      send_fns[ev].delete(fn);\n    }\n  }\n  function emit(ev, args) {\n    for (const fn of recv_fns[ev] || []) {\n      console.log(`サーバ側emitで発火: ${args}`);\n      fn(args);\n    }\n  }\n  return { on, off, emit };\n}\n","import $store from \"@/store\";\nimport reviewComponent from \"./reviewComponent.vue\";\n// import mitt from \"mitt\";\nimport { evEmitter_client, evEmitter_serv } from \"../../components/evemitter\";\n\nimport Vue from \"vue\";\nexport const reviewEvent = new Vue();\n// export const evEmitter = mitt();\nexport const evEmitter = evEmitter_client();\nexport const evEmitter_s = evEmitter_serv();\n\nexport function reviewLayer() {\n  const noop = () => {};\n  let isActive = false;\n\n  function add() {\n    // $store.commit(\"amt/addComponent\", reviewComponent);\n  }\n\n  function setOpacity(val) {\n    reviewEvent.$emit(\"SETOPACITY\", val);\n  }\n\n  function setVisible(val) {\n    reviewEvent.$emit(\"SETVISIBLE\", val);\n  }\n\n  function setZIndex(val) {\n    reviewEvent.$emit(\"SETZINDEX\", val);\n  }\n\n  function setActive(active) {\n    isActive = active;\n\n    if (isActive) {\n      $store.commit(\"amt/addComponent\", reviewComponent);\n      $store.commit(\"amt/setSubMenu\", \"ReviewLayer\");\n    } else {\n      $store.commit(\"amt/removeComponent\", reviewComponent);\n      $store.commit(\"amt/setSubMenu\", null);\n    }\n  }\n\n  return {\n    add, // マップ初期化時に呼び出し\n    remove: noop, // マップ破棄時に呼び出し\n    update: noop, // 現在のバージョンでは呼び出されない\n    setOpacity,\n    setVisible,\n    setZIndex,\n    setActive,\n  };\n}\n","/* eslint-disable */\nimport { Map, View, Overlay, Feature } from \"ol\";\nimport * as olLayer from \"ol/layer\";\nimport * as olControl from \"ol/control\";\nimport * as olInteraction from \"ol/interaction\";\nimport * as olProj from \"ol/proj\";\nimport * as olSource from \"ol/source\";\nimport * as olStyle from \"ol/style\";\nimport * as olGeom from \"ol/geom\";\n\n//設定取得\n// import config from \"./config.json\";\n//const config = {\n//  dataFile: \"/moduleData/memoLayerData.json\"\n//};\n\nimport $store from \"@/store\";\nimport memoLayerPopup from \"./MemoLayerPopup.vue\";\nimport memoMake from \"./MemoMake.vue\";\n// import memoMake from \"./MovieMake.vue\";\n\nimport Vue from \"vue\";\nimport { evEmitter } from \"../ReviewLayer\";\nexport const memoEvent = new Vue();\n\nexport function memoLayer() {\n  // openlayerのオブジェクトを、<script></script>で取得したときと同じになるように、再構成しています。\n  const ol = {};\n  ol.Map = Map;\n  ol.View = View;\n  ol.Overlay = Overlay;\n  ol.Feature = Feature;\n  ol.layer = olLayer;\n  ol.control = olControl;\n  ol.interaction = olInteraction;\n  ol.proj = olProj;\n  ol.source = olSource;\n  ol.style = olStyle;\n  ol.geom = olGeom;\n\n  // -------------------------------------------------------------\n  // 内部変数（クロージャ変数）\n  // -------------------------------------------------------------\n\n  let vecLayer;\n\n  let currentMemos = [];\n\n  let isVisible = true;\n  let isActive = false;\n\n  let memo_popup_elm;\n  let memoPop;\n  let memoPos = null;\n  let view_popup_elm;\n\n  let map;\n  let socketio;\n\n  // -------------------------------------------------------------\n  // Public関数\n  // -------------------------------------------------------------\n\n  function add() {\n    map = $store.getters[\"amt/map\"];\n    socketio = $store.getters[\"amt/socketio\"];\n\n    $store.commit(\"amt/addComponent\", memoLayerPopup);\n    $store.commit(\"amt/addComponent\", memoMake);\n\n    if (map) {\n      //vec_source = new ol.source.Vector({ features: [] });\n      vecLayer = new ol.layer.Vector({\n        source: new ol.source.Vector({ features: [] }),\n      });\n      // $store.commit(\"setMemoLayer\", vecLayer);\n      map.addLayer(vecLayer);\n      vecLayer.setVisible(true);\n      vecLayer.setZIndex(3); //@todo 仮で設置。今後storeか設定ファイルで管理する予定\n\n      // update();\n      map.on(\"click\", _onMapClick);\n\n      const on_memo = (msg) => {\n        //const memos = JSON.parse(msg);\n        // log(\"RECEIVE MEMO: \" + msg);\n\n        // JSON文字列ではなく生オブジェクトの送信に変更 2022/07/25:中村\n        // const _currentMemos = JSON.parse(msg);\n        const _currentMemos = msg;\n\n        // 分類機能の追加\n        currentMemos = _currentMemos.filter((memo) => {\n          // 作成メモ分類で表示をフィルタする\n          // ただし空欄（未設定）の場合は表示する\n          // 作成分類未設定 => すべてのメモ表示\n          // 分類未設定メモ => 全端末表示\n          // 作成分類設定かつ分類設定済みメモの分類が不一致のときのみフィルタ\n          const memo_classify = $store.state.memo_classify;\n          if (\n            memo.classify != memo_classify &&\n            \"\" != memo.classify &&\n            memo.classify &&\n            \"\" != memo_classify &&\n            memo_classify\n          ) {\n            // 非表示\n            return false;\n          } else {\n            // 表示\n            return true;\n          }\n        });\n        _updateIcons(currentMemos);\n      };\n      socketio.on(\"memo\", (msg) => {\n        // const group_id = $store.getters[\"group_id\"];\n        // if (group_id !== 0) {\n        //   on_memo(msg);\n        //   console.log(msg);\n        // }\n        on_memo(msg);\n        console.log(msg);\n      });\n      evEmitter.on(\"memo\", (ev) => {\n        console.log(\n          \"---------------------REVIEW EVENT--------------------------\"\n        );\n        console.log(ev);\n        on_memo(ev);\n      });\n      setTimeout(() => socketio.emit(\"initmemo\"), 3000);\n    }\n\n    memoEvent.$on(\"VISIBLE\", (val) => setVisible(val));\n    // memoEvent.$on(\"ACTIVE\", val => setActive(val));\n    memoEvent.$on(\"BACK_MEMO\", () => setActive(false));\n    memoEvent.$on(\"ON_ACTIVE\", () => setActive(true));\n    memoEvent.$on(\"OFF_ACTIVE\", () => setActive(false));\n    memoEvent.$on(\"ON_VIEW\", () => setVisible(true));\n    memoEvent.$on(\"OFF_VIEW\", () => setVisible(false));\n    memoEvent.$on(\"DEL_MEMO\", (memo_id) => deleteMemo(memo_id));\n    memoEvent.$on(\"UPDATE_MEMO\", (data) => updateMemo(data));\n    memoEvent.$on(\"SEND_JSON_MEMO\", (data) => send_json(data, \"memo\"));\n    memoEvent.$on(\"SEND_JSON_VIDEO\", (data) => send_json(data, \"video\"));\n    memoEvent.$on(\"SEND_JSON_PHOTO\", (data) => send_json(data, \"photo\"));\n\n    memoEvent.$on(\"INIT_MEMO_POP\", (init_memoPop) => {\n      memoPop = init_memoPop;\n    });\n  }\n\n  // function update() {\n  //   if ($store.state.activeId.kind == \"group\") {\n  //     socketio.emit(\"downMemo\", String($store.state.activeId.id));\n  //   }\n  // }\n  function update() {}\n\n  function remove() {\n    map.removeOverlay(memoPop);\n    memo_popup_elm.parentNode.removeChild(memo_popup_elm);\n    view_popup_elm.parentNode.removeChild(view_popup_elm);\n    map.removeLayer(vecLayer);\n    socketio.off(\"memo\");\n    map.un(\"click\", _onMapClick);\n  }\n\n  function setOpacity(val) {\n    //val: 0.0-1.0\n    vecLayer.setOpacity(val);\n  }\n\n  function getOpacity() {\n    vecLayer.getOpacity();\n  }\n\n  function setZIndex(val) {\n    vecLayer.setZIndex(val);\n  }\n\n  function setVisible(val) {\n    //val: true/false\n    isVisible = val;\n    vecLayer.setVisible(val);\n\n    if (isVisible) {\n      // update();\n    } else {\n      if (isActive) {\n        isActive = false;\n        memoPop.setPosition(undefined);\n        // memoTextarea.value = \"\";\n      }\n    }\n  }\n\n  function getVisible() {\n    return isVisible;\n  }\n\n  function setActive(val) {\n    isActive = val;\n\n    if (isActive) {\n      // 機能追加\n      $store.commit(\"amt/setSubMenu\", \"MemoLayer\");\n      if (!isVisible) {\n        // もし、表示終了だったら、強制的に表示\n        isVisible = true;\n        vecLayer.setVisible(true);\n        memoPop.setPosition(undefined);\n      }\n      memoPos = [\n        $store.state.users[$store.state.myId].lng,\n        $store.state.users[$store.state.myId].lat,\n      ];\n      const _pos = ol.proj.transform(memoPos, \"EPSG:4326\", \"EPSG:3857\");\n      memoPop.setPosition(_pos);\n    } else {\n      if (!isVisible) {\n        // 機能削除、表示終了であれば、機能削除\n      }\n      $store.commit(\"amt/setSubMenu\", null);\n      memoPop.setPosition(undefined);\n      isActive = false;\n    }\n  }\n\n  function getActive() {\n    return isActive;\n  }\n\n  function getUiComponent() {\n    return memoLayerPopup;\n  }\n\n  function send_json(data, kind) {\n    // if (isActive && memoPos && state.activeId.kind == \"group\") {\n    if (memoPos && $store.state.activeId.kind == \"group\") {\n      const data_json = {\n        id: data.file_name,\n        user_id: $store.state.myId,\n        gid: $store.state.activeId.id,\n        name: $store.state.users[$store.state.myId].user_name,\n        lat: memoPos[1],\n        lng: memoPos[0],\n        date: new Date().toLocaleString(),\n        kind: kind,\n        info: data.info,\n        status: \"未読\",\n        classify:\n          $store.state.memo_classify === undefined\n            ? \"\"\n            : $store.state.memo_classify,\n        display_flag: 1,\n      };\n      // JSON文字列から生オブジェクトに変更 2022/07/25:中村\n      // const msg = JSON.stringify(data_json);\n      // // console.log(\"UP MEMO: \" + msg);\n      // socketio.emit(\"upMemo\", msg);\n      socketio.emit(\"upMemo\", data_json);\n    }\n  }\n\n  function updateMemo(up_memo) {\n    // DBの更新後メモの更新通知が届くまでアイコンの場所をクリックすると古いメモ画面が出てしまうので抑制\n    let memo = currentMemos.filter((m) => m.id == up_memo.id);\n    if (memo) {\n      // 更新するメモをリストから削除する\n      currentMemos = currentMemos.filter((m) => m.id != up_memo.id);\n      const memo_classify = $store.state.memo_classify;\n      if (\n        up_memo.classify != memo_classify &&\n        \"\" != up_memo.classify &&\n        up_memo.classify &&\n        \"\" != memo_classify &&\n        memo_classify\n      ) {\n        // 非表示 -> 新しいメモデータをリストに追加しない\n      } else {\n        // 表示 -> 新しいメモデータをリストに追加する\n        currentMemos.push(up_memo);\n      }\n      // アイコンを更新する\n      _updateIcons(currentMemos);\n    }\n\n    // サバーに更新通知\n    // JSON文字列から生オブジェクトに変更 2022/07/25:中村\n    // socketio.emit(\"upMemo\", JSON.stringify(up_memo));\n    socketio.emit(\"upMemo\", up_memo);\n  }\n\n  function deleteMemo(memo_id) {\n    // DBの更新後メモの更新通知が届くまで消したアイコンの場所をクリックするとメモ画面が出てしまうので抑制\n    let memo = currentMemos.filter((m) => m.id == memo_id);\n    if (memo) {\n      // 更新するメモをリストから削除する\n      currentMemos = currentMemos.filter((m) => m.id != memo_id);\n      // 画面上の表示フラグを先行してOFFにする\n      // memo通知受信時は当該IDのメモは来ず配列から消えるはず\n      memo.display_flag = 0;\n      // フラグ更新したメモデータをリストに追加する\n      currentMemos.push(memo);\n      // アイコンを更新する\n      _updateIcons(currentMemos);\n    }\n\n    // サバーに削除通知\n    socketio.emit(\"delMemo\", memo_id);\n  }\n\n  // -------------------------------------------------------------\n  // 内部関数\n  // -------------------------------------------------------------\n  function logDebug(msg) {\n    $store.state.logger.debug(msg);\n  }\n  function log(msg) {\n    $store.state.logger.info(msg);\n  }\n  function logError(msg) {\n    $store.state.logger.error(msg);\n  }\n\n  function _updateIcons(memos) {\n    const iconFeatures = memos\n      .filter((memo) => memo.lng != null && memo.lat != null)\n      .map((memo) => {\n        const coordinate = ol.proj.transform(\n          [parseFloat(memo.lng), parseFloat(memo.lat)],\n          \"EPSG:4326\",\n          \"EPSG:3857\"\n        );\n        const iconFeature = new ol.Feature({\n          geometry: new ol.geom.Point(coordinate),\n          name: \"memo\",\n          id: memo.id,\n          uid: memo.user_id,\n          gid: memo.gid,\n          userName: memo.name,\n          lng: memo.lng,\n          lat: memo.lat,\n          date: memo.date,\n          kind: memo.kind,\n          info: memo.info,\n          display_flag: memo.display_flag,\n        });\n        iconFeature.setStyle(\n          new ol.style.Style({\n            image: new ol.style.Icon({\n              anchor: [0.5, 1],\n              opacity: 1.0,\n              scale: 0.25,\n              src:\n                memo.status == \"既読\"\n                  ? memo.kind == \"memo\"\n                    ? \"/images/memo_pin.png\"\n                    : memo.kind == \"photo\"\n                    ? \"/images/photo_pin.png\"\n                    : \"/images/video_pin.png\"\n                  : memo.kind == \"memo\"\n                  ? \"/images/memo_red_pin.png\"\n                  : memo.kind == \"photo\"\n                  ? \"/images/photo_red_pin.png\"\n                  : \"/images/video_red_pin.png\",\n            }),\n          })\n        );\n        return iconFeature;\n      });\n    const source = vecLayer.getSource();\n    for (const feature of source.getFeatures()) {\n      source.removeFeature(feature);\n    }\n    source.addFeatures(iconFeatures);\n  }\n\n  // function show_pop_first() {\n  //   const pos = [state.users[state.myId].lng, state.users[state.myId].lat]\n  //   memoPop.setPosition(pos);\n  //   memoPos = ol.proj.transform(pos, \"EPSG:3857\", \"EPSG:4326\");\n  // }\n\n  function pos_rounddown(pos) {\n    const digit = 6;\n\n    // 小数点第7位を四捨五入\n    return Math.round(pos * Math.pow(10, digit)) / Math.pow(10, digit);\n  }\n\n  function _onMapClick(e) {\n    if (isActive && $store.state.activeId.kind == \"group\") {\n      memoPop.setPosition(e.coordinate);\n      memoPos = ol.proj.transform(e.coordinate, \"EPSG:3857\", \"EPSG:4326\");\n      memoPos[0] = pos_rounddown(memoPos[0]);\n      memoPos[1] = pos_rounddown(memoPos[1]);\n      // memoKind = \"memo\";\n    } else {\n      map.forEachFeatureAtPixel(e.pixel, (feature, layer) => {\n        _onIconClick(e, feature);\n      });\n    }\n  }\n\n  ///////////////////\n  // メモ表示\n  ///////////////////\n\n  let memo;\n  function _onIconClick(e, feature) {\n    if (feature.get(\"name\") == \"memo\") {\n      $store.state.sound_on();\n      const id = feature.get(\"id\");\n      const kind = feature.get(\"kind\");\n      // playId = id;\n      // playKind = kind;\n      // const memo = currentMemos.find(m => m.id == id);\n      memo = currentMemos.find((m) => m.id == id);\n      if (memo) {\n        memo.kind = kind;\n      } else {\n        return;\n      }\n      memo.coordinate = e.coordinate;\n\n      // メモ通知の更新が間に合わない可能性があるのでここでもフィルタ\n      // ただし空欄（未設定）の場合は一覧に表示する\n      // 作成分類未設定 => すべてのメモ表示\n      // 分類未設定メモ => 全端末表示\n      // 作成分類設定かつ分類設定済みメモの分類が不一致のときのみ一覧非表示\n      const memo_classify = $store.state.memo_classify;\n      if (\n        memo.classify != memo_classify &&\n        \"\" != memo.classify &&\n        memo.classify &&\n        \"\" != memo_classify &&\n        memo_classify\n      ) {\n        // 非表示\n        return;\n      }\n      if (0 == memo.display_flag) {\n        // 非表示\n        return;\n      }\n\n      // クリックされた物一覧に追加\n      let memo_info = {};\n      // ID\n      memo_info.id = memo.id;\n      // クリックされた時の挙動\n      memo_info.click = function (memo_id) {\n        // 詳細画面を表示\n        memoEvent.$emit(\"MEMO_VIEW2\", $store.state.memo.clicked_memo[memo_id]);\n        // クリック時は下の要素が透けて見える為、非表示へ\n        $store.commit(\"hiddenClickList\");\n      };\n      // ↑のクリック時動作にわたすパラメータ\n      memo_info.param = memo.id;\n      // 表示する物を指定\n      if (memo.kind == \"video\") {\n        memo_info.type = \"img\";\n        memo_info.img = \"/memo/\" + memo_info.id + \"_thumb.jpg\";\n      } else if (memo.kind == \"photo\") {\n        memo_info.type = \"img\";\n        memo_info.img = \"/memo/\" + memo.id + \".jpg\";\n      } else {\n        memo_info.type = \"text\";\n        memo_info.text = memo.info;\n      }\n      // 左下のアイコン\n      let memo_image =\n        memo.status == \"既読\"\n          ? memo.kind == \"memo\"\n            ? \"/images/memo_icon.png\"\n            : memo.kind == \"photo\"\n            ? \"/images/photo_icon.png\"\n            : \"/images/video_icon.png\"\n          : memo.kind == \"memo\"\n          ? \"/images/memo_red_icon.png\"\n          : memo.kind == \"photo\"\n          ? \"/images/photo_red_icon.png\"\n          : \"/images/video_red_icon.png\";\n      memo_info.icon = memo_image;\n      // 説明文\n      memo_info.info = memo.date;\n\n      // storeのオブジェクトに追加\n      // $store.state.click_targets.push(memo_info);\n      $store.commit(\"addClickTargets\", memo_info);\n      $store.commit(\"displayClickList\");\n\n      // クリックされた時の関数で使用\n      $store.state.memo.clicked_memo[memo.id] = memo;\n    }\n  }\n\n  function _uuidv4() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(\n      /[xy]/g,\n      function (c) {\n        var r = (Math.random() * 16) | 0,\n          v = c == \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n      }\n    );\n  }\n\n  // -------------------------------------------------------------\n  // 戻り値： 外部関数\n  // -------------------------------------------------------------\n\n  return {\n    add,\n    remove,\n    update,\n    setOpacity,\n    getOpacity,\n    setZIndex,\n    setVisible,\n    getVisible,\n    setActive,\n    getActive,\n    getUiComponent,\n    // send_json,\n    // get_memo_content\n  };\n}\n","<template>\n  <div>\n    <div class=\"videoContainer_private\" ref=\"videoContainer2\">\n      <video-unit v-if=\"is_showed\" @zIndex_up=\"zIndex_down\">\n        <remote-video\n          ref=\"remoteVideo\"\n          :user=\"user\"\n          :remote_id=\"remote_id\"\n          :mode=\"mode\"\n          @call_end=\"call_end\"\n        >\n        </remote-video>\n      </video-unit>\n    </div>\n    <!-- 個別通話用モーダルダイアログ -->\n    <modal-dialog v-if=\"is_callee_dialog_visible\">\n      <span slot=\"header\"></span>\n      <span slot=\"body\">\n        {{ user_name }}から個別通話 {{ media_type }}が着信しました。応答しますか\n      </span>\n      <div slot=\"footer\">\n        <div style=\"display: flex; justify-content: space-around\">\n          <div\n            class=\"circle\"\n            style=\"background-color: red\"\n            @click=\"call_end\"\n            title=\"拒否\"\n          >\n            <img :src=\"hook_down\" class=\"circle_img\" />\n          </div>\n          <div\n            class=\"circle\"\n            style=\"background-color: green\"\n            @click=\"call_accept\"\n            title=\"応答\"\n          >\n            <img :src=\"hook_up\" class=\"circle_img\" />\n          </div>\n        </div>\n      </div>\n    </modal-dialog>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport VideoUnit from \"./VideoUnit\";\nimport ModalDialog from \"@/components/ModalDialog.vue\";\nimport RemoteVideo from \"./RemoteVideo.vue\";\nimport { memoEvent } from \"../MemoLayer/index.js\";\n\nexport default {\n  components: {\n    videoUnit: VideoUnit,\n    modalDialog: ModalDialog,\n    remoteVideo: RemoteVideo,\n  },\n  data() {\n    return {\n      user: null,\n      user_name: \"\",\n      remote_id: null,\n      mode: \"private\",\n      is_showed: false,\n      is_callee_dialog_visible: false,\n      is_caller_dialog_visible: false,\n      media_type: null,\n      caller_name: \"\",\n      hook_up: require(\"@/assets/phone10.png\"),\n      hook_down: require(\"@/assets/hookdown10.png\"),\n    };\n  },\n  mounted() {\n    // publishメッセージ受信時の処理分岐\n    this.socketio.on(\"publish\", this.on_call_from_remote);\n  },\n  methods: {\n    zIndex_down(vm) {\n      const child_elms = this.$refs.videoContainer2.children;\n      for (let i = 0; i < child_elms.length; i++) {\n        child_elms[i].style.zIndex = 2;\n      }\n      // vm.zIndex = 10;\n      vm.$refs.videoUnit.style.zIndex = 10;\n    },\n    // start(remote_id) {\n    //   this.user = this.users[remote_id];\n    //   this.remote_id = remote_id;\n    //   this.$refs.video_unit.start();\n    // },\n    // ----------------------------------------------------------------------------------\n    // 個別通話の発呼\n    call_to_remote(remote_id, media_type) {\n      // this.$store.commit(\"rtc/set_personal_id\", remote_id);\n      this.$store.commit(\"setPer\", \"person\");\n      this.user = this.users[remote_id];\n      this.user_name = this.user.user_name;\n      this.remote_id = remote_id;\n      const send_msg = {\n        type: media_type == \"video\" ? \"call_video\" : \"call_audio\",\n        dest: remote_id,\n        src: this.myId,\n      };\n      this.socketio.emit(\"publish\", send_msg);\n      this.$store.state.toast_on(\"個別通話を呼出し中です。\", \"success\");\n      this.is_showed = true;\n    },\n    // 個別通話の着信\n    on_call_from_remote(msg) {\n      if (msg.type == \"call_video\") {\n        this.$store.state.sound_on();\n        this.user = this.users[msg.src];\n        this.user_name = this.user.user_name;\n        this.remote_id = msg.src;\n        this.is_callee_dialog_visible = true;\n        this.media_type = \"video\";\n      } else if (msg.type == \"call_audio\") {\n        this.$store.state.sound_on();\n        this.user = this.users[msg.src];\n        this.user_name = this.user.user_name;\n        this.remote_id = msg.src;\n        this.is_callee_dialog_visible = true;\n        this.media_type = \"audio\";\n      } else if (msg.type == \"call_end\") {\n        this.on_call_end(msg.src);\n      }\n    },\n    call_accept() {\n      // メモ画面クローズ\n      memoEvent.$emit(\"ALL_CLOSE_MEMO\");\n\n      // 個別通話発信画面を閉じる\n      this.$store.commit(\"setViewLayersDevice\", false);\n      this.$store.commit(\"resetViewLayersDeviceInfo\");\n\n      this.$store.state.sound_on();\n      this.is_callee_dialog_visible = false;\n      this.$store.commit(\"setPer\", \"person\");\n      // this.$refs.video_unit.start(this.media_type);\n      this.is_showed = true;\n      setTimeout(() => {\n        this.$refs.remoteVideo.start(this.media_type);\n      }, 200);\n    },\n    call_end(id) {\n      this.$store.state.sound_on();\n      const send_msg = {\n        type: \"call_end\",\n        dest: this.remote_id,\n        src: this.myId,\n      };\n      this.socketio.emit(\"publish\", send_msg);\n      this.on_call_end(id);\n    },\n    on_call_end(id) {\n      this.is_callee_dialog_visible = false;\n      this.$store.state.toast_on(\"個別通話を終了します。\");\n      this.media_type = null;\n      this.$store.commit(\"setPer\", \"group\");\n      // this.$refs.video_unit.on_stop();\n      // this.$refs.remoteVideo.stop();\n      this.user_name = \"\";\n      this.remote_id = null;\n      this.is_showed = false;\n    },\n  },\n  computed: {\n    socketio() {\n      return this.$store.getters[\"socketio\"];\n    },\n    users() {\n      return this.$store.getters[\"amt/users\"];\n    },\n    myId() {\n      return this.$store.getters[\"amt/myId\"];\n    },\n    myPosition() {\n      return this.$store.getters[\"amt/myPosition\"];\n    },\n    // personal_remote_id() {\n    //   return this.$store.getters[\"rtc/personal_id\"];\n    // }\n  },\n  beforeDestroy() {\n    this.is_showed = false;\n    this.socketio.off(\"publish\", this.on_call_from_remote);\n  },\n};\n</script>\n\n<style>\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  /* 縦向き */\n  .videoContainer_private {\n    width: 20vw;\n  }\n}\n@media screen and (min-width: 480px) {\n  /* 横向き */\n  .videoContainer_private {\n    width: 20vw;\n  }\n}\n.videoContainer_private {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  z-index: 100;\n  top: 10vh;\n  left: 10vw;\n}\n\n.videoContainer2::-webkit-scrollbar {\n  display: none;\n}\n\n.circle {\n  width: 5rem;\n  height: 5rem;\n  /* background-color: #37a3c0; */\n  border: none;\n  border-radius: 5rem;\n  -moz-border-radius: 5rem;\n  -webkit-border-radius: 5rem;\n  color: white;\n  outline: none !important;\n  transition: background-color, color 0.7s ease-in;\n  user-select: none;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n  /* padding: 20px; */\n}\n.circle:hover {\n  /* background-color: #2a3dc0; */\n  filter: drop-shadow(8px 8px 5px #333);\n}\n.circle_img {\n  width: 60%;\n  height: 60%;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RTCPrivate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RTCPrivate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RTCPrivate.vue?vue&type=template&id=6e34ec08&\"\nimport script from \"./RTCPrivate.vue?vue&type=script&lang=js&\"\nexport * from \"./RTCPrivate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RTCPrivate.vue?vue&type=style&index=0&id=6e34ec08&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import $store from \"@/store\";\nimport RTCGroup from \"./RTCGroup.vue\";\nimport RTCPrivate from \"./RTCPrivate.vue\";\n\nimport Vue from \"vue\";\nexport const rtcEvent = new Vue();\n\nexport function RTCLayer() {\n  const noop = () => {};\n\n  function add() {\n    // setActive(true);\n  }\n\n  function setActive(active) {\n    if (active) {\n      // $store.commit(\"amt/setSubMenu\", \"RTCLayer\");\n      $store.commit(\"amt/addComponent\", RTCGroup);\n      $store.commit(\"amt/addComponent\", RTCPrivate);\n    } else {\n      // $store.commit(\"amt/setSubMenu\", null);\n      $store.commit(\"amt/removeComponent\", RTCGroup);\n      $store.commit(\"amt/removeComponent\", RTCPrivate);\n    }\n  }\n\n  return {\n    add, // マップ初期化時に呼び出し\n    get_info: noop,\n    remove: noop, // マップ破棄時に呼び出し\n    update: noop, // 現在のバージョンでは呼び出されない\n    setOpacity: noop, // 現在のバージョンでは呼び出されない\n    setVisible: noop, // 現在のバージョンでは呼び出されない\n    setActive, // メニュー操作でトグル\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('drawMenue',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.inSubMenu),expression:\"inSubMenu\"}],attrs:{\"drawLineColor\":_vm.drawLineColor,\"drawLineSize\":_vm.drawLineWidth,\"writeShape\":_vm.drawShape},on:{\"toggleWrite\":_vm.toggleWrite,\"toggleErase\":_vm.toggleErase,\"inputColor\":function($event){_vm.drawLineColor = $event.hex},\"inputSize\":function($event){_vm.drawLineWidth = $event},\"inputShape\":function($event){return _vm.updateDrawShape($event)}}}),_c('map-popup',{ref:\"map_popup\",attrs:{\"pos\":_vm.pos}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flexContainer\",attrs:{\"id\":\"writeMenu\"}},[_c('div',{staticClass:\"writeItem\"},[_c('div',[_c('button',{staticClass:\"circleBtn\",class:{ circleBtnSelected: _vm.selectedWriteItem === 'shape' },attrs:{\"title\":\"図形選択\"},on:{\"click\":_vm.shapeBtnClick}},[_c('img',{attrs:{\"src\":_vm.shapeButtonSrc}})])]),(_vm.selectedWriteItem == 'shape')?_c('div',{staticClass:\"writeContent\",attrs:{\"id\":\"shapeMenu\"}},[_c('div',{attrs:{\"id\":\"shapeWrapper\"}},[_c('div',{attrs:{\"id\":\"shapeFlex\"}},[_c('div',[_c('button',{staticClass:\"circleBtn\",attrs:{\"title\":\"フリーハンド\"},on:{\"click\":function($event){return _vm.selectShape('free')}}},[_c('img',{attrs:{\"src\":require(\"@/assets/menu_free@1x.png\")}})])]),_c('div',[_c('button',{staticClass:\"circleBtn\",attrs:{\"title\":\"ポリゴン\"},on:{\"click\":function($event){return _vm.selectShape('line')}}},[_c('img',{attrs:{\"src\":require(\"@/assets/NEW/menu_polygon@1x.png\")}})])]),_c('div',[_c('button',{staticClass:\"circleBtn\",attrs:{\"title\":\"三角形\"},on:{\"click\":function($event){return _vm.selectShape('triangle')}}},[_c('img',{attrs:{\"src\":require(\"@/assets/menu_triangle@1x.png\")}})])]),_c('div',[_c('button',{staticClass:\"circleBtn\",attrs:{\"title\":\"四角形\"},on:{\"click\":function($event){return _vm.selectShape('square')}}},[_c('img',{attrs:{\"src\":require(\"@/assets/menu_square@1x.png\")}})])]),_c('div',[_c('button',{staticClass:\"circleBtn\",attrs:{\"title\":\"円形\"},on:{\"click\":function($event){return _vm.selectShape('circle')}}},[_c('img',{attrs:{\"src\":require(\"@/assets/menu_circle@1x.png\")}})])])])])]):_vm._e()]),_c('div',{staticClass:\"writeItem\"},[_c('div',{staticStyle:{\"position\":\"relative\"}},[_c('button',{staticClass:\"circleBtn\",class:{ circleBtnSelected: _vm.selectedWriteItem === 'size' },attrs:{\"title\":\"太さ調節\"},on:{\"click\":_vm.sizeBtnClick}},[_c('img',{attrs:{\"src\":require(\"@/assets/menu_size@1x.png\")}})]),_c('div',{staticClass:\"batch\"},[_c('span',[_vm._v(_vm._s(_vm.drawLineSize))])])]),(_vm.selectedWriteItem == 'size')?_c('div',{staticClass:\"writeContent\",attrs:{\"id\":\"slideContent\"}},[_c('vue-slider',{ref:\"slider\",attrs:{\"value\":_vm.drawLineSize,\"data\":_vm.lineSizeTicks,\"marks\":true},on:{\"change\":function($event){return _vm.$emit('inputSize', $event)}}})],1):_vm._e()]),_c('div',{staticClass:\"writeItem\"},[_c('div',[_c('button',{staticClass:\"circleBtn\",class:{ circleBtnSelected: _vm.selectedWriteItem === 'color' },style:({ backgroundColor: _vm.drawLineColor }),attrs:{\"title\":\"色選択\"},on:{\"click\":_vm.colorBtnClick}},[_c('img',{attrs:{\"src\":require(\"@/assets/menu_color@1x.png\")}})])]),(_vm.selectedWriteItem == 'color')?_c('div',{staticClass:\"writeContent colorpicker\"},[(_vm.picker == 'chrome')?_c('chrome-picker',{ref:\"colorPicker\",attrs:{\"value\":_vm.drawLineColor,\"disableAlpha\":true},on:{\"input\":function($event){return _vm.$emit('inputColor', $event)}}}):_c('compact-picker',{ref:\"colorPicker\",attrs:{\"value\":_vm.drawLineColor,\"disableAlpha\":true},on:{\"input\":function($event){return _vm.$emit('inputColor', $event)}}})],1):_vm._e()]),_c('div',[_c('div',[_c('button',{staticClass:\"circleBtn\",class:{ circleBtnSelected: _vm.selectedWriteItem === 'erase' },attrs:{\"title\":\"消しゴム\"},on:{\"click\":_vm.eraserBtnClick}},[_c('img',{attrs:{\"src\":require(\"@/assets/menu_eraser@1x.png\")}})])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- 手書きレイヤー向けのメニューボタンはコンポーネントにする?とりあえず実装後に整理を検討 -->\n  <div id=\"writeMenu\" class=\"flexContainer\">\n    <!-- 図形ボタン -->\n    <div class=\"writeItem\">\n      <div>\n        <button\n          v-on:click=\"shapeBtnClick\"\n          v-bind:class=\"{ circleBtnSelected: selectedWriteItem === 'shape' }\"\n          class=\"circleBtn\"\n          title=\"図形選択\"\n        >\n          <img v-bind:src=\"shapeButtonSrc\" />\n        </button>\n      </div>\n      <div\n        id=\"shapeMenu\"\n        class=\"writeContent\"\n        v-if=\"selectedWriteItem == 'shape'\"\n      >\n        <div id=\"shapeWrapper\">\n          <div id=\"shapeFlex\">\n            <div>\n              <button\n                v-on:click=\"selectShape('free')\"\n                class=\"circleBtn\"\n                title=\"フリーハンド\"\n              >\n                <img src=\"@/assets/menu_free@1x.png\" />\n              </button>\n            </div>\n            <div>\n              <button\n                v-on:click=\"selectShape('line')\"\n                class=\"circleBtn\"\n                title=\"ポリゴン\"\n              >\n                <img src=\"@/assets/NEW/menu_polygon@1x.png\" />\n              </button>\n            </div>\n            <div>\n              <button\n                v-on:click=\"selectShape('triangle')\"\n                class=\"circleBtn\"\n                title=\"三角形\"\n              >\n                <img src=\"@/assets/menu_triangle@1x.png\" />\n              </button>\n            </div>\n            <div>\n              <button\n                v-on:click=\"selectShape('square')\"\n                class=\"circleBtn\"\n                title=\"四角形\"\n              >\n                <img src=\"@/assets/menu_square@1x.png\" />\n              </button>\n            </div>\n            <div>\n              <button\n                v-on:click=\"selectShape('circle')\"\n                class=\"circleBtn\"\n                title=\"円形\"\n              >\n                <img src=\"@/assets/menu_circle@1x.png\" />\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- ペン太さボタン -->\n    <div class=\"writeItem\">\n      <div style=\"position: relative\">\n        <button\n          v-on:click=\"sizeBtnClick\"\n          v-bind:class=\"{ circleBtnSelected: selectedWriteItem === 'size' }\"\n          class=\"circleBtn\"\n          title=\"太さ調節\"\n        >\n          <img src=\"@/assets/menu_size@1x.png\" />\n        </button>\n        <div class=\"batch\">\n          <span>{{ drawLineSize }}</span>\n        </div>\n      </div>\n      <div\n        id=\"slideContent\"\n        class=\"writeContent\"\n        v-if=\"selectedWriteItem == 'size'\"\n      >\n        <vue-slider\n          ref=\"slider\"\n          v-bind:value=\"drawLineSize\"\n          v-bind:data=\"lineSizeTicks\"\n          v-bind:marks=\"true\"\n          v-on:change=\"$emit('inputSize', $event)\"\n        ></vue-slider>\n      </div>\n    </div>\n    <!-- ペン色ボタン -->\n    <div class=\"writeItem\">\n      <div>\n        <button\n          v-on:click=\"colorBtnClick\"\n          v-bind:class=\"{ circleBtnSelected: selectedWriteItem === 'color' }\"\n          v-bind:style=\"{ backgroundColor: drawLineColor }\"\n          class=\"circleBtn\"\n          title=\"色選択\"\n        >\n          <img src=\"@/assets/menu_color@1x.png\" />\n        </button>\n      </div>\n      <div class=\"writeContent colorpicker\" v-if=\"selectedWriteItem == 'color'\">\n        <chrome-picker\n          ref=\"colorPicker\"\n          v-bind:value=\"drawLineColor\"\n          v-bind:disableAlpha=\"true\"\n          v-on:input=\"$emit('inputColor', $event)\"\n          v-if=\"picker == 'chrome'\"\n        ></chrome-picker>\n        <compact-picker\n          ref=\"colorPicker\"\n          v-bind:value=\"drawLineColor\"\n          v-bind:disableAlpha=\"true\"\n          v-on:input=\"$emit('inputColor', $event)\"\n          v-else\n        ></compact-picker>\n      </div>\n    </div>\n    <!-- 消しゴムボタン -->\n    <div>\n      <div>\n        <button\n          v-on:click=\"eraserBtnClick\"\n          v-bind:class=\"{ circleBtnSelected: selectedWriteItem === 'erase' }\"\n          class=\"circleBtn\"\n          title=\"消しゴム\"\n        >\n          <img src=\"@/assets/menu_eraser@1x.png\" />\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n// import $store from \"@/store\";\nimport VueSlider from \"vue-slider-component\";\nimport \"vue-slider-component/theme/default.css\";\n// import { Compact } from \"vue-color\";\n// import { Chrome } from \"vue-color\";\nimport { Compact, Chrome } from \"vue-color\";\n\nimport { drawEvent } from \"./index.js\";\n\nexport default {\n  data() {\n    return {\n      selectedWriteItem: null,\n      lineSizeTicks: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\n      picker: \"\",\n      // drawLineColor: this.$store.state.draw_color\n    };\n  },\n  props: [\"drawLineColor\", \"drawLineSize\", \"writeShape\"],\n  components: {\n    vueSlider: VueSlider,\n    \"chrome-picker\": Chrome,\n    \"compact-picker\": Compact,\n  },\n  methods: {\n    sizeBtnClick() {\n      // ペンのサイズ変更ボタン\n      // 自身の機能選択状態をトグル\n      this.setWriteItem(\"size\");\n    },\n    shapeBtnClick() {\n      // 図形選択ボタン\n      // 自身の機能選択状態をトグル\n      this.setWriteItem(\"shape\");\n    },\n    colorBtnClick() {\n      // 色変更ボタン\n      // 自身の機能選択状態をトグル\n      this.setWriteItem(\"color\");\n    },\n    eraserBtnClick() {\n      // 消しゴムボタン\n      // 自身の機能選択状態をトグル\n      this.setWriteItem(\"erase\");\n    },\n    selectShape(shape) {\n      // 図形選択\n      // ボタンの選択状態解除と図形メニューの非表示\n      this.selectedWriteItem = null;\n      // 図形を指定\n      this.$emit(\"inputShape\", shape);\n    },\n    setWriteItem(item) {\n      const current = this.selectedWriteItem;\n      // 指定したアイテムが選択中でないならそれを選択中としてセット\n      // 選択中だったら未選択状態にする\n      this.selectedWriteItem = this.selectedWriteItem != item ? item : null;\n      // 消しゴムの状態変更イベント\n      if (current == \"erase\") {\n        // 消しゴムが解除されるとき\n        this.$emit(\"toggleErase\", false);\n      }\n      if (this.selectedWriteItem == \"erase\") {\n        // 消しゴムが有効になるとき\n        this.$emit(\"toggleErase\", true);\n      }\n    },\n  },\n  mounted() {\n    // カラーピッカーをユーザのjsonファイルから選択\n    this.picker = this.$store.state.color_picker;\n    // クロム版しか使われてない？\n    // this.picker = \"chrome\";\n    // this.picker = \"compact\";\n\n    drawEvent.$on(\"SETACTIVE\", (active) => {\n      if (!active) {\n        // メニューを閉じる際は現在選択している物をリセット\n        this.selectedWriteItem = null;\n      }\n    });\n  },\n  computed: {\n    shapeButtonSrc() {\n      let src;\n      switch (this.writeShape) {\n        case \"free\":\n          src = require(\"@/assets/menu_free@1x.png\");\n          break;\n        case \"line\":\n          src = require(\"@/assets/NEW/menu_polygon@1x.png\");\n          break;\n        case \"triangle\":\n          src = require(\"@/assets/menu_triangle@1x.png\");\n          break;\n        case \"square\":\n          src = require(\"@/assets/menu_square@1x.png\");\n          break;\n        case \"circle\":\n          src = require(\"@/assets/menu_circle@1x.png\");\n          break;\n        case \"text\":\n          src = require(\"@/assets/menu_txt@1x.png\");\n          break;\n        default:\n          src = require(\"@/assets/menu_free@1x.png\");\n          break;\n      }\n      return src;\n    },\n    selectedShapeText() {\n      switch (this.writeShape) {\n        case \"free\":\n          return \"フリー\";\n        case \"line\":\n          return \"直線\";\n        case \"triangle\":\n          return \"三角\";\n        case \"square\":\n          return \"四角\";\n        case \"circle\":\n          return \"丸\";\n        case \"text\":\n          return \"直線\";\n        default:\n          return \"フリー\";\n      }\n    },\n  },\n};\n</script>\n\n<style>\ndiv.flexContainer {\n  z-index: 100;\n  display: flex;\n  flex-direction: column-reverse;\n  /* 戻るボタンのスペースを空ける */\n  position: absolute;\n  bottom: 90px;\n  left: 12px;\n}\n/* @todo 名称をちょっと検討 */\ndiv.writeItem {\n  display: flex;\n  flex-direction: row;\n  /* overflow: overlay; */\n  /* overflow: scroll; */\n}\n#shapeMenu {\n  display: block;\n  /* width: calc(100vw - 90px); */\n  /* overflow-x: scroll; */\n  overflow-x: auto;\n}\n#shapeWrapper {\n  display: inline-block;\n}\n#shapeFlex {\n  display: flex;\n  flex-direction: row;\n  width: 22rem;\n  height: 6rem;\n}\n#slideContent {\n  text-align: center;\n  width: 200px;\n  padding: 0 20px;\n}\n.writeContent {\n  position: absolute;\n  left: 5.5rem;\n}\n#mapLayerMenu .colorpicker {\n  bottom: 8rem;\n}\nbutton.circleBtn {\n  width: 4rem;\n  height: 4rem;\n  background-color: #37a3c0;\n  border: none;\n  border-radius: 5rem;\n  -moz-border-radius: 5rem;\n  -webkit-border-radius: 5rem;\n  color: white;\n  outline: none !important;\n  transition: background-color, color 0.7s ease-in;\n  user-select: none;\n}\nbutton.circleBtn:hover {\n  /* background-color: #2a3dc0; */\n  filter: drop-shadow(8px 8px 5px #333);\n}\nbutton.circleBtn img {\n  width: 1.9rem;\n  height: 1.9rem;\n}\nbutton.circleBtnSelected {\n  background-color: #c03838;\n}\nbutton.circleBtnDisabled {\n  background-color: darkgray;\n}\n/*\ndiv::-webkit-scrollbar {\n  display: none;\n}\n*/\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  /* @media screen and (orientation: portrait) { */\n  /* 縦向き */\n  #shapeFlex {\n    flex-direction: column-reverse;\n    width: 6rem;\n    height: 22rem;\n  }\n  #shapeMenu.writeContent {\n    top: -4.8rem;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DrawMenue.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DrawMenue.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DrawMenue.vue?vue&type=template&id=7a9a93a5&\"\nimport script from \"./DrawMenue.vue?vue&type=script&lang=js&\"\nexport * from \"./DrawMenue.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DrawMenue.vue?vue&type=style&index=0&id=7a9a93a5&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"map_popup\",attrs:{\"id\":\"map_popup_elm\"}},[_c('div',[_c('p',[_vm._v(_vm._s(_vm.popup_msg_username))]),_c('p',[_vm._v(_vm._s(_vm.popup_msg_timestamp))]),(_vm.popup_msg_url)?_c('video',{staticClass:\"popup_video\",attrs:{\"controls\":\"\",\"src\":_vm.popup_msg_url}}):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- POPUP -->\n  <div id=\"map_popup_elm\" class=\"map_popup\">\n    <div>\n      <p>{{ popup_msg_username }}</p>\n      <p>{{ popup_msg_timestamp }}</p>\n      <video\n        class=\"popup_video\"\n        controls\n        v-if=\"popup_msg_url\"\n        :src=\"popup_msg_url\"\n      ></video>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Map, View, Feature, Overlay } from \"ol\";\nimport * as olLayer from \"ol/layer\";\nimport * as olControl from \"ol/control\";\nimport * as olInteraction from \"ol/interaction\";\nimport * as olProj from \"ol/proj\";\nimport * as olSource from \"ol/source\";\nimport * as olStyle from \"ol/style\";\nimport * as olGeom from \"ol/geom\";\nimport * as olEasing from \"ol/easing\";\nimport * as olObservable from \"ol/Observable\";\n\nvar ol = {};\nol.Map = Map;\nol.View = View;\nol.layer = olLayer;\nol.control = olControl;\nol.interaction = olInteraction;\nol.proj = olProj;\nol.source = olSource;\nol.style = olStyle;\nol.geom = olGeom;\nol.Feature = Feature;\nol.Overlay = Overlay;\nol.easing = olEasing;\nol.Observable = olObservable;\n\nexport default {\n  props: [\"pos\"],\n  data() {\n    return {\n      map_popup: null,\n      popup_msg_username: null,\n      popup_msg_timestamp: null,\n      popup_msg_url: null,\n      last_feature: null,\n    };\n  },\n  // watch: {\n  //   pos() {\n  //     const cur_pos = this.getPos();\n  //     if (!cur_pos) {\n  //       this.show(this.pos);\n  //     } else {\n  //       this.hide();\n  //     }\n  //   }\n  // },\n  computed: {\n    map() {\n      return this.$store.state.map;\n    },\n  },\n  methods: {\n    init_map_popup() {\n      // const map = this.$store.getters[\"amt/map\"];\n      const map_popup_elm = document.getElementById(\"map_popup_elm\");\n      this.map_popup = new ol.Overlay({\n        element: map_popup_elm,\n        positioning: \"bottom-center\",\n        autoPan: true,\n        autoPanAnimation: {\n          duration: 250,\n        },\n      });\n      this.map.addOverlay(this.map_popup);\n      this.map_popup.setPosition(undefined);\n    },\n    getPos() {\n      return this.map_popup.getPosition();\n    },\n    show(pos) {\n      // this.popup_message = content;\n      this.map_popup.setPosition(pos);\n    },\n    hide() {\n      this.map_popup.setPosition(undefined);\n      this.last_feature.setStyle(this.original_style);\n      this.last_feature = null;\n    },\n\n    // DrawComponent.vueからのパクリ\n    // LineStringでは、feature側サイズが極小になるため、指によるタッチが困難なため、\n    // 指によるタッチイベント発生時に周囲で閾値以内のfeatureにイベントを発火させる。\n    on_click(ev, layer) {\n      const myCoord = ev.coordinate;\n      // 閾値\n      const max = 250 / 2 ** (this.map.getView().getZoom() - 14);\n      let minFeature;\n      let minDist = -1;\n\n      // この処理バッカリ。。。。\n      const vecLayerSource = layer.getSource();\n      vecLayerSource.getFeatures().forEach((feature) => {\n        // 最短距離の場所にある座標を取得\n        const geometry = feature.get(\"geometry\");\n        const closest = geometry.getClosestPoint(myCoord);\n\n        // 各座標間の距離\n        const xDist = Math.abs(closest[0] - myCoord[0]);\n        const yDist = Math.abs(closest[1] - myCoord[1]);\n        if (xDist + yDist <= max) {\n          // 自座標と一番近い点のLineStringを作成し、距離を取得する\n          const ls = new ol.geom.LineString([closest, myCoord]);\n          const dist = ls.getLength();\n          if (minDist < 0 || dist < minDist) {\n            // 一番近くの点の情報に更新\n            minDist = dist;\n            minFeature = feature;\n          }\n        }\n      });\n      // 最小距離が0以上(=該当するものがあった判定)なら描画レイヤーからその描画単位で削除する\n      if (minDist >= 0) {\n        // alert(minFeature.get(\"id\"));\n        console.log(`あったよ: ${minFeature.get(\"id\")}`);\n        this.last_feature = minFeature;\n        this.original_style = minFeature.getStyle();\n        this.on_featureTouch(ev, minFeature);\n      }\n    },\n    on_featureTouch(ev, feature) {\n      const user_name = feature.get(\"user_name\");\n      const timestamp = feature.get(\"timestamp\");\n      const video_file = feature.get(\"video_file\");\n      console.log(`user_name=${user_name} timestamp=${timestamp}`);\n      if (user_name && timestamp) {\n        // Style\n        const color = feature.getStyle().stroke_.color_;\n        const style = new ol.style.Style({\n          stroke: new ol.style.Stroke({\n            color: color,\n            width: 10,\n          }),\n        });\n        feature.setStyle(style);\n\n        // Popup\n        this.popup_msg_username = user_name;\n        // this.popup_msg_timestamp = `${new Date(\n        //   timestamp\n        // ).toLocaleDateString()} ${new Date(timestamp).toLocaleTimeString()}`;\n        this.popup_msg_timestamp = new Date(timestamp).toLocaleString();\n        this.popup_msg_url = video_file ? `/callrec/${video_file}` : null;\n        this.show(ev.coordinate);\n      } else {\n        this.popup_msg_username = null;\n        this.popup_msg_timestamp = null;\n        this.popup_msg_url = null;\n        this.hide();\n      }\n    },\n  },\n  mounted() {\n    this.init_map_popup();\n  },\n};\n</script>\n\n<style>\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  /* スマホ */\n  .map_popup {\n    width: 200px;\n  }\n}\n@media screen and (min-width: 480px) {\n  /* スマホ以上 */\n  .map_popup {\n    width: 300px;\n  }\n}\n.map_popup {\n  /* width: 300px; */\n  position: relative;\n  /* display: inline-block; */\n  margin: 1.5em 0;\n  /* padding: 7px 10px; */\n  padding: 1px;\n  min-width: 120px;\n  max-width: 100%;\n  color: #555;\n  font-size: 16px;\n  background: #eeffff;\n  box-sizing: border-box;\n  border-radius: 10px;\n  filter: drop-shadow(8px 8px 5px #333);\n}\n.map_popup:before {\n  content: \"\";\n  position: absolute;\n  bottom: -24px;\n  left: 50%;\n  margin-left: -15px;\n  border: 12px solid transparent;\n  border-top: 12px solid #eeffff;\n  z-index: 2;\n  filter: drop-shadow(8px 8px 5px #333);\n}\n\n.map_popup:after {\n  content: \"\";\n  position: absolute;\n  bottom: -30px;\n  left: 50%;\n  margin-left: -17px;\n  border: 14px solid transparent;\n  border-top: 14px solid #555;\n  z-index: 1;\n}\n.popup_video {\n  width: 80%;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MapPopup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MapPopup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapPopup.vue?vue&type=template&id=51d243ae&\"\nimport script from \"./MapPopup.vue?vue&type=script&lang=js&\"\nexport * from \"./MapPopup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapPopup.vue?vue&type=style&index=0&id=51d243ae&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <!-- Menueボタン -->\n    <drawMenue\n      v-on:toggleWrite=\"toggleWrite\"\n      v-on:toggleErase=\"toggleErase\"\n      v-bind:drawLineColor=\"drawLineColor\"\n      v-bind:drawLineSize=\"drawLineWidth\"\n      v-bind:writeShape=\"drawShape\"\n      v-on:inputColor=\"drawLineColor = $event.hex\"\n      v-on:inputSize=\"drawLineWidth = $event\"\n      v-on:inputShape=\"updateDrawShape($event)\"\n      v-show=\"inSubMenu\"\n    >\n    </drawMenue>\n    <map-popup :pos=\"pos\" ref=\"map_popup\"></map-popup>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport { Map, View, Feature } from \"ol\";\n\nimport * as olLayer from \"ol/layer\";\nimport * as olControl from \"ol/control\";\nimport * as olInteraction from \"ol/interaction\";\nimport * as olProj from \"ol/proj\";\nimport * as olSource from \"ol/source\";\nimport * as olStyle from \"ol/style\";\nimport * as olGeom from \"ol/geom\";\nimport * as olFormat from \"ol/format\";\nimport Draw, { createBox, createRegularPolygon } from \"ol/interaction/Draw.js\";\n\nimport DrawMenue from \"./DrawMenue.vue\";\nimport { drawEvent } from \"./index.js\";\nimport { evEmitter } from \"../ReviewLayer\";\nimport MapPopup from \"@/components/MapPopup.vue\";\n\nimport $ from \"jquery\";\n\nvar ol = {};\nol.Map = Map;\nol.View = View;\nol.layer = olLayer;\nol.control = olControl;\nol.interaction = olInteraction;\nol.proj = olProj;\nol.source = olSource;\nol.style = olStyle;\nol.geom = olGeom;\nol.format = olFormat;\nol.Feature = Feature;\n\nexport default {\n  data: function () {\n    return {\n      inSubMenu: false,\n      drawStartFlag: false,\n      multiTouch: false,\n      drawX: 0,\n      drawY: 0,\n      drawLineWidth: 5,\n      drawLineColor: \"#000000\",\n      lineId: \"\",\n      timerId: null,\n      tiimerCnt: 0,\n\n      drawLayer: null,\n      eraseLayer: null,\n      freeDraw: null,\n      freeErase: null,\n\n      writeMode: false,\n      eraseMode: false,\n      multitouch: true,\n\n      drawShape: \"free\",\n\n      pos: null,\n    };\n  },\n  components: {\n    drawMenue: DrawMenue,\n    mapPopup: MapPopup,\n  },\n  computed: {\n    myId: function () {\n      return this.$store.getters[\"amt/myId\"];\n    },\n    myPosition: function () {\n      return this.$store.getters[\"amt/myPosition\"];\n    },\n    patrolState: function () {\n      return this.$store.getters[\"amt/patrolState\"];\n    },\n    users() {\n      return this.$store.getters[\"amt/users\"];\n    },\n    user() {\n      return this.myId && this.users[this.myId];\n    },\n    user_name() {\n      return this.myId && this.users[this.myId].user_name;\n    },\n    socketio() {\n      return this.$store.getters[\"socketio\"];\n    },\n    group_id() {\n      return this.$store.getters[\"group_id\"];\n    },\n  },\n  watch: {\n    group_id(val) {\n      this.socketio.emit(\"initdraw\");\n    },\n  },\n  methods: {\n    //描画用レイヤー作成\n    createDrawLayer: function () {\n      const drawLayerSource = new ol.source.Vector({\n        format: new ol.format.GeoJSON(),\n        // wrapX: false,\n        //url: 'file://' + __dirname + '/data/drawdata.json',\n      });\n      return new ol.layer.Vector({\n        source: drawLayerSource,\n        style: new ol.style.Style({\n          stroke: new ol.style.Stroke({ color: \"#000000\", width: 3 }),\n        }),\n      });\n    },\n    //消去用レイヤー作成\n    createEraseLayer: function () {\n      const eraseLayerSource = new ol.source.Vector({\n        format: new ol.format.GeoJSON(),\n        //url: 'file://' + __dirname + '/data/drawdata.json',\n      });\n      return new ol.layer.Vector({\n        source: eraseLayerSource,\n        style: new ol.style.Style({\n          stroke: new ol.style.Stroke({ color: \"rgba(0,0,0,0)\", width: 0 }),\n        }),\n      });\n    },\n    //消去オブジェクト作成\n    createFreeErase: function () {\n      return new ol.interaction.Draw({\n        source: this.eraseLayer.getSource(),\n        type: \"LineString\",\n        freehand: true,\n      });\n    },\n    // 描画オブジェクト作成\n    createDrawShape: function () {\n      // まずは書いてみる\n      // 丸と四角(三角をどうするか)\n      let options = {};\n      switch (this.drawShape) {\n        case \"free\":\n          options = {\n            source: this.drawLayer.getSource(),\n            type: \"LineString\",\n            freehand: true,\n          };\n          break;\n        case \"line\":\n          options = {\n            source: this.drawLayer.getSource(),\n            type: \"LineString\",\n            freehand: false,\n          };\n          break;\n        case \"triangle\":\n          options = {\n            source: this.drawLayer.getSource(),\n            type: \"Polygon\",\n            freehand: false,\n            maxPoints: 3,\n            minPoints: 3,\n          };\n          break;\n        case \"square\":\n          options = {\n            source: this.drawLayer.getSource(),\n            type: \"Circle\",\n            freehand: true,\n            geometryFunction: createBox(),\n          };\n          break;\n        case \"circle\":\n          options = {\n            source: this.drawLayer.getSource(),\n            type: \"Circle\",\n            freehand: true,\n          };\n          break;\n      }\n      return new ol.interaction.Draw(options);\n    },\n    //描画開始\n    // フリーハンド描画の場合は一定時間毎に描画中の内容を共有\n    onDrawFreeStart: function (e) {\n      this.multiTouch = false;\n      this.drawStartFlag = true;\n      var style_modify = new ol.style.Style({\n        stroke: new ol.style.Stroke({\n          width: this.drawLineWidth,\n          color: this.drawLineColor,\n        }),\n      });\n      var currentFeature = e.feature;\n      currentFeature.setStyle(style_modify);\n      this.lineId = this.getLineUniqueStr();\n      currentFeature.set(\"id\", this.lineId);\n      //this.log(\"draw start\");\n      if (this.timerId != null) {\n        clearInterval(this.timerId);\n        this.timerId = null;\n      }\n      this.timerCnt = 100;\n      this.timerId = setInterval(() => {\n        this.sendDraw(currentFeature, this.lineId);\n        if (--this.timerCnt <= 0) {\n          clearInterval(this.timerId);\n          this.timerId = null;\n        }\n      }, 200);\n    },\n    // 描画開始\n    // フリーハンドで線を引く場合を除いて、描画完了時点で送信\n    onDrawStart: function (e) {\n      this.multiTouch = false;\n      this.drawStartFlag = true;\n      var style_modify = new ol.style.Style({\n        stroke: new ol.style.Stroke({\n          width: this.drawLineWidth,\n          color: this.drawLineColor,\n        }),\n      });\n      var currentFeature = e.feature;\n      currentFeature.setStyle(style_modify);\n      this.lineId = this.getLineUniqueStr();\n      currentFeature.set(\"id\", this.lineId);\n      //this.log(\"draw start\");\n    },\n    //描画終了\n    onDrawEnd: function (e) {\n      if (this.timerId != null) {\n        clearInterval(this.timerId);\n        this.timerId = null;\n      }\n      console.log(e);\n      e.feature.set(\"user_name\", this.user_name);\n      e.feature.set(\"timestamp\", Date.now());\n\n      this.sendDraw(e.feature, this.lineId);\n      //this.log(\"draw end\");\n    },\n    //消去開始\n    onEraseStart: function (e) {\n      // @task スタイルを幅1で透明な線に変更(見えない線をひく)\n      const style_modify = new ol.style.Style({\n        stroke: new ol.style.Stroke({\n          width: 1,\n          color: \"rgba(255,0,0,0)\",\n        }),\n      });\n      const currentFeature = e.feature;\n      currentFeature.setStyle(style_modify);\n    },\n    //消去終了\n    onEraseEnd: function () {\n      // @task 消去レイヤーに描いた透明な線を削除\n      const source = this.eraseLayer.getSource();\n      source.getFeatures().forEach(function (feature) {\n        source.removeFeature(feature);\n      });\n    },\n    //線分のユニーク名を取得\n    getLineUniqueStr: function (myStrong) {\n      var strong = 10;\n      if (myStrong) strong = myStrong;\n      return (\n        new Date().getTime().toString(16) +\n        Math.floor(strong * Math.random()).toString(16)\n      );\n    },\n    //描画を通知\n    sendDraw: function (feature, id) {\n      var data = {};\n      // 描画用の情報\n      data.width = this.drawLineWidth;\n      data.color = this.drawLineColor;\n      data.type = feature.getGeometry().getType();\n      data.id = id;\n      data.coords = null;\n      data.radius = null;\n      data.user_name = feature.get(\"user_name\");\n      data.timestamp = feature.get(\"timestamp\");\n      // 現在の選択中グループ情報\n      const activeId = this.$store.state.activeId;\n      if (activeId.kind == \"group\") {\n        data.group = activeId.id;\n      } else {\n        data.group = null;\n      }\n      // this.log(`type:${data.type}, selected:this.drawShape`);\n      // 描画する図形によって取得すべき情報が異なるので分岐する\n      switch (data.type) {\n        case \"LineString\":\n        case \"Polygon\":\n          // 線または多角形の描画情報\n          // 対象: free/line/triangle/square\n          // 座標を取得\n          data.coords = feature.getGeometry().getCoordinates();\n          break;\n        case \"Circle\":\n          // 円の描画\n          // 対象: circle\n          // 中心座標と半径を取得\n          data.radius = feature.getGeometry().getRadius();\n          data.coords = feature.getGeometry().getCenter();\n          break;\n      }\n      var jsonData = JSON.stringify(data);\n      this.$store.state.socketio.emit(\"draw\", jsonData);\n    },\n    //消去ボタン（開始）\n    eraseBtnStart: function () {\n      // $(\"#eraseBtn\").css({\"background-color\": this.$store.state.buttonRed});\n      const map = this.$store.state.map;\n      map.removeInteraction(this.freeDraw);\n      map.addInteraction(this.freeErase);\n      this.eraseMode = true;\n    },\n    //消去ボタン（終了）\n    eraseBtnEnd: function () {\n      // $(\"#eraseBtn\").css({\"background-color\": this.$store.state.buttonBlue});\n      this.eraseMode = false;\n      const map = this.$store.state.map;\n      map.removeInteraction(this.freeErase);\n      map.addInteraction(this.freeDraw);\n    },\n    //消去実行\n    eraseNearest: function (myCoord) {\n      // 閾値\n      const max = 250 / 2 ** (this.$store.state.map.getView().getZoom() - 14);\n      let minFeature;\n      let minDist = -1;\n      const drawLayerSource = this.drawLayer.getSource();\n\n      drawLayerSource.getFeatures().forEach(function (feature) {\n        // 最短距離の場所にある座標を取得\n        const geometry = feature.get(\"geometry\");\n        const closest = geometry.getClosestPoint(myCoord);\n\n        // 各座標間の距離\n        const xDist = Math.abs(closest[0] - myCoord[0]);\n        const yDist = Math.abs(closest[1] - myCoord[1]);\n        if (xDist + yDist <= max) {\n          // 自座標と一番近い点のLineStringを作成し、距離を取得する\n          const ls = new ol.geom.LineString([closest, myCoord]);\n          const dist = ls.getLength();\n          if (minDist < 0 || dist < minDist) {\n            // 一番近くの点の情報に更新\n            minDist = dist;\n            minFeature = feature;\n          }\n        }\n      });\n      // 最小距離が0以上(=該当するものがあった判定)なら描画レイヤーからその描画単位で削除する\n      if (minDist >= 0) {\n        //alert(minFeature.get(\"id\"));\n        drawLayerSource.removeFeature(minFeature);\n        minFeature.changed();\n        this.$store.state.socketio.emit(\"erase\", minFeature.get(\"id\"));\n        //this.log(\"erased\");\n      }\n    },\n\n    //描画指令受信\n    onReceiveDraw: function (jsonData) {\n      // データなしor座標なしの場合は抜ける\n      const data =\n        typeof jsonData === \"string\" ? JSON.parse(jsonData) : jsonData;\n      if (!data || !data.coords || data.coords.length == 0) {\n        return;\n      }\n      // グループ情報を確認して自分の選択中グループでない場合は描画しない\n      // 自分と送り主が両者nullの場合も同様\n      if (\n        data.group == null ||\n        (data.group != this.$store.state.activeId.id &&\n          this.$store.state.activeId.id !== 0)\n      ) {\n        return;\n      }\n      // 描画レイヤからfeatureリストを取得してidが同じなら削除\n      const drawLayerSource = this.drawLayer.getSource();\n      drawLayerSource.getFeatures().forEach((feature) => {\n        if (feature.get(\"id\") == data.id) {\n          drawLayerSource.removeFeature(feature);\n        }\n      });\n\n      // 受信したデータから図形を再現\n      // 図形の種別によって分岐\n      let geometry;\n      switch (data.type) {\n        case \"LineString\":\n          // 対象: free/line\n          geometry = new ol.geom.LineString(data.coords);\n          break;\n        case \"Polygon\":\n          // 対象: triangle/square\n          geometry = new ol.geom.Polygon(data.coords);\n          break;\n        case \"Circle\":\n          // 対象: circle\n          geometry = new ol.geom.Circle(data.coords, data.radius);\n          break;\n      }\n      const feature = new ol.Feature({\n        geometry: geometry,\n        id: data.id,\n        user_name: data.user_name,\n        timestamp: data.timestamp,\n      });\n      const style = new ol.style.Style({\n        stroke: new ol.style.Stroke({\n          width: data.width,\n          color: data.color,\n        }),\n      });\n      feature.setStyle(style);\n      // 描画\n      drawLayerSource.addFeature(feature);\n    },\n\n    //全描画指令受信\n    onReceiveAllDraw(jsonData) {\n      // まずは、全削除\n      const drawLayerSource = this.drawLayer.getSource();\n      drawLayerSource.getFeatures().forEach(function (feature) {\n        drawLayerSource.removeFeature(feature);\n      });\n      // そして、全描画\n      const dataSet =\n        typeof jsonData === \"object\" ? jsonData : JSON.parse(jsonData);\n      dataSet.forEach((data) => {\n        this.onReceiveDraw(data);\n      });\n    },\n\n    //消去指令受信\n    onReceiveErase: function (id) {\n      const drawLayerSource = this.drawLayer.getSource();\n      drawLayerSource.getFeatures().forEach(function (feature) {\n        if (feature.get(\"id\") == id) {\n          drawLayerSource.removeFeature(feature);\n        }\n      });\n    },\n\n    //タッチ開始\n    onWindowTouchStart: function (e) {\n      if (this.writeMode) {\n        if (e.touches.length > 1) {\n          this.multiTouch = true;\n        } else {\n          //multiTouch = false;\n        }\n      }\n    },\n\n    //地図ドラッグ（描画/消去実行）\n    onMapDrag: function (e) {\n      if (this.eraseMode) {\n        this.eraseNearest(e.coordinate);\n        //return false;\n      } else if (this.writeMode) {\n        // if (multiTouch) {\n        //     return false;\n        // }\n        //const x = e.pixel[0];\n        //const y = e.pixel[1];\n        // @task 描画開始直後なら、その点を保持\n        if (this.drawStartFlag) {\n          this.drawX = e.pixel[0];\n          this.drawY = e.pixel[1];\n          this.drawStartFlag = false;\n        } else {\n          // @task 描画中なら、今の座標と前回の点の差をとる\n          const xDiff = e.pixel[0] - this.drawX;\n          const yDiff = e.pixel[1] - this.drawY;\n          // @task マルチタッチが有効？and2点距離が50を超えていたらfalseを返す\n          if (\n            this.multiTouch &&\n            Math.sqrt(xDiff * xDiff + yDiff * yDiff) > 50\n          ) {\n            return false;\n          } else {\n            this.drawX = e.pixel[0];\n            this.drawY = e.pixel[1];\n          }\n        }\n      }\n    },\n\n    initDraw: function () {\n      this.drawLayer = this.createDrawLayer();\n      this.eraseLayer = this.createEraseLayer();\n      const map = this.$store.state.map;\n      map.addLayer(this.drawLayer);\n      map.addLayer(this.eraseLayer);\n      this.freeDraw = this.createDrawShape();\n      this.freeErase = this.createFreeErase();\n\n      //描画開始\n      this.freeDraw.on(\"drawstart\", (e) => {\n        this.onDrawFreeStart(e);\n      });\n\n      //描画終了\n      this.freeDraw.on(\"drawend\", (e) => {\n        this.onDrawEnd(e);\n      });\n\n      //消去開始\n      this.freeErase.on(\"drawstart\", (e) => {\n        this.onEraseStart(e);\n      });\n\n      //消去終了\n      this.freeDraw.on(\"drawend\", () => {\n        this.onEraseEnd();\n      });\n\n      //描画指令受信\n      this.$store.state.socketio.on(\"draw\", (jsonData) => {\n        this.onReceiveDraw(jsonData);\n      });\n\n      //全描画指令受信\n      this.$store.state.socketio.on(\"alldraw\", (jsonData) => {\n        this.onReceiveAllDraw(jsonData);\n      });\n\n      // //TRACK描画指令受信\n      // // 注意：OpenLayersでの緯度経度処理は[long,lat]でエアマルチ上とは逆\n      // this.$store.state.socketio.on(\"track\", jsonData => {\n      //   const data = JSON.parse(jsonData);\n      //   console.log(`TRACK:data=${jsonData}`)\n      //   Object.keys(data).forEach(user_id => {\n      //     if (data[user_id] && data[user_id].coords) {\n      //       console.log(`TRACK:data[${user_id}]=${JSON.stringify(data[user_id])}`);\n      //       console.log(`TRACK:data[${user_id}].coords=${JSON.stringify(data[user_id].coords)}`);\n      //       data[user_id].coords = data[user_id].coords.map(pnt => {\n      //         return ol.proj.transform([pnt[1], pnt[0]], \"EPSG:4326\",\"EPSG:3857\");\n      //       });\n      //       console.log(`変換後:TRACK:data[${user_id}]=${JSON.stringify(data[user_id])}`);\n      //       this.onReceiveDraw(data[user_id]);\n      //     }\n      //   });\n      // });\n\n      //消去指令受信\n      this.$store.state.socketio.on(\"erase\", (id) => {\n        this.onReceiveErase(id);\n      });\n\n      //タッチ開始\n      $(window).on(\"touchstart\", (e) => {\n        this.onWindowTouchStart(e);\n      });\n\n      //地図ドラッグ（描画/消去実行）\n      map.on(\"pointerdrag\", (e) => {\n        this.onMapDrag(e);\n      });\n\n      // サーバで持っている描画データを要求 alldrawが返ってくる\n      setTimeout(() => {\n        this.$store.state.socketio.emit(\"initdraw\");\n      }, 1000);\n\n      // jsonの手書き色を反映\n      this.drawLineColor = this.$store.state.draw_color;\n\n      // ---------------------------------REVIEW DRAW-------------------------------------------------------\n      evEmitter.on(\"draw\", (ev) => {\n        console.log(ev);\n        this.onReceiveDraw(ev);\n      });\n      evEmitter.on(\"alldraw\", (ev) => {\n        console.log(ev);\n        this.onReceiveAllDraw(ev);\n      });\n      evEmitter.on(\"erase\", (ev) => {\n        console.log(ev);\n        this.onReceiveErase(ev);\n      });\n    },\n    updateDrawShape(shape) {\n      // 初期化はフリーハンドなので図形選択切替時に\n      // 描画オブジェクトを入れ替える\n      // @todo 描画状態かどうか何らかの判定が必要かも\n      console.log(shape);\n      // this.log(shape);\n      this.$store.state.map.removeInteraction(this.freeDraw);\n      // 描画オブジェクトを作り直し\n      this.drawShape = shape;\n      this.freeDraw = this.createDrawShape();\n      if (this.drawShape == \"free\") {\n        this.freeDraw.on(\"drawstart\", (e) => {\n          this.onDrawFreeStart(e);\n        });\n      } else {\n        this.freeDraw.on(\"drawstart\", (e) => {\n          this.onDrawStart(e);\n        });\n      }\n      //描画終了\n      this.freeDraw.on(\"drawend\", (e) => {\n        this.onDrawEnd(e);\n      });\n      this.$store.state.map.addInteraction(this.freeDraw);\n    },\n    toggleWrite(isEnable) {\n      this.$store.state.mapChangeEvent.$emit(\"changeAtDraw\", isEnable);\n    },\n    toggleErase(isEnable) {\n      // 今の所このメソッドでは振り分けているだけ\n      if (isEnable) {\n        this.eraseBtnStart();\n      } else {\n        this.eraseBtnEnd();\n      }\n    },\n  },\n  mounted() {\n    this.initDraw();\n\n    // @todo ここの処理は古いイベントハンドラを使っているため、Vue向けに置き換えする\n    this.$store.state.mapChangeEvent.$on(\"changeAtDraw\", (val) => {\n      // this.$store.commit(\"setAtDraw\", val);\n      if (this.eraseMode) {\n        this.$store.state.map.removeInteraction(this.freeErase);\n      }\n      this.eraseMode = false;\n      if (val && !this.writeMode) {\n        this.$store.state.map.addInteraction(this.freeDraw);\n      } else if (!val) {\n        this.$store.state.map.removeInteraction(this.freeDraw);\n      }\n      this.writeMode = val;\n    });\n\n    drawEvent.$on(\"SETACTIVE\", (active) => {\n      if (active) {\n        // 手書きモードの開始\n        this.toggleWrite(true);\n        this.inSubMenu = true;\n      } else {\n        // 手書きモードの終了\n        this.toggleWrite(false);\n        this.inSubMenu = false;\n      }\n    });\n\n    drawEvent.$on(\"CHANGE_COLOR\", (drawLineColor) => {\n      this.drawLineColor = drawLineColor;\n    });\n\n    drawEvent.$on(\"SETOPACITY\", (val) => {\n      this.drawLayer.setOpacity(val);\n      this.eraseLayer.setOpacity(val);\n    });\n\n    drawEvent.$on(\"SETVISIBLE\", (val) => {\n      this.drawLayer.setVisible(val);\n      this.eraseLayer.setVisible(val);\n    });\n\n    drawEvent.$on(\"SETZINDEX\", (val) => {\n      this.drawLayer.setZIndex(val);\n      this.eraseLayer.setZIndex(val);\n    });\n\n    this.$store.state.map.on(\"click\", (ev) => {\n      const pos = this.$refs.map_popup.getPos();\n      if (pos) {\n        this.$refs.map_popup.hide();\n      }\n      // this.pos = ev.coordinate;\n      if (this.last_feature && this.original_style) {\n        this.last_feature.setStyle(this.original_style);\n      }\n      this.$refs.map_popup.on_click(ev, this.drawLayer);\n    });\n  },\n  beforeDestroy() {\n    this.toggleWrite(false);\n    this.inSubMenu = false;\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DrawComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DrawComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DrawComponent.vue?vue&type=template&id=ee4ce81a&\"\nimport script from \"./DrawComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./DrawComponent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import $store from \"@/store\";\nimport DrawComponent from \"./DrawComponent.vue\";\n\nimport Vue from \"vue\";\nexport const drawEvent = new Vue();\n\nexport function DrawLayer() {\n  const noop = () => {};\n\n  let isActive = false;\n\n  function add() {\n    // this.initDraw();\n    $store.commit(\"amt/addComponent\", DrawComponent);\n  }\n\n  function setActive(active) {\n    isActive = active;\n\n    if (active) {\n      drawEvent.$emit(\"SETACTIVE\", active);\n      $store.commit(\"amt/setSubMenu\", \"DrawLayer\");\n\n      // 手書きモードに入る時は地図上のレイヤも有効化\n      drawEvent.$emit(\"SETVISIBLE\", active);\n      // $store.commit(\"amt/addComponent\", DrawComponent);\n    } else {\n      drawEvent.$emit(\"SETACTIVE\", active);\n      $store.commit(\"amt/setSubMenu\", null);\n      // $store.commit(\"amt/removeComponent\", DrawComponent);\n    }\n  }\n\n  function getActive() {\n    return isActive;\n  }\n\n  function setOpacity(val) {\n    drawEvent.$emit(\"SETOPACITY\", val);\n  }\n\n  function setVisible(val) {\n    drawEvent.$emit(\"SETVISIBLE\", val);\n  }\n\n  function setZIndex(val) {\n    drawEvent.$emit(\"SETZINDEX\", val);\n  }\n\n  return {\n    add, // マップ初期化時に呼び出し\n    remove: noop, // マップ破棄時に呼び出し\n    update: noop, // 現在のバージョンでは呼び出されない\n    setOpacity,\n    setVisible,\n    setZIndex,\n    setActive, // メニュー操作でトグル\n    getActive,\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.isSearchComponent)?_c('div',{attrs:{\"id\":\"searchComponent\"}},[_c('div',{attrs:{\"id\":\"searchComponentTitle\"}},[_c('p',{staticClass:\"searchTitle\"},[_vm._v(\"検索\")]),_c('button',{staticClass:\"hiddenBtn\",attrs:{\"title\":\"最小化\"}},[_c('img',{staticClass:\"btnImg\",staticStyle:{\"width\":\"100%\"},attrs:{\"src\":require(\"./assets/minus.png\")},on:{\"click\":function($event){return _vm.minimize_button()}}})]),_c('button',{staticClass:\"closeBtn\",attrs:{\"title\":\"閉じる\"}},[_c('img',{staticClass:\"btnImg\",attrs:{\"src\":require(\"./assets/close.png\")},on:{\"click\":function($event){return _vm.close_button()}}})])]),_c('div',{attrs:{\"id\":\"searchComponentBody\"}},[_c('div',[_c('p',{staticClass:\"searchDateTitle\"},[_vm._v(\"開始\")]),_c('div',{staticClass:\"align_center\"},[_c('label',{staticClass:\"searchDate\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.startDate),expression:\"startDate\"}],staticClass:\"inputDate\",attrs:{\"type\":\"datetime-local\"},domProps:{\"value\":(_vm.startDate)},on:{\"input\":function($event){if($event.target.composing)return;_vm.startDate=$event.target.value}}})])])]),_c('div',[_c('p',{staticClass:\"searchDateTitle\"},[_vm._v(\"終了\")]),_c('div',{staticClass:\"align_center\"},[_c('label',{staticClass:\"searchDate\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.endDate),expression:\"endDate\"}],staticClass:\"inputDate\",attrs:{\"type\":\"datetime-local\"},domProps:{\"value\":(_vm.endDate)},on:{\"input\":function($event){if($event.target.composing)return;_vm.endDate=$event.target.value}}})])])]),_c('div',[_c('p',{staticClass:\"searchDateTitle\"},[_vm._v(\"端末\")]),_c('div',{staticClass:\"align_center\"},[_c('label',{staticClass:\"searchDevice\",on:{\"click\":function($event){return _vm.clickDevice()}}},[_c('p',[_vm._v(_vm._s(_vm.displayDevice))])])])]),_c('div',[_c('p',{staticClass:\"searchDateTitle\"},[_vm._v(\"レイヤ\")]),_c('div',{staticClass:\"align_center\"},[_c('label',{staticClass:\"searchDevice\",on:{\"click\":function($event){return _vm.clickLayer()}}},[(_vm.layers.length)?_c('p',[_vm._l((_vm.layers),function(layer){return [_vm._v(\" \"+_vm._s(layer.name)+\", \")]})],2):_c('p',[_vm._v(\"未選択\")])])])]),_c('div',[_c('p',{staticClass:\"searchDateTitle\"},[_vm._v(\"フリーワード\")]),_c('div',{staticClass:\"align_center\"},[_c('label',{staticClass:\"searchDevice\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.textArea),expression:\"textArea\"}],attrs:{\"name\":\"\",\"id\":\"\",\"cols\":\"30\",\"rows\":\"10\"},domProps:{\"value\":(_vm.textArea)},on:{\"input\":function($event){if($event.target.composing)return;_vm.textArea=$event.target.value}}})])])]),_c('div',{staticClass:\"searchButton\"},[_c('button',{on:{\"click\":_vm.search_start}},[_vm._v(\"検索\")])])])]):_vm._e(),_c('searchComponentList'),(_vm.show_msg_dialog)?_c('modalDialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"検索エラー\")]),_c('span',{staticStyle:{\"color\":\"#333\"},attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(\" \"+_vm._s(_vm.error_message)+\" \")]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.close_msg_dialog()}}},[_vm._v(\" 戻る \")])])]):_vm._e(),(_vm.searchSelectDevice)?_c('div',[_c('searchComponentDevice')],1):_vm._e(),(_vm.searchSelectLayer)?_c('div',[_c('searchComponentLayer')],1):_vm._e(),(_vm.searchComponentSmall)?_c('div',[_c('searchComponentSmall')],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render, staticRenderFns\nimport script from \"./SearchComponentList.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchComponentList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { searchEvent } from \"./index.js\";\n\nexport default {\n  data() {\n    return {};\n  },\n  mounted() {\n    /* 検索結果の対象を地図に表示 */\n    // 軌跡\n    searchEvent.$on(\"searchedTrack\", () => {\n      for (let searchTrack of this.searchTracks()) {\n        searchEvent.$emit(\"track\", JSON.stringify(searchTrack));\n        this.$store.dispatch(\"amt/resetSearchTrack\");\n      }\n    });\n    // メモ\n    searchEvent.$on(\"searchedMemo\", () => {\n      searchEvent.$emit(\"memo\", this.$store.getters[\"amt/searchMemo\"]);\n    });\n  },\n  methods: {\n    clickTrack(searchTrack) {\n      // 軌跡を表示\n      this.$store.dispatch(\"amt/hideSearchComponentList\");\n      searchEvent.$emit(\"track\", JSON.stringify(searchTrack));\n      this.$store.dispatch(\"amt/resetSearchTrack\");\n    },\n    close_button() {\n      this.$store.dispatch(\"amt/hideSearchComponentList\");\n      this.$store.dispatch(\"amt/resetSearchTrack\");\n      this.$store.dispatch(\"amt/resetSearchMemo\");\n    },\n    searchTracks() {\n      let state_colors = [\n        \"#e83e8c\",\n        \"#dc3545\",\n        \"#fd7e14\",\n        \"#ffc107\",\n        \"#28a745\",\n      ];\n      let allTracks = this.$store.getters[\"amt/searchTrack\"];\n      let searchTracks = [];\n      let tmpSearchTracks = [];\n      for (const deviceTracks of allTracks) {\n        for (const deviceTrack of deviceTracks.track) {\n          let lat = deviceTrack.lat.split(\",\");\n          let lng = deviceTrack.lng.split(\",\");\n          for (let i = 0; i < lat.length; i++) {\n            tmpSearchTracks[i] = [lng[i], lat[i]];\n          }\n        }\n        let user_id = deviceTracks.userId;\n        let track_color;\n        try {\n          track_color = this.$store.getters[\"amt/users\"][user_id].track_color;\n        } catch (e) {\n          track_color = state_colors[user_id % state_colors.length];\n        }\n        let searchTrack = {\n          [user_id]: {\n            coords: tmpSearchTracks,\n            color: track_color,\n            id: \"track_search\",\n            radius: null,\n            type: \"LineString\",\n            width: 5,\n          },\n        };\n        searchTracks.push(searchTrack);\n      }\n      return searchTracks;\n    },\n  },\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchComponentList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchComponentList.vue?vue&type=script&lang=js&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"searchSelectDevice\"}},[_c('div',{staticClass:\"overflow\"},[_c('p',{staticClass:\"deviceTitle float\"},[_vm._v(\"端末選択\")]),_c('p',{staticClass:\"deviceAllselect float\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectAll),expression:\"selectAll\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.selectAll)?_vm._i(_vm.selectAll,null)>-1:(_vm.selectAll)},on:{\"change\":function($event){var $$a=_vm.selectAll,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.selectAll=$$a.concat([$$v]))}else{$$i>-1&&(_vm.selectAll=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.selectAll=$$c}}}}),_vm._v(\" 全選択 \")])]),_c('div',{staticClass:\"searchScrollBox\"},[_c('ul',{staticClass:\"searchUl\"},[_vm._l((_vm.devices),function(device){return [_c('li',{key:device.id},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.checkNames),expression:\"checkNames\"}],staticClass:\"heckboxInput\",attrs:{\"type\":\"checkbox\"},domProps:{\"value\":device,\"checked\":Array.isArray(_vm.checkNames)?_vm._i(_vm.checkNames,device)>-1:(_vm.checkNames)},on:{\"change\":function($event){var $$a=_vm.checkNames,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=device,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.checkNames=$$a.concat([$$v]))}else{$$i>-1&&(_vm.checkNames=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.checkNames=$$c}}}}),_vm._v(\" \"+_vm._s(device.name)+\" \")])])]})],2)]),_c('div',{staticClass:\"searchButton\"},[_c('button',{staticClass:\"select\",on:{\"click\":function($event){return _vm.clickSelect()}}},[_vm._v(\"選択\")])]),_c('div',{staticClass:\"searchButton\"},[_c('button',{staticClass:\"cancel\",on:{\"click\":function($event){return _vm.clickCancel()}}},[_vm._v(\"キャンセル\")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"searchSelectDevice\">\n    <div class=\"overflow\">\n      <p class=\"deviceTitle float\">端末選択</p>\n      <p class=\"deviceAllselect float\">\n        <input type=\"checkbox\" v-model=\"selectAll\" />\n        全選択\n      </p>\n    </div>\n    <div class=\"searchScrollBox\">\n      <ul class=\"searchUl\">\n        <template v-for=\"device in devices\">\n          <li :key=\"device.id\">\n            <label>\n              <input\n                class=\"heckboxInput\"\n                type=\"checkbox\"\n                v-model=\"checkNames\"\n                v-bind:value=\"device\"\n              />\n              {{ device.name }}\n            </label>\n          </li>\n        </template>\n      </ul>\n    </div>\n\n    <div class=\"searchButton\">\n      <button @click=\"clickSelect()\" class=\"select\">選択</button>\n    </div>\n    <div class=\"searchButton\">\n      <button @click=\"clickCancel()\" class=\"cancel\">キャンセル</button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      checkNames: [],\n    };\n  },\n  methods: {\n    allSelect() {},\n    clickSelect() {\n      this.$store.dispatch(\"amt/setSearchDevice\", {\n        device: this.checkNames,\n      });\n      // 閉じる\n      this.$store.dispatch(\"amt/hideSearchComponentDevice\");\n      // 検索画面を表示\n      this.$store.dispatch(\"amt/showSearchComponent\");\n    },\n    clickCancel() {\n      // 閉じる\n      this.$store.dispatch(\"amt/hideSearchComponentDevice\");\n      // 検索画面を表示\n      this.$store.dispatch(\"amt/showSearchComponent\");\n    },\n  },\n  computed: {\n    devices: function () {\n      return this.$store.getters[\"amt/searchTargetDevice\"];\n    },\n    selectAll: {\n      get: function () {\n        //authorsのチェックボックスのすべてにチェックが入ったかを判定\n        if (this.checkNames.length == this.devices.length) {\n          return true; //authorsにすべてチェックを入れるとselectAllはtrueとなりチェックが入る\n        } else {\n          return false;\n        }\n      },\n      set: function (value) {\n        //全選択のチェックボックスを操作した場合\n        let checkArray = [];\n        //チェックが入った場合（trueでの判定）\n        if (value) {\n          this.devices.forEach(function (device) {\n            checkArray.push({ id: device.id, name: device.name });\n          });\n        }\n        this.checkNames = checkArray;\n      },\n    },\n  },\n};\n</script>\n\n<style>\n#searchSelectDevice {\n  box-sizing: border-box;\n  position: absolute;\n  top: 10px;\n  right: 0;\n  width: 300px;\n  height: calc(100% - 10px);\n  background-color: #37a3c0;\n  background-image: url(\"./assets/dialogBase.png\");\n  background-size: cover;\n  z-index: 201;\n  color: white;\n  overflow-y: auto;\n}\n\n.overflow {\n  overflow: hidden;\n}\n.float {\n  float: left;\n}\n\n.deviceTitle {\n  font-size: 14px;\n  margin: 0 0 3px 15px;\n}\n.deviceAllselect {\n  padding-left: 25%;\n}\n\n.searchScrollBox {\n  list-style: none;\n  background-color: #d7ecf2;\n  margin: 0px auto;\n  color: #62a8be;\n  border-radius: 10px;\n  width: 85%;\n  margin-bottom: 20px;\n  overflow-y: scroll;\n  height: 60%;\n}\n.searchScrollBox::-webkit-scrollbar {\n  width: 9px;\n}\n.searchScrollBox::-webkit-scrollbar-track {\n  background-color: #e4e4e4;\n  border-radius: 100px;\n}\n.searchScrollBox::-webkit-scrollbar-thumb {\n  background-color: #9b9a98;\n  border-radius: 100px;\n}\n.searchUl {\n  height: 100%;\n  padding-bottom: 20px;\n}\n.searchUl li {\n  padding: 2px 0px;\n}\n.heckboxInput {\n  margin: 0px 15px;\n}\n\n.searchButton {\n  text-align: center;\n  margin-bottom: 15px;\n  width: 100%;\n}\n.searchButton button {\n  border-radius: 8px;\n  font-family: \"SourceHanSans-Normal\", sans-serif;\n  font-size: 18px;\n  width: 85%;\n  height: 62px;\n  left: 30px;\n  border-style: none;\n  text-align: left;\n  padding-left: 16px;\n  padding-right: 20px;\n  text-align: center;\n}\n.searchButton button.select {\n  background-color: #fff;\n  color: #37a3c0;\n}\n.searchButton button.cancel {\n  background-color: #85bccd;\n  color: #fff;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchComponentDevice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchComponentDevice.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchComponentDevice.vue?vue&type=template&id=5b272e66&\"\nimport script from \"./SearchComponentDevice.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchComponentDevice.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchComponentDevice.vue?vue&type=style&index=0&id=5b272e66&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"searchSelectLayer\"}},[_c('div',{staticClass:\"overflow\"},[_c('p',{staticClass:\"deviceTitle float\"},[_vm._v(\"レイヤ選択\")]),_c('p',{staticClass:\"deviceAllselect float\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectAll),expression:\"selectAll\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.selectAll)?_vm._i(_vm.selectAll,null)>-1:(_vm.selectAll)},on:{\"change\":function($event){var $$a=_vm.selectAll,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.selectAll=$$a.concat([$$v]))}else{$$i>-1&&(_vm.selectAll=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.selectAll=$$c}}}}),_vm._v(\" 全選択 \")])]),_c('div',{staticClass:\"searchScrollBox\"},[_c('ul',{staticClass:\"searchUl\"},[_vm._l((_vm.layers),function(layer){return [_c('li',{key:layer.name},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.checkNames),expression:\"checkNames\"}],staticClass:\"heckboxInput\",attrs:{\"type\":\"checkbox\"},domProps:{\"value\":layer,\"checked\":Array.isArray(_vm.checkNames)?_vm._i(_vm.checkNames,layer)>-1:(_vm.checkNames)},on:{\"change\":function($event){var $$a=_vm.checkNames,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=layer,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.checkNames=$$a.concat([$$v]))}else{$$i>-1&&(_vm.checkNames=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.checkNames=$$c}}}}),_vm._v(\" \"+_vm._s(layer.name)+\" \")])])]})],2)]),_c('div',{staticClass:\"searchButton\"},[_c('button',{staticClass:\"select\",on:{\"click\":function($event){return _vm.clickSelect()}}},[_vm._v(\"選択\")])]),_c('div',{staticClass:\"searchButton\"},[_c('button',{staticClass:\"cancel\",on:{\"click\":function($event){return _vm.clickCancel()}}},[_vm._v(\"キャンセル\")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"searchSelectLayer\">\n    <div class=\"overflow\">\n      <p class=\"deviceTitle float\">レイヤ選択</p>\n      <p class=\"deviceAllselect float\">\n        <input type=\"checkbox\" v-model=\"selectAll\" />\n        全選択\n      </p>\n    </div>\n    <div class=\"searchScrollBox\">\n      <ul class=\"searchUl\">\n        <template v-for=\"layer in layers\">\n          <li :key=\"layer.name\">\n            <label>\n              <input\n                class=\"heckboxInput\"\n                type=\"checkbox\"\n                v-model=\"checkNames\"\n                v-bind:value=\"layer\"\n              />\n              {{ layer.name }}\n            </label>\n          </li>\n        </template>\n      </ul>\n    </div>\n\n    <div class=\"searchButton\">\n      <button @click=\"clickSelect()\" class=\"select\">選択</button>\n    </div>\n    <div class=\"searchButton\">\n      <button @click=\"clickCancel()\" class=\"cancel\">キャンセル</button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      checkNames: [],\n    };\n  },\n  methods: {\n    allSelect() {},\n    clickSelect() {\n      this.$store.dispatch(\"amt/setSearchLayer\", {\n        layer: this.checkNames,\n      });\n      // 閉じる\n      this.$store.dispatch(\"amt/hideSearchComponentLayer\");\n      // 検索画面を表示\n      this.$store.dispatch(\"amt/showSearchComponent\");\n    },\n    clickCancel() {\n      // 閉じる\n      this.$store.dispatch(\"amt/hideSearchComponentLayer\");\n      // 検索画面を表示\n      this.$store.dispatch(\"amt/showSearchComponent\");\n    },\n  },\n  computed: {\n    layers: function () {\n      let layer_search = [];\n      let layers = this.$store.getters[\"amt/layers\"];\n      for (const layer in layers) {\n        // layers.jsでレイヤメニューに表示する設定の物だけを抽出\n        if (layers[layer].search) {\n          layer_search.push({ name: layers[layer].displayname });\n        }\n      }\n      console.log(layer_search);\n\n      return layer_search;\n    },\n    selectAll: {\n      get: function () {\n        //authorsのチェックボックスのすべてにチェックが入ったかを判定\n        if (this.checkNames.length == this.layers.length) {\n          return true; //authorsにすべてチェックを入れるとselectAllはtrueとなりチェックが入る\n        } else {\n          return false;\n        }\n      },\n      set: function (value) {\n        //全選択のチェックボックスを操作した場合\n        let checkArray = [];\n        //チェックが入った場合（trueでの判定）\n        if (value) {\n          this.layers.forEach(function (layers) {\n            checkArray.push({ name: layers.name });\n          });\n        }\n        this.checkNames = checkArray;\n      },\n    },\n  },\n};\n</script>\n\n<style>\n#searchSelectLayer {\n  box-sizing: border-box;\n  position: absolute;\n  top: 10px;\n  right: 0;\n  width: 300px;\n  height: calc(100% - 10px);\n  background-color: #37a3c0;\n  background-image: url(\"./assets/dialogBase.png\");\n  background-size: cover;\n  z-index: 201;\n  color: white;\n  overflow-y: auto;\n}\n\n.overflow {\n  overflow: hidden;\n}\n.float {\n  float: left;\n}\n\n.deviceTitle {\n  font-size: 14px;\n  margin: 0 0 3px 15px;\n}\n.deviceAllselect {\n  padding-left: 25%;\n}\n\n.searchScrollBox {\n  height: 60%;\n  overflow-y: auto;\n  margin-bottom: 15px;\n}\n.searchUl {\n  list-style: none;\n  background-color: #d7ecf2;\n  margin: 0px auto;\n  color: #62a8be;\n  border-radius: 10px;\n  padding: 0px 5%;\n  width: 85%;\n  margin-bottom: 20px;\n}\n.searchUl li {\n  padding: 2px 0px;\n}\n.heckboxInput {\n  margin: 0px 15px;\n}\n\n.searchButton {\n  text-align: center;\n  margin-bottom: 15px;\n  width: 100%;\n}\n.searchButton button {\n  border-radius: 8px;\n  font-family: \"SourceHanSans-Normal\", sans-serif;\n  font-size: 18px;\n  width: 85%;\n  height: 62px;\n  left: 30px;\n  border-style: none;\n  text-align: left;\n  padding-left: 16px;\n  padding-right: 20px;\n  text-align: center;\n}\n.searchButton button.select {\n  background-color: #fff;\n  color: #37a3c0;\n}\n.searchButton button.cancel {\n  background-color: #85bccd;\n  color: #fff;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchComponentLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchComponentLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchComponentLayer.vue?vue&type=template&id=34d251f9&\"\nimport script from \"./SearchComponentLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchComponentLayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchComponentLayer.vue?vue&type=style&index=0&id=34d251f9&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.isSearchComponentSmall)?_c('div',{attrs:{\"id\":\"searchComponentSmall\"}},[_c('button',{staticClass:\"circleBtn\",attrs:{\"title\":\"拡大\"},on:{\"click\":_vm.showSearchLayer}},[_c('img',{attrs:{\"src\":require(\"./assets/square.png\")}})]),_c('button',{staticClass:\"circleBtn\",attrs:{\"title\":\"閉じる\"},on:{\"click\":_vm.closeSearchLayer}},[_c('img',{attrs:{\"src\":require(\"./assets/close.png\")}})])]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div id=\"searchComponentSmall\" v-if=\"isSearchComponentSmall\">\n      <button v-on:click=\"showSearchLayer\" class=\"circleBtn\" title=\"拡大\">\n        <img src=\"./assets/square.png\" />\n      </button>\n      <button v-on:click=\"closeSearchLayer\" class=\"circleBtn\" title=\"閉じる\">\n        <img src=\"./assets/close.png\" />\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { searchEvent } from \"./index.js\";\n\nexport default {\n  methods: {\n    closeSearchLayer() {\n      // ☓ボタンが押されたら閉じる\n      this.$store.dispatch(\"amt/hideSearchComponentSmall\");\n      searchEvent.$emit(\"close\");\n    },\n    showSearchLayer() {\n      // 最大化ボタンが押されたら検索画面を表示する\n      this.$store.dispatch(\"amt/showSearchComponent\");\n      this.$store.dispatch(\"amt/hideSearchComponentSmall\");\n    },\n  },\n  computed: {\n    isSearchComponentSmall: function () {\n      return this.$store.getters[\"amt/isSearchComponentSmall\"];\n    },\n  },\n};\n</script>\n\n<style>\n#searchComponentSmall {\n  width: 4rem;\n  height: 8rem;\n  background-color: #37a3c0;\n  border: none;\n  border-radius: 5rem;\n  -moz-border-radius: 5rem;\n  -webkit-border-radius: 5rem;\n  color: white;\n  outline: none !important;\n  transition: background-color, color 0.7s ease-in;\n  user-select: none;\n\n  position: fixed;\n  right: 15px;\n  bottom: 100px;\n  z-index: 10;\n}\n/* #searchComponentSmall .circleBtn{\n  position: fixed;\n  right: 10px;\n  bottom: 20px;\n  z-index: 10;\n} */\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchComponentSmall.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchComponentSmall.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchComponentSmall.vue?vue&type=template&id=61c35b0e&\"\nimport script from \"./SearchComponentSmall.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchComponentSmall.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchComponentSmall.vue?vue&type=style&index=0&id=61c35b0e&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <div id=\"searchComponent\" v-if=\"isSearchComponent\">\n      <div id=\"searchComponentTitle\">\n        <p class=\"searchTitle\">検索</p>\n        <button class=\"hiddenBtn\" title=\"最小化\">\n          <img\n            src=\"./assets/minus.png\"\n            class=\"btnImg\"\n            @click=\"minimize_button()\"\n            style=\"width: 100%\"\n          />\n        </button>\n        <button class=\"closeBtn\" title=\"閉じる\">\n          <img\n            src=\"./assets/close.png\"\n            class=\"btnImg\"\n            @click=\"close_button()\"\n          />\n        </button>\n      </div>\n      <div id=\"searchComponentBody\">\n        <div>\n          <p class=\"searchDateTitle\">開始</p>\n          <div class=\"align_center\">\n            <label class=\"searchDate\">\n              <input\n                type=\"datetime-local\"\n                class=\"inputDate\"\n                v-model=\"startDate\"\n              />\n            </label>\n          </div>\n        </div>\n\n        <div>\n          <p class=\"searchDateTitle\">終了</p>\n          <div class=\"align_center\">\n            <label class=\"searchDate\">\n              <input\n                type=\"datetime-local\"\n                class=\"inputDate\"\n                v-model=\"endDate\"\n              />\n            </label>\n          </div>\n        </div>\n\n        <div>\n          <p class=\"searchDateTitle\">端末</p>\n          <div class=\"align_center\">\n            <!-- 通常時は選択した物をコンマ区切りで一覧表示 -->\n            <label class=\"searchDevice\" @click=\"clickDevice()\">\n              <p>{{ displayDevice }}</p>\n            </label>\n          </div>\n        </div>\n\n        <div>\n          <p class=\"searchDateTitle\">レイヤ</p>\n          <div class=\"align_center\">\n            <!-- 通常時は選択した物をコンマ区切りで一覧表示 -->\n            <label class=\"searchDevice\" @click=\"clickLayer()\">\n              <p v-if=\"layers.length\">\n                <template v-for=\"layer in layers\"> {{ layer.name }}, </template>\n              </p>\n              <p v-else>未選択</p>\n            </label>\n          </div>\n        </div>\n\n        <div>\n          <p class=\"searchDateTitle\">フリーワード</p>\n          <div class=\"align_center\">\n            <label class=\"searchDevice\">\n              <textarea\n                name=\"\"\n                id=\"\"\n                cols=\"30\"\n                rows=\"10\"\n                v-model=\"textArea\"\n              ></textarea>\n            </label>\n          </div>\n        </div>\n\n        <div class=\"searchButton\">\n          <button @click=\"search_start\">検索</button>\n        </div>\n      </div>\n    </div>\n\n    <searchComponentList />\n\n    <!-- エラー発生時のモーダル -->\n    <modalDialog v-if=\"show_msg_dialog\">\n      <span slot=\"header\">検索エラー</span>\n      <span slot=\"body\" style=\"color: #333\">\n        {{ error_message }}\n      </span>\n      <div slot=\"footer\">\n        <button class=\"btn btn-primary\" @click=\"close_msg_dialog()\">\n          戻る\n        </button>\n      </div>\n    </modalDialog>\n\n    <!-- デバイス選択画面 -->\n    <div v-if=\"searchSelectDevice\">\n      <searchComponentDevice />\n    </div>\n\n    <!-- レイヤ選択画面 -->\n    <div v-if=\"searchSelectLayer\">\n      <searchComponentLayer />\n    </div>\n\n    <!-- レイヤ選択画面 -->\n    <div v-if=\"searchComponentSmall\">\n      <searchComponentSmall />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { searchEvent } from \"./index.js\";\nimport SearchComponentList from \"./SearchComponentList\";\nimport SearchComponentDevice from \"./SearchComponentDevice\";\nimport SearchComponentLayer from \"./SearchComponentLayer\";\nimport SearchComponentSmall from \"./SearchComponentSmall\";\n\nimport ModalDialog from \"@/components/ModalDialog.vue\";\n\nimport moment from \"moment\";\n\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      show_msg_dialog: false,\n      error_message: \"\",\n      startDate: moment().add(-7, \"days\").format(\"YYYY-MM-DDTHH:mm:ss\"),\n      endDate: moment().format(\"YYYY-MM-DDTHH:mm:ss\"),\n      textArea: \"\",\n    };\n  },\n  async mounted() {\n    // 検索対象のデバイスを取得\n    const url = \"/api/usersAmt/\";\n    const ctx = await axios.get(url);\n    // res … user_typeがamtであるuser一覧\n    let res = ctx.data;\n    this.$store.commit(\"amt/setSearchTargetDevice\", res);\n\n    searchEvent.$on(\"close\", () => {\n      this.close_button();\n    });\n  },\n  components: {\n    searchComponentList: SearchComponentList,\n    searchComponentDevice: SearchComponentDevice,\n    searchComponentLayer: SearchComponentLayer,\n    searchComponentSmall: SearchComponentSmall,\n    modalDialog: ModalDialog,\n  },\n  methods: {\n    returnValeuDevices($event) {\n      let opt = Object.values($event.target.options).filter((ele) => {\n        return ele.selected;\n      });\n      let user_id = opt.map((ele) => ele.user_id);\n      console.log(user_id);\n    },\n    returnValeuLayers($event) {\n      let opt = Object.values($event.target.options).filter((ele) => {\n        return ele.selected;\n      });\n      let user_id = opt.map((ele) => ele.user_id);\n      console.log(user_id);\n    },\n    search_start() {\n      // VecrtorLayerから前回検索結果をクリア\n      searchEvent.$emit(\"reset_track\");\n      searchEvent.$emit(\"reset_memo\");\n      // 検索開始時にすでに表示しているものをリセットする\n      this.$store.dispatch(\"amt/resetSearchTrack\");\n      this.$store.dispatch(\"amt/resetSearchMemo\");\n\n      if (!this.startDate) {\n        this.show_msg_dialog = true;\n        this.error_message = \"開始時刻を入力してください\";\n        return;\n      }\n      let start = this.startDate.toString();\n      start = moment(start).utc().format(\"YYYY-MM-DD HH:mm:ssZ\");\n\n      if (!this.endDate) {\n        this.show_msg_dialog = true;\n        this.error_message = \"終了時刻を入力してください\";\n        return;\n      }\n      let end = this.endDate.toString();\n      end = moment(end).utc().format(\"YYYY-MM-DD HH:mm:ssZ\");\n\n      if (!this.$store.getters[\"amt/isSearchComponentList\"]) {\n        // 2021-07-06\n        // 検索結果は直接地図に表示するように変更\n        this.$store.dispatch(\"amt/showSearchComponentList\");\n      }\n\n      if (this.devices.length == 0) {\n        this.show_msg_dialog = true;\n        this.error_message = \"端末を選択して下さい\";\n        return;\n      }\n      if (this.layers.length == 0) {\n        this.show_msg_dialog = true;\n        this.error_message = \"レイヤを選択して下さい\";\n        return;\n      }\n      // 現在表示している地図のアイコンは非表示へ\n      // メモを非表示\n      this.$store.dispatch(\"amt/setLayerVisible\", {\n        layerName: \"MemoLayer\",\n        visible: false,\n      });\n      // 軌跡を非表示\n      this.$store.dispatch(\"amt/setLayerVisible\", {\n        layerName: \"TrackLayer\",\n        visible: false,\n      });\n\n      let device_id = [];\n      for (let device of this.devices) {\n        // 軌跡が選択されているか\n        if (\n          this.$store.getters[\"amt/searchLayer\"].find(\n            (element) => element.name === \"軌跡\"\n          )\n        ) {\n          this.$store\n            .dispatch(\"amt/fetchTrack\", {\n              userId: device.id,\n              begin: start,\n              end: end,\n            })\n            .then((data) => {\n              console.log(data);\n              this.$store\n                .dispatch(\"amt/setSearchTrack\", {\n                  userId: device.id,\n                  track: data,\n                })\n                .then(function () {\n                  searchEvent.$emit(\"searchedTrack\");\n                });\n            });\n        }\n        device_id.push(device.id);\n      }\n      // メモが選択されているか\n      if (\n        this.$store.getters[\"amt/searchLayer\"].find(\n          (element) => element.name === \"メモ\"\n        )\n      ) {\n        this.$store\n          .dispatch(\"amt/fetchMemo\", {\n            userId: device_id,\n            begin: start,\n            end: end,\n            text: this.textArea,\n          })\n          .then((data) => {\n            console.log(data);\n            this.$store\n              .dispatch(\"amt/setSearchMemo\", {\n                userId: device_id,\n                memo: data,\n              })\n              .then(function () {\n                searchEvent.$emit(\"searchedMemo\");\n              });\n          });\n      }\n    },\n    clickDevice() {\n      // 端末の一覧を表示\n      this.$store.dispatch(\"amt/showSearchComponentDevice\");\n      // 検索画面が長くなるとレイアウトが崩れるため非表示\n      this.$store.dispatch(\"amt/hideSearchComponent\");\n    },\n    clickLayer() {\n      // 端末の一覧を表示\n      this.$store.dispatch(\"amt/showSearchComponentLayer\");\n      // 検索画面が長くなるとレイアウトが崩れるため非表示\n      this.$store.dispatch(\"amt/hideSearchComponent\");\n    },\n    minimize_button() {\n      // 最小化ボタンが押されたときの挙動\n      this.$store.dispatch(\"amt/showSearchComponentSmall\");\n      this.$store.dispatch(\"amt/hideSearchComponent\");\n    },\n    close_button() {\n      this.$store.dispatch(\"amt/hideSearchComponent\");\n      this.$store.dispatch(\"amt/resetSearchTrack\");\n      this.$store.dispatch(\"amt/resetSearchMemo\");\n      searchEvent.$emit(\"reset_track\");\n      searchEvent.$emit(\"reset_memo\");\n      // メニューを閉じる\n      this.$store.commit(\"amt/setSubMenu\", null);\n\n      const layer = this.$store.getters[\"amt/layers\"];\n      const track_layer = layer[\"TrackLayer\"];\n      // 軌跡を表示(レイヤ管理の設定に従う)\n      this.$store.dispatch(\"amt/setLayerVisible\", {\n        layerName: \"TrackLayer\",\n        visible: track_layer.visible,\n      });\n      const memo_layer = layer[\"MemoLayer\"];\n      // メモを表示(レイヤ管理の設定に従う)\n      this.$store.dispatch(\"amt/setLayerVisible\", {\n        layerName: \"MemoLayer\",\n        visible: memo_layer.visible,\n      });\n      // 選択デバイス、レイヤをクリア\n      this.$store.dispatch(\"amt/resetSearchDevice\");\n      this.$store.dispatch(\"amt/resetSearchLayer\");\n\n      // 軌跡やメモの情報をリセット\n      searchEvent.$emit(\"SEARCH_END\");\n    },\n    close_msg_dialog() {\n      this.show_msg_dialog = false;\n    },\n  },\n  computed: {\n    isSearchComponent: function () {\n      return this.$store.getters[\"amt/isSearchComponent\"];\n    },\n    devices: function () {\n      return this.$store.getters[\"amt/searchDevice\"];\n    },\n    displayDevice: function () {\n      let dvice = \"\";\n      if (this.$store.getters[\"amt/searchDevice\"].length !== 0) {\n        this.$store.getters[\"amt/searchDevice\"].forEach((element) => {\n          dvice = dvice + element.name + \",\";\n        });\n        if (dvice.length >= 20) {\n          dvice = dvice.substr(0, 19) + \"...\";\n        }\n      } else {\n        dvice = \"未選択\";\n      }\n      return dvice;\n    },\n    layers: function () {\n      return this.$store.getters[\"amt/searchLayer\"];\n    },\n    searchSelectDevice: function () {\n      return this.$store.getters[\"amt/isSearchSelectDevice\"];\n    },\n    searchSelectLayer: function () {\n      return this.$store.getters[\"amt/isSearchSelectLayer\"];\n    },\n    searchComponentSmall: function () {\n      return this.$store.getters[\"amt/isSearchComponentSmall\"];\n    },\n  },\n};\n</script>\n\n<style>\n#searchComponent {\n  box-sizing: border-box;\n  position: absolute;\n  top: 10px;\n  right: 0;\n  width: 300px;\n  height: calc(100% - 10px);\n  background-color: #37a3c0;\n  background-image: url(\"./assets/dialogBase.png\");\n  background-size: cover;\n  z-index: 200;\n  color: white;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n#searchComponent label {\n  text-align: left;\n}\n\n#searchComponentTitle {\n  background-color: #37a3c0;\n  padding: 15px 0;\n  position: fixed;\n  width: 300px;\n  height: 60px;\n  z-index: 3;\n}\n#searchComponentBody {\n  position: absolute;\n  top: 65px;\n  z-index: 2;\n  width: 100%;\n}\n\n.align_center {\n  text-align: center;\n}\n\n.searchTitle {\n  text-align: center;\n  margin-bottom: 0px;\n  font-size: 20px;\n}\n.searchDateTitle {\n  font-size: 14px;\n  margin: 0px 0px 3px 15px;\n}\n/* 閉じるボタン */\n#searchComponent button.hiddenBtn {\n  width: 65px;\n  height: 65px;\n  position: absolute;\n  top: -4px;\n  right: 36px;\n  color: rgb(255, 255, 255);\n  background: rgba(42, 121, 142, 0);\n  border-width: initial;\n  border-style: none;\n  border-color: initial;\n  border-image: initial;\n  border-radius: 3rem;\n  transition: background-color 0s ease 0s, color 0.3s ease-in 0s;\n  outline: none !important;\n}\n.hiddenBtn button img {\n  width: 45px;\n  height: 45px;\n}\n/* 閉じるボタン */\n#searchComponent button.closeBtn {\n  width: 50px;\n  height: 65px;\n  position: absolute;\n  top: 0px;\n  right: 3px;\n  color: rgb(255, 255, 255);\n  background: rgba(42, 121, 142, 0);\n  border-width: initial;\n  border-style: none;\n  border-color: initial;\n  border-image: initial;\n  border-radius: 3rem;\n  transition: background-color 0s ease 0s, color 0.3s ease-in 0s;\n  outline: none !important;\n}\n.closeBtn button img {\n  width: 45px;\n  height: 45px;\n}\n\n.searchDate {\n  position: relative;\n  display: inline-block;\n  width: 85%;\n  height: 36px;\n  border-radius: 10px;\n  background-color: #d7ecf2;\n  /* margin-left: 5%; */\n  text-align: center;\n}\n.inputDate {\n  position: relative;\n  padding: 0 10px;\n  width: 90%;\n  height: 36px;\n  border: 0;\n  background: transparent;\n  box-sizing: border-box;\n  font-size: 14px;\n  color: #85bccd;\n}\n\n.searchDevice {\n  position: relative;\n  display: inline-block;\n  width: 85%;\n  border-radius: 10px;\n  background-color: #d7ecf2;\n  /* margin-left: 5%; */\n}\n.searchDevice p {\n  position: relative;\n  padding: 0 10px;\n  border: 0;\n  background: transparent;\n  box-sizing: border-box;\n  font-size: 14px;\n  color: #85bccd;\n  margin: 8px;\n}\n\n.searchDevice textarea {\n  position: relative;\n  padding: 0 10px;\n  border: 0;\n  background: transparent;\n  box-sizing: border-box;\n  font-size: 14px;\n  color: #85bccd;\n  margin: 8px;\n  min-height: 40px;\n  height: 100px;\n}\n\n.searchButton {\n  text-align: center;\n  width: 100%;\n}\n.searchButton button {\n  background-color: #fff;\n  border-radius: 8px;\n  color: #37a3c0;\n  font-family: \"SourceHanSans-Normal\", sans-serif;\n  font-size: 18px;\n  width: 85%;\n  height: 62px;\n  left: 30px;\n  border-style: none;\n  text-align: left;\n  padding-left: 16px;\n  padding-right: 20px;\n  text-align: center;\n  font-weight: bold;\n}\n\n.chexkbox {\n  margin-left: 5px;\n}\n.chexkbox_label {\n  margin-left: 7px;\n  margin-top: 7px;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchLayer.vue?vue&type=template&id=bbf17462&\"\nimport script from \"./SearchLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchLayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchLayer.vue?vue&type=style&index=0&id=bbf17462&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable */\nimport $store from \"@/store\";\nimport SearchComponent from \"./SearchLayer.vue\";\n\nimport Vue from \"vue\";\nexport const searchEvent = new Vue();\n\n/****** 軌跡を表示 ******/\nimport { Map, View, Overlay, Feature } from \"ol\";\nimport * as olLayer from \"ol/layer\";\nimport * as olControl from \"ol/control\";\nimport * as olInteraction from \"ol/interaction\";\nimport * as olProj from \"ol/proj\";\nimport * as olSource from \"ol/source\";\nimport * as olStyle from \"ol/style\";\nimport * as olGeom from \"ol/geom\";\n/****** 軌跡を表示 ******/\n\nimport { memoEvent } from \"../MemoLayer/index.js\";\n\nexport function SearchLayer() {\n  /****** 軌跡を表示 ******/\n\n  const ol = {};\n  ol.Map = Map;\n  ol.View = View;\n  ol.Overlay = Overlay;\n  ol.Feature = Feature;\n  ol.layer = olLayer;\n  ol.control = olControl;\n  ol.interaction = olInteraction;\n  ol.proj = olProj;\n  ol.source = olSource;\n  ol.style = olStyle;\n  ol.geom = olGeom;\n\n  let vecLayer;\n  let map;\n  let vecLayer_memo;\n  let currentMemos;\n  let clicked_memo = [];\n  let isActive = false;\n\n  // removeを行う時に使用\n  let vecLayerTrackInfo = [];\n  let vecLayerMemoInfo = [];\n\n  /****** 軌跡を表示 ******/\n\n  const noop = () => {};\n\n  function add() {\n    map = $store.getters[\"amt/map\"];\n\n    /****** 軌跡を表示 ******/\n    // socketio変更\n    searchEvent.$on(\"track\", (msg) => {\n      if (isActive == true) {\n        vecLayer = new ol.layer.Vector({\n          source: new ol.source.Vector({ features: [] }),\n        });\n        map.addLayer(vecLayer);\n        vecLayer.setVisible(true);\n        vecLayerTrackInfo.push(vecLayer);\n\n        const layer = $store.getters[\"amt/layers\"];\n        const track_layer = layer[\"TrackLayer\"];\n        // zIndexと透過率は軌跡レイヤの設定に従う(表示は非表示でも強制表示)\n        vecLayer.setZIndex(track_layer.zIndex);\n        vecLayer.setOpacity(track_layer.opacity);\n\n        on_track(JSON.parse(msg));\n      }\n    });\n\n    // VectorLayerの軌跡検索結果を削除\n    searchEvent.$on(\"reset_track\", () => {\n      if (vecLayer) {\n        const source = vecLayer.getSource();\n        for (const feature of source.getFeatures()) {\n          source.removeFeature(feature);\n        }\n        for (const vecLayerTrack of vecLayerTrackInfo) {\n          map.removeLayer(vecLayerTrack);\n        }\n        vecLayer = undefined;\n        vecLayerTrackInfo = [];\n      }\n    });\n    /****** 軌跡を表示 ******/\n\n    /****** メモを表示 ******/\n    map.on(\"click\", _onMapClick);\n\n    vecLayer_memo = new ol.layer.Vector({\n      source: new ol.source.Vector({ features: [] }),\n    });\n    map.addLayer(vecLayer_memo);\n    vecLayer_memo.setVisible(true);\n    vecLayerMemoInfo.push(vecLayer_memo);\n    // socketio変更\n    searchEvent.$on(\"memo\", (msg) => {\n      if (isActive == true) {\n        const layer = $store.getters[\"amt/layers\"];\n        const memo_layer = layer[\"MemoLayer\"];\n        // zIndexと透過率はメモレイヤの設定に従う(表示は非表示でも強制表示)\n        vecLayer_memo.setZIndex(memo_layer.zIndex);\n        vecLayer_memo.setOpacity(memo_layer.opacity);\n        vecLayer_memo.setVisible(true);\n        currentMemos = msg;\n        _updateIcons(msg);\n      }\n    });\n\n    // VectorLayerの軌跡検索結果を削除\n    searchEvent.$on(\"reset_memo\", () => {\n      const source = vecLayer_memo.getSource();\n      for (const feature of source.getFeatures()) {\n        source.removeFeature(feature);\n      }\n    });\n    /****** メモを表示 ******/\n\n    searchEvent.$on(\"SEARCH_END\", () => setActive(false));\n  }\n\n  function setActive(active) {\n    isActive = active;\n\n    if (isActive) {\n      $store.commit(\"amt/addComponent\", SearchComponent);\n      $store.commit(\"amt/setSubMenu\", \"SearchLayer\");\n      $store.dispatch(\"amt/showSearchComponent\");\n    } else {\n      searchEvent.$emit(\"reset_track\");\n      searchEvent.$emit(\"reset_memo\");\n      $store.commit(\"amt/removeComponent\", SearchComponent);\n      $store.commit(\"amt/setSubMenu\", null);\n      $store.dispatch(\"amt/hideSearchComponent\");\n    }\n  }\n\n  /***********************/\n  /****** 軌跡を表示 ******/\n  //TRACK描画要求受信\n  // 注意：OpenLayersでの緯度経度処理は[long,lat]でエアマルチ上とは逆\n  // data = {\n  //    user_id1: { coords1: [[lat, long], [lat, long], ...] },\n  //    user_id2: { coords2: [[lat, long], [lat, long], ...] },\n  //    ....\n  // }\n  // 一度、フォーマット変換してから_on_track_drawで描画\n  const on_track = (data) => {\n    Object.keys(data).forEach((user_id) => {\n      if (data[user_id] && data[user_id].coords) {\n        // log(`TRACK:data[${user_id}]=${JSON.stringify(data[user_id])}`);\n        data[user_id].coords = data[user_id].coords.map((pnt) => {\n          var latitude = Number(pnt[1].substr(0, 6));\n          var longitude = Number(pnt[0].substr(0, 6));\n          return ol.proj.transform(\n            [longitude, latitude],\n            \"EPSG:4326\",\n            \"EPSG:3857\"\n          );\n        });\n        _on_track_draw(data[user_id]);\n      }\n    });\n  };\n  // _on_track_drawは、「手書き描画」とほぼ同じ構成\n  // この場合のdataは一つの描画オブジェクト\n  // data = {coords}\n  const _on_track_draw = (data) => {\n    // データなしor座標なしの場合は抜ける\n    if (!data || !data.coords || data.coords.length == 0) {\n      return;\n    }\n    // 検索から来た時はグループに関係なく表示\n    // グループ情報を確認して自分の選択中グループでない場合は描画しない\n    // 自分と送り主が両者nullの場合も同様\n    // if (data.group == null || data.group != activeId.id) {\n    //   return;\n    // }\n    // 描画レイヤからfeatureリストを取得してidが同じなら削除\n    const vecLayerSource = vecLayer.getSource();\n    vecLayerSource.getFeatures().forEach((feature) => {\n      if (feature.get(\"id\") == data.id) {\n        vecLayerSource.removeFeature(feature);\n      }\n    });\n    let geometry = new ol.geom.LineString(data.coords);\n    const feature = new ol.Feature({\n      geometry: geometry,\n      id: data.id,\n    });\n    const style = new ol.style.Style({\n      stroke: new ol.style.Stroke({\n        width: data.width,\n        color: data.color,\n      }),\n    });\n    feature.setStyle(style);\n    // 描画\n    vecLayerSource.addFeature(feature);\n  };\n  /****** 軌跡を表示 ******/\n  /***********************/\n\n  /***********************/\n  /****** メモを表示 ******/\n  function _updateIcons(memos) {\n    const iconFeatures = memos\n      .filter((memo) => memo.lng != null && memo.lat != null)\n      .map((memo) => {\n        const coordinate = ol.proj.transform(\n          [parseFloat(memo.lng), parseFloat(memo.lat)],\n          \"EPSG:4326\",\n          \"EPSG:3857\"\n        );\n        const iconFeature = new ol.Feature({\n          geometry: new ol.geom.Point(coordinate),\n          name: \"memo_search\",\n          id: memo.id,\n          uid: memo.user_id,\n          gid: memo.gid,\n          userName: memo.name,\n          lng: memo.lng,\n          lat: memo.lat,\n          date: memo.date,\n          kind: memo.kind,\n          info: memo.info,\n        });\n        iconFeature.setStyle(\n          new ol.style.Style({\n            image: new ol.style.Icon({\n              anchor: [0.5, 1],\n              opacity: 1.0,\n              scale: 0.25,\n              src:\n                memo.status == \"既読\"\n                  ? memo.kind == \"memo\"\n                    ? \"/images/memo_pin.png\"\n                    : memo.kind == \"photo\"\n                    ? \"/images/photo_pin.png\"\n                    : \"/images/video_pin.png\"\n                  : memo.kind == \"memo\"\n                  ? \"/images/memo_red_pin.png\"\n                  : memo.kind == \"photo\"\n                  ? \"/images/photo_red_pin.png\"\n                  : \"/images/video_red_pin.png\",\n            }),\n          })\n        );\n        return iconFeature;\n      });\n    const source = vecLayer_memo.getSource();\n    for (const feature of source.getFeatures()) {\n      source.removeFeature(feature);\n    }\n    source.addFeatures(iconFeatures);\n  }\n\n  function _onMapClick(e) {\n    if (!isActive) {\n      // 非アクティブ時は何もしない\n      return;\n    }\n    map.forEachFeatureAtPixel(e.pixel, (feature, layer) => {\n      _onIconClick(e, feature);\n    });\n  }\n\n  ///////////////////\n  // メモ表示\n  ///////////////////\n\n  let memo;\n  function _onIconClick(e, feature) {\n    if (feature.get(\"name\") == \"memo_search\") {\n      $store.state.sound_on();\n      const id = feature.get(\"id\");\n      const kind = feature.get(\"kind\");\n      // playId = id;\n      // playKind = kind;\n      memo = currentMemos.find((m) => m.id == id);\n      if (memo) {\n        memo.kind = kind;\n      } else {\n        return;\n      }\n      memo.coordinate = e.coordinate;\n\n      // クリックされた物一覧に追加\n      let memo_info = {};\n      // ID\n      memo_info.id = memo.id;\n      // クリックされた時の挙動\n      memo_info.click = function (memo_id) {\n        // 詳細画面を表示\n        memoEvent.$emit(\"MEMO_VIEW2\", clicked_memo[memo_id]);\n      };\n      // ↑のクリック時動作にわたすパラメータ\n      memo_info.param = memo.id;\n      // 表示する物を指定\n      if (memo.kind == \"video\") {\n        memo_info.type = \"img\";\n        memo_info.img = \"/memo/\" + memo_info.id + \"_thumb.jpg\";\n      } else if (memo.kind == \"photo\") {\n        memo_info.type = \"img\";\n        memo_info.img = \"/memo/\" + memo.id;\n      } else {\n        memo_info.type = \"text\";\n        memo_info.text = memo.info;\n      }\n      // 左下のアイコン\n      let memo_image =\n        memo.status == \"既読\"\n          ? memo.kind == \"memo\"\n            ? \"/images/memo_icon.png\"\n            : memo.kind == \"photo\"\n            ? \"/images/photo_icon.png\"\n            : \"/images/video_icon.png\"\n          : memo.kind == \"memo\"\n          ? \"/images/memo_red_icon.png\"\n          : memo.kind == \"photo\"\n          ? \"/images/photo_red_icon.png\"\n          : \"/images/video_red_icon.png\";\n      memo_info.icon = memo_image;\n      // 説明文\n      memo_info.info = memo.date;\n\n      // storeのオブジェクトに追加\n      // $store.state.click_targets.push(memo_info);\n      $store.commit(\"addClickTargets\", memo_info);\n      $store.commit(\"displayClickList\");\n\n      // クリックされた時の関数で使用\n      clicked_memo[memo.id] = memo;\n    }\n  }\n  /****** メモを表示 ******/\n  /***********************/\n\n  return {\n    add, // マップ初期化時に呼び出し\n    remove: noop, // マップ破棄時に呼び出し\n    update: noop, // 現在のバージョンでは呼び出されない\n    setOpacity: noop, // 現在のバージョンでは呼び出されない\n    setVisible: noop, // 現在のバージョンでは呼び出されない\n    setActive, // メニュー操作でトグル\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"manageLayer_container\"}},[_c('div',{attrs:{\"id\":\"manageLayer_title\"}},[_c('H3',[_vm._v(\"レイヤ\")]),_c('div',{attrs:{\"id\":\"manageLayer_closebutton\",\"title\":\"閉じる\"},on:{\"click\":function($event){return _vm.manageLayer_closebutton()}}},[_c('img',{attrs:{\"src\":require(\"./assets/close@1x.png\"),\"alt\":\"\"}})])],1),_c('draggable',{attrs:{\"tag\":\"ul\",\"handle\":\".layer_draggable\",\"animation\":\"100\"},on:{\"start\":_vm.dragstart,\"update\":_vm.dragenter,\"end\":_vm.dragend}},_vm._l((_vm.registedLayers),function(layer){return _c('li',{key:layer.name},[_c('manageLayerList',{attrs:{\"layer\":layer,\"dragging\":_vm.dragging}})],1)}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{class:{ layer_box: !_vm.draggingNow, layer_box_select: _vm.draggingNow }},[_c('div',{staticClass:\"layer_space\"}),_c('div',{staticClass:\"layer_icon\"},[_c('img',{staticClass:\"layer_icon_img\",attrs:{\"src\":_vm.icon,\"alt\":\"\"}})]),_c('div',{staticClass:\"layer_title\"},[_vm._v(\" \"+_vm._s(_vm.displayname)+\" \")]),_c('div',{staticClass:\"layer_togglebutton\",on:{\"click\":function($event){return _vm.toggle_switch()}}},[(_vm.visible === false)?[_c('img',{attrs:{\"src\":require(\"./assets/select_no.png\"),\"alt\":\"\"}})]:(_vm.visible === true)?[_c('img',{attrs:{\"src\":require(\"./assets/select_yes.png\"),\"alt\":\"\"}})]:_vm._e()],2),_c('div',{staticClass:\"layer_slidebar\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.layer_rotate),expression:\"layer_rotate\"}],staticClass:\"layer_slider\",attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1.0\",\"step\":\"0.01\",\"title\":_vm.layer_rotate},domProps:{\"value\":(_vm.layer_rotate)},on:{\"change\":_vm.onRangeChange,\"__r\":function($event){_vm.layer_rotate=$event.target.value}}})]),_vm._m(0)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"layer_humberger layer_draggable\"},[_c('img',{attrs:{\"src\":require(\"./assets/menu10.png\"),\"alt\":\"\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div\n    v-bind:class=\"{ layer_box: !draggingNow, layer_box_select: draggingNow }\"\n  >\n    <!-- デッドスペースの空白(ドラッグ可) --><!-- 2022-01-18ドラッグできないように 堀山 -->\n\n    <div class=\"layer_space\"></div>\n\n    <!-- レイヤアイコン(ドラッグ可) --><!-- 2022-01-18ドラッグできないように 堀山 -->\n    <div class=\"layer_icon\">\n      <img v-bind:src=\"icon\" class=\"layer_icon_img\" alt=\"\" />\n    </div>\n\n    <!-- レイヤ名(ドラッグ可) --><!-- 2022-01-18ドラッグできないように 堀山 -->\n    <div class=\"layer_title\">\n      {{ displayname }}\n    </div>\n\n    <!-- 表示/非表示トグルボタン -->\n    <div class=\"layer_togglebutton\" v-on:click=\"toggle_switch()\">\n      <template v-if=\"visible === false\">\n        <img src=\"./assets/select_no.png\" alt=\"\" />\n      </template>\n      <template v-else-if=\"visible === true\">\n        <img src=\"./assets/select_yes.png\" alt=\"\" />\n      </template>\n    </div>\n\n    <!-- 透過率スライドバー -->\n    <div class=\"layer_slidebar\">\n      <input\n        class=\"layer_slider\"\n        type=\"range\"\n        min=\"0\"\n        max=\"1.0\"\n        step=\"0.01\"\n        v-model=\"layer_rotate\"\n        @change=\"onRangeChange\"\n        v-bind:title=\"layer_rotate\"\n      />\n    </div>\n\n    <!-- ドラッグ選択用ハンバーガーアイコン -->\n    <div class=\"layer_humberger layer_draggable\">\n      <img src=\"./assets/menu10.png\" alt=\"\" />\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport moment from \"moment\";\n\nexport default {\n  data() {\n    return {\n      displayname: this.layer.displayname,\n      layerName: this.layer.name,\n      visible: this.layer.visible,\n      layer_rotate: this.layer.opacity,\n      icon: this.layer.icon,\n      onDragging: this.dragging,\n    };\n  },\n  props: {\n    // ManageLayer.vueのregistedLayersを参照\n    layer: Object,\n    // ドラッグ中の状態を参照\n    dragging: String,\n  },\n  methods: {\n    toggle_switch() {\n      // store経由でlayerに変更を要求する\n      let isVisible = this.visible;\n      // 表示状態の格納\n      this.layer.visible = !isVisible;\n      // 状態のアップデート\n      this.$store.dispatch(\"amt/setLayerVisible\", {\n        layerName: this.layer.name,\n        visible: !isVisible,\n      });\n      // ブラウザ上の表示を変更\n      this.visible = !isVisible;\n    },\n    onRangeChange() {\n      // store経由でlayerに変更を要求する\n      let opacity = this.layer_rotate;\n      // 透過率の格納\n      this.layer.opacity = opacity;\n      // 透過状態アップデート\n      this.$store.dispatch(\"amt/setLayerOpacity\", {\n        layerName: this.layer.name,\n        opacity: opacity,\n      });\n    },\n  },\n  computed: {\n    draggingNow() {\n      return this.dragging == this.layerName;\n    },\n  },\n};\n</script>\n\n<style>\n/* styleは全てManageLayer.vueに記載 */\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ManageLayerList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ManageLayerList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ManageLayerList.vue?vue&type=template&id=a6ce1294&\"\nimport script from \"./ManageLayerList.vue?vue&type=script&lang=js&\"\nexport * from \"./ManageLayerList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ManageLayerList.vue?vue&type=style&index=0&id=a6ce1294&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"manageLayer_container\">\n    <!-- タイトル部分 -->\n    <div id=\"manageLayer_title\">\n      <H3>レイヤ</H3>\n      <div\n        id=\"manageLayer_closebutton\"\n        @click=\"manageLayer_closebutton()\"\n        title=\"閉じる\"\n      >\n        <img src=\"./assets/close@1x.png\" alt=\"\" />\n      </div>\n    </div>\n\n    <!-- ドラッグで移動できるように -->\n    <draggable\n      tag=\"ul\"\n      handle=\".layer_draggable\"\n      animation=\"100\"\n      @start=\"dragstart\"\n      @update=\"dragenter\"\n      @end=\"dragend\"\n    >\n      <!-- レイヤ毎のボックス -->\n      <li v-for=\"layer in registedLayers\" :key=\"layer.name\">\n        <!-- リスト部分はコンポーネントを分割した -->\n        <manageLayerList :layer=\"layer\" :dragging=\"dragging\" />\n      </li>\n    </draggable>\n  </div>\n</template>\n\n<script>\nimport { manageEvent } from \"./index.js\";\nimport ManageLayerList from \"./ManageLayerList\";\nimport draggable from \"vuedraggable\";\n\nexport default {\n  data() {\n    return {\n      Layers: [],\n      draggingLayer: undefined,\n      dragging: null,\n    };\n  },\n  mounted() {\n    let layers = this.$store.getters[\"amt/layers\"];\n    // v-forで表示するために型を配列へ\n    for (const layer in layers) {\n      // layers.jsでレイヤメニューに表示する設定の物だけを抽出\n      if (layers[layer].isDisplayLayerMenue) {\n        this.Layers.push(layers[layer]);\n      }\n    }\n    this.$store.commit(\"amt/registedLayers\", this.Layers);\n  },\n  components: {\n    manageLayerList: ManageLayerList,\n    draggable: draggable,\n  },\n  methods: {\n    manageLayer_closebutton() {\n      manageEvent.$emit(\"MANAGE_BACK\");\n    },\n    dragstart(e) {\n      // ドラッグするレイヤを覚えとく\n      this.draggingLayer = this.getLayerList()[e.oldDraggableIndex];\n      // ドラッグ中は半透明にする\n      e.target.style.opacity = 0.5;\n      this.dragging = this.draggingLayer.name;\n    },\n    dragend(e) {\n      // 離したら透明度を戻す\n      e.target.style.opacity = 1;\n      this.dragging = null;\n    },\n    dragenter(e) {\n      const layerList = this.getLayerList();\n      const layer = layerList[e.newDraggableIndex];\n      // zIndexを入れ替え\n      const tempIndex = layer.zIndex;\n      layer.zIndex = this.draggingLayer.zIndex;\n      this.draggingLayer.zIndex = tempIndex;\n      // 表示状態の格納\n      this.$store.commit(\"amt/registedLayers\", layerList);\n\n      // zIndexをアップデート\n      layerList.forEach((registedLayer) => {\n        this.$store.dispatch(\"amt/setLayerZIndex\", {\n          layerName: registedLayer.name,\n          zIndex: registedLayer.zIndex,\n        });\n      });\n    },\n    getLayerList() {\n      // 他のmethodから参照したいので最新のregstedLayersを取り出してソート(registedLayersのコピー)\n      return this.$store.getters[\"amt/registedLayers\"].slice().sort((a, b) => {\n        // zIndex大=リスト先頭にするため+-を逆にする(第2引数が大きい時を+にする)\n        return a.zIndex < b.zIndex ? 1 : a.zIndex > b.zIndex ? -1 : 0;\n      });\n    },\n  },\n  computed: {\n    registedLayers() {\n      return this.$store.getters[\"amt/registedLayers\"].slice().sort((a, b) => {\n        // zIndex大=リスト先頭にするため+-を逆にする(第2引数が大きい時を+にする)\n        return a.zIndex < b.zIndex ? 1 : a.zIndex > b.zIndex ? -1 : 0;\n      });\n    },\n  },\n};\n</script>\n\n<style>\n#manageLayer_container {\n  box-sizing: border-box;\n  position: absolute;\n  top: 10px;\n  right: 0;\n  width: 320px;\n  height: calc(100% - 10px);\n  background-color: #37a3c0;\n  background-image: url(\"./assets/dialogBase.png\");\n  background-size: cover;\n  z-index: 200;\n  color: white;\n  overflow-y: auto;\n}\n#manageLayer_container::-webkit-scrollbar {\n  width: 10px;\n}\n#manageLayer_container::-webkit-scrollbar-track {\n  border-radius: 10px;\n  box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1);\n  margin-top: 65px;\n}\n#manageLayer_container::-webkit-scrollbar-thumb {\n  background-color: rgba(0, 0, 50, 0.5);\n  border-radius: 10px;\n  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.3);\n}\n\n#manageLayer_title {\n  padding: 15px 0px;\n  background-color: #37a3c0;\n  position: fixed;\n  width: 320px;\n  height: 64px;\n  z-index: 3;\n}\n#manageLayer_title h3 {\n  text-align: center;\n  margin: 0px;\n}\n#manageLayer_closebutton {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  height: 30px;\n  width: 30px;\n  margin: 15px 20px;\n}\n#manageLayer_closebutton img {\n  height: 100%;\n  width: 100%;\n}\n\n.layer_slider {\n  width: 228px;\n  -webkit-appearance: none;\n  appearance: none;\n  height: 4px;\n  background-color: rgba(255, 255, 255, 0.5);\n  outline: none;\n}\n.layer_slider::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 16px;\n  height: 16px;\n  background: white;\n  border-radius: 50%;\n}\n\n#manageLayer_container ul {\n  padding: 0px;\n  position: absolute;\n  top: 65px;\n  z-index: 2;\n  width: 100%;\n}\n#manageLayer_container li {\n  list-style: none;\n  /* border-bottom: inset 2px #FFFFFF; */\n  height: 100px;\n}\n.layer_box {\n  position: relative;\n  height: 100px;\n}\n.layer_box_select {\n  position: relative;\n  height: 100px;\n  border: solid 1px;\n  border-color: #ffffff;\n  box-shadow: 0px 0px 5px 2px #ffffff inset;\n}\n.layer_draggable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.layer_space {\n  position: absolute;\n  left: 5px;\n  top: 5px;\n  width: calc(100% - 10px);\n  height: calc(100% - 10px);\n  opacity: 0;\n}\n.layer_icon {\n  height: 25px;\n  width: 25px;\n  position: absolute;\n  left: 20px;\n  top: 20px;\n}\n.layer_icon_img {\n  height: 25px;\n  width: 25px;\n}\n.layer_title {\n  position: absolute;\n  left: 50px;\n  top: 20px;\n}\n.layer_togglebutton {\n  position: absolute;\n  left: 210px;\n  top: 22px;\n}\n.layer_slidebar {\n  position: absolute;\n  left: 27px;\n  top: 60px;\n}\n.layer_humberger {\n  width: 25px;\n  position: absolute;\n  left: 266px;\n  top: 39px;\n  opacity: 0.8;\n}\n.layer_humberger img {\n  width: 100%;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ManageLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ManageLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ManageLayer.vue?vue&type=template&id=5cc5d417&\"\nimport script from \"./ManageLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./ManageLayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ManageLayer.vue?vue&type=style&index=0&id=5cc5d417&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import $store from \"@/store\";\nimport ManageComponent from \"./ManageLayer.vue\";\nimport $ from \"jquery\";\n\nimport Vue from \"vue\";\nexport const manageEvent = new Vue();\n\nexport function ManageLayer() {\n  const noop = () => {};\n\n  function add() {\n    // 特にmapに対して追加するものはない\n    manageEvent.$on(\"MANAGE_BACK\", () => this.setActive(false));\n  }\n\n  function setActive(active) {\n    if (active) {\n      $store.commit(\"amt/addComponent\", ManageComponent);\n      $store.commit(\"amt/setSubMenu\", \"ManageLayer\");\n    } else {\n      $store.commit(\"amt/removeComponent\", ManageComponent);\n      $store.commit(\"amt/setSubMenu\", null);\n    }\n  }\n\n  function setOpacity(val) {\n    // 本来であればmapに追加したvectorの透明度を変化する物\n    // サンプルとして表を透明化してみた\n    $(\"#manageLayer_container\").css(\"opacity\", val);\n  }\n\n  return {\n    add, // マップ初期化時に呼び出し\n    remove: noop, // マップ破棄時に呼び出し\n    update: noop, // 現在のバージョンでは呼び出されない\n    setOpacity, // 現在のバージョンでは呼び出されない\n    setVisible: noop, // 現在のバージョンでは呼び出されない\n    setActive, // メニュー操作でトグル\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div')\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div></div>\n</template>\n<script>\n/* eslint-disable */\nimport { Map, View, Feature, Overlay } from \"ol\";\nimport * as olLayer from \"ol/layer\";\nimport * as olControl from \"ol/control\";\nimport * as olInteraction from \"ol/interaction\";\nimport * as olProj from \"ol/proj\";\nimport * as olSource from \"ol/source\";\nimport * as olStyle from \"ol/style\";\nimport * as olGeom from \"ol/geom\";\nimport * as olEasing from \"ol/easing\";\nimport * as olObservable from \"ol/Observable\";\n\nimport { locationEvent } from \"./index.js\";\nimport { memoEvent } from \"@/modules/MemoLayer/index.js\";\n\nvar ol = {};\nol.Map = Map;\nol.View = View;\nol.layer = olLayer;\nol.control = olControl;\nol.interaction = olInteraction;\nol.proj = olProj;\nol.source = olSource;\nol.style = olStyle;\nol.geom = olGeom;\nol.Feature = Feature;\nol.Overlay = Overlay;\nol.easing = olEasing;\nol.Observable = olObservable;\n\nconst icons_location = {\n  0: require(\"./assets/location_circle_blue@0,5x.png\"),\n  1: require(\"./assets/location_people_blue@0,5x.png\"),\n  2: require(\"./assets/location_car_blue@0,5x.png\"),\n  3: require(\"./assets/location_heli_blue@0,5x.png\"),\n  10: require(\"./assets/location_circle_gray@0,5x.png\"),\n  11: require(\"./assets/location_people_gray@0,5x.png\"),\n  12: require(\"./assets/location_car_gray@0,5x.png\"),\n  13: require(\"./assets/location_heli_gray@0,5x.png\"),\n  99: require(\"./assets/location_base.png\"),\n};\n\nconst icons_location_click = {\n  1: require(\"./assets/location_people_click.png\"),\n  2: require(\"./assets/location_car_click.png\"),\n  3: require(\"./assets/location_heli_click.png\"),\n  11: require(\"./assets/location_people_click.png\"),\n  12: require(\"./assets/location_car_click.png\"),\n  13: require(\"./assets/location_heli_click.png\"),\n  99: require(\"./assets/location_base_click.png\"),\n};\n\nexport default {\n  data: function () {\n    return {\n      locationLayer: null,\n      commuDialogTimerId: null,\n      iconMenuOverlay: null,\n      // iconPopupOverlay: null,\n      mapMenuTimer: null,\n      personalDest: null,\n      personalDestCan: null,\n      beaconTimer: null,\n      tel_type: null,\n      tel_code: null,\n    };\n  },\n  computed: {\n    users() {\n      return this.$store.getters[\"amt/users\"];\n    },\n    map() {\n      return this.$store.state.map;\n    },\n    myId() {\n      return this.$store.state.myId;\n    },\n    sip() {\n      return this.$store.state.sip;\n    },\n    sip_connecting() {\n      return this.$store.state.sip_connecting;\n    },\n    group_id() {\n      return this.$store.getters[\"group_id\"];\n    },\n  },\n  methods: {\n    // ロケーションレイヤー\n    createLocationLayer() {\n      //const users = this.$store.state.users;\n      const getLocationIcon = (location) => {\n        if (icons_location[location]) {\n          return icons_location[location];\n        } else {\n          return icons_location[1]; // \"./assets/location_people_blue@0,5x.png\";\n        }\n      };\n      const getRotation = (heading) => {\n        if (heading == null) {\n          return 0;\n        } else {\n          return heading * (Math.PI / 180);\n        }\n      };\n      const iconMapStyleFunction = (feature) => {\n        const style = [\n          new ol.style.Style({\n            image: new ol.style.Icon({\n              src: getLocationIcon(feature.get(\"location\")),\n              scale: 1.0,\n              anchor: [0.5, 0.5],\n              //opacity: 0.7\n            }),\n            text: new ol.style.Text({\n              fill: new ol.style.Fill({ color: \"#ff0000\" }),\n              stroke: new ol.style.Stroke({ color: \"#ffffff\", width: 3 }),\n              //scale: 1.6,\n              textAlign: \"center\",\n              textBaseline: \"top\",\n              offsetY: 13,\n              text: feature.get(\"user_name\"),\n              font: \"bold 15px Courier New, monospace\",\n            }),\n          }),\n          new ol.style.Style({\n            image: new ol.style.Icon({\n              src: require(\"./assets/location_point@0,5x.png\"),\n              scale: 1.0,\n              anchor: [0.5, 2.1],\n              rotation: getRotation(feature.get(\"heading\")),\n              opacity: feature.get(\"heading\") == null ? 0 : 0.7,\n            }),\n          }),\n        ];\n        return style;\n      };\n      let iconFeatures = [];\n\n      const iconSource = new ol.source.Vector({\n        features: iconFeatures,\n      });\n      return new ol.layer.Vector({\n        source: iconSource,\n        style: iconMapStyleFunction,\n        opacity: 1,\n        visible: true,\n      });\n    },\n    //位置アイコンの種類(1-3)\n    getLocationKind(user, userId) {\n      if (user.myIcon == this.$store.state.BASE_ICON_ID) {\n        return this.$store.state.BASE_ICON_ID;\n      } else {\n        if (userId == this.myId) {\n          return user.is_valid ? 0 : 10;\n        } else {\n          return user.is_valid ? user.myIcon : user.myIcon + 10;\n        }\n      }\n    },\n    //地図上アイコンの変更\n    changeMapIcon(new_user, userId) {\n      const user = this.$store.state.users[userId];\n      const feature = this.locationLayer\n        .getSource()\n        .getFeatures()\n        .find((f) => f.get(\"id\") == userId);\n      if (feature) {\n        const iconPoint = new ol.geom.Point([\n          new_user.lng,\n          new_user.lat,\n        ]).transform(\"EPSG:4326\", \"EPSG:3857\");\n        if (new_user.lng != user.lng || new_user.lat != user.lat) {\n          feature.set(\"geometry\", iconPoint);\n        }\n\n        if (\n          new_user.user_name != user.user_name ||\n          new_user.timestamp != user.timestamp\n        ) {\n          feature.set(\n            \"user_name\",\n            `${new_user.user_name}\\n${new Date(\n              new_user.timestamp\n            ).toLocaleTimeString()}\\n${Math.round(new_user.speed * 3.6)}km/h`\n          );\n        }\n\n        if (new_user.heading != user.heading) {\n          feature.set(\n            \"heading\",\n            Math.round(new_user.speed * 3.6) < 10 ? null : new_user.heading\n          );\n        }\n\n        if (new_user.is_valid != user.is_valid) {\n          feature.set(\"location\", this.getLocationKind(new_user, userId));\n        }\n      }\n    },\n\n    // 地図上アイコンの削除\n    deleteMapIcon(userId) {\n      const source = this.locationLayer.getSource();\n      const feature = source.getFeatures().find((f) => f.get(\"id\") == userId);\n      if (feature) {\n        source.removeFeature(feature);\n      }\n    },\n    // 地図上アイコン追加\n    addMapIcon(user, userId) {\n      if (user.lng == null) {\n        return;\n      }\n      const source = this.locationLayer.getSource();\n      const iconPoint = new ol.geom.Point([user.lng, user.lat]).transform(\n        \"EPSG:4326\",\n        \"EPSG:3857\"\n      );\n      // デフォルト位置を表示する場合はGPS時刻が空なので「--:--:--」を表示する\n      const ts = user.timestamp\n        ? new Date(user.timestamp).toLocaleTimeString()\n        : \"--:--:--\";\n\n      let newFeature = null;\n      newFeature = new ol.Feature({\n        geometry: iconPoint,\n        name: \"icon\",\n        id: userId,\n        user_name:\n          user.myIcon == this.$store.state.BASE_ICON_ID\n            ? `${user.user_name}`\n            : `${user.user_name}\\n${ts}\\n${Math.round(user.speed * 3.6)}km/h`,\n        heading: Math.round(user.speed * 3.6) < 10 ? null : user.heading,\n        location: this.getLocationKind(user, userId),\n        tel_type: user.tel_type, // 2021.03.31 tel-mode\n        tel_code: user.tel_code, // 2021.03.31 tel-mode\n      });\n      if (newFeature) source.addFeature(newFeature);\n      // 自分の位置を示すアイコンの表示・非表示を制御\n      if (userId == this.myId) {\n        if (!this.$store.state.amt.myPosition) {\n          const source = this.locationLayer.getSource();\n          const feature = source\n            .getFeatures()\n            .find((f) => f.get(\"id\") == userId);\n          feature.setStyle(new ol.style.Style({}));\n          return;\n        }\n      }\n    },\n\n    updateIcons(newUsers) {\n      const features = this.locationLayer\n        .getSource()\n        .getFeatures()\n        .filter((f) => f.get(\"name\") == \"icon\");\n\n      if (features) {\n        features.forEach((f) => {\n          this.deleteMapIcon(f.get(\"id\"));\n        });\n      }\n\n      Object.keys(newUsers).forEach((id) => {\n        this.addMapIcon(newUsers[id], id);\n      });\n    },\n\n    // 初期化\n    initLocationLayer() {\n      this.locationLayer = this.createLocationLayer();\n      this.locationLayer.setZIndex(2);\n      this.locationLayer.setOpacity(0.7);\n      this.locationLayer.setVisible(true);\n      this.map.addLayer(this.locationLayer);\n\n      this.iconMenuOverlay = new ol.Overlay({\n        element: document.getElementById(\"iconMenu\"),\n        positioning: \"center-center\",\n      });\n      // this.iconPopupOverlay = new ol.Overlay({\n      //   element: document.getElementById(\"iconPopup\"),\n      //   positioning: \"center-center\"\n      // });\n\n      // let last_feature = null;\n      // let original_style = null;\n      this.map.on(\"click\", (e) => {\n        // const pos = this.$refs.map_popup.getPos();\n        // if (pos) {\n        //   this.$refs.map_popup.hide();\n        // }\n        // if (last_feature && original_style) {\n        //   last_feature.setStyle(original_style);\n        // }\n\n        // var coord = ol.proj.transform(e.coordinate, 'EPSG:3857', 'EPSG:4326');\n        // var lon = coord[0];\n        // var lat = coord[1];\n        // alert(lon);\n        // alert(lat);\n\n        this.map.forEachFeatureAtPixel(e.pixel, (feature, layer) => {\n          // 地図上のクリック対象がアイコン且つ自分でない場合　＝＞　個別通話の発呼\n          // この発呼の条件配下に「自分が個別通話中」の場合、Toastで警告を追加する。\n          // ※2021/07/13表示条件追加：メモ・共有・手書きサブメニュー表示中は一覧表示NG\n          if (\n            feature.get(\"name\") == \"icon\" &&\n            feature.get(\"id\") != this.myId &&\n            !this.isOpenSubMenu()\n          ) {\n            if (this.$store.getters[\"ptt/pttActive\"]) {\n              this.$bvToast.toast(\"送信中です。\", {\n                title: \"AirMultiTalk\",\n                toaster: \"b-toaster-top-center\",\n                variant: \"danger\",\n                autoHideDelay: 3000,\n                appendToast: false,\n              });\n            } else if (this.$store.getters[\"ptt/pttRecv\"]) {\n              this.$bvToast.toast(\"着信中です。\", {\n                title: \"AirMultiTalk\",\n                toaster: \"b-toaster-top-center\",\n                variant: \"danger\",\n                autoHideDelay: 3000,\n                appendToast: false,\n              });\n            } else if (this.$store.state.per == \"person\") {\n              this.$bvToast.toast(\"あなたは既に個別通話中です。\", {\n                title: \"AirMultiTalk\",\n                toaster: \"b-toaster-top-center\",\n                variant: \"danger\",\n                autoHideDelay: 3000,\n                appendToast: false,\n              });\n            } else {\n              const dest = feature.get(\"id\");\n              const user = this.$store.state.users[dest];\n\n              if (user.per == \"person\") {\n                this.$bvToast.toast(`${user.user_name}は個別通話中です。`, {\n                  title: \"AirMultiTalk\",\n                  toaster: \"b-toaster-top-center\",\n                  variant: \"danger\",\n                  autoHideDelay: 3000,\n                  appendToast: false,\n                });\n              } else {\n                // this.$store.state.sound_on();\n                // const hisCoord = feature.getGeometry().getCoordinates();\n                // this.map.getView().setCenter(hisCoord);\n                // this.iconMenuOverlay.setPosition(hisCoord);\n                // // this.iconPopupOverlay.setPosition(hisCoord);\n                // this.map.addOverlay(this.iconMenuOverlay);\n                // // this.map.addOverlay(this.iconPopupOverlay);\n\n                this.personalDestCan = feature.get(\"id\");\n                this.tel_type = feature.get(\"tel_type\"); // 2021.03.31 tel-mode\n                this.tel_code = feature.get(\"tel_code\"); // 2021.03.31 tel-mode\n\n                // const videoBtn = document.getElementById(\"mapVideoBtn\");\n                // const telBtn = document.getElementById(\"mapTelBtn\");\n                // const sipBtn = document.getElementById(\"mapSipBtn\");\n                // videoBtn.style.display = \"none\";\n                // telBtn.style.display = \"none\";\n                // sipBtn.style.display = \"none\";\n\n                // if (user && user.page == \"map\") {\n                //   videoBtn.style.backgroundColor = \"black\";\n                //   telBtn.style.backgroundColor = \"black\";\n                // } else {\n                //   videoBtn.style.backgroundColor = \"gray\";\n                //   telBtn.style.backgroundColor = \"gray\";\n                // }\n\n                // if (user && this.sip_connecting) {\n                //   sipBtn.style.backgroundColor = \"black\";\n                // } else {\n                //   sipBtn.style.backgroundColor = \"gray\";\n                // }\n\n                // // スマートフォン表示での不具合へ対応\n                // // チャタリングのような現象でメニューの表示→通話orビデオ通話の開始が発生していたので遅延を挟んだ\n\n                // if (user.user_type == \"amt\") {\n                //   setTimeout(() => (videoBtn.style.display = \"block\"), 100);\n                //   setTimeout(() => (telBtn.style.display = \"block\"), 100);\n                // }\n                // if (this.tel_type == \"1\" && this.sip) { // 相手が電話番号を持ち、自分がSIP登録がある。\n                //   setTimeout(() => (sipBtn.style.display = \"block\"), 100);\n                // }\n\n                if (user.user_type != \"amt\" && !this.sip) {\n                  this.$bvToast.toast(`${user.user_name}とは通話出来ません`, {\n                    title: \"AirMultiTalk\",\n                    toaster: \"b-toaster-top-center\",\n                    variant: \"danger\",\n                    autoHideDelay: 3000,\n                    appendToast: false,\n                  });\n                } else {\n                  const self = this;\n                  let click_info = {};\n                  click_info.id = user.user_name;\n                  click_info.type = \"img\";\n                  click_info.click = function () {\n                    // 個別通話を開始すると一覧を閉じるので開始前に変更を反映\n                    for (let key in self.$store.state.memo_update) {\n                      if (\n                        0 ===\n                        Object.keys(self.$store.state.memo_update[key]).length\n                      ) {\n                        // 削除の場合\n                        memoEvent.$emit(\"DEL_MEMO\", key);\n                      } else {\n                        memoEvent.$emit(\n                          \"UPDATE_MEMO\",\n                          self.$store.state.memo_update[key]\n                        );\n                      }\n                    }\n                    // 地図に戻る時にクリア\n                    self.$store.commit(\"resetMemoUpdate\");\n                    // 詳細画面を表示\n                    self.$store.commit(\"setViewLayersDeviceInfo\", click_info);\n                    self.$store.commit(\"setViewLayersDevice\", true);\n                    // クリック時は下の要素が透けて見える為、非表示へ\n                    self.$store.commit(\"hiddenClickList\");\n                  };\n                  click_info.img = undefined;\n                  if (icons_location_click[user.myIcon]) {\n                    click_info.img = icons_location_click[user.myIcon];\n                  } else {\n                    click_info.img = icons_location_click[1]; // \"./assets/location_people_click.png\";\n                  }\n                  click_info.info = user.user_name;\n                  // 個別通話で使用\n                  click_info.personalDestCan = feature.get(\"id\");\n                  this.$store.commit(\"addClickTargets\", click_info);\n                  this.$store.commit(\"displayClickList\");\n                }\n\n                this.mapMenuTimer = setTimeout(() => {\n                  this.map.removeOverlay(this.iconMenuOverlay);\n                  // this.map.removeOverlay(this.iconPopupOverlay);\n                  this.tel_type = null;\n                  this.tel_code = null;\n                }, 3000);\n              }\n            }\n          }\n        });\n      });\n\n      this.$store.state.mapChangeEvent.$on(\"StartPersonalPhone\", (userId) => {\n        this.log(\"StartPersonalPhone: \" + userId);\n      });\n    },\n    getPersonalDest() {\n      return this.$store.state.personalDest;\n    },\n    setPersonalDest(val) {\n      this.$store.commit(\"setPersonalDest\", val);\n      this.$store.state.userLocation.sendRenewNow();\n    },\n    clearPersonalDest() {\n      this.$store.commit(\"clearPersonalDest\");\n      this.$store.state.userLocation.sendRenewNow();\n    },\n    onMapVideoBtn() {\n      this.$store.state.sound_on();\n      // 個別通話（映像）のボタンを押下した際の処理\n      clearTimeout(this.mapMenuTimer);\n      this.map.removeOverlay(this.iconMenuOverlay);\n      this.$refs.rtc_private.call_to_remote(this.personalDestCan, \"video\");\n    },\n    onMapTelBtn() {\n      this.$store.state.sound_on();\n      // 個別通話（通話）のボタンを押下した際の処理\n      clearTimeout(this.mapMenuTimer);\n      this.map.removeOverlay(this.iconMenuOverlay);\n      this.$refs.rtc_private.call_to_remote(this.personalDestCan, \"audio\");\n    },\n    onMapSipBtn() {\n      this.$store.state.sound_on();\n      // 個別通話（SIP）のボタンを押下した際の処理\n      clearTimeout(this.mapMenuTimer);\n      this.map.removeOverlay(this.iconMenuOverlay);\n      this.$refs.tel_private.call_to_remote(this.tel_code);\n      this.tel_code = null;\n      this.tel_type = null;\n    },\n    // 特定のサブメニューが開いているかチェック\n    isOpenSubMenu() {\n      var layers = this.$store.getters[\"amt/layers\"];\n      var memoLayer = layers[\"MemoLayer\"];\n      var shareLayer = layers[\"ShareLayer\"];\n      var drawLayer = layers[\"DrawLayer\"];\n\n      if (\n        memoLayer.layer.getActive() ||\n        shareLayer.layer.getActive() ||\n        drawLayer.layer.getActive()\n      ) {\n        // メモ・共有・手書きのサブメニュー表示中\n        return true;\n      } else {\n        return false;\n      }\n    },\n  },\n  mounted() {\n    // this.$store.state.mapChangeEvent.$on(\"closePersonal\", dataOrForce => {\n    //   if (\n    //     this.getPersonalDest() != null &&\n    //     (dataOrForce === true || this.getPersonalDest() == dataOrForce.src)\n    //   ) {\n    //     //this.personalDest = null;\n    //     this.clearPersonalDest();\n    //   }\n    // });\n    // this.$store.state.mapChangeEvent.$on(\"commuRejected\", kind => {\n    //   const body =\n    //     (kind == \"audio\" ? \"個人通話が\" : \"テレビ電話が\") + \"断られました。\";\n    //   this.$store.commit(\"alertOn\", { header: \"\", body: body });\n    // });\n\n    locationEvent.$on(\"SETOPACITY\", (val) => {\n      if (this.locationLayer) {\n        this.locationLayer.setOpacity(val);\n      }\n    });\n\n    locationEvent.$on(\"SETVISIBLE\", (val) => {\n      if (this.locationLayer) {\n        this.locationLayer.setVisible(val);\n      }\n    });\n\n    locationEvent.$on(\"SETZINDEX\", (val) => {\n      if (this.locationLayer) {\n        this.locationLayer.setZIndex(val);\n      }\n    });\n  },\n  beforeDestroy() {},\n};\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./locationComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./locationComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./locationComponent.vue?vue&type=template&id=793e7b9c&\"\nimport script from \"./locationComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./locationComponent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import $store from \"@/store\";\nimport locationComponent from \"./locationComponent.vue\";\n\nimport Vue from \"vue\";\nexport const locationEvent = new Vue();\n\nexport function locationLayer() {\n  const noop = () => {};\n\n  function add() {\n    $store.commit(\"amt/addComponent\", locationComponent);\n  }\n\n  function setOpacity(val) {\n    locationEvent.$emit(\"SETOPACITY\", val);\n  }\n\n  function setVisible(val) {\n    locationEvent.$emit(\"SETVISIBLE\", val);\n  }\n\n  function setZIndex(val) {\n    locationEvent.$emit(\"SETZINDEX\", val);\n  }\n\n  return {\n    add, // マップ初期化時に呼び出し\n    remove: noop, // マップ破棄時に呼び出し\n    update: noop, // 現在のバージョンでは呼び出されない\n    setOpacity,\n    setVisible,\n    setZIndex,\n    setActive: noop, // メニュー操作でトグル\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('map-popup',{ref:\"map_popup\",attrs:{\"pos\":_vm.pos}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <map-popup :pos=\"pos\" ref=\"map_popup\"></map-popup>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport { Map, View, Feature, Overlay } from \"ol\";\nimport * as olLayer from \"ol/layer\";\nimport * as olControl from \"ol/control\";\nimport * as olInteraction from \"ol/interaction\";\nimport * as olProj from \"ol/proj\";\nimport * as olSource from \"ol/source\";\nimport * as olStyle from \"ol/style\";\nimport * as olGeom from \"ol/geom\";\nimport * as olEasing from \"ol/easing\";\nimport * as olObservable from \"ol/Observable\";\nimport { trackEvent } from \"./index.js\";\n\n// const MapPopup = () => import(\"@/components/MapPopup.vue\");\nimport MapPopup from \"@/components/MapPopup.vue\";\n\nvar ol = {};\nol.Map = Map;\nol.View = View;\nol.layer = olLayer;\nol.control = olControl;\nol.interaction = olInteraction;\nol.proj = olProj;\nol.source = olSource;\nol.style = olStyle;\nol.geom = olGeom;\nol.Feature = Feature;\nol.Overlay = Overlay;\nol.easing = olEasing;\nol.Observable = olObservable;\n\nconst TRACK_PERIOD = 60 * 1000; //1分\nconst SPEED_LIMIT = 300; // 移動速度上限（km/h）\nconst DOWN_TIME = 60 * 60 * 1000; // 端末停止時間（1時間）　DOWN_TIME以上軌跡記録が無い場合には、同じ軌跡として扱わない。\n// const colors = [\"#e83e8c\", \"#dc3545\", \"#fd7e14\", \"#ffc107\", \"#28a745\"];\n// const colors = [\n//   \"#F44336\", \"#E91E63\", \"#9C27B0\", \"#673AB7\", \"#3F51B5\",\n//   \"#2196F3\", \"#03A9F4\", \"#00BCD4\", \"#009688\", \"#4CAF50\",\n//   \"#8BC34A\", \"#CDDC39\", \"#FFEB3B\", \"#FF9800\",\n// ]\nconst colors = [\n  \"#F44336\",\n  \"#9C27B0\",\n  \"#3F51B5\",\n  \"#03A9F4\",\n  \"#009688\",\n  \"#8BC34A\",\n  \"#FFEB3B\",\n];\n\nexport default {\n  data: function () {\n    return {\n      trackLayer: null,\n      isVisible: false,\n      isActive: false,\n      tracks: {},\n      last_timestamp: null,\n      last_pt: {},\n      // last_feature: null,\n      // original_style: null\n      pos: null,\n    };\n  },\n  components: {\n    mapPopup: MapPopup,\n  },\n  computed: {\n    users() {\n      return this.$store.getters[\"amt/users\"];\n    },\n    map() {\n      return this.$store.state.map;\n    },\n    myId() {\n      return this.$store.state.myId;\n    },\n    group_id() {\n      return this.$store.getters[\"group_id\"];\n    },\n    socketio() {\n      return this.$store.getters[\"socketio\"];\n    },\n    state_point_num() {\n      return this.$store.state.track_point || 1200;\n    },\n    rec_flag() {\n      return this.$store.getters[\"rec_flag\"];\n    },\n  },\n  methods: {\n    // 2点間の距離（入力は緯度経度、返値はkm）\n    distance(lat1, lng1, lat2, lng2) {\n      const R = Math.PI / 180;\n      lat1 *= R;\n      lng1 *= R;\n      lat2 *= R;\n      lng2 *= R;\n      return (\n        6371 *\n        Math.acos(\n          Math.cos(lat1) * Math.cos(lat2) * Math.cos(lng2 - lng1) +\n            Math.sin(lat1) * Math.sin(lat2)\n        )\n      );\n    },\n    // 2点間を移動した際の速度（入力は緯度経度と秒、返値は時速km/h）\n    // pt = [lat, lng, timestamp];\n    speed(pt1, pt2) {\n      if (pt1[2] === pt2[2]) {\n        return 0;\n      } else {\n        const L = this.distance(pt1[0], pt1[1], pt2[0], pt2[1]);\n        const T = Math.abs(pt1[2] - pt2[2]) / 1000;\n        console.log(`L=${L}km T=${T}s 時速=${(L / T) * 3600}`);\n        return (L / T) * 3600;\n      }\n    },\n    user_color(user_id) {\n      // 色指定が無い場合、適当に決める\n      const user_order = Object.keys(this.users).indexOf(user_id);\n      const color = user_order === -1 ? colors[0] : colors[user_order];\n      return (user_id === this.myId) & this.$store.state.myColor || color;\n    },\n    init() {\n      this.trackLayer = new ol.layer.Vector({\n        source: new ol.source.Vector({ features: [] }),\n      });\n      this.map.addLayer(this.trackLayer);\n      this.trackLayer.setVisible(false);\n      this.trackLayer.setZIndex(1); //@todo 仮で設置。今後storeか設定ファイルで管理する予定\n    },\n\n    // ------------------------------------------------------------------------------------------\n    // on_renew: renew通知処理\n    // TRACK_PERIOD毎にthis.tracksに位置情報を配置して描画する。\n    // ------------------------------------------------------------------------------------------\n    // datas = { user1: track, user2: track, ...}\n    // track = [pt1, pt2, ...]\n    // pt = <renew通知オブジェクト。lat,lng,timestampを含む>\n\n    on_renew(msg) {\n      const datas = typeof msg == \"string\" ? JSON.parse(msg) : msg;\n\n      const on_time = datas.system.on_time;\n      const on_chronology = datas.system.on_chronology;\n      this.$store.commit(\"set_on_chronology\", on_chronology);\n\n      const user_ids = Object.keys(datas).filter((id) => {\n        return id !== \"system\";\n      });\n      if (!on_time) {\n        user_ids.forEach((id) => {\n          if (!this.tracks[id]) this.tracks[id] = [];\n\n          // GPSのブレ補正\n          // 前回値と今回値の距離と時間で速度を算出し、SPEED_LIMIT以上の場合、\n          if (!this.last_pt[id]) {\n            this.last_pt[id] = [\n              datas[id].lat,\n              datas[id].lng,\n              datas[id].timestamp,\n            ];\n          } else {\n            const cur_track = [\n              datas[id].lat,\n              datas[id].lng,\n              datas[id].timestamp,\n            ];\n            const sp = this.speed(this.last_pt[id], cur_track);\n            if (sp > SPEED_LIMIT) {\n              // 移動速度が上限値を越えていたら、以下の処理はやらずに抜ける。\n              return;\n            } else {\n              // 今回値が有効値であれば、今回値を前回値として保存\n              this.last_pt[id] = [\n                datas[id].lat,\n                datas[id].lng,\n                datas[id].timestamp,\n              ];\n            }\n          }\n\n          const on_video_flag = datas[id].on_video_flag;\n          datas[id].video_file = on_video_flag\n            ? `${id}_${this.last_timestamp}.webm`\n            : null;\n\n          // timestampの重複排除\n          const is_same_timestamp = this.tracks[id]\n            .map((pt) => pt.timestamp)\n            .includes(datas[id].timestamp);\n          // if ( datas[id].is_valid && !is_same_timestamp ) {\n          if (!is_same_timestamp) {\n            this.tracks[id].unshift(datas[id]);\n          }\n          this._on_track_draw(this.tracks[id], this.last_timestamp);\n        });\n      } else {\n        // 毎分0秒時\n        trackEvent.$emit(\"ON_TIME\", {\n          timestamp: on_time,\n          last_timestamp: this.last_timestamp,\n        });\n        this.last_timestamp = on_time;\n\n        user_ids.forEach((id) => {\n          if (!this.tracks[id]) this.tracks[id] = [];\n\n          // this._on_track_draw(this.tracks[id], this.last_timestamp);\n\n          // 自分が映像取得している場合には、ここで発火させる\n          if (this.myId === id && this.rec_flag) {\n            trackEvent.$emit(\"ON_VIDEO\");\n          }\n\n          const on_video_flag = datas[id].on_video_flag;\n          datas[id].video_file = on_video_flag\n            ? `${id}_${this.last_timestamp}.webm`\n            : null;\n          this.tracks[id] = [datas[id], this.tracks[id][0]];\n        });\n      }\n    },\n\n    // datas = { user1: track, user2: track, ...}\n    // track = [pt1, pt2, ...]\n    // pt = <renew通知オブジェクト。lat,lng,timestampを含む>\n\n    // on_inittrack\n    // 軌跡表示ONにした際、その時にサーバ上に記録されていた軌跡を描画する。\n    on_inittrack(msg) {\n      const datas = typeof msg == \"string\" ? JSON.parse(msg) : msg;\n      this.on_track_erase();\n\n      Object.keys(datas).forEach((id) => {\n        const track = datas[id];\n\n        // （１）現時点でログインしていないユーザの軌跡は表示しない。\n        if (!Object.keys(this.users).includes(id)) return;\n        // （３）グループ情報を確認して自分の選択中グループでない場合は描画しない\n        if (track[0].group_id !== this.group_id) return;\n\n        // 軌跡、最終地点の記録時刻の端数処理\n        const reg_time =\n          Math.floor(track[0].timestamp / TRACK_PERIOD) * TRACK_PERIOD;\n\n        // 最終地点からTRACK_PERIODまでずらした地点までを_trackに収容して描画する\n        let _track = [];\n        let cur_time = reg_time;\n        track.forEach((pt) => {\n          if (pt.timestamp > cur_time) {\n            _track.push(pt);\n          } else {\n            this._on_track_draw(_track, cur_time);\n            // （２）DOWN_TIME以上経過した経路は同じ経路として描画しない\n            const last_pt = _track[_track.length - 1];\n            if (pt.timestamp - last_pt.timestamp > DOWN_TIME) {\n              _track = [pt];\n            } else {\n              _track = [last_pt, pt];\n            }\n            cur_time = cur_time - TRACK_PERIOD;\n          }\n        });\n      });\n    },\n    // こちらは、一旦、全部消す処理\n    // 一番最初に実行する。\n    on_track_erase() {\n      const vecLayerSource = this.trackLayer.getSource();\n      vecLayerSource.getFeatures().forEach((feature) => {\n        vecLayerSource.removeFeature(feature);\n      });\n    },\n    // _on_track_draw\n    // 基本的に「描画処理」だけを行う。\n    _on_track_draw(pts, timestamp) {\n      const end_pt = pts[0];\n      const first_pt = pts.length >= 2 ? pts[pts.length - 2] : null;\n      if (!end_pt || !first_pt) return;\n\n      // console.log(JSON.stringify(end_pt));\n      // console.log(end_pt.video_file);\n      // 緯度経度変換\n      const _pts = pts.map((pt) => {\n        return ol.proj.transform([pt.lng, pt.lat], \"EPSG:4326\", \"EPSG:3857\");\n      });\n      // 描画レイヤからfeatureリストを取得してidが同じなら、一旦削除してから描画\n      const vecLayerSource = this.trackLayer.getSource();\n      vecLayerSource.getFeatures().forEach((feature) => {\n        if (\n          feature.get(\"timestamp\") == timestamp &&\n          feature.get(\"id\") == end_pt.user_id\n        ) {\n          vecLayerSource.removeFeature(feature);\n        }\n      });\n      let geometry = new ol.geom.LineString(_pts);\n      const feature_option = {\n        geometry: geometry,\n        id: end_pt.user_id,\n        user_name: end_pt.user_name,\n        timestamp: timestamp,\n        video_file:\n          (end_pt ? end_pt.video_file : null) ||\n          (first_pt && first_pt.video_file ? first_pt.video_file : null),\n      };\n      const feature = new ol.Feature(feature_option);\n      const style = new ol.style.Style({\n        stroke: new ol.style.Stroke({\n          width: 5,\n          color: this.user_color(end_pt.user_id),\n          lineDash: feature.get(\"video_file\") ? null : [5, 10],\n        }),\n      });\n      feature.setStyle(style);\n      // 描画\n      vecLayerSource.addFeature(feature);\n    },\n  },\n  mounted() {\n    console.log(\n      `trackLayerが読み込まれました。${new Date().toLocaleTimeString()}`\n    );\n    this.init();\n    this.socketio.on(\"renew\", (msg) => {\n      this.on_renew(msg);\n    });\n    // this.socketio.on(\"track\", (msg) => {\n    //   this.on_track(msg);\n    // });\n    this.socketio.on(\"inittrack\", (msg) => {\n      this.on_inittrack(msg);\n    });\n    trackEvent.$on(\"SETOPACITY\", (val) => {\n      if (this.trackLayer) {\n        this.trackLayer.setOpacity(val);\n      }\n    });\n    trackEvent.$on(\"SETVISIBLE\", (val) => {\n      console.log(\n        `trackLayerは${\n          val ? \"表示状態\" : \"非表示状態\"\n        }になりました。${new Date().toLocaleTimeString()}`\n      );\n      if (this.trackLayer) {\n        this.trackLayer.setVisible(val);\n        if (val) {\n          this.socketio.emit(\"inittrack\");\n        }\n        this.isVisible = val;\n      }\n    });\n    trackEvent.$on(\"SETZINDEX\", (val) => {\n      if (this.trackLayer) {\n        this.trackLayer.setZIndex(val);\n      }\n    });\n    trackEvent.$on(\"SETACTIVE\", (val) => {\n      this.isActive = val;\n      if (val) {\n        if (!this.isVisible) {\n          this.isVisible = true;\n          this.trackLayer.setVisible(true);\n        }\n      }\n    });\n\n    // let last_feature = null;\n    // let original_style = null;\n    this.map.on(\"click\", (ev) => {\n      this.pos = ev.coordinate;\n      const pos = this.$refs.map_popup.getPos();\n      if (pos) {\n        this.$refs.map_popup.hide();\n      }\n      // if (this.last_feature && this.original_style) {\n      //   this.last_feature.setStyle(this.original_style);\n      // }\n      this.$refs.map_popup.on_click(ev, this.trackLayer);\n    });\n  },\n  beforeDestroy() {\n    this.socketio.off(\"renew\", this.on_renew);\n    this.socketio.off(\"track\", this.on_track);\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TrackLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TrackLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TrackLayer.vue?vue&type=template&id=3e5ee2da&\"\nimport script from \"./TrackLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./TrackLayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import $store from \"@/store\";\nimport trackLayer from \"./TrackLayer.vue\";\n\nimport Vue from \"vue\";\nexport const trackEvent = new Vue();\n\nexport function trackLayerModule() {\n  const noop = () => {};\n\n  function add() {\n    $store.commit(\"amt/addComponent\", trackLayer);\n  }\n\n  function setOpacity(val) {\n    trackEvent.$emit(\"SETOPACITY\", val);\n  }\n\n  function setVisible(val) {\n    trackEvent.$emit(\"SETVISIBLE\", val);\n  }\n\n  function setZIndex(val) {\n    trackEvent.$emit(\"SETZINDEX\", val);\n  }\n\n  function setActive(val) {\n    trackEvent.$emit(\"SETACTIVE\", val);\n  }\n\n  return {\n    add, // マップ初期化時に呼び出し\n    remove: noop, // マップ破棄時に呼び出し\n    update: noop, // 現在のバージョンでは呼び出されない\n    setOpacity,\n    setVisible,\n    setZIndex,\n    setActive, // メニュー操作でトグル\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div')\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div></div>\n</template>\n<script>\nimport { Map, View, Feature, Overlay } from \"ol\";\nimport * as olLayer from \"ol/layer\";\nimport * as olControl from \"ol/control\";\nimport * as olInteraction from \"ol/interaction\";\nimport * as olProj from \"ol/proj\";\nimport * as olSource from \"ol/source\";\nimport * as olStyle from \"ol/style\";\nimport * as olGeom from \"ol/geom\";\nimport * as olEasing from \"ol/easing\";\nimport * as olObservable from \"ol/Observable\";\n\nimport { weatherEvent } from \"./index.js\";\n\nvar ol = {};\nol.Map = Map;\nol.View = View;\nol.layer = olLayer;\nol.control = olControl;\nol.interaction = olInteraction;\nol.proj = olProj;\nol.source = olSource;\nol.style = olStyle;\nol.geom = olGeom;\nol.Feature = Feature;\nol.Overlay = Overlay;\nol.easing = olEasing;\nol.Observable = olObservable;\n\nexport default {\n  data: function () {\n    return {\n      weatherLayer: null,\n      clearId: {},\n    };\n  },\n  computed: {\n    map() {\n      return this.$store.state.map;\n    },\n    myId() {\n      return this.$store.state.myId;\n    },\n  },\n  methods: {\n    // 気象レイヤー\n    //ナウキャスト\n    createWeatherLayer() {\n      return new ol.layer.Tile({\n        source: new ol.source.TileWMS({\n          url: \"https://wms.jmarinecloud.com/ms4w/htdocs/direction_raster.php\",\n          params: {\n            LAYERS: \"area_02\",\n            TRANSPARENT: true,\n            FORMAT: \"image/png\",\n            KIND: \"nowcast_hi\",\n            VERSION: \"1.1.1\",\n            tm: new Date().getMilliseconds(),\n          },\n          visibility: true,\n        }),\n        // visible: true,\n        visible: false,\n      });\n    },\n\n    // 初期化\n    initWeatherLayer({ visible, opacity, zIndex }) {\n      this.weatherLayer = this.createWeatherLayer();\n      this.weatherLayer.setZIndex(zIndex);\n      this.weatherLayer.setOpacity(opacity);\n      this.weatherLayer.setVisible(visible);\n      this.map.addLayer(this.weatherLayer);\n    },\n    refreshNowcast() {\n      this.refreshNowcastLayer(0);\n    },\n    refreshNowcastLayer(diffHour) {\n      const dt = new Date(new Date().getTime() + diffHour * 60 * 60 * 1000);\n      const yr = dt.getFullYear();\n      const mt = (\"00\" + (dt.getMonth() + 1)).slice(-2);\n      const dy = (\"00\" + dt.getDate()).slice(-2);\n      const hr = (\"00\" + dt.getHours()).slice(-2);\n      //const mn = (\"00\" + dt.getMinutes()).slice(-2);\n      //const timeStr = yr + mt + dy + hr + mn + \"00_000_m\"\n      const timeStr = yr + mt + dy + hr + \"0000_000_m\";\n\n      const source = this.weatherLayer.getSource();\n      let params = source.getParams();\n      params.tm = new Date().getMilliseconds();\n      if (diffHour == 0) {\n        delete params.TIME;\n      } else {\n        params.TIME = timeStr;\n      }\n      source.updateParams(params);\n    },\n\n    // 特定のサブメニューが開いているかチェック\n    isOpenSubMenu() {\n      var layers = this.$store.getters[\"amt/layers\"];\n      var memoLayer = layers[\"MemoLayer\"];\n      var shareLayer = layers[\"ShareLayer\"];\n      var drawLayer = layers[\"DrawLayer\"];\n\n      if (\n        memoLayer.layer.getActive() ||\n        shareLayer.layer.getActive() ||\n        drawLayer.layer.getActive()\n      ) {\n        // メモ・共有・手書きのサブメニュー表示中\n        return true;\n      } else {\n        return false;\n      }\n    },\n  },\n  mounted() {\n    weatherEvent.$on(\"INIT\", () => {\n      const configs = this.$store.getters[\"amt/layers\"];\n      const config = configs[\"WeatherLayer\"];\n      this.initWeatherLayer(config);\n    });\n    weatherEvent.$on(\"SETOPACITY\", (val) => {\n      if (this.weatherLayer) {\n        this.weatherLayer.setOpacity(val);\n      }\n    });\n\n    weatherEvent.$on(\"SETVISIBLE\", (val) => {\n      if (this.weatherLayer) {\n        this.weatherLayer.setVisible(val);\n      }\n    });\n\n    weatherEvent.$on(\"SETZINDEX\", (val) => {\n      if (this.weatherLayer) {\n        this.weatherLayer.setZIndex(val);\n      }\n    });\n    this.clearId[\"refresh\"] = setInterval(() => {\n      if (this.weatherLayer) {\n        if (this.weatherLayer.getVisible()) {\n          this.refreshNowcast();\n        }\n      } else {\n        console.log(\"出た\");\n      }\n    }, 600 * 1000);\n  },\n  beforeDestroy() {\n    Object.keys(this.clearId).forEach((id) => {\n      clearInterval(this.clearId[id]);\n    });\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./weatherComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./weatherComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./weatherComponent.vue?vue&type=template&id=82bae2d6&\"\nimport script from \"./weatherComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./weatherComponent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import $store from \"@/store\";\nimport weatherComponent from \"./weatherComponent.vue\";\n// import weatherComponent from \"./weatherLayer.vue\";\n\nimport Vue from \"vue\";\nexport const weatherEvent = new Vue();\n\nexport function weatherLayer() {\n  const noop = () => {};\n\n  function add() {\n    $store.commit(\"amt/addComponent\", weatherComponent);\n    setTimeout(() => {\n      weatherEvent.$emit(\"INIT\", null);\n    }, 1000);\n  }\n\n  function setOpacity(val) {\n    weatherEvent.$emit(\"SETOPACITY\", val);\n  }\n\n  function setVisible(val) {\n    weatherEvent.$emit(\"SETVISIBLE\", val);\n  }\n\n  function setZIndex(val) {\n    weatherEvent.$emit(\"SETZINDEX\", val);\n  }\n\n  function setActive(active) {\n    if (active) {\n      // $store.commit(\"amt/setSubMenu\", \"WeatherLayer\");\n      $store.commit(\"amt/addComponent\", weatherComponent);\n      $store.dispatch(\"amt/showWeatherComponent\");\n    } else {\n      // $store.commit(\"amt/setSubMenu\", null);\n      $store.commit(\"amt/removeComponent\", weatherComponent);\n      $store.dispatch(\"amt/hideWeatherComponent\");\n    }\n  }\n\n  // function setActive(val) {\n  //   weatherEvent.$emit(\"SETACTIVE\", val);\n  //   $store.commit(\"amt/addComponent\", weatherComponent);\n  //   setTimeout(() => {\n  //     weatherEvent.$emit(\"INIT\", null);\n  //   }, 1000)\n  // }\n\n  return {\n    add, // マップ初期化時に呼び出し\n    remove: noop, // マップ破棄時に呼び出し\n    update: noop, // 現在のバージョンでは呼び出されない\n    setOpacity,\n    setVisible,\n    setZIndex,\n    setActive,\n    // setActive: noop // メニュー操作でトグル\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div')\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div></div>\n</template>\n<script>\nimport { Map, View, Feature, Overlay } from \"ol\";\nimport * as olLayer from \"ol/layer\";\nimport * as olControl from \"ol/control\";\nimport * as olInteraction from \"ol/interaction\";\nimport * as olProj from \"ol/proj\";\nimport * as olSource from \"ol/source\";\nimport * as olStyle from \"ol/style\";\nimport * as olGeom from \"ol/geom\";\nimport * as olEasing from \"ol/easing\";\nimport * as olObservable from \"ol/Observable\";\nimport * as olFormat from \"ol/format\";\n\nimport { hazardMapEvent } from \"./index.js\";\n\nvar ol = {};\nol.Map = Map;\nol.View = View;\nol.layer = olLayer;\nol.control = olControl;\nol.interaction = olInteraction;\nol.proj = olProj;\nol.source = olSource;\nol.style = olStyle;\nol.geom = olGeom;\nol.Feature = Feature;\nol.Overlay = Overlay;\nol.easing = olEasing;\nol.Observable = olObservable;\nol.format = olFormat;\n\nexport default {\n  data: function () {\n    return {\n      hazardMapLayer: null,\n      layers: [],\n      // urls: [\n      //   \"https://disaportaldata.gsi.go.jp/raster/01_flood_l2_shinsuishin_kuni_data/{z}/{x}/{y}.png\",\n      //   \"https://disaportaldata.gsi.go.jp/raster/05_dosekiryukeikaikuiki/{z}/{x}/{y}.png\",\n      // ]\n    };\n  },\n  computed: {\n    map() {\n      return this.$store.state.map;\n    },\n    map_urls() {\n      return this.$store.getters[\"map_urls\"];\n    },\n    myId() {\n      return this.$store.state.myId;\n    },\n  },\n  methods: {\n    init({ visible, opacity, zIndex }) {\n      this.map_urls.forEach((url) => {\n        const layer = new ol.layer.Tile({\n          source: new ol.source.XYZ({ url: url }),\n          opacity: 1,\n          visible: false,\n        });\n        layer.setZIndex(zIndex);\n        layer.setOpacity(opacity);\n        layer.setVisible(visible);\n        this.map.addLayer(layer);\n        this.layers.push(layer);\n      });\n\n      /*\n      // 外部GeoJSONスタイル設定\n      const style_simple = new ol.style.Style({\n        fill: new ol.style.Fill({\n          color: '#ADD8E6'\n        }),\n        stroke: new ol.style.Stroke({\n          color: '#88FF00',\n          width: 10\n        })\n      });\n\n      function simpleStyle(feature) {\n        return style_simple;\n      }\n\n      // 外部GeoJSONレイヤ設定\n      const vectorLayer = new ol.layer.VectorTile({\n        source: new ol.source.VectorTile({\n          url: \"https://cyberjapandata.gsi.go.jp/xyz/experimental_rdcl/{z}/{x}/{y}.geojson\",\n          // url: \"https://cyberjapandata.gsi.go.jp/xyz/experimental_railcl/{z}/{x}/{y}.geojson\", // 鉄道\n          // url: \"https://cyberjapandata.gsi.go.jp/xyz/experimental_rvrcl/{z}/{x}/{y}.geojson\", // 河川\n          // format: new GeoJSON()\n          format: new ol.format.GeoJSON()\n        }),\n        style: simpleStyle\n      });\n      vectorLayer.setZIndex(zIndex);\n      vectorLayer.setOpacity(opacity);\n      vectorLayer.setVisible(visible);\n      this.map.addLayer(vectorLayer);\n\n      this.layers.push(vectorLayer);\n      */\n    },\n\n    // 特定のサブメニューが開いているかチェック\n    isOpenSubMenu() {\n      var layers = this.$store.getters[\"amt/layers\"];\n      var memoLayer = layers[\"MemoLayer\"];\n      var shareLayer = layers[\"ShareLayer\"];\n      var drawLayer = layers[\"DrawLayer\"];\n\n      if (\n        memoLayer.layer.getActive() ||\n        shareLayer.layer.getActive() ||\n        drawLayer.layer.getActive()\n      ) {\n        // メモ・共有・手書きのサブメニュー表示中\n        return true;\n      } else {\n        return false;\n      }\n    },\n  },\n  mounted() {\n    hazardMapEvent.$on(\"INIT\", () => {\n      const configs = this.$store.getters[\"amt/layers\"];\n      const config = configs[\"HazardMapLayer\"];\n      this.init(config);\n    });\n    hazardMapEvent.$on(\"SETOPACITY\", (val) => {\n      if (this.layers.length > 0) {\n        this.layers.forEach((layer) => {\n          layer.setOpacity(val);\n        });\n      }\n    });\n\n    hazardMapEvent.$on(\"SETVISIBLE\", (val) => {\n      if (this.layers.length > 0) {\n        this.layers.forEach((layer) => {\n          layer.setVisible(val);\n        });\n      }\n    });\n\n    hazardMapEvent.$on(\"SETZINDEX\", (val) => {\n      if (this.layers.length > 0) {\n        this.layers.forEach((layer) => {\n          layer.setZIndex(val);\n        });\n      }\n    });\n  },\n  beforeDestroy() {},\n};\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./hazardMapComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./hazardMapComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./hazardMapComponent.vue?vue&type=template&id=6caf4402&\"\nimport script from \"./hazardMapComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./hazardMapComponent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import $store from \"@/store\";\nimport hazardMapComponent from \"./hazardMapComponent.vue\";\n\nimport Vue from \"vue\";\nexport const hazardMapEvent = new Vue();\n\nexport function hazardMapLayer() {\n  const noop = () => {};\n\n  function add() {\n    $store.commit(\"amt/addComponent\", hazardMapComponent);\n    setTimeout(() => {\n      hazardMapEvent.$emit(\"INIT\", null);\n    }, 1000);\n  }\n\n  function setOpacity(val) {\n    hazardMapEvent.$emit(\"SETOPACITY\", val);\n  }\n\n  function setVisible(val) {\n    hazardMapEvent.$emit(\"SETVISIBLE\", val);\n  }\n\n  function setZIndex(val) {\n    hazardMapEvent.$emit(\"SETZINDEX\", val);\n  }\n\n  return {\n    add, // マップ初期化時に呼び出し\n    remove: noop, // マップ破棄時に呼び出し\n    update: noop, // 現在のバージョンでは呼び出されない\n    setOpacity,\n    setVisible,\n    setZIndex,\n    setActive: noop, // メニュー操作でトグル\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isVisible)?_c('div',{ref:\"chatLayer\",staticClass:\"base\"},[_c('div',{staticClass:\"input_box\"},[_c('input',{ref:\"sendMsg\",staticClass:\"sendMsg\",attrs:{\"type\":\"text\",\"placeholder\":\"メッセージ\"},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.send.apply(null, arguments)}}}),_c('div',{staticClass:\"btn_send\",on:{\"click\":_vm.send}},[_c('img',{staticClass:\"btn_send_img\",attrs:{\"src\":_vm.btn_send_img}})])]),_c('div',{ref:\"balloon_box\",staticClass:\"balloon_box\"},_vm._l((_vm.chatMessages),function(chatMessage,index){return _c('balloon',{key:index,attrs:{\"msg\":chatMessage.msg,\"id\":chatMessage.id,\"name\":chatMessage.name,\"time\":chatMessage.time,\"nack\":chatMessage.nack,\"href\":chatMessage.href}})}),1)]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(!_vm.is_me)?_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.name))]):_vm._e(),_c('div',{staticClass:\"talk_box\",class:{'reverse': _vm.is_me, 'nack': _vm.nack }},[_c('div',{class:[ _vm.is_me ? 'say_Right' : 'say_Left' ]},[(_vm.href)?[_c('a',{on:{\"click\":function($event){return _vm.sound_on(_vm.href)}}},[_vm._v(_vm._s(_vm.msg))])]:[_c('p',[_vm._v(_vm._s(_vm.msg))])]],2),_c('div',{staticClass:\"c_time\"},[_vm._v(_vm._s(_vm.c_time))])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div v-if=\"!is_me\" class=\"name\">{{ name }}</div>\r\n    <div class=\"talk_box\" :class=\"{'reverse': is_me, 'nack': nack }\">\r\n      <div :class=\"[ is_me ? 'say_Right' : 'say_Left' ]\">\r\n        <template v-if=\"href\"><a @click=\"sound_on(href)\">{{ msg }}</a></template>\r\n        <template v-else><p>{{ msg }}</p></template>\r\n      </div>\r\n      <div class=\"c_time\">{{ c_time }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable */\r\nexport default {\r\n  props: [ \"msg\", \"id\", \"name\", \"time\", \"nack\", \"href\" ],\r\n  computed: {\r\n    myId() {\r\n      return this.$store.state.myId\r\n    },\r\n    is_me() {\r\n      return this.myId === this.id\r\n    },\r\n    users() {\r\n      return this.$store.getters[\"amt/users\"]\r\n    },\r\n    c_time() {\r\n      const d = new Date(this.time);\r\n      return this.nack ?  \"送信中\" : `${d.getHours()}:${d.getMinutes()}`\r\n    },\r\n    sound_on() {\r\n      return this.$store.state.sound_on;\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.talk_box {\r\n  display: flex;\r\n  align-items: flex-end;\r\n}\r\n.reverse {\r\n  flex-direction: row-reverse;\r\n}\r\n.nack {\r\n  opacity: 50%;\r\n}\r\n.c_time {\r\n  font-size: 0.7rem;\r\n  width: 40px;\r\n}\r\n.name {\r\n  text-align: left;\r\n  padding: 10px 10px 0px 10px;\r\n  font-size: 0.7rem;\r\n}\r\n.say_Left {\r\n  display: flex;\r\n  text-align: left;\r\n  max-width: 80%;\r\n  min-width: 50px;\r\n  width: fit-content;\r\n  overflow-wrap: break-word;\r\n  position: relative;\r\n  margin: 0px 5px 0px 25px;\r\n  padding: 10px 15px 8px 15px;\r\n  border-radius: 12px;\r\n  background: #d7ebfe;\r\n}\r\n.say_Left:after {\r\n  content: \"\";\r\n  display: inline-block;\r\n  position: absolute;\r\n  /* top: 50%; */\r\n  left: -30px;\r\n  /* margin-top: -15px; */\r\n  border: 10px solid transparent;\r\n  border-right: 22px solid #d7ebfe;\r\n}\r\n.say_Right {\r\n  display: flex;\r\n  text-align: left;\r\n  max-width: 80%;\r\n  min-width: 50px;\r\n  width: fit-content;\r\n  overflow-wrap: break-word;\r\n  position: relative;\r\n  margin: 5px 30px 5px 5px;\r\n  padding: 10px 15px 8px 15px;\r\n  /* padding: 17px 13px 15px 18px; */\r\n  border-radius: 12px;\r\n  background: #5AC323;\r\n  color: white;\r\n}\r\n.say_Right::after {\r\n  content: \"\";\r\n  display: inline-block;\r\n  position: absolute;\r\n  left: 100%;\r\n  border: 10px solid transparent;\r\n  border-left: 22px solid #5AC323;\r\n}\r\np {\r\n  margin: 0 !important;\r\n  padding: 0;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BalloonComp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BalloonComp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BalloonComp.vue?vue&type=template&id=15f79ad6&\"\nimport script from \"./BalloonComp.vue?vue&type=script&lang=js&\"\nexport * from \"./BalloonComp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BalloonComp.vue?vue&type=style&index=0&id=15f79ad6&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"base\" ref=\"chatLayer\" v-if=\"isVisible\">\r\n    <div class=\"input_box\">\r\n      <input type=\"text\" ref=\"sendMsg\" class=\"sendMsg\" placeholder=\"メッセージ\" @keypress.enter=\"send\" />\r\n      <div class=\"btn_send\" @click=\"send\">\r\n        <img class=\"btn_send_img\" :src=\"btn_send_img\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"balloon_box\" ref=\"balloon_box\">\r\n      <balloon\r\n        v-for=\"(chatMessage, index) in chatMessages\"\r\n        :key=\"index\"\r\n        :msg=\"chatMessage.msg\"\r\n        :id=\"chatMessage.id\"\r\n        :name=\"chatMessage.name\"\r\n        :time=\"chatMessage.time\"\r\n        :nack=\"chatMessage.nack\"\r\n        :href=\"chatMessage.href\"\r\n      ></balloon>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { chatEvent } from \"./index.js\";\r\nimport Balloon from './BalloonComp.vue';\r\nconst api_url = \"/api/chat\"\r\n\r\nexport default {\r\n  components: {\r\n    balloon: Balloon\r\n  },\r\n  data() {\r\n    return {\r\n      chatLayer: null,\r\n      isVisible: false,\r\n      isActive: false,\r\n      chatMessages: [],\r\n      btn_send_img: require(\"../../assets/paper_airplane.png\")\r\n    };\r\n  },\r\n  watch: {\r\n    group_id() {\r\n      this.init();\r\n    }\r\n  },\r\n  computed: {\r\n    users() {\r\n      return this.$store.getters[\"amt/users\"];\r\n    },\r\n    myId() {\r\n      return this.$store.state.myId;\r\n    },\r\n    group_id() {\r\n      return this.$store.getters[\"group_id\"];\r\n    },\r\n    socketio() {\r\n      return this.$store.getters[\"socketio\"];\r\n    },\r\n  },\r\n  methods: {\r\n    async init() {\r\n      console.log(\"HELLO this is Chat Module\")\r\n      const method = \"POST\";\r\n      const body = JSON.stringify({\r\n        id: this.myId,\r\n        group_id: this.group_id\r\n      });\r\n      const headers = {\r\n        'Accept': 'application/json',\r\n      };\r\n      try {\r\n        const res = await fetch(api_url, {method, headers, body});\r\n        const talks = await res.json();\r\n        console.log(talks);\r\n        this.chatMessages = talks;\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    send() {\r\n      // 空っぽは送信しない。\r\n      if (this.$refs.sendMsg.value === \"\") return;\r\n\r\n      const myMsg = {\r\n        id: this.myId,\r\n        name: this.users[this.myId].user_name,\r\n        group_id: this.group_id,\r\n        time: Date.now(),\r\n        msg: this.$refs.sendMsg.value,\r\n        nack: true\r\n      }\r\n      this.socketio.emit(\"chat_msg\", myMsg);\r\n      // myMsg.nack = true;\r\n      this.chatMessages.push(myMsg);\r\n      this.$refs.sendMsg.value = \"\";\r\n      this.$nextTick(() => {\r\n        this.$refs.balloon_box.scrollTop = this.$refs.balloon_box.scrollHeight;\r\n      })\r\n    },\r\n    recv(msg) {\r\n      // 自分のメッセージだったら\r\n      if (msg.id === this.myId) {\r\n        // 初めからnackがfalseの場合、音声認識処理なので、直ぐに登録する。\r\n        if (!msg.nack) {\r\n          this.chatMessages.push(msg);\r\n        } else {\r\n          const  index = this.chatMessages.findLastIndex(chatMsg => {\r\n            return chatMsg.id === msg.id && chatMsg.time === msg.time\r\n          });\r\n          if (!isNaN(index) && this.chatMessages[index]) {\r\n            this.chatMessages[index].nack = false;\r\n          }\r\n        }\r\n      } else {\r\n        // 他人のメッセージの場合、直ぐに登録\r\n        msg.nack = false;\r\n        this.chatMessages.push(msg);\r\n      }\r\n      this.$nextTick(() => {\r\n        this.$refs.balloon_box.scrollTop = this.$refs.balloon_box.scrollHeight;\r\n      })\r\n    },\r\n  },\r\n  mounted() {\r\n    console.log(\r\n      `chatLayerが読み込まれました。${new Date().toLocaleTimeString()}`\r\n    );\r\n    chatEvent.$on(\"SETOPACITY\", (val) => {\r\n      this.$refs.chatLayer.style.opacity = val;\r\n    });\r\n    chatEvent.$on(\"SETVISIBLE\", (val) => {\r\n      this.isVisible = val;\r\n    });\r\n    chatEvent.$on(\"SETZINDEX\", (val) => {\r\n      this.$refs.chatLayer.style.zIndex = val;\r\n    });\r\n    chatEvent.$on(\"SETACTIVE\", (val) => {\r\n      this.isActive = val;\r\n      if (val) {\r\n        if (!this.isVisible) {\r\n          this.isVisible = true;\r\n        }\r\n      }\r\n    });\r\n    this.socketio.on(\"chat_msg\", this.recv);\r\n    this.init();\r\n  },\r\n  beforeDestroy() {\r\n    this.socketio.off(\"chat_msg\", this.recv);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* --------------Remote Box-------------------- */\r\n/* 縦向きの場合 */\r\n@media screen and (orientation: portrait) {\r\n  .base {\r\n    z-index: 4;\r\n    position: absolute;\r\n    top: 20px;\r\n    left: 0px;\r\n    width: 100%;\r\n    height: 70vh;\r\n    background-color: whitesmoke;\r\n    max-height: 60vh;\r\n  }\r\n}\r\n/* 横向きの場合 */\r\n@media screen and (orientation: landscape) {\r\n  .base {\r\n    z-index: 4;\r\n    position: absolute;\r\n    top: 20px;\r\n    left: 0px;\r\n    width: 100%;\r\n    height: 70vh;\r\n    background-color: whitesmoke;\r\n    max-height: 60vh;\r\n  }\r\n}\r\n\r\n.input_box {\r\n  /* position: relative; */\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: 7vh;\r\n  min-height: 50px;\r\n  padding: 5px 0px 5px 0px;\r\n  background-color: #e0e0e0;\r\n}\r\n.balloon_box {\r\n  /* position: relative; */\r\n  width: 100%;\r\n  height: 85%;\r\n  overflow-y: scroll;\r\n  overflow-x: hidden;\r\n}\r\ninput[type=\"text\"]{\r\n  border-radius: 10px;\r\n  margin: 5px;\r\n  border: 0.5px;\r\n  line-height: 1.5rem;\r\n  font-size: 1.2rem;\r\n  flex-basis: 60%;\r\n}\r\n.btn_send {\r\n  background-color: #5AC323;\r\n  border-radius: 10px;\r\n  border: 0px;\r\n  margin: 5px;\r\n  flex-basis: 15%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.btn_send_img {\r\n  margin: auto;\r\n  height: 80%;\r\n}\r\n.balloon_box::-webkit-scrollbar {\r\n  width: 9px;\r\n}\r\n.balloon_box::-webkit-scrollbar-track {\r\n  background-color: #e4e4e4;\r\n  border-radius: 100px;\r\n}\r\n.balloon_box::-webkit-scrollbar-thumb {\r\n  background-color: #9b9a98;\r\n  border-radius: 100px;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChatLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChatLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatLayer.vue?vue&type=template&id=6100e736&scoped=true&\"\nimport script from \"./ChatLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatLayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatLayer.vue?vue&type=style&index=0&id=6100e736&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6100e736\",\n  null\n  \n)\n\nexport default component.exports","import $store from \"@/store\";\nimport chatLayer from \"./ChatLayer.vue\";\n\nimport Vue from \"vue\";\nexport const chatEvent = new Vue();\n\nexport function chatLayerModule() {\n  const noop = () => {};\n\n  function add() {\n    $store.commit(\"amt/addComponent\", chatLayer);\n  }\n\n  function setOpacity(val) {\n    chatEvent.$emit(\"SETOPACITY\", val);\n  }\n\n  function setVisible(val) {\n    chatEvent.$emit(\"SETVISIBLE\", val);\n  }\n\n  function setZIndex(val) {\n    chatEvent.$emit(\"SETZINDEX\", val);\n  }\n\n  function setActive(val) {\n    chatEvent.$emit(\"SETACTIVE\", val);\n  }\n\n  return {\n    add, // マップ初期化時に呼び出し\n    remove: noop, // マップ破棄時に呼び出し\n    update: noop, // 現在のバージョンでは呼び出されない\n    setOpacity,\n    setVisible,\n    setZIndex,\n    setActive, // メニュー操作でトグル\n  };\n}\n","/* eslint-disable */\n// import { SampleLayer } from \"./SampleLayer\";\nimport { ShareLayer } from \"./ShareLayer\";\nimport { RTCLayer } from \"./RTCLayer\";\nimport { memoLayer } from \"./MemoLayer\";\nimport { DrawLayer } from \"./DrawLayer\";\nimport { SearchLayer } from \"./SearchLayer\";\nimport { ManageLayer } from \"./ManageLayer\";\n// import { memoLayerModule } from \"./MemoLayer\";\nimport { locationLayer } from \"./locationLayer\";\nimport { trackLayerModule } from \"./TrackLayer\";\nimport { weatherLayer } from \"./WeatherLayer\";\nimport { hazardMapLayer } from \"./HazardMapLayer\";\nimport { chatLayerModule } from \"./ChatLayer/index\";\nimport { reviewLayer } from \"./ReviewLayer\";\n\nexport default [\n  // {\n  //   name: \"SampleLayer\",                     //レイヤ名\n  //   isDisplayLayerMenue: true,               //レイヤメニューに表示するかどうか\n  //   displayname: \"サンプルレイヤ\",            //レイヤメニューで表示される名前\n  //   layer: SampleLayer(),                    //import\n  //   icon: require(\"@/assets/setting10.png\"), //メニューのアイコン\n  //   comfirme: true                           //終了する際に処理があるか\n  // },\n  {\n    name: \"ShareLayer\",\n    isDisplayLayerMenue: false,\n    displayname: \"共有\",\n    layer: ShareLayer(),\n    icon: require(\"./ShareLayer/assets/share@1x.png\"),\n    comfirme: true,\n    addMenu: true,\n  },\n  {\n    name: \"MemoLayer\",\n    isDisplayLayerMenue: true,\n    displayname: \"メモ\",\n    visible: true,\n    opacity: 1.0,\n    zIndex: 3,\n    layer: memoLayer(),\n    icon: require(\"./MemoLayer/assets/menu_memo@1x.png\"),\n    comfirme: false,\n    addMenu: true,\n    search: true,\n  },\n  {\n    name: \"DrawLayer\",\n    isDisplayLayerMenue: true,\n    displayname: \"手書き\",\n    visible: true,\n    opacity: 1.0,\n    zIndex: 0,\n    layer: DrawLayer(),\n    icon: require(\"./DrawLayer/assets/menu_hand@1x.png\"),\n    comfirme: false,\n    addMenu: true,\n  },\n  {\n    name: \"HazardMapLayer\",\n    isDisplayLayerMenue: true,\n    displayname: \"ハザードマップ\",\n    visible: false,\n    opacity: 0.7,\n    zIndex: 2,\n    layer: hazardMapLayer(),\n    icon: require(\"@/assets/hazardmap.png\"),\n    comfirme: false,\n    addMenu: false,\n  },\n  {\n    name: \"WeatherLayer\",\n    isDisplayLayerMenue: true,\n    displayname: \"高解像度降水\",\n    visible: false,\n    opacity: 0.7,\n    zIndex: 3,\n    layer: weatherLayer(),\n    icon: require(\"@/assets/umbrella.png\"),\n    comfirme: false,\n    addMenu: false,\n  },\n  {\n    name: \"SearchLayer\",\n    isDisplayLayerMenue: false,\n    displayname: \"総合検索\",\n    layer: SearchLayer(),\n    icon: require(\"@/assets/icon_search@2x.png\"),\n    comfirme: false,\n    addMenu: true,\n  },\n  {\n    name: \"ManageLayer\",\n    isDisplayLayerMenue: false,\n    displayname: \"レイヤ管理\",\n    layer: ManageLayer(),\n    icon: require(\"./ManageLayer/assets/layer10.png\"),\n    comfirme: false,\n    addMenu: true,\n  },\n  {\n    name: \"locationLayer\",\n    isDisplayLayerMenue: true,\n    displayname: \"ロケーション\",\n    visible: true,\n    opacity: 0.7,\n    zIndex: 2,\n    layer: locationLayer(),\n    icon: require(\"./locationLayer/assets/location10.png\"),\n    comfirme: false,\n    addMenu: false,\n  },\n  {\n    name: \"TrackLayer\",\n    isDisplayLayerMenue: true,\n    displayname: \"軌跡\",\n    visible: false,\n    opacity: 1.0,\n    zIndex: 1,\n    layer: trackLayerModule(),\n    icon: require(\"@/assets/NEW/menu_track@1x.png\"),\n    comfirme: false,\n    addMenu: false,\n    search: true,\n  },\n  {\n    name: \"ChatLayer\",\n    isDisplayLayerMenue: true,\n    displayname: \"チャット\",\n    visible: false,\n    opacity: 1.0,\n    zIndex: 4,\n    layer: chatLayerModule(),\n    icon: require(\"@/assets/chat10.png\"),\n    comfirme: false,\n    addMenu: false,\n    search: false,\n  },\n  // {\n  //   name: \"ReviewLayer\",\n  //   isDisplayLayerMenue: false,\n  //   displayname: \"クロノロジー\",\n  //   visible: true,\n  //   opacity: 1.0,\n  //   zIndex: 1,\n  //   layer: reviewLayer(),\n  //   icon: require(\"@/assets/replay.png\"),\n  //   comfirme: false,\n  //   addMenu: true,\n  //   search: false,\n  //   group0Menu: true,\n  // },\n  // {\n  //   name: \"RTCLayer\",\n  //   layer: RTCLayer(),\n  //   icon: null,\n  //   comfirme: true\n  // }\n  // {\n  //   name: \"MemoLayer\",\n  //   layer: memoLayerModule(),\n  //   icon: require(\"./MemoLayer/assets/menu_memo@1x.png\")\n  // }\n];\n","<template>\n  <div id=\"mapLayerMenu\">\n    <div>\n      <!-- メニューボタン・戻るボタン 兼用 -->\n      <button\n        v-on:click=\"backBtnClick\"\n        class=\"circleBtn\"\n        v-bind:title=\"backButtonTitle\"\n      >\n        <img v-bind:src=\"backButtonSrc\" />\n      </button>\n    </div>\n    <!-- 軌跡  -->\n    <!-- <div v-show=\"showMapMenu && !inSubMenu\"> -->\n    <!-- 追加ルレイヤ  -->\n    <!-- <template v-for=\"layer in layerModules\"> -->\n    <template v-for=\"layer in menus\">\n      <!-- <div v-show=\"showMapMenu && !inSubMenu\" :key=\"layer.name\"> -->\n      <!-- グループ0（検証グループ）で表示されるメニューを分ける。 -->\n      <div\n        v-show=\"showMapMenu && !inSubMenu && layer.addMenu\"\n        :key=\"layer.name\"\n      >\n        <button\n          @click=\"activate(layer)\"\n          class=\"circleBtn\"\n          v-bind:title=\"layer.displayname\"\n        >\n          <img :src=\"layer.icon\" />\n        </button>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport layerModules from \"@/modules/layers\";\nimport ModalDialog from \"@/components/ModalDialog.vue\";\nimport { drawEvent } from \"@/modules/DrawLayer/index.js\";\n\n//                = 1 2 3\n// showMapMenu  : X o x x\n// inSubMenu    : X x o x\n// showWriteMenu: X x x o\n\n// @todo 用語の整理\nexport default {\n  data() {\n    return {\n      showMapMenu: false,\n      showWriteMenu: false,\n      // active_share: false,\n      // show_share_menu: false,\n      // inSubMenu: false,\n      // show_exit_dialog: false,\n      // current_subMenu: \"\",\n      // confirme_subMenus: [\"ShareLayer\"]\n    };\n  },\n  props: [\"drawLineColor\", \"drawLineSize\", \"writeShape\"],\n  mounted() {},\n  watch: {\n    inSubMenu: function (in_menu) {\n      if (!in_menu) {\n        this.showWriteMenu = false;\n        this.$emit(\"toggleWrite\", false);\n      } else if (in_menu == \"ShareLayer\") {\n        drawEvent.$emit(\"SETACTIVE\", false);\n        this.showWriteMenu = false;\n        this.$emit(\"toggleWrite\", false);\n      } else {\n        this.showMapMenu = false;\n      }\n    },\n    group_id: function (new_id, old_id) {\n      if (new_id !== 0 && old_id === 0) {\n        this.backBtnClick();\n      }\n    },\n  },\n  methods: {\n    backBtnClick() {\n      this.$store.state.sound_on();\n\n      if (!this.inSubMenu && !this.showWriteMenu) {\n        this.showMapMenu = !this.showMapMenu;\n      } else if (this.showWriteMenu && !this.showMapMenu) {\n        this.$store.commit(\"amt/setSubMenu\", null);\n        this.showWriteMenu = false;\n        this.$emit(\"toggleWrite\", false);\n      } else if (this.inSubMenu == \"ShareLayer\") {\n        this.$store.commit(\"amt/comfirme_exit\", true);\n      } else {\n        // } else if (this.inSubMenu != null && !this.showWriteMenu && !this.showMapMenu) {\n        const currentModule = this.layerModules.find(\n          (m) => m.name == this.inSubMenu\n        );\n        if (currentModule && currentModule.comfirme) {\n          this.$store.commit(\"amt/comfirme_exit\", true);\n        } else {\n          currentModule.layer.setActive(false);\n        }\n        this.$store.commit(\"amt/setSubMenu\", null);\n      }\n    },\n    writeBtnClick() {\n      this.$store.state.sound_on();\n      // 機能選択メニューを非表示にして代わりに手書き機能のメニューを表示\n      this.showWriteMenu = true;\n      this.showMapMenu = false;\n      this.$store.commit(\"amt/setSubMenu\", \"WriteLayer\");\n      // this.inSubMenu = true;\n      // this.$store.commit(\"amt/setSubMenu\", true);\n      // 手書きモード開始のイベントを発火\n      this.$emit(\"toggleWrite\", true);\n    },\n    backFromWriteBtnClick() {\n      // 手書き機能のメニューを非表示にして機能選択メニューを表示\n      this.showWriteMenu = !this.showWriteMenu;\n      // 手書きモード開始のイベントを発火\n      this.$emit(\"toggleWrite\", false);\n    },\n    activate(item) {\n      const layer = item.layer;\n      layer.setActive(true);\n      // this.inSubMenu = true;\n      // this.$store.commit(\"amt/setSubMenu\", true);\n      // this.current_subMenu = item.name;\n    },\n  },\n  computed: {\n    inSubMenu() {\n      return this.$store.getters[\"amt/subMenu\"];\n    },\n    layerModules() {\n      return layerModules;\n    },\n    menus() {\n      return layerModules.filter((layer) => {\n        return this.group_id === 0 ? layer.group0Menu : !layer.group0Menu;\n      });\n    },\n    backButtonSrc() {\n      return !this.showMapMenu && !this.inSubMenu && !this.showWriteMenu\n        ? require(\"@/assets/NEW/menu@1x.png\")\n        : require(\"@/assets/menu_return@1x.png\");\n    },\n    backButtonTitle() {\n      return !this.showMapMenu && !this.inSubMenu && !this.showWriteMenu\n        ? \"メニュー\"\n        : \"閉じる\";\n    },\n    group_id() {\n      return this.$store.getters[\"group_id\"];\n    },\n  },\n};\n</script>\n\n<style>\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  /* @media screen and (orientation: portrait) { */\n  /* 縦向き */\n  div#mapLayerMenu {\n    flex-direction: column-reverse;\n  }\n}\n@media screen and (min-width: 480px) {\n  /* @media screen and (orientation: landscape) { */\n  /* 横向き */\n  div#mapLayerMenu {\n    flex-direction: row;\n  }\n}\n\ndiv#mapLayerMenu {\n  /* position: absolute; */\n  position: fixed;\n  display: flex;\n  z-index: 100;\n  padding-left: 10px;\n  bottom: 20px;\n  /* overflow: visible; */\n}\ndiv#mapLayerMenu::-webkit-scrollbar {\n  display: none;\n}\n#mapLayerMenu .circleBtn {\n  margin-right: 5px;\n  margin-top: 5px;\n}\n/* スペースキーをPTT通話ボタンにした際にボタンがグレーになったままになるのでコメントアウト */\n/* button.circleBtn:active {\n  background-color: darkgray;\n} */\nbutton.circleBtn:hover {\n  /* background-color: #2a3dc0; */\n  filter: drop-shadow(8px 8px 5px #333);\n}\nbutton.circleBtn img {\n  width: 1.9rem;\n  height: 1.9rem;\n}\nbutton.circleBtnSelected {\n  background-color: #c03838;\n}\nbutton.circleBtnDisabled {\n  background-color: darkgray;\n}\n/*\ndiv::-webkit-scrollbar {\n  display: none;\n}\n*/\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MapMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MapMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapMenu.vue?vue&type=template&id=5eddaa18&\"\nimport script from \"./MapMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./MapMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapMenu.vue?vue&type=style&index=0&id=5eddaa18&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"waku1\"},[_c('video',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.is_local_video_showed),expression:\"is_local_video_showed\"}],ref:\"localVideo\",staticClass:\"my_video_box\",class:{ front_class: _vm.is_front },attrs:{\"muted\":\"\",\"autoplay\":\"\",\"playsinline\":\"\"},domProps:{\"muted\":true},on:{\"click\":_vm.toggle}}),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.is_showed_rec_btn),expression:\"is_showed_rec_btn\"}],staticClass:\"btn-rec\",class:{ btnOnRec: _vm.rec_flag },on:{\"click\":_vm.on_rec}},[_vm._v(\" \"+_vm._s(_vm.rec_flag ? \"NOW ON REC\" : \"REC\")+\" \")]),_c('div',{staticClass:\"local_settings\"},[_vm._v(\" \"+_vm._s(_vm.settings_height)+\"@\"+_vm._s(_vm.settings_frameRate)+\"fps \")])]),_c('canvas',{ref:\"dummyVideo\",staticClass:\"dummyVideo\"}),_c('modalDialog',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.is_dialog_visible),expression:\"is_dialog_visible\"}]},[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"カメラを選択してください \")]),_c('span',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_c('ul',{staticClass:\"list-group\"},_vm._l((_vm.video_devices),function(video_device,index){return _c('li',{key:video_device.devideId,staticClass:\"list-group-item\",class:video_device.deviceId == _vm.cur_constraints.video.deviceId\n              ? 'active'\n              : '',on:{\"click\":function($event){return _vm.select_device(index)}}},[_vm._v(\" \"+_vm._s(video_device.label)+\" \")])}),0)]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"waku1\">\n      <video\n        v-show=\"is_local_video_showed\"\n        ref=\"localVideo\"\n        muted\n        autoplay\n        playsinline\n        @click=\"toggle\"\n        class=\"my_video_box\"\n        :class=\"{ front_class: is_front }\"\n      ></video>\n      <button\n        v-show=\"is_showed_rec_btn\"\n        class=\"btn-rec\"\n        :class=\"{ btnOnRec: rec_flag }\"\n        @click=\"on_rec\"\n      >\n        {{ rec_flag ? \"NOW ON REC\" : \"REC\" }}\n      </button>\n      <div class=\"local_settings\">\n        {{ settings_height }}@{{ settings_frameRate }}fps\n      </div>\n    </div>\n    <canvas ref=\"dummyVideo\" class=\"dummyVideo\"></canvas>\n    <!-- メッセージ用モーダルダイアログ -->\n    <modalDialog v-show=\"is_dialog_visible\">\n      <span slot=\"header\">カメラを選択してください </span>\n      <span slot=\"body\">\n        <ul class=\"list-group\">\n          <li\n            class=\"list-group-item\"\n            :class=\"\n              video_device.deviceId == cur_constraints.video.deviceId\n                ? 'active'\n                : ''\n            \"\n            v-for=\"(video_device, index) in video_devices\"\n            :key=\"video_device.devideId\"\n            @click=\"select_device(index)\"\n          >\n            {{ video_device.label }}\n          </li>\n        </ul>\n      </span>\n      <div slot=\"footer\">\n        <!-- <button class=\"btn btn-primary\" @click=\"close_msg_dialog\">はい</button> -->\n      </div>\n    </modalDialog>\n  </div>\n</template>\n\n<!--\nStreamIo.vue\n(1)ローカル側のメディアデバイスからストリームを取得する。\n(2)取得後、ストリームを$store.state.rtcへ登録し、外部コンポーネントから利用する。\n(3)取得後、映像のみ、video要素に投影する。\n   このvideo要素は、非表示時、投影を停止する。\n   クリックで、カメラの前面/背面の切替を行う。\n-->\n<script>\n/* eslint-disable */\nimport ModalDialog from \"@/components/ModalDialog.vue\";\nimport { trackEvent } from \"../modules/TrackLayer\";\n\nconst URL_UPLOAD = \"/api/callrec\";\nconst URL_FILE_NAME = \"/api/on_video\";\nconst TIMESLICE = 1000;\n\nexport default {\n  components: {\n    ModalDialog,\n  },\n  data() {\n    return {\n      facingModeId: null,\n      userConstraints: {\n        video: {\n          facingMode: \"user\",\n          width: this.video_width,\n          frameRate: this.video_frame,\n        },\n        audio: true,\n      },\n      envConstraints: {\n        video: {\n          facingMode: \"environment\",\n          width: this.video_width,\n          frameRate: this.video_frame,\n        },\n        audio: true,\n      },\n      theta_constraints: {\n        audio: true,\n        video: {\n          width: 3840,\n          frameRate: 30,\n        },\n      },\n      cur_constraints: {\n        audio: true,\n        video: {\n          width: this.video_width,\n          frameRate: this.video_frame,\n        },\n      },\n      audio_stream: null,\n      video_stream: null,\n      video_devices: [],\n      dummy_video_stream: null,\n      is_dialog_visible: false,\n      recorder: null,\n      rec_flag: false,\n      timestamp: \"\",\n      last_timestamp: \"\",\n      last_last_timestamp: \"\",\n      local_settings: null,\n      clear_id: {},\n    };\n  },\n  beforeDestroy() {\n    Object.keys(this.clear_id).forEach((id) => {\n      clearInterval(this.clear_id[id]);\n    });\n  },\n  async mounted() {\n    await this.get_stream(this.userConstraints);\n    this.whiteNoise();\n    this.$store.commit(\"rtc/set_func_toggole_cam\", this.toggle);\n    this.$store.commit(\"rtc/set_func_mic_on_off\", this.mic);\n\n    trackEvent.$on(\"ON_TIME\", ({ timestamp, last_timestamp }) => {\n      this.timestamp = timestamp;\n      this.last_timestamp = last_timestamp;\n    });\n    trackEvent.$on(\"ON_VIDEO\", () => {\n      console.log(`録画開始：${this.myId}_${this.last_timestamp}.webm`);\n      if (this.recorder) {\n        if (this.recorder.state === \"recording\") this.recorder.stop();\n        if (this.rec_flag) this.recorder.start(TIMESLICE);\n      }\n    });\n    this.clear_id[\"video_settings\"] = setInterval(() => {\n      if (this.$refs.localVideo && this.$refs.localVideo.srcObject) {\n        const [track] = this.$refs.localVideo.srcObject.getVideoTracks();\n        this.local_settings = track.getSettings();\n      }\n    }, 1000);\n  },\n  computed: {\n    settings_height() {\n      return this.local_settings ? this.local_settings.height : 0;\n    },\n    settings_frameRate() {\n      return this.local_settings\n        ? Math.floor(this.local_settings.frameRate)\n        : 0;\n    },\n    is_front() {\n      return this.cur_constraints.video.deviceId === this.facingModeId;\n    },\n    is_local_video_showed() {\n      return this.$store.getters[\"rtc/local_show\"];\n    },\n    video_devices_len() {\n      return this.$store.getters[\"ptt/devices_len\"];\n    },\n    video_width() {\n      return this.$store.getters[\"video_width\"];\n    },\n    video_frame() {\n      return this.$store.getters[\"video_frame\"];\n    },\n    socketio() {\n      return this.$store.getters[\"socketio\"];\n    },\n    myId() {\n      return this.$store.getters[\"amt/myId\"];\n    },\n    on_chronology() {\n      return this.$store.getters[\"on_chronology\"];\n    },\n    is_showed_rec_btn() {\n      return this.is_local_video_showed || this.on_chronology ? true : false;\n    },\n  },\n  watch: {\n    is_local_video_showed() {\n      if (this.is_local_video_showed) {\n        this.$refs.localVideo.srcObject = this.video_stream;\n      } else {\n        this.$refs.localVideo.srcObject = null;\n      }\n    },\n  },\n  methods: {\n    whiteNoise() {\n      const canvas = this.$refs.dummyVideo;\n      const ctx = canvas.getContext(\"2d\");\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      let p = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      requestAnimationFrame(function draw() {\n        for (var i = 0; i < p.data.length; i++) {\n          p.data[i++] = p.data[i++] = p.data[i++] = Math.random() * 255;\n        }\n        ctx.putImageData(p, 0, 0);\n        requestAnimationFrame(draw);\n      });\n      this.$store.commit(\n        \"rtc/set_dummy_video_stream\",\n        canvas.captureStream(20)\n      );\n    },\n    async re_get_stream() {\n      if (!this.video_stream.active) {\n        await this.stop_stream();\n        await this.get_stream(this.userConstraints);\n      }\n    },\n    async get_stream(construction) {\n      console.log(\"★★★★★★★★★  GET_STREAM  ★★★★★★★★★★★★★\");\n      console.dir(construction);\n\n      try {\n        if (construction.video) {\n          const video_construction = {\n            video: construction.video,\n            audio: false,\n          };\n          this.video_stream = await navigator.mediaDevices.getUserMedia(\n            video_construction\n          );\n          this.$refs.localVideo.srcObject = this.video_stream;\n          const [video_track] = this.video_stream.getVideoTracks();\n          video_track.contentHint = \"detail\";\n          const video_settings = video_track ? video_track.getSettings() : null;\n\n          // 現状のカメラ設定を保存します。\n          // this.cur_constraints.video = video_settings\n          //   ? {\n          //       width: video_settings.width,\n          //       frameRate: video_settings.frameRate,\n          //       deviceId: video_settings.deviceId,\n          //     }\n          //   : false;\n          // 自カメラ映像の左右反転をするのが、user。それ以外はenvironmentとする\n          // 渡されるパラメータでfacingModeがuserの場合には、そのdeviceIdとの紐づけをする\n          if (construction.video.facingMode === \"user\") {\n            this.facingModeId = video_settings.deviceId;\n          }\n          // this.$store.commit(\"rtc/set_local_video_stream\", this.video_stream);\n          this.$store.commit(\n            \"rtc/set_local_video_stream\",\n            new MediaStream([video_track])\n          );\n        }\n      } catch (err) {\n        this.$store.commit(\"rtc/set_local_video_stream\", new MediaStream([]));\n        console.dir(construction);\n        console.log(err);\n      }\n\n      try {\n        if (construction.audio) {\n          const audio_construction = {\n            video: false,\n            audio: construction.audio,\n          };\n          this.audio_stream = await navigator.mediaDevices.getUserMedia(\n            audio_construction\n          );\n          const [audio_track] = this.audio_stream.getAudioTracks();\n          const audio_settings = audio_track ? audio_track.getSettings() : null;\n          this.cur_constraints.audio = audio_settings ? true : false;\n          this.$store.commit(\"rtc/set_local_audio_stream\", this.audio_stream);\n        }\n      } catch (err) {\n        this.$store.commit(\"rtc/set_local_audio_stream\", new MediaStream([]));\n        console.dir(construction);\n        console.log(err);\n      }\n    },\n    stop_stream(kind) {\n      return new Promise((resolev, reject) => {\n        // const stream = this.$refs.localVideo.srcObject;\n        const stream = kind == \"audio\" ? this.audio_stream : this.video_stream;\n        stream.getTracks().forEach((track) => {\n          track.stop();\n        });\n        if (kind != \"audio\") {\n          this.$refs.localVideo.srcObject = null;\n        }\n        resolev();\n      });\n    },\n    // カメラの前面/背面を切り替え\n    async toggle_cam(face_mode) {\n      if (!face_mode) {\n        const device_list = await navigator.mediaDevices.enumerateDevices();\n        this.video_devices = device_list.filter((device) => {\n          return device.kind == \"videoinput\";\n        });\n        console.log(`カメラの台数＝${this.video_devices.length}`);\n        console.dir(this.video_devices);\n\n        // まず、現在の選択デバイスを取得する。\n        const cur_deviceId = this.video_stream\n          .getTracks()[0]\n          .getSettings().deviceId;\n        delete this.cur_constraints.video.facingMode;\n\n        // カメラが1台だった場合、何もしない。\n        if (this.video_devices.length == 2) {\n          // カメラが2台だった場合、現在のカメラじゃない方をnext_deviceとして拾う。\n          const [next_device] = this.video_devices.filter((video_device) => {\n            return video_device.deviceId !== cur_deviceId;\n          });\n          this.cur_constraints.video.deviceId = next_device.deviceId;\n        } else if (this.video_devices.length > 2) {\n          // カメラが3台以上の場合、ダイアログを開いて選択させる。\n          this.is_dialog_visible = true;\n        }\n      } else {\n        // 指定があれば、指定を入力する。\n        this.cur_constraints.video.facingMode = face_mode;\n      }\n      await this.stop_stream();\n      // return await this.get_stream(this.cur_constraints);\n      await this.get_stream(this.cur_constraints);\n    },\n    close_msg_dialog() {\n      this.is_dialog_visible = false;\n    },\n    async select_device(index) {\n      await this.stop_stream();\n      if (this.video_devices[index].label === \"RICOH THETA UVC\") {\n        this.theta_constraints.video.deviceId =\n          this.video_devices[index].deviceId;\n        await this.get_stream(this.theta_constraints);\n      } else {\n        this.cur_constraints.video.deviceId =\n          this.video_devices[index].deviceId;\n        await this.get_stream(this.cur_constraints);\n      }\n      // this.$refs.localVideo.srcObject = await this.get_stream(\n      //   this.cur_constraints\n      // );\n      this.is_dialog_visible = false;\n    },\n    async toggle(ev) {\n      this.$store.state.sound_on();\n      // this.$refs.localVideo.srcObject = await this.toggle_cam();\n      await this.toggle_cam();\n    },\n    async mic(mode) {\n      if (mode == \"stop\") {\n        await this.stop_stream(\"audio\");\n        this.cur_constraints.audio = false;\n      } else {\n        this.cur_constraints.audio = true;\n      }\n      await this.get_stream(this.cur_constraints);\n      // return await this.get_stream(this.cur_constraints);\n    },\n    async on_rec() {\n      // 録画開始（rec_flag=trueで開始。falseで停止\n      this.rec_flag = !this.rec_flag;\n      console.log(`ON_REC: ${this.rec_flag}`);\n\n      if (this.rec_flag) {\n        // 録画初期化（MediaRecorderの準備）\n        this.init_rec(this.video_stream);\n        this.recorder.start(TIMESLICE);\n      } else {\n        if (this.recorder && this.recorder.state === \"recording\") {\n          this.recorder.stop();\n        }\n      }\n      // 録画開始状況を皆にお知らせ\n      this.$store.commit(\"set_rec_flag\", this.rec_flag);\n    },\n    init_rec(stream) {\n      if (!stream.active) return;\n\n      let chunks = [];\n      const myType = \"video/webm\";\n      this.recorder = new MediaRecorder(stream);\n      this.recorder.ondataavailable = (ev) => {\n        chunks.push(ev.data);\n      };\n      this.recorder.onstart = async () => {\n        const file_name = `${this.myId}_${this.timestamp}.webm`;\n        const res = await fetch(URL_FILE_NAME, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            id: this.myId,\n            on_video: true,\n          }),\n        });\n      };\n      this.recorder.onstop = async () => {\n        let blob = new Blob(chunks, { type: myType });\n        const _timestamp =\n          this.last_timestamp === this.last_last_timestamp\n            ? this.timestamp\n            : this.last_timestamp;\n        const file_name = `${this.myId}_${_timestamp}.webm`;\n        if (blob.size > 8192) {\n          try {\n            const res = await this.post_file(file_name, blob);\n          } catch (err) {\n            console.log(err);\n          }\n        }\n        if (!this.rec_flag) {\n          const res = await fetch(URL_FILE_NAME, {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n              id: this.myId,\n              on_video: false,\n            }),\n          });\n        }\n        chunks = [];\n        this.last_last_timestamp = this.last_timestamp;\n      };\n      this.recorder.onerror = (ev) => {\n        console.log(ev.error.name);\n        this.$bvToast.toast(`録画にエラーが発生しました:${ev.error.name}`, {\n          title: \"AirMultiTalk\",\n          toaster: \"b-toaster-top-center\",\n          variant: \"danger\",\n          autoHideDelay: 3000,\n          appendToast: false,\n        });\n      }\n    },\n    async post_file(file_name, b64) {\n      let formData = new FormData();\n      formData.append(\"data\", b64, encodeURIComponent(file_name));\n      console.log(...formData.entries());\n\n      return fetch(URL_UPLOAD, {\n        method: \"post\",\n        mode: \"no-cors\",\n        body: formData,\n      });\n    },\n  },\n};\n</script>\n\n<style>\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  /* スマホ */\n  .my_video_box {\n    width: 5rem;\n  }\n}\n@media screen and (min-width: 480px) {\n  /* スマホ */\n  .my_video_box {\n    width: 10rem;\n  }\n}\n.local_settings {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  font-size: 1rem;\n  color: white;\n  background-color: black;\n}\n.my_video_box {\n  position: relative;\n}\n/* .my_video_box {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 20;\n} */\n.my_video {\n  width: 100%;\n  z-index: 3;\n}\n.dummyVideo {\n  position: absolute;\n  display: none;\n  /* z-index: 0; */\n  width: 320px;\n  height: 240px;\n}\n.front_class {\n  transform: scaleX(-1);\n}\n.back_class {\n  transform: scaleX(1);\n}\n.waku1 {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 20;\n}\n.btn-rec {\n  z-index: 20;\n  /* left:  */\n  bottom: 0px;\n  position: relative;\n  display: inline-block;\n  padding: 7px 20px;\n  border-radius: 25px;\n  border: 0px;\n  text-decoration: none;\n  color: #fff;\n  background-image: linear-gradient(45deg, #07b9ff 0%, #39a2c0 100%);\n  transition: 0.4s;\n}\n/* .btn-rec:hover {\n  background-image: linear-gradient(45deg, #FFC107 0%, #f76a35 100%);\n} */\n.btnOnRec {\n  background-image: linear-gradient(45deg, #ffc107 0%, #ff8b5f 100%);\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StreamIo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StreamIo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StreamIo.vue?vue&type=template&id=2d95632a&\"\nimport script from \"./StreamIo.vue?vue&type=script&lang=js&\"\nexport * from \"./StreamIo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StreamIo.vue?vue&type=style&index=0&id=2d95632a&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.map_click_visible),expression:\"map_click_visible\"}],attrs:{\"id\":\"view_click_elm\"}},[_c('div',{staticClass:\"click_content_box\"},[_c('div',{staticClass:\"click_content_head\"},[_c('p',[_vm._v(\"マップアイコン一覧\")]),_c('button',{staticClass:\"hiddenBtn\",attrs:{\"title\":\"閉じる\"}},[_c('img',{staticClass:\"btnImg\",attrs:{\"src\":require(\"@/assets/close05.png\")},on:{\"click\":function($event){return _vm.close_button()}}})])]),_c('div',{staticClass:\"click_content_list\"},[_vm._l((this.click_targets),function(click_targets){return [_c('div',{key:click_targets.id,staticClass:\"repeat_content\",on:{\"click\":function($event){return click_targets.click(click_targets.id)}}},[_c('div',{staticClass:\"position_relative\"},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(click_targets.icon),expression:\"click_targets.icon\"}],staticClass:\"status_icon\",attrs:{\"src\":click_targets.icon}}),_c('div',{staticClass:\"main_content\"},[(click_targets.type == 'img')?_c('div',[_c('img',{staticClass:\"main_img\",attrs:{\"src\":click_targets.img}})]):(click_targets.type == 'text')?_c('div',[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(click_targets.text),expression:\"click_targets.text\"}],staticClass:\"main_text\",attrs:{\"readonly\":\"\"},domProps:{\"value\":(click_targets.text)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(click_targets, \"text\", $event.target.value)}}})]):_vm._e()])]),_c('div',{staticClass:\"info_text\"},[_vm._v(\" \"+_vm._s(click_targets.info)+\" \")])])]})],2)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"view_click_elm\" v-show=\"map_click_visible\">\n    <div class=\"click_content_box\">\n      <div class=\"click_content_head\">\n        <p>マップアイコン一覧</p>\n        <button class=\"hiddenBtn\" title=\"閉じる\">\n          <!-- 非表示化するボタン -->\n          <img\n            src=\"@/assets/close05.png\"\n            class=\"btnImg\"\n            @click=\"close_button()\"\n          />\n        </button>\n      </div>\n      <div class=\"click_content_list\">\n        <!-- クリックされた物一覧 -->\n        <template v-for=\"click_targets in this.click_targets\">\n          <div\n            v-bind:key=\"click_targets.id\"\n            @click=\"click_targets.click(click_targets.id)\"\n            class=\"repeat_content\"\n          >\n            <div class=\"position_relative\">\n              <!-- 左下のアイコン -->\n              <img\n                v-show=\"click_targets.icon\"\n                class=\"status_icon\"\n                v-bind:src=\"click_targets.icon\"\n              />\n\n              <!-- サムネイルの画像や本文 -->\n              <div class=\"main_content\">\n                <div v-if=\"click_targets.type == 'img'\">\n                  <!-- メイン画像 -->\n                  <img class=\"main_img\" :src=\"click_targets.img\" />\n                </div>\n                <div v-else-if=\"click_targets.type == 'text'\">\n                  <!-- メインテキスト -->\n                  <textarea\n                    class=\"main_text\"\n                    v-model=\"click_targets.text\"\n                    readonly\n                  />\n                </div>\n              </div>\n            </div>\n            <!-- 注釈テキスト -->\n            <div class=\"info_text\">\n              {{ click_targets.info }}\n            </div>\n          </div>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport $store from \"@/store\";\nimport { memoEvent } from \"@/modules/MemoLayer/index.js\";\n\nexport default {\n  data() {\n    return {\n      isVisible: false,\n    };\n  },\n  // mounted() {\n  //   console.log(\"読み込みが行われました。\");\n  // },\n  methods: {\n    close_button() {\n      // メモのデータをサーバへ送信（反映）\n      // console.log(this.$store.state.memo_update);\n      for (let key in this.$store.state.memo_update) {\n        // console.log(key);\n        // console.log(JSON.stringify(this.$store.state.memo_update[key]));\n        if (0 === Object.keys(this.$store.state.memo_update[key]).length) {\n          // 削除の場合\n          memoEvent.$emit(\"DEL_MEMO\", key);\n        } else {\n          memoEvent.$emit(\"UPDATE_MEMO\", this.$store.state.memo_update[key]);\n        }\n      }\n      // 地図に戻る時にクリア\n      this.$store.commit(\"resetMemoUpdate\");\n\n      // 取得したデータのリセット\n      this.$store.commit(\"resetClickTargets\");\n      this.$store.commit(\"hiddenClickList\");\n    },\n  },\n  computed: {\n    map_click_visible() {\n      return this.$store.state.map_click_visible;\n    },\n    click_targets() {\n      return this.$store.state.click_targets;\n    },\n  },\n};\n</script>\n\n<style>\n.click_content_box {\n  box-sizing: border-box;\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.92);\n  z-index: 200;\n  color: rgb(255, 255, 255);\n  display: grid;\n  grid-template-rows: 9% 80% 11%;\n  grid-template-columns: 15% 70% 15%;\n}\n\n/* 表示するコンテンツの場所を指定 */\n.click_content_list {\n  grid-row: 2 / 3;\n  grid-column: 2 / 3;\n  overflow: auto;\n}\n\n/* ヘッダー */\n.click_content_head {\n  width: 100%;\n  position: relative;\n  font-size: 18px;\n  grid-row: 1/3;\n  grid-column: 2/3;\n  overflow: auto;\n  padding: 20px;\n}\n.click_content_head div:first-child {\n  position: absolute;\n  top: 10px;\n  left: 40px;\n}\n.click_content_head p {\n  margin: 0;\n}\n.click_content_head button {\n  width: 65px;\n  height: 65px;\n  position: absolute;\n  top: 0px;\n  right: 30px;\n}\n/* 閉じるボタン */\n.click_content_head img {\n  width: 45px;\n  height: 45px;\n}\nbutton.hiddenBtn {\n  color: rgb(255, 255, 255);\n  background: rgba(42, 121, 142, 0);\n  border-width: initial;\n  border-style: none;\n  border-color: initial;\n  border-image: initial;\n  border-radius: 3rem;\n  transition: background-color 0s ease 0s, color 0.3s ease-in 0s;\n  outline: none !important;\n}\n\n.repeat_content {\n  width: 16%;\n  height: auto;\n  float: left;\n  text-align: center;\n}\n\n.main_content {\n  position: relative;\n  width: 80%;\n  padding-top: 75%;\n  overflow: hidden;\n  margin: 0 auto;\n}\n.main_img {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 100%;\n  -ms-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n  max-width: 150%;\n  max-height: 150%;\n}\n.main_text {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -ms-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n  max-width: 150%;\n  max-height: 150%;\n  width: 100%;\n  height: 100%;\n}\n\n.position_relative {\n  position: relative;\n}\n\n.status_icon {\n  position: absolute;\n  width: 30px;\n  z-index: 1;\n  bottom: -3px;\n  left: 0px;\n}\n\n.info_text {\n  font-size: 12px;\n  margin-top: 10px;\n  margin-bottom: 20px;\n}\n\n/* スマホレイアウト */\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  .click_content_box {\n    grid-template-rows: 9% 88% 3%;\n    grid-template-columns: 0% 100% 0%;\n  }\n  .repeat_content {\n    width: 50%;\n    padding: 5px;\n    height: auto;\n    float: left;\n  }\n  .click_content_head {\n    font-size: 20px;\n  }\n  .click_content_head button {\n    right: 0px;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MapClickList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MapClickList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapClickList.vue?vue&type=template&id=322176da&\"\nimport script from \"./MapClickList.vue?vue&type=script&lang=js&\"\nexport * from \"./MapClickList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapClickList.vue?vue&type=style&index=0&id=322176da&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ViewLayersLightbox),expression:\"ViewLayersLightbox\"}],staticClass:\"ViewLayersLightbox\"},[_c('div',{staticClass:\"ViewLayersLightbox_grid1\"},[_c('div',{staticClass:\"click_content_head\"},[_c('p',[(_vm.memo.kind === 'memo')?_c('span',[_vm._v(\" テキストメモ \")]):(_vm.memo.kind === 'video')?_c('span',[_vm._v(\" 動画メモ \")]):(_vm.memo.kind === 'photo')?_c('span',[_vm._v(\" 静止画メモ \")]):_vm._e(),_vm._v(\" 詳細情報の表示 \")]),_c('button',{staticClass:\"hiddenBtn\",attrs:{\"title\":\"閉じる\"}},[_c('img',{staticClass:\"btnImg\",attrs:{\"src\":require(\"@/assets/close05.png\")},on:{\"click\":function($event){return _vm.close_button()}}})])])]),_c('div',{staticClass:\"ViewLayersLightbox_grid2\"},[(_vm.show_text_box)?_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.view_content_text),expression:\"view_content_text\"}],ref:\"view_text\",staticClass:\"lightbox_content textarea\",attrs:{\"id\":\"view_content_text\",\"readonly\":\"\"},domProps:{\"value\":(_vm.view_content_text)},on:{\"input\":function($event){if($event.target.composing)return;_vm.view_content_text=$event.target.value}}}):_vm._e(),_vm._v(\" \"),(_vm.show_video_box)?_c('video',{ref:\"view_video\",staticClass:\"lightbox_content\",class:{ lightbox_video: _vm.video_vertical },attrs:{\"id\":\"view_content_video\",\"src\":'/memo/' + _vm.memo.id + '.webm',\"poster\":'/memo/' + _vm.memo.id + '_thumb.jpg',\"controls\":\"\",\"controlslist\":\"nodownload noremoteplayback\",\"disablePictureInPicture\":\"\",\"playsinline\":\"\"}}):_vm._e(),(_vm.show_photo_box)?_c('img',{ref:\"view_photo\",staticClass:\"lightbox_content\",class:{ lightbox_img: _vm.img_vertical },attrs:{\"id\":\"view_content_photo\",\"src\":'/memo/' + _vm.memo.id + '.jpg'}}):_vm._e()]),_c('div',{staticClass:\"ViewLayersLightbox_grid3\"},[_c('div',{staticClass:\"grid3_float\"},[_c('div',{staticClass:\"info_memo\"},[_c('p',[_vm._v(\"登録者 \"+_vm._s(_vm.memo.name))]),_c('p',[_vm._v(\"日付 \"+_vm._s(_vm.memo.date))])])]),_c('div',{staticClass:\"grid3_float\"},[_c('div',{staticClass:\"info_memo\"},[_c('p',[_vm._v(\"緯度 \"+_vm._s(_vm.memo.lat))]),_c('p',[_vm._v(\"経度 \"+_vm._s(_vm.memo.lng))])])]),_c('div',{staticClass:\"grid3_float\"},[_c('div',{staticClass:\"info_classify\"},[_c('p',{staticClass:\"memoclassify_header\"},[_vm._v(\"分類\")]),_c('b-form-select',{staticClass:\"classify_select\",attrs:{\"options\":_vm.classifyListObj,\"disabled\":!_vm.memo.display_flag},on:{\"change\":_vm.classify_change},model:{value:(_vm.classify_name),callback:function ($$v) {_vm.classify_name=$$v},expression:\"classify_name\"}})],1)]),_c('div',{staticClass:\"grid3_float\"},[_c('div',{staticClass:\"info_status\"},[_c('p',{staticClass:\"memostatus_header\"},[_vm._v(\"既読\")]),_c('p',{staticClass:\"memostatus_status\",attrs:{\"disabled\":!_vm.memo.display_flag},on:{\"click\":function($event){return _vm.memo_status()}}},[(_vm.memo.status == '既読')?_c('img',{staticClass:\"select_yes\",attrs:{\"src\":require(\"./assets/ico_check_on.png\"),\"alt\":\"既読\"}}):_c('img',{staticClass:\"select_no\",attrs:{\"src\":require(\"./assets/ico_check_off.png\"),\"alt\":\"未読\"}})])])]),(_vm.memo.kind !== 'memo')?_c('div',{staticClass:\"grid3_textarea\"},[_c('p',{staticClass:\"info_text_area\"},[_vm._v(\" \"+_vm._s(_vm.memo.info)+\" \")])]):_vm._e(),_c('div',{staticClass:\"grid3_absolute\"},[_c('p',{staticClass:\"download_can\",on:{\"click\":_vm.memo_download}},[(_vm.show_text_box && _vm.memo_downloadable)?_c('span',[_c('a',{attrs:{\"href\":'/memo/' + _vm.memo.id + '.txt',\"download\":\"\",\"title\":\"ダウンロード\"}},[_c('img',{attrs:{\"src\":require(\"./assets/ico_download.png\"),\"alt\":\"ダウンロードボタン\"}})])]):_vm._e(),(_vm.show_photo_box && _vm.memo_downloadable)?_c('span',[_c('a',{attrs:{\"href\":'/memo/' + _vm.memo.id + '.jpg',\"download\":\"\",\"title\":\"ダウンロード\"}},[_c('img',{attrs:{\"src\":require(\"./assets/ico_download.png\"),\"alt\":\"ダウンロードボタン\"}})])]):_vm._e(),(_vm.show_video_box && _vm.memo_downloadable)?_c('span',[_c('a',{attrs:{\"href\":'/memo/' + _vm.memo.id + '.webm',\"download\":\"\",\"title\":\"ダウンロード\"}},[_c('img',{attrs:{\"src\":require(\"./assets/ico_download.png\"),\"alt\":\"ダウンロードボタン\"}})])]):_vm._e()]),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.memo.display_flag),expression:\"memo.display_flag\"}],staticClass:\"trash_can\",attrs:{\"title\":\"削除\"},on:{\"click\":_vm.memo_delete}},[_c('img',{attrs:{\"src\":require(\"./assets/ico_trash.png\"),\"alt\":\"ゴミ箱\"}})])])]),(_vm.show_msg_dialog)?_c('modalDialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"メモの削除\")]),_c('span',{staticStyle:{\"color\":\"#333\"},attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(\" メモを削除します。 \")]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.back_memo()}}},[_vm._v(\"戻る\")]),_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.delete_memo()}}},[_vm._v(\"削除\")])])]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- メモの詳細画面 -->\n  <div v-show=\"ViewLayersLightbox\" class=\"ViewLayersLightbox\">\n    <div class=\"ViewLayersLightbox_grid1\">\n      <div class=\"click_content_head\">\n        <p>\n          <span v-if=\"memo.kind === 'memo'\"> テキストメモ </span>\n          <span v-else-if=\"memo.kind === 'video'\"> 動画メモ </span>\n          <span v-else-if=\"memo.kind === 'photo'\"> 静止画メモ </span>\n          詳細情報の表示\n        </p>\n        <button class=\"hiddenBtn\" title=\"閉じる\">\n          <img\n            src=\"@/assets/close05.png\"\n            class=\"btnImg\"\n            @click=\"close_button()\"\n          />\n        </button>\n      </div>\n    </div>\n    <div class=\"ViewLayersLightbox_grid2\">\n      <!-- テキスト -->\n      <textarea\n        ref=\"view_text\"\n        v-if=\"show_text_box\"\n        id=\"view_content_text\"\n        class=\"lightbox_content textarea\"\n        v-model=\"view_content_text\"\n        readonly\n      />\n      <!-- 動画 -->\n      <video\n        ref=\"view_video\"\n        v-if=\"show_video_box\"\n        id=\"view_content_video\"\n        class=\"lightbox_content\"\n        v-bind:class=\"{ lightbox_video: video_vertical }\"\n        :src=\"'/memo/' + memo.id + '.webm'\"\n        :poster=\"'/memo/' + memo.id + '_thumb.jpg'\"\n        controls\n        controlslist=\"nodownload noremoteplayback\"\n        disablePictureInPicture\n        playsinline\n      />\n      <!-- 静止画 -->\n      <img\n        ref=\"view_photo\"\n        v-if=\"show_photo_box\"\n        id=\"view_content_photo\"\n        class=\"lightbox_content\"\n        v-bind:class=\"{ lightbox_img: img_vertical }\"\n        :src=\"'/memo/' + memo.id + '.jpg'\"\n      />\n    </div>\n    <div class=\"ViewLayersLightbox_grid3\">\n      <div class=\"grid3_float\">\n        <div class=\"info_memo\">\n          <p>登録者 {{ memo.name }}</p>\n          <p>日付 {{ memo.date }}</p>\n        </div>\n      </div>\n      <div class=\"grid3_float\">\n        <div class=\"info_memo\">\n          <p>緯度 {{ memo.lat }}</p>\n          <p>経度 {{ memo.lng }}</p>\n        </div>\n      </div>\n      <!-- 分類 -->\n      <div class=\"grid3_float\">\n        <!-- <div class=\"info_classify\">\n          <p v-if=\"memo.classify\">分類：{{ memo.classify }}</p>\n        </div> -->\n        <div class=\"info_classify\">\n          <p class=\"memoclassify_header\">分類</p>\n          <b-form-select\n            class=\"classify_select\"\n            v-model=\"classify_name\"\n            v-on:change=\"classify_change\"\n            :options=\"classifyListObj\"\n            v-bind:disabled=\"!memo.display_flag\"\n          ></b-form-select>\n        </div>\n      </div>\n      <!-- 状態 -->\n      <div class=\"grid3_float\">\n        <div class=\"info_status\">\n          <p class=\"memostatus_header\">既読</p>\n          <p\n            class=\"memostatus_status\"\n            @click=\"memo_status()\"\n            v-bind:disabled=\"!memo.display_flag\"\n          >\n            <img\n              v-if=\"memo.status == '既読'\"\n              src=\"./assets/ico_check_on.png\"\n              alt=\"既読\"\n              class=\"select_yes\"\n            />\n            <img\n              v-else\n              src=\"./assets/ico_check_off.png\"\n              alt=\"未読\"\n              class=\"select_no\"\n            />\n          </p>\n        </div>\n      </div>\n\n      <div class=\"grid3_textarea\" v-if=\"memo.kind !== 'memo'\">\n        <p class=\"info_text_area\">\n          {{ memo.info }}\n        </p>\n      </div>\n\n      <div class=\"grid3_absolute\">\n        <p class=\"download_can\" @click=\"memo_download\">\n          <!-- テキストダウンロード -->\n          <span v-if=\"show_text_box && memo_downloadable\">\n            <a\n              :href=\"'/memo/' + memo.id + '.txt'\"\n              download\n              title=\"ダウンロード\"\n            >\n              <img src=\"./assets/ico_download.png\" alt=\"ダウンロードボタン\" />\n            </a>\n          </span>\n          <!-- 静止画ダウンロード -->\n          <span v-if=\"show_photo_box && memo_downloadable\">\n            <a\n              :href=\"'/memo/' + memo.id + '.jpg'\"\n              download\n              title=\"ダウンロード\"\n            >\n              <img src=\"./assets/ico_download.png\" alt=\"ダウンロードボタン\" />\n            </a>\n          </span>\n          <!-- 動画ダウンロード -->\n          <span v-if=\"show_video_box && memo_downloadable\">\n            <a\n              :href=\"'/memo/' + memo.id + '.webm'\"\n              download\n              title=\"ダウンロード\"\n            >\n              <img src=\"./assets/ico_download.png\" alt=\"ダウンロードボタン\" />\n            </a>\n          </span>\n        </p>\n        <p\n          v-show=\"memo.display_flag\"\n          class=\"trash_can\"\n          @click=\"memo_delete\"\n          title=\"削除\"\n        >\n          <img src=\"./assets/ico_trash.png\" alt=\"ゴミ箱\" />\n        </p>\n      </div>\n    </div>\n\n    <modalDialog v-if=\"show_msg_dialog\">\n      <span slot=\"header\">メモの削除</span>\n      <span slot=\"body\" style=\"color: #333\"> メモを削除します。 </span>\n      <div slot=\"footer\">\n        <button class=\"btn btn-primary\" @click=\"back_memo()\">戻る</button>\n        <button class=\"btn btn-primary\" @click=\"delete_memo()\">削除</button>\n      </div>\n    </modalDialog>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport $store from \"@/store\";\nimport { memoEvent } from \"./index.js\";\n\nimport ModalDialog from \"@/components/ModalDialog.vue\";\n\nexport default {\n  data() {\n    return {\n      ViewLayersLightbox: false,\n      memo: [],\n      show_photo_box: false,\n      show_video_box: false,\n      show_text_box: false,\n      classify_name: \"\",\n      field_width: window.innerWidth,\n      field_height: window.innerHeight,\n      show_msg_dialog: false,\n    };\n  },\n  components: {\n    modalDialog: ModalDialog,\n  },\n  mounted() {\n    memoEvent.$on(\"MEMO_VIEW2\", (data) => {\n      // 分類名のリストを更新\n      this.$store.dispatch(\"memo/fetchClassify\");\n      this.ViewLayersLightbox = true;\n      this.memo = data;\n      console.log(JSON.stringify(data));\n\n      // 分類の初期値を入れる\n      // this.classify_name = this.memo.classify;\n      this.classify_name = this.memo.classify;\n\n      // メモの種類を判別して対応するhtml要素を開く\n      if (data.kind == \"video\") {\n        this.show_photo_box = false;\n        this.show_video_box = true;\n        this.show_text_box = false;\n      } else if (data.kind == \"photo\") {\n        this.show_photo_box = true;\n        this.show_video_box = false;\n        this.show_text_box = false;\n      } else {\n        this.view_content_text = data.info;\n        this.show_photo_box = false;\n        this.show_video_box = false;\n        this.show_text_box = true;\n      }\n    });\n\n    // 表示領域の正しいサイズを設定\n    if (window.innerHeight > window.innerHeight) {\n      // スマホ表示(縦向き)の画面分割比\n      // grid-template-rows: 9% 41 50%;\n      // grid-template-columns: 5% 90% 5%;\n      this.field_width = window.innerWidth * 0.9;\n      this.field_height = window.innerHeight * 0.41;\n    } else {\n      // PC表示(横向き)の画面分割比\n      // grid-template-rows: 9% 62% 29%;\n      // grid-template-columns: 15% 70% 15%;\n      this.field_width = window.innerWidth * 0.7;\n      this.field_height = window.innerHeight * 0.62;\n    }\n    // 領域更新メソッドをrisizeイベントに登録\n    window.addEventListener(\"resize\", this.windowResize);\n\n    memoEvent.$on(\n      \"ALL_CLOSE_MEMO\",\n      function () {\n        const click_targets = this.$store.state.click_targets;\n        if (0 != click_targets.length) {\n          // メモを閉じる\n          this.ViewLayersLightbox = false;\n\n          // メモのデータをサーバへ送信（反映）\n          for (let key in this.$store.state.memo_update) {\n            if (0 === Object.keys(this.$store.state.memo_update[key]).length) {\n              // 削除の場合\n              memoEvent.$emit(\"DEL_MEMO\", key);\n            } else {\n              memoEvent.$emit(\n                \"UPDATE_MEMO\",\n                this.$store.state.memo_update[key]\n              );\n            }\n          }\n          // 地図に戻る時にクリア\n          this.$store.commit(\"resetMemoUpdate\");\n\n          // 地図に戻る\n          this.$store.commit(\"resetClickTargets\");\n          this.$store.commit(\"hiddenClickList\");\n          console.log(\"メモ画面を閉じました\");\n        }\n      }.bind(this)\n    );\n  },\n  methods: {\n    close_button() {\n      const videoElem = document.getElementById(\"view_content_video\");\n      if (videoElem && !videoElem.paused) {\n        // 再生しっぱなしだったら停止する\n        videoElem.pause();\n        videoElem.currentTime = 0;\n      }\n      this.ViewLayersLightbox = false;\n\n      const click_targets = this.$store.state.click_targets;\n      if (1 == click_targets.length) {\n        // メモのデータをサーバへ送信（反映）\n        for (let key in this.$store.state.memo_update) {\n          if (0 === Object.keys(this.$store.state.memo_update[key]).length) {\n            // 削除の場合\n            memoEvent.$emit(\"DEL_MEMO\", key);\n          } else {\n            memoEvent.$emit(\"UPDATE_MEMO\", this.$store.state.memo_update[key]);\n          }\n        }\n        // 地図に戻る時にクリア\n        this.$store.commit(\"resetMemoUpdate\");\n\n        // 対象1件のみだった場合は一覧画面を飛ばして地図に戻る\n        this.$store.commit(\"resetClickTargets\");\n        this.$store.commit(\"hiddenClickList\");\n      } else {\n        // 詳細画面を閉じたら一覧画面を有効にする\n        this.$store.commit(\"displayClickList\");\n      }\n    },\n    memo_delete() {\n      // 削除モーダルを開く\n      this.show_msg_dialog = true;\n    },\n    back_memo() {\n      // 削除モーダルでCancel\n      this.show_msg_dialog = false;\n    },\n    delete_memo() {\n      // 削除モーダルで削除実行\n      this.$store.commit(\"resetMemoUpdateDetail\", this.memo.id);\n\n      const result = this.$store.state.click_targets.filter(\n        (click_target) => click_target.id !== this.memo.id\n      );\n      this.$store.commit(\"setClickTargets\", result);\n      console.log(result);\n\n      // 次回開いたときにモーダルが表示されないように\n      this.show_msg_dialog = false;\n\n      // 削除したときにメモを閉じるようにする？\n      this.ViewLayersLightbox = false;\n\n      // メモのデータをサーバへ送信（反映）\n      for (let key in this.$store.state.memo_update) {\n        if (0 === Object.keys(this.$store.state.memo_update[key]).length) {\n          // 削除の場合\n          memoEvent.$emit(\"DEL_MEMO\", key);\n          console.log(key);\n        } else {\n          memoEvent.$emit(\"UPDATE_MEMO\", this.$store.state.memo_update[key]);\n        }\n      }\n      // 地図に戻る時にクリア\n      this.$store.commit(\"resetMemoUpdate\");\n      // 削除時は一覧に戻らない\n      this.$store.commit(\"resetClickTargets\");\n      this.$store.commit(\"hiddenClickList\");\n    },\n    memo_download() {\n      console.log(\"ダウンロードします\");\n    },\n    classify_change() {\n      // 分類の変更\n\n      this.memo.classify = this.classify_name;\n\n      // 画面を閉じた時に更新するメモが何かを記憶\n      this.$store.commit(\"setMemoUpdate\", this.memo);\n      // console.log(this.$store.state.memo_update);\n\n      //一覧画面に戻ってから再度押した時に情報が更新されているように更新\n      this.$store.commit(\"memo/setClickedMemo\", this.memo);\n\n      console.log(JSON.stringify(this.memo));\n    },\n    memo_status() {\n      if (!this.memo.display_flag) {\n        // 削除済みメモは変更不可\n        return;\n      }\n\n      if (this.memo.status == \"既読\") {\n        this.memo.status = \"未読\";\n      } else if (this.memo.status == \"未読\") {\n        this.memo.status = \"既読\";\n      }\n      // 既読・未読の変更\n      // this.$store.state.socketio.emit(\"upMemo\", JSON.stringify(this.memo));\n\n      // 一覧画面に戻った時に画面が変わっているように更新\n      const result = this.$store.state.click_targets.find(\n        (click_target) => click_target.id === this.memo.id\n      );\n      const result2 = this.$store.state.click_targets.filter(\n        (click_target) => click_target.id !== this.memo.id\n      );\n      // 左下のアイコン\n      let memo_image =\n        this.memo.status == \"既読\"\n          ? this.memo.kind == \"memo\"\n            ? \"/images/memo_icon.png\"\n            : this.memo.kind == \"photo\"\n            ? \"/images/photo_icon.png\"\n            : \"/images/video_icon.png\"\n          : this.memo.kind == \"memo\"\n          ? \"/images/memo_red_icon.png\"\n          : this.memo.kind == \"photo\"\n          ? \"/images/photo_red_icon.png\"\n          : \"/images/video_red_icon.png\";\n      result.icon = memo_image;\n      result2.unshift(result);\n      this.$store.commit(\"setClickTargets\", result2);\n\n      // 画面を閉じた時に更新するメモが何かを記憶\n      this.$store.commit(\"setMemoUpdate\", this.memo);\n\n      //一覧画面に戻ってから再度押した時に情報が更新されているように更新\n      this.$store.state.memo.clicked_memo[this.memo.id] = this.memo;\n    },\n    windowResize() {\n      // .ViewLayersLightboxの下記割合から領域のサイズを計算\n      if (window.innerHeight > window.innerWidth) {\n        // スマホ表示(縦向き)の画面分割比\n        // grid-template-rows: 9% 41 50%;\n        // grid-template-columns: 5% 90% 5%;\n        this.field_width = window.innerWidth * 0.9;\n        this.field_height = window.innerHeight * 0.41;\n      } else {\n        // PC表示(横向き)の画面分割比\n        // grid-template-rows: 9% 62% 29%;\n        // grid-template-columns: 15% 70% 15%;\n        this.field_width = window.innerWidth * 0.7;\n        this.field_height = window.innerHeight * 0.62;\n      }\n    },\n  },\n  computed: {\n    classifyListObj() {\n      // 設定ファイルにあるメモの分類一覧を取得\n      // オブジェクトの形に変換\n      let options = [{ value: \"\", text: \"\" }]; // 空(全選択)を行えるように\n      let obj = {};\n      this.$store.state.memo.classify_list.forEach((data, i) => {\n        if (data) {\n          obj = { value: data, text: data };\n          options.push(obj);\n        }\n      });\n      return options;\n    },\n    img_vertical() {\n      var path = \"/memo/\" + this.memo.id + \".jpg\";\n      var element = new Image();\n      element.src = path;\n      // 画像縦横比\n      var img_rate = element.naturalWidth / element.naturalHeight;\n      // 領域縦横比\n      var field_rate = this.field_width / this.field_height;\n      element.onload = function () {\n        // 画像縦横比更新\n        img_rate = element.naturalWidth / element.naturalHeight;\n        if (img_rate > field_rate) {\n          return true;\n        } else {\n          return false;\n        }\n      };\n      if (img_rate > field_rate) {\n        // 縦横比(横/縦)が画像のほうが大きければ横幅合わせ\n        return true;\n      } else {\n        // 縦横比(横/縦)が領域のほうが大きければ縦幅合わせ\n        return false;\n      }\n    },\n    video_vertical() {\n      var path = \"/memo/\" + this.memo.id + \".webm\";\n      var thumb = \"/memo/\" + this.memo.id + \"_thumb.jpg\";\n      var element = document.createElement(\"video\");\n      // 映像縦横比\n      var video_rate = element.videoWidth / element.videoHeight;\n      // 領域縦横比\n      var field_rate = this.field_width / this.field_height;\n      element.onloadedmetadata = function () {\n        // 映像縦横比更新\n        video_rate = element.videoWidth / element.videoHeight;\n        if (video_rate > field_rate) {\n          return true;\n        } else {\n          return false;\n        }\n      };\n      element.src = path;\n      element.poster = thumb;\n      element.load();\n      if (video_rate > field_rate) {\n        // 縦横比(横/縦)が映像のほうが大きければ横幅合わせ\n        return true;\n      } else {\n        // 縦横比(横/縦)が領域のほうが大きければ縦幅合わせ\n        return false;\n      }\n    },\n    memo_downloadable() {\n      return this.$store.getters[\"memo_downloadable\"];\n    },\n  },\n  beforeDestroy() {\n    // とりあえず画面サイズ更新の反映はここでだけ\n    window.removeEventListener(\"resize\", this.windowResize);\n  },\n};\n</script>\n\n<style>\n.ViewLayersLightbox {\n  z-index: 5;\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.92);\n  z-index: 201;\n  color: #ffffff;\n  display: grid;\n  grid-template-rows: 9% 62% 29%;\n  grid-template-columns: 15% 70% 15%;\n}\n/* 中央上段 */\n.ViewLayersLightbox_grid1 {\n  grid-row: 1 / 3;\n  grid-column: 2 / 3;\n}\n\n/* 中央中段 */\n.ViewLayersLightbox_grid2 {\n  grid-row: 2 / 3;\n  grid-column: 2 / 3;\n  text-align: center;\n  background-color: rgb(0, 0, 0);\n}\n.ViewLayersLightbox_grid2 .view_content {\n  width: auto;\n  height: 100%;\n}\n.ViewLayersLightbox_grid2 textarea {\n  width: 100%;\n}\n.ViewLayersLightbox_grid2 .view_content.textarea {\n  width: 90%;\n  font-size: 30px;\n  background-color: rgba(0, 0, 0, 0.92);\n  color: #ffffff;\n}\n#view_content_text {\n  height: 100%;\n}\n/* #view_content_video {\n  height: 100%;\n}\n#view_content_photo {\n  height: 100%;\n} */\n.lightbox_content {\n  height: 100%;\n  width: auto;\n}\n.lightbox_img {\n  height: auto;\n  width: 100%;\n}\n.lightbox_video {\n  height: auto;\n  width: 100%;\n}\n\n/* 中央下段 */\n.ViewLayersLightbox_grid3 {\n  grid-row: 3 / 3;\n  grid-column: 2 / 3;\n}\n.ViewLayersLightbox_grid3 p {\n  margin-bottom: 6px;\n  font-size: 12px;\n}\n.ViewLayersLightbox_grid3 .dummy_div {\n  height: auto;\n}\n\n/* メモの詳細情報 */\n.grid3_float {\n  float: left;\n  width: 25%;\n}\n.info_memo {\n  width: 100%;\n  margin-top: 20px;\n  padding-left: 15px;\n  border-left: inset 2px #fff;\n  height: 3rem;\n}\n\n/* メモの分類 */\n.info_classify {\n  width: 100%;\n  margin-top: 20px;\n  padding-left: 15px;\n  padding-right: 20px;\n  border-left: inset 2px #fff;\n  height: 3rem;\n}\n.memoclassify_header {\n  width: 20%;\n  float: left;\n  padding-top: 15px;\n}\n.classify_select {\n  width: 65%;\n  margin-top: 6px;\n  background-color: #d3d3d3;\n  border-radius: 9px;\n  margin-left: 13px;\n}\n\n/* メモの既読・未読 */\n.info_status {\n  width: 100%;\n  margin-top: 20px;\n  padding-left: 15px;\n  border-left: inset 2px #fff;\n  height: 3rem;\n}\n.memostatus_header {\n  width: 20%;\n  float: left;\n  padding-top: 15px;\n}\n.memostatus_status {\n  width: 80%;\n  padding-top: 9px;\n}\n.select_yes {\n  background-color: #d3d3d3;\n  border-radius: 9px;\n  margin-left: 10px;\n  width: 35px;\n}\n.select_no {\n  border-radius: 9px;\n  margin-left: 10px;\n  width: 35px;\n}\n\n/* テキストの詳細 */\n.grid3_textarea {\n  width: 75%;\n  margin-top: 5rem;\n}\n.info_text_area {\n  clear: both;\n  white-space: pre-line;\n  word-wrap: break-word;\n  overflow: auto;\n}\n\n/* メモの削除 */\n.grid3_absolute .download_can {\n  position: absolute;\n  right: 22%;\n  bottom: 7%;\n}\n.download_can img {\n  width: 35px;\n  margin: 7% 0 0 3%;\n}\n.grid3_absolute .trash_can {\n  position: absolute;\n  right: 16%;\n  bottom: 7%;\n}\n.trash_can img {\n  width: 35px;\n  margin: 7% 0 0 3%;\n}\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  .ViewLayersLightbox {\n    /* @todo ゼブラの端末で最適化する */\n    grid-template-rows: 9% 41% 50%;\n    grid-template-columns: 5% 90% 5%;\n  }\n  .click_content_head {\n    font-size: 14px;\n  }\n  /* .ViewLayersLightbox_grid2 .view_content {\n    width: 100%;\n    height: auto;\n  }\n  #view_content_photo, #view_content_text, #view_content_video {\n    width: 100%;\n  } */\n  .grid3_float {\n    width: 100%;\n  }\n  .info_classify,\n  .info_memo {\n    border-left: none;\n    margin-top: 0px;\n    padding-top: 6px;\n  }\n  .info_status {\n    border-left: none;\n  }\n  .info_status {\n    margin-top: 0px;\n  }\n  .grid3_absolute .download_can {\n    right: 28%;\n  }\n  .grid3_textarea {\n    margin-top: 13rem;\n  }\n  .ViewLayersLightbox_grid3 p {\n    font-size: 11px;\n  }\n  .memostatus_header {\n    padding-top: 19px;\n  }\n  .grid3_absolute .trash_can {\n    right: 9%;\n    bottom: 3%;\n  }\n  .grid3_absolute .download_can {\n    bottom: 3%;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ViewLayersLightbox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ViewLayersLightbox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ViewLayersLightbox.vue?vue&type=template&id=750da858&\"\nimport script from \"./ViewLayersLightbox.vue?vue&type=script&lang=js&\"\nexport * from \"./ViewLayersLightbox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ViewLayersLightbox.vue?vue&type=style&index=0&id=750da858&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.view_layers_device),expression:\"view_layers_device\"}],staticClass:\"ViewLayersLightbox ViewLayersDevice\",attrs:{\"id\":\"ViewLayersDevice\"}},[_c('div',{staticClass:\"ViewLayersLightbox_grid1\"},[_c('div',{staticClass:\"click_content_head\"},[_c('p',[_vm._v(\"端末情報\")]),_c('button',{staticClass:\"hiddenBtn\",attrs:{\"title\":\"閉じる\"}},[_c('img',{staticClass:\"btnImg\",attrs:{\"src\":require(\"@/assets/close05.png\")},on:{\"click\":function($event){return _vm.close_button()}}})])])]),_c('div',{staticClass:\"ViewLayersLightbox_grid2 ViewLayersDevice\"},[_c('div',{staticClass:\"ViewLayersDevice_left_content\"},[_c('div',{staticClass:\"ViewLayersDevice_left_content_img\"},[_c('img',{attrs:{\"src\":_vm.device.img}})]),_c('div',[_vm._v(\" \"+_vm._s(_vm.device.info)+\" \")])]),_c('div',{staticClass:\"ViewLayersDevice_right_content\"},[_c('div',{staticClass:\"ViewLayersDevice_left_button\",attrs:{\"title\":\"音声通話発信\"}},[_c('img',{attrs:{\"src\":_vm.tel_icon},on:{\"click\":function($event){return _vm.tel_button()}}})]),_c('div',{staticClass:\"ViewLayersDevice_right_button\",attrs:{\"title\":\"ビデオ通話発信\"}},[_c('img',{attrs:{\"src\":_vm.video_icon},on:{\"click\":function($event){return _vm.video_button()}}})])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- メモの詳細画面 -->\n  <div\n    id=\"ViewLayersDevice\"\n    v-show=\"view_layers_device\"\n    class=\"ViewLayersLightbox ViewLayersDevice\"\n  >\n    <div class=\"ViewLayersLightbox_grid1\">\n      <div class=\"click_content_head\">\n        <p>端末情報</p>\n        <button class=\"hiddenBtn\" title=\"閉じる\">\n          <img\n            src=\"@/assets/close05.png\"\n            class=\"btnImg\"\n            @click=\"close_button()\"\n          />\n        </button>\n      </div>\n    </div>\n    <div class=\"ViewLayersLightbox_grid2 ViewLayersDevice\">\n      <!-- 端末アイコン -->\n      <div class=\"ViewLayersDevice_left_content\">\n        <div class=\"ViewLayersDevice_left_content_img\">\n          <img v-bind:src=\"device.img\" />\n        </div>\n        <!-- テキスト -->\n        <div>\n          {{ device.info }}\n        </div>\n      </div>\n\n      <div class=\"ViewLayersDevice_right_content\">\n        <div class=\"ViewLayersDevice_left_button\" title=\"音声通話発信\">\n          <img v-bind:src=\"tel_icon\" @click=\"tel_button()\" />\n        </div>\n        <div class=\"ViewLayersDevice_right_button\" title=\"ビデオ通話発信\">\n          <img v-bind:src=\"video_icon\" @click=\"video_button()\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  methods: {\n    close_button() {\n      this.$store.commit(\"setViewLayersDevice\", false);\n      this.$store.commit(\"resetViewLayersDeviceInfo\");\n\n      const click_targets = this.$store.state.click_targets;\n      if (1 == click_targets.length) {\n        // 対象1件のみだった場合は一覧画面を飛ばして地図に戻る\n        this.$store.commit(\"resetClickTargets\");\n      } else {\n        // 2件以上の場合は一覧画面を表示\n        this.$store.commit(\"displayClickList\");\n      }\n    },\n    tel_button() {\n      // 通話ボタンを押した時の挙動\n      this.$store.state.sound_on();\n      // 個別通話（映像）のボタンを押下した際の処理\n      this.$parent.$refs.rtc_private.call_to_remote(\n        this.device.personalDestCan,\n        \"audio\"\n      );\n\n      this.$store.commit(\"setViewLayersDevice\", false);\n      // 取得したデータのリセット\n      this.$store.commit(\"resetViewLayersDeviceInfo\");\n      this.$store.commit(\"resetClickTargets\");\n    },\n    video_button() {\n      // ビデオ通話ボタンを押した時の挙動\n      this.$store.state.sound_on();\n      // 個別通話（映像）のボタンを押下した際の処理\n      this.$parent.$refs.rtc_private.call_to_remote(\n        this.device.personalDestCan,\n        \"video\"\n      );\n\n      this.$store.commit(\"setViewLayersDevice\", false);\n      // 取得したデータのリセット\n      this.$store.commit(\"resetViewLayersDeviceInfo\");\n      this.$store.commit(\"resetClickTargets\");\n    },\n  },\n  computed: {\n    view_layers_device() {\n      return this.$store.state.view_layers_device;\n    },\n    device() {\n      return this.$store.state.view_layers_device_info;\n    },\n    tel_icon() {\n      return \"/images/menu_tel.png\";\n    },\n    video_icon() {\n      return \"/images/menu_video.png\";\n    },\n  },\n};\n</script>\n\n<style>\n.ViewLayersLightbox.ViewLayersDevice {\n  grid-template-rows: 9% 30% 61%;\n}\n\n.ViewLayersLightbox_grid2.ViewLayersDevice {\n  background-color: #1f1c60;\n  text-align: start;\n}\n\n.ViewLayersDevice_left_content {\n  width: 50%;\n  float: left;\n  text-align: center;\n  height: 100%;\n}\n.ViewLayersDevice_left_content_img {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 85%;\n}\n.ViewLayersDevice_right_content {\n  width: 50%;\n  float: left;\n  margin-top: 4rem;\n}\n\n.ViewLayersDevice_left_button {\n  background-color: #3e38c0;\n  border-radius: 40px;\n  width: 70px;\n  height: 70px;\n  margin-left: 15%;\n  margin-right: 30px;\n  float: left;\n}\n.ViewLayersDevice_left_button img {\n  margin: 16px;\n  width: 41px;\n}\n.ViewLayersDevice_right_button {\n  background-color: #32a66c;\n  border-radius: 40px;\n  width: 70px;\n  height: 70px;\n  float: left;\n}\n.ViewLayersDevice_right_button img {\n  margin: 16px;\n  width: 41px;\n}\n\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  .ViewLayersLightbox.ViewLayersDevice {\n    grid-template-rows: 9% 70% 21%;\n  }\n  .ViewLayersDevice_left_content img {\n    width: 200px;\n    margin-top: 0rem;\n  }\n  .ViewLayersDevice_left_content {\n    width: 100%;\n    float: left;\n    text-align: center;\n  }\n  .ViewLayersDevice_left_button {\n    margin-left: 24%;\n  }\n  .ViewLayersDevice_right_content {\n    width: 100%;\n    float: left;\n    margin-top: 4rem;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ViewLayersDevice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ViewLayersDevice.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ViewLayersDevice.vue?vue&type=template&id=d4b98040&\"\nimport script from \"./ViewLayersDevice.vue?vue&type=script&lang=js&\"\nexport * from \"./ViewLayersDevice.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ViewLayersDevice.vue?vue&type=style&index=0&id=d4b98040&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('audio',{ref:\"audio_el\"}),(_vm.is_dialog_visible)?_c('modalDialog',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"}),_c('span',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_vm._v(_vm._s(_vm.dialog_msg))]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.close_msg_dialog}},[_vm._v(\"はい\")])])]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable */\r\nconst BUFFER_SIZE = 1024;\r\nlet audioDatas = [];\r\nlet sampleRate = 16000;\r\nlet audioContext = null;\r\nlet scriptProcessor = null;\r\n\r\nexport default function rec_pcm() {\r\n  const start = (stream) => {\r\n    audioDatas = [];\r\n\r\n    const AudioContext = window.AudioContext || window.webkitAudioContext;\r\n    audioContext = new AudioContext({ sampleRate: sampleRate });\r\n    sampleRate = audioContext.sampleRate;\r\n\r\n    const source = audioContext.createMediaStreamSource(stream);\r\n    scriptProcessor = audioContext.createScriptProcessor(BUFFER_SIZE, 1, 1);\r\n    scriptProcessor.onaudioprocess = (e) => {\r\n      copyAudioPerUnit(e.inputBuffer.getChannelData(0), BUFFER_SIZE, audioDatas);\r\n    }\r\n\r\n    // ストリームの途中にScriptProcessorを差し込む\r\n    source.connect(scriptProcessor);\r\n    scriptProcessor.connect(audioContext.destination);\r\n  }\r\n\r\n  const stop = (next) => {\r\n    const mergeData = mergeBuffers(audioDatas)\r\n    scriptProcessor.onaudioprocess = null;\r\n\r\n    if (mergeData) {\r\n      const dataview = encodeToWAV(mergeData, sampleRate);\r\n      const audioBlob = new Blob([dataview], { type: \"audio/wav\" })\r\n      if (next) next(audioBlob);\r\n    }\r\n  }\r\n\r\n  const writeString = (view, offset, string) => {\r\n    [...string].forEach((char, index) => {\r\n      view.setUint8(offset + index, char.charCodeAt(0))\r\n    })\r\n  };\r\n\r\n  // 8bitの情報を16bitに変換する\r\n  const floatTo16BitPCM = (output, offset, input) => {\r\n    input.forEach((datum, index) => {\r\n      const s = Math.max(-1, Math.min(1, datum));\r\n      const pcm = s < 0 ? s * 0x8000 : s * 0x7FFF\r\n\r\n      output.setInt16(offset + (index * 2), pcm, true);\r\n    })\r\n  };\r\n\r\n  const encodeToWAV = (samples, sampleRate) => {\r\n    const headerSize = 44;\r\n    // 8bitを16bitに変換するので、データサイズは2倍になる\r\n    const outputDataLength = samples.length * 2;\r\n    const outBuffer = new DataView(new ArrayBuffer(headerSize + outputDataLength));\r\n\r\n    writeString(outBuffer, 0, 'RIFF');  // RIFFヘッダ\r\n    outBuffer.setUint32(4, 32 + outputDataLength, true); // これ以降のファイルサイズ\r\n    writeString(outBuffer, 8, 'WAVE'); // WAVEヘッダ\r\n    writeString(outBuffer, 12, 'fmt '); // fmtチャンク\r\n    outBuffer.setUint32(16, 16, true); // fmtチャンクのバイト数\r\n    outBuffer.setUint16(20, 1, true); // フォーマットID\r\n    outBuffer.setUint16(22, 1, true); // チャンネル数\r\n    outBuffer.setUint32(24, sampleRate, true); // サンプリングレート\r\n    outBuffer.setUint32(28, sampleRate * 2, true); // データ速度\r\n    outBuffer.setUint16(32, 2, true); // ブロックサイズ\r\n\r\n    // これを8ビットにすればPCM変換が簡単になる？\r\n    outBuffer.setUint16(34, 16, true); // サンプルあたりのビット数\r\n    writeString(outBuffer, 36, 'data'); // dataチャンク\r\n    outBuffer.setUint32(40, outputDataLength, true); // 波形データのバイト数\r\n    floatTo16BitPCM(outBuffer, headerSize, samples); // 波形データ\r\n\r\n    return outBuffer;\r\n  };\r\n\r\n  // Float32Arrayの配列を一つのFloat32Arrayにまとめる\r\n  const mergeBuffers = (audioDatas) => {\r\n    if (audioDatas.length === 0 || audioDatas[0].length === 0) return null;\r\n\r\n    const bufferSize = audioDatas[0].length\r\n    const totalBufferSize = audioDatas.length * bufferSize\r\n    const totalBuffer = new Float32Array(totalBufferSize);\r\n\r\n    for (let i = 0; i < audioDatas.length; i++) {\r\n      totalBuffer.set(audioDatas[i], i * bufferSize)\r\n    }\r\n\r\n    return totalBuffer;\r\n  };\r\n\r\n  const toURL = (dataview, fileType) => {\r\n    const audioBlob = new Blob([dataview], { type: fileType });\r\n    return window.URL.createObjectURL(audioBlob);\r\n  }\r\n\r\n  // 録音データの全体サイズがわからないので、バッファサイズ単位で配列に保存\r\n  function copyAudioPerUnit(input, bufferSize, audioDatas) {\r\n    const bufferData = new Float32Array(bufferSize);\r\n    for (var i = 0; i < bufferSize; i++) {\r\n      bufferData[i] = input[i];\r\n    }\r\n    audioDatas.push(bufferData);\r\n  };\r\n\r\n  return {\r\n    start,\r\n    stop\r\n  }\r\n}\r\n\r\n","<template>\n  <div>\n    <audio ref=\"audio_el\"></audio>\n    <modalDialog v-if=\"is_dialog_visible\">\n      <span slot=\"header\"></span>\n      <span slot=\"body\">{{ dialog_msg }}</span>\n      <div slot=\"footer\">\n        <button class=\"btn btn-primary\" @click=\"close_msg_dialog\">はい</button>\n      </div>\n    </modalDialog>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport { v4 as uuidv4 } from \"uuid\";\nimport ModalDialog from \"@/components/ModalDialog.vue\";\nimport Rec_pcm from \"@/components/rec_pcm.js\";\n\nexport default {\n  components: {\n    modalDialog: ModalDialog,\n  },\n  data() {\n    return {\n      recorder: null,\n      recognition: null,\n      url: \"/api/callrec\",\n      is_dialog_visible: false,\n      dialog_msg: \"\",\n      rec_pcm: null\n    };\n  },\n  mounted() {\n    // this.get_audio_stream();\n    if (this.ptt_type == \"callrec\" || this.ptt_type == \"webrtc\") {\n      this.socketio.on(\"message\", this.on_msg);\n    }\n    if (this.speech_recognition) this.init_recognition();\n    this.rec_pcm = Rec_pcm();\n  },\n  computed: {\n    socketio() {\n      return this.$store.getters[\"socketio\"];\n    },\n    at_send() {\n      return this.$store.getters[\"ptt/pttActive\"];\n    },\n    ptt_type() {\n      return this.$store.state.ptt_type;\n    },\n    callrec_display() {\n      return this.$store.state.callrec_display;\n    },\n    myId() {\n      return this.$store.getters[\"amt/myId\"];\n    },\n    group_id() {\n      return this.$store.getters[\"group_id\"];\n    },\n    users() {\n      return this.$store.getters[\"amt/users\"];\n    },\n    user() {\n      return this.myId && this.users[this.myId];\n    },\n    sound_on() {\n      return this.$store.state.sound_on;\n    },\n    speech_recognition() {\n      return this.$store.getters[\"speech_recognition\"];\n    },\n    auto_play() {\n      return this.$store.getters[\"auto_play\"];\n    },\n    // group_name() {\n    //   const groups = this.$store.state.groups;\n    //   const group = Object.values(groups).find(gr => {\n    //     return gr.group_id == this.group_id;\n    //   });\n    //   return group && group.group_name ? group.group_name : \"\";\n    // }\n  },\n  watch: {\n    // 送信用音声ストリームが切替った事を検出している。\n    at_send(val) {\n      if (val) {\n        this.file_name = this.gen_file_name();\n        const stream = this.$store.getters[\"rtc/local_audio_stream\"];\n        // this.init_rec(stream);\n        // if (this.recognition) this.recognition.start();\n\n        // 音声認識用にPCM（16bitモノラル16kHzサンプリング）にて録音を行う。\n        this.rec_pcm.start(stream);\n      } else {\n        // if (this.recorder) this.recorder.stop();\n        // if (this.recognition) this.recognition.stop();\n\n        this.rec_pcm.stop(async (blob) => {\n          const file_name_wav = this.file_name + \".wav\";\n          if (blob.size > 8192) {\n            try {\n              const res = await this.post_file(file_name_wav, blob);\n              await this.after_post(res);\n            } catch (err) {\n              console.log(err);\n            }\n          }\n        });\n      }\n    },\n  },\n  methods: {\n    // close_msg_dialog() {\n    //   this.is_dialog_visible = false;\n    //   this.$refs.audio_el.src = this.sound_file;\n    //   this.$refs.audio_el.play();\n    // },\n\n    on_msg(msg) {\n      const re = /.+_.+_(.+)_.+.webm/.exec(msg.file);\n      const _d = re ? `${re[1]} : ` : \"\";\n      const txt = `${_d} ${msg.src}よりメッセージが着信がありました。　`;\n      console.log(`FILE: ${msg.audio_file}`);\n\n      if (this.ptt_type == \"callrec\") {\n        const speech = new SpeechSynthesisUtterance();\n        speech.text = txt;\n\n        speech.volume = 1.0; // 音量: 0.0～1.0\n        speech.rate = 1.0; // 速度: 0.1～10.0\n        speech.pitch = 1.0; // 音程: 0.0～2.0\n        speech.lang = \"ja-JP\"; // 言語\n\n        // var voices = window.speechSynthesis.getVoices();\n        // speech.voice = voices[0];\n        speechSynthesis.speak(speech);\n        // speech.onend = () => this.message_play(`/callrec/${msg.file}`);\n        speech.onend = () => this.sound_on(`/callrec/${msg.audio_file}`);\n      }\n\n      if (this.auto_play) {\n        this.sound_on(`/callrec/${msg.audio_file}`);\n      }\n\n      const toast_id = uuidv4();\n      const play_btn = this.$createElement(\n        \"b-button\",\n        {\n          on: {\n            click: () => {\n              this.sound_on(`/callrec/${msg.audio_file}`);\n              this.$bvToast.hide(toast_id);\n            },\n          },\n        },\n        \"PLAY\"\n      );\n      const text_btn = this.speech_recognition\n        ? this.$createElement(\n            \"b-button\",\n            {\n              on: {\n                click: () => {\n                  this.$bvToast.hide(toast_id);\n                  try {\n                    fetch(`/callrec/${msg.text_file}`).then((res) => {\n                      if (res.status == 200) {\n                        return res.text().then((text) => {\n                          this.dialog_msg = text;\n                          this.is_dialog_visible = true;\n                        });\n                      } else {\n                        this.dialog_msg = \"(記録無し)\";\n                        this.is_dialog_visible = true;\n                      }\n                    });\n                  } catch (err) {\n                    console.log(err);\n                  }\n                },\n              },\n            },\n            \"TEXT\"\n          )\n        : null;\n      const hiden_link = this.$createElement(\n        \"b-link\",\n        {\n          href: \"#\",\n          on: {\n            click: () => {\n              this.$root.$bvToast.hide();\n            },\n          },\n        },\n        \"全て閉じる\"\n      );\n      const vnodes = [txt, [play_btn, text_btn, hiden_link]];\n\n      // 以下の処理は、Callrec.vueが読み込まれている事が前提なので、必ず走る\n      // ptt_typeが何であるかは関係無く、callrec_displayの値次第で、\n      // 再生ボタンの表示を行うか、を決める\n      if (this.callrec_display) {\n        this.$bvToast.toast(vnodes, {\n          id: toast_id,\n          title: \"AirMultiTalk\",\n          toaster: \"b-toaster-top-center\",\n          variant: \"danger\",\n          noAutoHide: true,\n          appendToast: true,\n        });\n      } else {\n        this.$bvToast.toast(txt, {\n          id: toast_id,\n          title: \"AirMultiTalk\",\n          toaster: \"b-toaster-top-center\",\n          variant: \"danger\",\n          autoHideDelay: 6000,\n          appendToast: true,\n        });\n      }\n    },\n    close_msg_dialog() {\n      this.is_dialog_visible = false;\n      this.dialog_msg = \"\";\n    },\n    init_rec(stream) {\n      let chunks = [];\n      const myType = \"audio/webm; codecs=opus\";\n      this.recorder = new MediaRecorder(stream);\n      this.recorder.ondataavailable = (ev) => {\n        chunks.push(ev.data);\n      };\n      this.recorder.onstop = async () => {\n        let blob = new Blob(chunks, { type: myType });\n\n        const file_name_webm = this.file_name + \".webm\";\n        if (blob.size > 8192) {\n          try {\n            const res = await this.post_file(file_name_webm, blob);\n            await this.after_post(res);\n          } catch (err) {\n            console.log(err);\n          }\n        }\n        chunks = [];\n        this.recorder = null;\n      };\n      this.recorder.start();\n    },\n    init_recognition() {\n      const myType = \"text/plain\";\n      const SpeechRecognition =\n        window.webkitSpeechRecognition || window.SpeechRecognition;\n      this.recognition = new SpeechRecognition();\n\n      this.recognition.lang = \"ja-JP\";\n      this.recognition.interimResults = true;\n      this.recognition.continuous = true;\n\n      this.recognition.onresult = async (ev) => {\n        this.speech_text = \"\";\n        for (let i = ev.resultIndex; i < ev.results.length; i++) {\n          let transcript = ev.results[i][0].transcript;\n          if (ev.results[i].isFinal) {\n            this.speech_text += transcript;\n          }\n        }\n        if (this.speech_text != \"\") {\n          console.log(this.speech_text);\n          let blob = new Blob([this.speech_text], { type: myType });\n\n          const file_name_txt = this.file_name + \".txt\";\n          try {\n            await this.post_file(file_name_txt, blob);\n          } catch (err) {\n            console.log(err);\n          }\n        }\n      };\n    },\n    gen_file_name() {\n      const _d = new Date().toLocaleString().split(/\\/|:|\\s/gi);\n      const cur_date = `${_d[0]}年${_d[1]}月${_d[2]}日${_d[3]}時${_d[4]}分${_d[5]}秒`;\n      if (this.last_date == cur_date) {\n        this.count_date++;\n      } else {\n        this.count_date = 0;\n      }\n      this.last_date = cur_date;\n      return `通話_${this.$store.state.myName}_${cur_date}_${this.count_date}`;\n    },\n    async post_file(file_name, b64) {\n      let formData = new FormData();\n      formData.append(\"data\", b64, encodeURIComponent(file_name));\n      formData.append(\"info\", JSON.stringify({\n          id: this.myId,\n          group_id: this.group_id,\n          user_name: this.user.user_name\n        })\n      );\n      formData.append(\"group_id\", this.$store.getters[\"group_id\"]);\n      console.log(...formData.entries());\n\n      return fetch(this.url, {\n        method: \"post\",\n        mode: \"no-cors\",\n        body: formData,\n      });\n      // .then(response => {\n      //   if (response.status == 200) {\n      //     console.log(`成功:${response}`);\n      //     this.socketio.emit(\"message\", {\n      //       type: \"callrec\",\n      //       src: this.$store.getters[\"amt/users\"][\n      //         this.$store.getters[\"amt/myId\"]\n      //       ].user_name,\n      //       group_id: this.$store.getters[\"group_id\"],\n      //       file: file_name\n      //     });\n      //   } else {\n      //     console.log(`失敗:${response}`);\n      //   }\n      // })\n      // .catch(error => console.log(error.message));\n    },\n    async after_post(response) {\n      if (response.status == 200) {\n        console.log(`成功:${response}`);\n        this.socketio.emit(\"message\", {\n          type: \"callrec\",\n          src: this.$store.getters[\"amt/users\"][this.$store.getters[\"amt/myId\"]]\n            .user_name,\n          group_id: this.$store.getters[\"group_id\"],\n          // audio_file: this.file_name + \".webm\",\n          audio_file: this.file_name + \".wav\",\n          text_file: this.speech_recognition ? this.file_name + \".txt\" : \"\",\n        });\n      } else {\n        console.log(`失敗:${response}`);\n      }\n    },\n  },\n  beforeDestroy() {\n    this.socketio.off(\"message\", this.on_msg);\n  },\n};\n</script>\n<style scoped>\n.b-button {\n  padding: 10px;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CallRec.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CallRec.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CallRec.vue?vue&type=template&id=3e95f711&scoped=true&\"\nimport script from \"./CallRec.vue?vue&type=script&lang=js&\"\nexport * from \"./CallRec.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CallRec.vue?vue&type=style&index=0&id=3e95f711&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e95f711\",\n  null\n  \n)\n\nexport default component.exports","// 起きっぱなしにするための処理\n// // ----------- WAKE-LOCK ------------------\n\nconst wakeupLock = async (fn) => {\n  if (\"wakeLock\" in navigator) {\n    let wakeLock = null;\n    const requestWakeLock = async () => {\n      try {\n        wakeLock = await navigator.wakeLock.request(\"screen\");\n        console.dir(wakeLock);\n        wakeLock.onrelease = (ev) => {\n          console.log(ev);\n        };\n      } catch (err) {\n        console.log(`${err.name}, ${err.message}`);\n      }\n    };\n    await requestWakeLock();\n    const handleVisibilityChange = async (ev) => {\n      if (wakeLock !== null && document.visibilityState === \"visible\") {\n        console.log(ev);\n        await requestWakeLock();\n        if (fn) fn();\n      }\n    };\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n  }\n};\nexport { wakeupLock };\n","<template>\n  <div id=\"mapField\">\n    <!-- @todo イベントと値の受け渡し構造を整理 -->\n    <mapMenu ref=\"mapMenu\"></mapMenu>\n    <phoneButton v-if=\"!isLandscape\"></phoneButton>\n    <rightButton v-on:toCenter=\"toCenter\"></rightButton>\n\n    <!-- オーバーレイ -->\n    <div style=\"display: none\">\n      <div id=\"iconMenu\">\n        <button v-on:click=\"onMapVideoBtn\" id=\"mapVideoBtn\" class=\"mapBtn\">\n          <img src=\"@/assets/menu_video@0,5x.png\" />\n        </button>\n        <button v-on:click=\"onMapTelBtn\" id=\"mapTelBtn\" class=\"mapBtn\">\n          <img src=\"@/assets/menu_tel@0,5x.png\" />\n        </button>\n        <button v-on:click=\"onMapSipBtn\" id=\"mapSipBtn\" class=\"mapBtn\">\n          <img src=\"@/assets/menu_tel@0,5x.png\" />\n        </button>\n      </div>\n    </div>\n\n    <!-- メッセージ用モーダルダイアログ -->\n    <modalDialog v-if=\"is_dialog_visible\">\n      <span slot=\"header\"></span>\n      <span slot=\"body\">{{ dialog_msg }}</span>\n      <div slot=\"footer\">\n        <button class=\"btn btn-primary\" @click=\"close_msg_dialog\">はい</button>\n      </div>\n    </modalDialog>\n\n    <!-- サーバとの通信ができていない場合のダイアログ -->\n    <modalDialog v-if=\"is_serveralive_dialog_visible\">\n      <span slot=\"header\"></span>\n      <span slot=\"body\">{{ serveralive_dialog_msg }}</span>\n      <div slot=\"footer\"></div>\n    </modalDialog>\n\n    <!-- RTCLayer -->\n    <rtc-group v-show=\"is_remote_showed\"></rtc-group>\n    <rtc-private ref=\"rtc_private\"></rtc-private>\n    <!-- <tel-private v-if=\"sip\" ref=\"tel_private\"></tel-private> -->\n\n    <!-- 追加 Layer -->\n    <template v-for=\"layer in layerComponents\">\n      <component :key=\"layer.id\" :is=\"layer.vue\" />\n    </template>\n    <review-comp v-show=\"review\"></review-comp>\n    <callRec v-if=\"$store.state.callrec\"></callRec>\n\n    <mapClickList></mapClickList>\n    <viewLayersDevice></viewLayersDevice>\n    <viewLayersLightbox></viewLayersLightbox>\n    <stream-io ref=\"stream_io\"></stream-io>\n    <div class=\"credit\">©OpenStreetMap contributors</div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport RightButton from \"../components/RightButton.vue\";\nimport PhoneButton from \"../components/PhoneButton.vue\";\nimport MapMenu from \"../components/MapMenu.vue\";\nimport StreamIo from \"@/components/StreamIo.vue\";\n\nimport { Map, View, Overlay } from \"ol\";\nimport * as olLayer from \"ol/layer\";\nimport * as olControl from \"ol/control\";\nimport * as olInteraction from \"ol/interaction\";\nimport * as olProj from \"ol/proj\";\nimport * as olSource from \"ol/source\";\nimport * as olStyle from \"ol/style\";\nimport * as olGeom from \"ol/geom\";\nvar ol = {};\nol.Map = Map;\nol.View = View;\nol.layer = olLayer;\nol.control = olControl;\nol.interaction = olInteraction;\nol.proj = olProj;\nol.source = olSource;\nol.style = olStyle;\nol.geom = olGeom;\nol.Overlay = Overlay;\n\n// import $ from \"jquery\";\n// import locationLayer from \"@/components/locationLayer.js\";\nimport locationLayer from \"@/modules/locationLayer/locationComponent.vue\";\n\n// import videoField from \"@/components/VideoField.vue\";\n//---------------------RTC LAYER-----------------------------------------------\n// import RTCLayerModule from \"@/modules/RTCLayer/index.js\";\nimport RTCGroup from \"@/modules/RTCLayer/RTCGroup.vue\";\nimport RTCPrivate from \"@/modules/RTCLayer/RTCPrivate.vue\";\n// import TelPrivate from \"@/modules/RTCLayer/TelPrivate.vue\";\n//---------------------MEMO LAYER-----------------------------------------------\n// import { memoLayerModule } from \"@/modules/MemoLayer/index.js\";\n// import { memoEvent } from \"@/modules/MemoLayer/index.js\";\n//---------------------TRACK LAYER-----------------------------------------------\n// import videoField from \"@/components/VideoField.vue\";\n// import { trackLayerModule } from \"@/modules/TrackLayer/index.js\";\n//---------------------MAP CLICK LIST-----------------------------------------------\nimport MapClickList from \"@/components/MapClickList.vue\";\nimport ViewLayersLightbox from \"@/modules/MemoLayer/ViewLayersLightbox.vue\";\nimport ViewLayersDevice from \"@/components/ViewLayersDevice.vue\";\n\nimport layerModules from \"@/modules/layers\";\nimport ModalDialog from \"@/components/ModalDialog.vue\";\nimport CallRec from \"@/components/CallRec.vue\";\nimport ReviewLayer from \"../modules/ReviewLayer\";\nimport ReviewComp from \"../modules/ReviewLayer/reviewComponent.vue\";\n\nimport axios from \"axios\";\nimport { wakeupLock } from \"@/components/wakeupLock.js\";\n// import MapPopup from \"@/components/MapPopup.vue\";\n\nexport default {\n  // props: [\"my_video_showed\"],\n  mixins: [locationLayer],\n  computed: {\n    layerComponents() {\n      return this.$store.state.amt.layerComponents;\n    },\n    isLandscape() {\n      return this.$store.state.screen_landscape;\n    },\n    // video_devices_len() {\n    //   return this.$store.getters[\"ptt/devices_len\"];\n    // },\n    // my_video_class() {\n    //   return this.video_devices_len < 2 ? \"front_class\" : null;\n    // },\n    is_remote_showed() {\n      return this.$store.getters[\"rtc/remote_show\"];\n    },\n    myId() {\n      return this.$store.getters[\"amt/myId\"];\n    },\n    sip() {\n      return this.$store.getters[\"sip\"];\n    },\n    map() {\n      return this.$store.state.map;\n    },\n    review() {\n      return this.$store.getters[\"review\"];\n    },\n  },\n  data() {\n    return {\n      mapView: null,\n      mainLayer: null,\n      mapCenterCoord: [\n        this.$store.state.initial_lng,\n        this.$store.state.initial_lat,\n      ],\n      zoomVal: 14,\n      dests: [],\n      destsNotRest: [],\n      showMapMenu: false,\n      renewTime: new Date(),\n      screen_portrait: false,\n      // matchMedia_tate: window.matchMedia(\"(orientation: portrait)\")\n      info_json: null,\n      // drawLineColor: this.$store.state.draw_color,\n      is_dialog_visible: false,\n      dialog_msg: \"\",\n      serveralive: null,\n      is_serveralive_dialog_visible: false,\n      serveralive_dialog_msg: \"サーバに接続できません\",\n      httpsalive: null,\n      mapWindow_display: false,\n      top: \"14vh\",\n      left: \"1.5rem\",\n      last_pos: null,\n      local_stream: null,\n    };\n  },\n  components: {\n    rightButton: RightButton,\n    phoneButton: PhoneButton,\n    // videoField: videoField,\n    mapMenu: MapMenu,\n    rtcGroup: RTCGroup,\n    rtcPrivate: RTCPrivate,\n    // telPrivate: TelPrivate,\n    modalDialog: ModalDialog,\n    callRec: CallRec,\n    StreamIo: StreamIo,\n    mapClickList: MapClickList,\n    viewLayersDevice: ViewLayersDevice,\n    viewLayersLightbox: ViewLayersLightbox,\n    reviewComp: ReviewComp,\n  },\n  methods: {\n    logDebug(msg) {\n      this.$store.state.logger.debug(msg);\n    },\n    log(msg) {\n      this.$store.state.logger.info(msg);\n    },\n    logError(msg) {\n      this.$store.state.logger.error(msg);\n    },\n    // async video_toggle() {\n    //   if (this.$store.state.memo_recording) {\n    //     this.show_msg_dialog(\"録画中のためカメラ切替は行えません。\");\n    //     return;\n    //   }\n    //   if (this.video_devices_len < 2) {\n    //     // カメラが1台の場合、鏡映しのまま、トグルしない\n    //     return;\n    //   }\n    //   await this.$store.state.p2p.toggleCamera();\n    //   const is_front = this.$store.state.p2p.is_my_video_front();\n    //   this.$refs.MemoComponent.re_stream();\n    //   if (is_front) {\n    //     document.getElementById(\"my_video\").classList.add(\"front_class\");\n    //   } else {\n    //     document.getElementById(\"my_video\").classList.remove(\"front_class\");\n    //   }\n    // },\n\n    on_stream(stream) {\n      this.local_stream = stream;\n    },\n    show_msg_dialog(msg) {\n      this.dialog_msg = msg;\n      this.is_dialog_visible = true;\n    },\n    close_msg_dialog() {\n      this.is_dialog_visible = false;\n    },\n    menuBtnClick() {\n      // マップのメニュー表示をトグル\n      // ここは表示のトグルだけすればいい\n      this.showMapMenu = !this.showMapMenu;\n      // ボタンの処理は何処でレイヤの呼び出しに切り替えればいい？/\n    },\n    mapCenter() {\n      let myCoord = null;\n      try {\n        const myData = this.$store.state.users[this.$store.state.myId];\n        if (myData.lng != null && myData.lat != null) {\n          myCoord = ol.proj.transform(\n            [myData.lng, myData.lat],\n            \"EPSG:4326\",\n            \"EPSG:3857\"\n          );\n        }\n      } catch (e) {\n        myCoord = null;\n      }\n      if (myCoord == null) {\n        myCoord = ol.proj.transform(\n          this.mapCenterCoord,\n          \"EPSG:4326\",\n          \"EPSG:3857\"\n        );\n      }\n      return myCoord;\n    },\n    toCenter() {\n      this.$store.state.map.getView().setCenter(this.mapCenter());\n      this.$store.commit(\"setCenterTrace\", Date.now());\n    },\n    toCenterTrial() {\n      const myData = this.$store.state.users[this.$store.state.myId];\n      if (myData != null && myData.lng != null && myData.lat != null) {\n        this.toCenter();\n      } else {\n        setTimeout(this.toCenterTrial, 500);\n      }\n    },\n    showMap() {\n      // メインレイヤー\n      const url = this.$store.state.tiles_url;\n      this.mainLayer = new ol.layer.Tile({\n        source: new ol.source.OSM({ url }),\n        // source: new ol.source.OSM(),\n        opacity: 1,\n        visible: true,\n      });\n\n      // viewを生成する\n      this.mapView = new ol.View({\n        projection: \"EPSG:3857\",\n        center: this.mapCenter(),\n        zoom: this.zoomVal,\n      });\n\n      // mapを生成する\n      const map = new ol.Map({\n        target: \"mapField\",\n        layers: [this.mainLayer],\n        view: this.mapView,\n        controls: olControl.defaults({\n          zoom: true,\n          attribution: true,\n          attributionOptions: {\n            collapsible: true,\n            left: \"30px\",\n          },\n          rotate: false,\n        }),\n        interactions: ol.interaction.defaults({\n          altShiftDragRotate: false,\n          pinchRotate: false,\n        }),\n      });\n      this.$store.commit(\"setMap\", map);\n\n      this.toCenterTrial();\n    },\n    togglePeepDisp() {\n      this.$refs.vfield.togglePeepDisp();\n    },\n    renew(newUsers, newDests) {\n      if (!this.review) {\n        clearTimeout(this.serveralive);\n        const last_renew_time = Date.now();\n        this.is_serveralive_dialog_visible = false;\n        this.serveralive = setTimeout(() => {\n          // 10秒間renew通知が来なかった場合はモーダルを表示する\n          this.serveralive_dialog_msg = `サーバに接続出来ません。\\n最終接続時刻：${new Date(\n            last_renew_time\n          ).toLocaleTimeString()}\\n現在時刻：${new Date().toLocaleTimeString()}`;\n          this.is_serveralive_dialog_visible = true;\n        }, 10000);\n      }\n      //アイコン\n      this.updateIcons(newUsers); //location layer\n      // Center Trace Mode\n      if (this.$store.state.center_trace > 0) {\n        this.toCenter();\n      }\n    },\n\n    // // renew通知受信時の処理\n    // // newUsers : renew通知の着信内容\n    // // newDests : newUsersのキー（ユーザID）\n    // renew(newUsers, newDests) {\n    //   clearTimeout(this.serveralive);\n    //   this.is_serveralive_dialog_visible = false;\n    //   this.serveralive = setTimeout(() => {\n    //     // 10秒間renew通知が来なかった場合はモーダルを表示する\n    //     this.is_serveralive_dialog_visible = true;\n    //   }, 10000);\n\n    //   // newUsers[dest].statusが1,2のモノのみを抽出\n    //   // statusは業務状態で3が休憩中に相当するため、休憩中を除外する処理だが、\n    //   // 既に業務状態は廃止されているため、ほぼ、意味は無い\n    //   const newDestsNotRest = newDests.filter(dest =>\n    //     [1, 2].includes(newUsers[dest].status)\n    //   );\n    //   //アイコン\n    //   this.updateIcons(newUsers, newDestsNotRest); //location layer\n    //   // Center Trace Mode\n    //   if (this.$store.state.center_trace > 0) {\n    //     this.toCenter();\n    //   }\n    //   //ビデオ枠\n    //   this.$refs.vfield.updateVideoUnits(newUsers, newDestsNotRest);\n\n    //   // this.update_track(newUsers);\n    //   // 現在データを設定\n    //   this.dests = newDests;\n    //   this.destsNotRest = newDestsNotRest;\n    // }\n  },\n  created() {\n    this.$store.commit(\"setAtMap\", true);\n  },\n  mounted() {\n    //this.$store.commit(\"setPage\", \"map\");\n    this.showMap();\n    this.initLocationLayer();\n    wakeupLock(() => {\n      // 画面復帰後に実施したい処理\n      this.$refs.stream_io.re_get_stream(); //自カメラの再取得\n    });\n\n    this.$store.state.map.on(\"click\", (ev) => {\n      var point = ol.proj.transform(ev.coordinate, \"EPSG:3857\", \"EPSG:4326\");\n      console.log(`NOW CLICK = ${JSON.stringify(point)}`);\n    });\n\n    // this.$store.state.center_traceには、0値以外の場合、toCenterメゾッドを実施した時間が保管されている。\n    // 0値の場合、自アイコン追従を行っていない事を示す。\n    this.$store.state.map.on(\"movestart\", (ev) => {\n      const time_toCenter = Date.now() - this.$store.state.center_trace;\n      console.log(`MOVE toCenter: ${time_toCenter}`);\n\n      // if (this.$store.state.center_trace == 1) {\n      //   this.$store.commit(\"setCenterTrace\", 0);\n      // }\n      if (time_toCenter < 100) {\n        console.log(\n          \"MOVE toCenter:これは、toCenterメゾッドによる移動と判断して、自アイコン追従を継続する。\"\n        );\n      } else {\n        console.log(\n          \"MOVE toCenter:1秒以上経過しているので、手動による移動と判断して、自アイコン追従を止める。\"\n        );\n        this.$store.commit(\"setCenterTrace\", 0);\n      }\n    });\n\n    // this.$store.state.map.on(\"moveend\", ev => {\n    //   const center_coord = this.mapCenter();\n    //   const current_pos = this.$store.getters[\"amt/myPosition\"];\n    //   const current_coord = ol.proj.transform(\n    //     [current_pos.lng, current_pos.lat],\n    //     \"EPSG:4326\",\n    //     \"EPSG:3857\"\n    //   );\n    //   if (\n    //     center_coord[0] == current_coord.lng &&\n    //     center_coord[1] == current_coord.lat\n    //   ) {\n    //     console.log(\"// toCenterメゾッドによる移動\");\n    //     this.$store.commit(\"setCenterTrace\", 1);\n    //   } else {\n    //     console.log(\"// 手動による移動\");\n    //     this.$store.commit(\"setCenterTrace\", 0);\n    //   }\n    // });\n\n    // layers.jsに登録されたレイヤをマップに追加\n    layerModules.forEach((m) => {\n      m.layer.add();\n      this.$store.commit(\"amt/registLayer\", m);\n      // layer.jsの初期値設定\n      if (undefined !== m.visible) {\n        // 表示状態\n        m.layer.setVisible(m.visible);\n      }\n      if (undefined !== m.opacity) {\n        // 透過率\n        m.layer.setOpacity(m.opacity);\n      }\n      if (undefined !== m.zIndex) {\n        // zIndex\n        m.layer.setZIndex(m.zIndex);\n      }\n    });\n\n    // 画面クリック時の一覧表示スキップ判定処理\n    this.$store.state.map.on(\"click\", (ev) => {\n      // 1個しか対象がなければそのままクリックしたときの処理を走らせる\n      // クリックイベントのコールバックは登録順に実行されるので最後のコールバックとして登録\n      const click_targets = this.$store.state.click_targets;\n      // click_targetは配列なのでlength=1の場合、対象1件のみと判定\n      if (1 == click_targets.length) {\n        click_targets[0].click(click_targets[0].param);\n      }\n    });\n\n    // ----------------------------------------------------------------------------------------------\n    // サーバ側で一旦、api/httpsaliveを止めているので、コメントアウト\n    // ----------------------------------------------------------------------------------------------\n    // let httpsalive_count = 0;\n    // // https通信のアライブチェック\n    // this.httpsalive = setInterval(async function () {\n    //   // 周期＝15秒、リトライ回数＝4回\n    //   // サーバーへ通信を行ってレスポンスを確認する\n    //   const url = \"/api/httpsalive/\";\n    //   const ctx = await axios.get(url);\n    //   let res = ctx.data;\n    //   if (res == \"OK\") {\n    //     // フラグをリセット\n    //     httpsalive_count = 0;\n    //   } else {\n    //     // フラグのカウントを進める\n    //     httpsalive_count += 1;\n    //     if (httpsalive_count == 5) {\n    //       console.log(\"HTTPS alive timeout.\");\n    //       // 再ログイン画面の表示\n    //       // location.href = \"/logout\";\n    //       if (this.$store.state.renew_timerId) {\n    //         console.log(`-------CLEAR TIMER (RENEW ID:${this.$store.state.renew_timerId})-------`);\n    //         clearInterval(this.$store.state.renew_timerId);\n    //         this.$store.state.socketio.disconnect();\n    //       }\n    //       await this.ldb.clear();\n    //       this.$router.push(\"/Regist/input\")\n    //     } else {\n    //       console.log(\n    //         `HTTPS alive error: count=${httpsalive_count}, res=${res}`\n    //       );\n    //     }\n    //   }\n    // }, 15000);\n    // ----------------------------------------------------------------------------------------------\n  },\n  beforeDestroy() {\n    this.$store.commit(\"setAtMap\", false);\n    // this.$store.state.socketio.off(\"renew\");\n    // this.trackLayer.remove();\n  },\n};\n</script>\n\n<style>\ndiv#mapField {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\ndiv#iconMenu {\n  width: 8.6rem;\n  height: 7.9rem;\n  font-size: 0.5rem;\n}\nbutton.mapBtn {\n  width: 3.6rem;\n  height: 3.6rem;\n  background-color: black;\n  border: none;\n  border-radius: 50%;\n  color: white;\n  outline: none !important;\n  transition: background-color, color 0.3s ease-in;\n}\nbutton.mapBtn:active {\n  background-color: darkgray;\n}\nbutton.mapBtn img {\n  width: 1.4rem;\n  height: 1.4rem;\n}\nbutton#mapVideoBtn {\n  position: absolute;\n  right: 0;\n  top: 0;\n}\nbutton#mapTelBtn {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\nbutton#mapSipBtn {\n  position: absolute;\n  bottom: 0;\n  left: calc(50% - 1.8rem);\n}\n\n.ol-zoom {\n  display: none !important;\n}\n.ol-attribution {\n  display: none !important;\n}\ndiv.credit {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(255, 255, 255, 0.5);\n  z-index: 100;\n  font-size: 12px;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MapField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MapField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapField.vue?vue&type=template&id=d67f432c&\"\nimport script from \"./MapField.vue?vue&type=script&lang=js&\"\nexport * from \"./MapField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapField.vue?vue&type=style&index=0&id=d67f432c&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div v-if=\"ready\" class=\"home\">\n    <amtHeader class=\"home_header\"></amtHeader>\n    <!-- <baseField class=\"home_base\" @groupSelected=\"groupSelected\"></baseField> -->\n    <baseField class=\"home_base\"></baseField>\n    <mapField ref=\"map\" class=\"home_map\"></mapField>\n    <div class=\"home_mask\" v-if=\"$store.state.mask\"></div>\n\n    <modalDialog\n      v-if=\"alert.show\"\n      v-on:modalDialogYes=\"$store.commit('alertOff')\"\n    >\n      <span slot=\"header\">{{ alert.header }}</span>\n      <span slot=\"body\">{{ alert.body }}</span>\n    </modalDialog>\n\n    <modalDialog v-if=\"confirm.show\">\n      <span slot=\"header\">{{ confirm.header }}</span>\n      <span slot=\"body\">{{ confirm.body }}</span>\n      <div slot=\"footer\">\n        <b-button variant=\"primary\" @click=\"confirm.funcNo()\"\n          >キャンセル</b-button\n        >\n        <b-button variant=\"primary\" @click=\"confirm.funcYes()\"\n          >ログアウト</b-button\n        >\n      </div>\n    </modalDialog>\n\n    <!-- メッセージ用モーダルダイアログ -->\n    <modalDialog v-if=\"is_dialog_visible && user\">\n      <span slot=\"header\">AirMultiTalk</span>\n      <span slot=\"body\"\n        >{{ group_name }}/{{ user.user_name }}としてログインしました</span\n      >\n      <div slot=\"footer\">\n        <button class=\"btn btn-primary\" @click=\"close_msg_dialog\">はい</button>\n      </div>\n    </modalDialog>\n    <audio ref=\"sound_el\" :src=\"this.sound_file\"></audio>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport userLocationMaker from \"@/components/userLocation.js\";\nimport { loggerMaker } from \"@/components/logger.js\";\nimport AmtHeader from \"@/components/HeaderComp.vue\";\nimport BaseField from \"@/components/BaseField.vue\";\nimport MapField from \"@/components/MapField.vue\";\nimport ModalDialog from \"@/components/ModalDialog.vue\";\n\nimport io from \"socket.io-client\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { evEmitter_client, evEmitter_serv } from \"../components/evemitter\";\n\nexport default {\n  data() {\n    return {\n      mqlDisp: window.matchMedia(\"(min-width: 480px)\"),\n      sound_file: require(\"@/assets/button.mp3\"),\n      is_dialog_visible: false,\n      ready: false,\n    };\n  },\n  components: {\n    amtHeader: AmtHeader,\n    baseField: BaseField,\n    mapField: MapField,\n    modalDialog: ModalDialog,\n  },\n  methods: {\n    initExec() {\n      const logger = loggerMaker(this.$store);\n      this.$store.commit(\"setLogger\", logger);\n      this.$store.state.logger.setMode(this.$store.state.logMode);\n      this.$store.state.logger.setLevel(0);\n      const userLocation = userLocationMaker(this.$store.state.socketio);\n      this.$store.commit(\"setUserLocation\", userLocation);\n      this.$store.state.userLocation.initPos(\n        this.$store.state.myId,\n        this.$store.state.myName\n      );\n    },\n    async logout() {\n      // location.href = \"/logout\";\n      if (this.$store.state.renew_timerId) {\n        console.log(\n          `-------CLEAR TIMER (RENEW ID:${this.$store.state.renew_timerId})-------`\n        );\n        clearInterval(this.$store.state.renew_timerId);\n        this.$store.state.socketio.disconnect();\n      }\n      await this.ldb.clear();\n      this.$router.push(\"/Regist\");\n    },\n    toFullScreen() {\n      let doc = window.document;\n      let docEl = doc.documentElement;\n      let requestFullScreen =\n        docEl.requestFullscreen ||\n        docEl.mozRequestFullScreen ||\n        docEl.webkitRequestFullScreen ||\n        docEl.msRequestFullscreen;\n      if (\n        !doc.fullscreenElement &&\n        !doc.mozFullScreenElement &&\n        !doc.webkitFullscreenElement &&\n        !doc.msFullscreenElement\n      ) {\n        requestFullScreen.call(docEl);\n      }\n    },\n    display() {\n      this.mqlDisp.addEventListener(\"change\", (ev) => {\n        this.$store.commit(\"set_screen_landscape\", ev.matches);\n      });\n    },\n    logDebug(msg) {\n      this.$store.state.logger.debug(msg);\n    },\n    log(msg) {\n      this.$store.state.logger.info(msg);\n    },\n    logError(msg) {\n      this.$store.state.logger.error(msg);\n    },\n    sound_on(url) {\n      if (url) {\n        this.$refs.sound_el.src = url;\n        this.$refs.sound_el.onended = () => {\n          this.$store.commit(\"rtc/set_remote_audio_stream\", null);\n          // this.$store.commit(\"ptt/set_recv_active\", false);\n          this.$refs.sound_el.src = this.sound_file;\n        };\n        this.$refs.sound_el.onloadedmetadata = () => {\n          this.$store.commit(\n            \"rtc/set_remote_audio_stream\",\n            this.$refs.sound_el.captureStream()\n          );\n          // this.$store.commit(\"ptt/set_recv_active\", true);\n          this.$refs.sound_el.play();\n          this.$refs.sound_el.onloadedmetadata = null;\n        };\n      } else {\n        this.$refs.sound_el.play();\n      }\n    },\n    toast_on(txt, variant) {\n      this.$bvToast.toast(txt, {\n        title: \"AirMultiTalk\",\n        toaster: \"b-toaster-top-center\",\n        variant: variant || \"danger\",\n        autoHideDelay: 3000,\n        appendToast: true,\n      });\n    },\n    close_msg_dialog() {\n      this.is_dialog_visible = false;\n      this.sound_on();\n    },\n  },\n  async mounted() {\n    // -------------------------------------------------------------\n    // App.vueから移動　設定情報の取得\n    // 多重ログインの識別に使用するブラウザのタブごとにユニークなID\n    // const client_id = uuidv4();\n    // const socketio = io.connect();\n    // // const socketio = io.connect({\n    // //   withCredentials: true,\n    // // });\n    // socketio.on(\"connect\", () => {\n    //   socketio.emit(\"join\", { client_id });\n    // });\n    // this.$store.commit(\"setSocketio\", socketio);\n\n    if (this.review) {\n      const evEmitter = evEmitter_client();\n      this.$store.commit(\"setSocketio\", evEmitter);\n    } else {\n      const client_id = uuidv4();\n      const socketio = io.connect();\n      // const socketio = io.connect({\n      //   withCredentials: true,\n      // });\n      socketio.on(\"connect\", () => {\n        socketio.emit(\"join\", { client_id });\n      });\n      this.$store.commit(\"setSocketio\", socketio);\n    }\n\n    // サーバから設定取得\n    await this.$store.dispatch(\"init\");\n    // いろいろと初期化\n    this.initExec();\n    this.ready = true;\n    // -------------------------------------------------------------\n    const prevPage = this.$store.state.page;\n    this.$store.commit(\"setPage\", \"map\");\n    this.$store.commit(\"set_sound_on\", this.sound_on);\n    this.$store.commit(\"set_toast_on\", this.toast_on);\n\n    const on_renew = (msg) => {\n      // console.log(msg);\n      // if (!this.review && this.local_audio_stream == null) return;\n\n      const newUsers = JSON.parse(msg);\n      if (!this.review) {\n        if (this.local_audio_stream == null) return;\n\n        const mySid = this.$store.state.socketio.id;\n\n        // if (!Object.values(newUsers).some((u) => u.sid === mySid && !this.review)) {\n        if (!Object.values(newUsers).some((u) => u.sid === mySid)) {\n          // 自分のsocket.idが見つからない場合、\n          // 自端末のrenew通知がまだサーバに届いていないか、認証エラーで破棄されている\n          return;\n        }\n      }\n      // 追加：自分のgroup_idと一致するモノだけ表示する2022/07/25\n      const _newUsers = {};\n      Object.keys(newUsers)\n        .filter((id) => {\n          return id !== \"system\" && newUsers[id].group_id === this.group_id;\n        })\n        .forEach((id) => {\n          _newUsers[id] = newUsers[id];\n        });\n      this.$refs.map.renew(_newUsers);\n\n      // サーバーのデータを現在ユーザデータとする。\n      this.$store.commit(\"setUsers\", newUsers);\n    };\n    this.$store.state.socketio.on(\"renew\", on_renew);\n    this.display();\n    this.is_dialog_visible = true;\n  },\n  beforeDestroy() {\n    // this.$store.state.socketio.off(\"renew\");\n    // evEmitter.off(\"review\", on_review);\n  },\n  computed: {\n    myId() {\n      return this.$store.getters[\"amt/myId\"];\n    },\n    group_id() {\n      return this.$store.getters[\"group_id\"];\n    },\n    users() {\n      return this.$store.getters[\"amt/users\"];\n    },\n    user() {\n      return this.myId && this.users[this.myId];\n    },\n    group_name() {\n      const groups = this.$store.state.groups;\n      const group = Object.values(groups).find((gr) => {\n        return gr.group_id == this.group_id;\n      });\n      return group && group.group_name ? group.group_name : \"\";\n    },\n    local_audio_stream() {\n      return this.$store.getters[\"rtc/local_audio_stream\"];\n    },\n    ptt_type() {\n      return this.$store.state.ptt_type;\n    },\n    ptt_type_socketio() {\n      return this.ptt_type == \"socketio\";\n    },\n    confirm() {\n      return this.$store.state.confirm;\n    },\n    alert() {\n      return this.$store.state.alert;\n    },\n    review() {\n      return this.$store.getters[\"review\"];\n    },\n  },\n};\n</script>\n\n<style>\n@media screen and (min-width: 0px) and (max-width: 479px) {\n  .home {\n    display: grid;\n    height: 100%;\n    grid-template-rows: 10% 90%;\n    grid-template-columns: 0% 100%;\n    transition: all 0.3s ease-in-out 0s;\n  }\n  .home_base {\n    display: none;\n  }\n}\n@media screen and (min-width: 480px) {\n  .home {\n    display: grid;\n    height: 100%;\n    grid-template-rows: 10% 90%;\n    grid-template-columns: 15% 85%;\n  }\n  .home_base {\n    display: block;\n  }\n}\n\n.home_header {\n  grid-row: 1 / 2;\n  grid-column: 1 / 3;\n}\n.home_base {\n  grid-row: 2 / 3;\n  grid-column: 1 / 2;\n  position: relative;\n}\n.home_map {\n  grid-row: 2 / 3;\n  grid-column: 2 / 3;\n  position: relative;\n}\n.home_mask {\n  position: fixed;\n  z-index: 20;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.2);\n  display: table;\n  transition: opacity 0.3s ease;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomePage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomePage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HomePage.vue?vue&type=template&id=fbee53a8&\"\nimport script from \"./HomePage.vue?vue&type=script&lang=js&\"\nexport * from \"./HomePage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HomePage.vue?vue&type=style&index=0&id=fbee53a8&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"width\":\"500px\"}},[_c('div',{staticClass:\"waiting_text\"},[_vm._v(\"ログイン中です\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div width=\"500px\">\n    <div class=\"waiting_text\">ログイン中です</div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      challenge: \"\",\n      privateKey: null,\n      userId: null,\n    };\n  },\n  async mounted() {\n    await this.init();\n  },\n  methods: {\n    async init() {\n      console.log(\"Login: init start\");\n      try {\n        // 秘密鍵の確認\n        this.privateKey = await this.ldb.getItem(\"private_key\");\n        // IDの確認\n        this.userId = await this.ldb.getItem(\"userId\");\n\n        console.log(\"privateKey = \");\n        console.log(this.privateKey);\n        console.log(`userId = ${this.userId}`);\n\n        if (!this.privateKey || !this.userId) {\n          await this.ldb.clear();\n          // this.$router.push(\"/Regist/input\");\n          this.$router.push(\"/Regist\");\n        } else {\n          await this.get_challenge();\n          await this.post();\n        }\n      } catch (err) {\n        console.log(err);\n      }\n      console.log(\"Login: init end\");\n    },\n    async get_challenge() {\n      // challengeの取得\n      try {\n        const res = await fetch(\"/api/req_login\");\n        if (res.ok) {\n          const res_json = await res.json();\n          this.challenge = res_json.challenge;\n          console.log(`challenge = ${this.challenge}`);\n          return res_json;\n        }\n      } catch (err) {\n        console.log(err);\n        return null;\n      }\n    },\n    async post() {\n      // 署名の作成\n      const signature = await this.sign(this.privateKey, this.challenge);\n      try {\n        const res = await fetch(\"/api/req_auth\", {\n          method: \"post\",\n          catch: \"no-cache\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            id: this.userId,\n            challenge: this.challenge,\n            sign: signature,\n          }),\n        });\n        if (res.ok) {\n          const res_json = await res.json();\n          console.log(res_json);\n          if (\n            res_json.message == \"おめでとうございます。署名が検証出来ました。\"\n          ) {\n            // this.$store.dispatch(\"auth_fetch\", this.userId);\n            this.$store.commit(\"setAuth\", this.userId);\n\n            console.log(\"router : ROOTに行きます。\");\n            if (res_json.path === \"/review\") {\n              this.$store.commit(\"setReview\", true);\n            }\n            this.$router.push(\"/\");\n          } else {\n            console.log(\"router : Registに戻ります。\");\n            await this.ldb.clear();\n            this.$router.push(\"/Regist?state=error\");\n          }\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    ab2str(buf) {\n      return String.fromCharCode.apply(null, new Uint8Array(buf));\n    },\n    async sign(key, data) {\n      const sign_arraybuff = await crypto.subtle.sign(\n        \"RSASSA-PKCS1-v1_5\",\n        key,\n        new TextEncoder().encode(data)\n      );\n      const sign_str = this.ab2str(sign_arraybuff);\n      return window.btoa(sign_str);\n    },\n  },\n};\n</script>\n<style scoped>\n.waiting_text {\n  position: absolute;\n  color: white;\n  font-size: 1.5rem;\n  top: 45vh;\n  width: 100%;\n  text-align: center;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LoginPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LoginPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoginPage.vue?vue&type=template&id=12e43584&scoped=true&\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=js&\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LoginPage.vue?vue&type=style&index=0&id=12e43584&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12e43584\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{attrs:{\"id\":\"form-wrapper\"}},[_c('div',[_vm._m(0),_c('div',{staticClass:\"form-group\"},[_c('b-input',{staticClass:\"form-control\",attrs:{\"required\":\"\",\"type\":\"text\",\"name\":\"username\",\"placeholder\":\"ユーザ名\"},model:{value:(_vm.authId),callback:function ($$v) {_vm.authId=$$v},expression:\"authId\"}})],1),_c('div',{staticClass:\"form-group\"},[_c('b-input',{staticClass:\"form-control\",attrs:{\"type\":\"password\",\"name\":\"password\",\"placeholder\":\"パスワード\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.post.apply(null, arguments)}},model:{value:(_vm.authPass),callback:function ($$v) {_vm.authPass=$$v},expression:\"authPass\"}})],1),_vm._m(1),_c('div',{staticClass:\"form-group\"},[_c('button',{attrs:{\"title\":\"ログイン\"},on:{\"click\":_vm.post}})])])]),_vm._m(2)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login-info mb-5\",attrs:{\"id\":\"alert-wrapper\"}},[_c('div',{staticClass:\"alert alert-success\",attrs:{\"id\":\"login-info-msg\",\"role\":\"alert\"}},[_vm._v(\" ユーザ名とパスワードを入力してください \")]),_c('div',{staticClass:\"alert alert-danger\",attrs:{\"id\":\"login-error-msg\",\"role\":\"alert\"}},[_vm._v(\" ユーザ名かパスワードが間違っています \")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"form-group\"},[_c('div',{staticClass:\"form-check\"},[_c('input',{staticClass:\"form-check-input\",attrs:{\"type\":\"checkbox\",\"name\":\"remember\",\"id\":\"remember\"}}),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"remember\"}},[_vm._v(\" 次回から自動的にログインする \")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"version\"},[_c('p',[_vm._v(\"version 1.2.11\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <!-- <div width=\"500px\">\n    <div>登録</div>\n      <div>{{ msg }}</div>\n      <input type=\"text\" required placeholder=\"ユーザ名\" v-model=\"authId\"/>\n      <input type=\"number\" inputmode=\"password\" step=\"1\" min=\"0\" required placeholder=\"PIN\" v-model=\"authPass\">\n      <button @click=\"post\">登録</button>\n  </div> -->\n  <div>\n    <div id=\"form-wrapper\">\n      <!-- <form target=\"\"> -->\n      <div>\n        <div id=\"alert-wrapper\" class=\"login-info mb-5\">\n          <div id=\"login-info-msg\" class=\"alert alert-success\" role=\"alert\">\n            ユーザ名とパスワードを入力してください\n          </div>\n          <div id=\"login-error-msg\" class=\"alert alert-danger\" role=\"alert\">\n            ユーザ名かパスワードが間違っています\n          </div>\n        </div>\n        <div class=\"form-group\">\n          <b-input\n            class=\"form-control\"\n            required\n            type=\"text\"\n            name=\"username\"\n            placeholder=\"ユーザ名\"\n            v-model=\"authId\"\n          />\n        </div>\n        <div class=\"form-group\">\n          <b-input\n            class=\"form-control\"\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"パスワード\"\n            v-model=\"authPass\"\n            @keydown.enter=\"post\"\n          />\n        </div>\n        <div class=\"form-group\">\n          <div class=\"form-check\">\n            <input\n              class=\"form-check-input\"\n              type=\"checkbox\"\n              name=\"remember\"\n              id=\"remember\"\n            />\n            <label class=\"form-check-label\" for=\"remember\">\n              次回から自動的にログインする\n            </label>\n          </div>\n        </div>\n        <div class=\"form-group\">\n          <button @click=\"post\" title=\"ログイン\"></button>\n        </div>\n        <!-- </form> -->\n      </div>\n    </div>\n    <div class=\"version\">\n      <p>version 1.2.11</p>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      msg: \"登録するIDとPINを入力して下さい\",\n      authId: null,\n      authPass: \"\",\n      pri_pem: \"\",\n      pub_pem: \"\",\n    };\n  },\n  mounted() {\n    if (this.$route.query.state == \"error\") {\n      document\n        .getElementById(\"alert-wrapper\")\n        .classList.replace(\"login-info\", \"login-error\");\n    }\n  },\n  computed: {\n    isLogined() {\n      return this.$store.getters(\"isLogined\");\n    },\n    userId() {\n      return this.$store.getters(\"userId\");\n    },\n  },\n  methods: {\n    async msg_hash256(msg) {\n      const hashBuffer = await crypto.subtle.digest(\n        \"SHA-256\",\n        new Uint8Array(new TextEncoder().encode(msg))\n      );\n      const hashArray = Array.from(new Uint8Array(hashBuffer)); // convert buffer to byte array\n      return hashArray.map((b) => b.toString(16).padStart(2, \"0\")).join(\"\"); // convert bytes to hex string\n    },\n    async post() {\n      console.log(\"This is post()\");\n      // 鍵ペアの作成\n      const privateKey = await this.generateRsaKey();\n      // IDの登録\n      await this.ldb.setItem(\"userId\", this.authId);\n\n      // 公開鍵の転送\n      const hashHex = await this.sign(\n        privateKey,\n        `${this.authId}.${this.authPass}.${this.pub_pem}`\n      );\n      try {\n        const res = await fetch(\"/api/regist\", {\n          method: \"post\",\n          catch: \"no-cache\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            id: this.authId,\n            password: this.authPass,\n            publicKey: this.pub_pem,\n            sign: hashHex,\n          }),\n        });\n        if (res.ok) {\n          const res_json = await res.json();\n          console.log(res_json);\n          console.log(\"router : Loginに行きます。\");\n          this.$router.push(\"/Login\");\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async generateRsaKey() {\n      console.log(\"This is generateRsaKey\");\n      const keys = await crypto.subtle.generateKey(\n        {\n          name: \"RSASSA-PKCS1-v1_5\",\n          modulusLength: 2048,\n          publicExponent: new Uint8Array([1, 0, 1]),\n          hash: \"SHA-256\",\n        },\n        true,\n        [\"sign\", \"verify\"]\n      );\n\n      this.pri_pem = await this.exportKeyPem(\"PRIVATE\", keys.privateKey);\n      console.log(this.pri_pem);\n      this.pub_pem = await this.exportKeyPem(\"PUBLIC\", keys.publicKey);\n      console.log(this.pub_pem);\n\n      // // --------------- TEST : publicKey -----------------------------------\n      // console.log(\"--------------- TEST : publicKey START-----------------------------------\");\n      // 公開鍵\n      // const publicKey = await this.importRsaKey(this.pub_pem);\n      // console.log(publicKey);\n      // 秘密鍵\n      // const privateKey = await this.importRsaKey(this.pri_pem);\n      // console.log(privateKey);\n\n      // // const str_signature = await this.sign(keys.privateKey, \"HELLO, WORLD\");\n      // // const res = await this.verify(publicKey, str_signature, \"HELLO, WORLD\");\n      // // console.log(`結果：${res}`);\n      // console.log(\"--------------- TEST : publicKey END-----------------------------------\");\n\n      // 秘密鍵のDB登録\n      await this.ldb.setItem(\"private_key\", keys.privateKey);\n      return keys.privateKey;\n    },\n    // async sign(key, data) {\n    //   return await crypto.subtle.sign(\"RSASSA-PKCS1-v1_5\", key, (new TextEncoder()).encode(data));\n    // },\n    async sign(key, data) {\n      const sign_arraybuff = await crypto.subtle.sign(\n        \"RSASSA-PKCS1-v1_5\",\n        key,\n        new TextEncoder().encode(data)\n      );\n      const sign_str = this.ab2str(sign_arraybuff);\n      return window.btoa(sign_str);\n    },\n    async verify(key, signature, data) {\n      const verified = await crypto.subtle.verify(\n        \"RSASSA-PKCS1-v1_5\",\n        key,\n        signature,\n        new TextEncoder().encode(data)\n      );\n      return verified;\n    },\n    str2ab(str) {\n      console.log(`LEN=${str.length}`);\n      const buf = new ArrayBuffer(str.length);\n      const bufView = new Uint8Array(buf);\n      for (let i = 0, strLen = str.length; i < strLen; i++) {\n        bufView[i] = str.charCodeAt(i);\n      }\n      return buf;\n    },\n    ab2str(buf) {\n      return String.fromCharCode.apply(null, new Uint8Array(buf));\n    },\n    async importRsaKey(pem) {\n      const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\n      const pemFooter = \"-----END PUBLIC KEY-----\";\n      const pemContents = pem.substring(\n        pemHeader.length,\n        pem.length - pemFooter.length\n      );\n      const binaryDerString = window.atob(pemContents);\n      const binaryDer = this.str2ab(binaryDerString);\n      console.log(binaryDer);\n      const key = await crypto.subtle.importKey(\n        \"spki\",\n        binaryDer,\n        {\n          name: \"RSASSA-PKCS1-v1_5\",\n          hash: \"SHA-256\",\n        },\n        true,\n        [\"verify\"]\n      );\n      console.log(key);\n      return key;\n    },\n    async exportKeyPem(key_type, key) {\n      const format = key_type == \"PUBLIC\" ? \"spki\" : \"pkcs8\";\n      const publicKey = await crypto.subtle.exportKey(format, key);\n      let body = window.btoa(String.fromCharCode(...new Uint8Array(publicKey)));\n      body = body.match(/.{1,64}/g).join(\"\\n\");\n      return `-----BEGIN ${key_type} KEY-----\\n${body}\\n-----END ${key_type} KEY-----`;\n    },\n  },\n};\n</script>\n\n<style scoped>\nbody {\n  background-image: url(\"../assets/bg10.png\");\n  background-size: cover;\n  color: white;\n}\n#form-wrapper {\n  /* formを画面中央に配置 */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n}\n\n@media screen and (min-width: 400px) {\n  form {\n    width: 360px;\n  }\n}\n\nbutton {\n  /* ボタンを左右中央に配置 */\n  display: block;\n  margin: auto;\n  /* デフォルトのボタンを消して画像を表示 */\n  background-image: url(\"../assets/etc_arrow_01@1x.png\");\n  background-color: transparent;\n  background-size: contain;\n  border: 0;\n  width: 46px;\n  height: 46px;\n  /* 下向きの矢印を270°回転して右向きにする */\n  transform: rotate(270deg);\n}\n\n/* bootstrapのスタイルを上書き */\ninput[type=\"text\"],\ninput[type=\"password\"] {\n  background-color: rgba(250, 250, 250, 0.55);\n  border-color: rgba(250, 250, 250, 0.55);\n}\ninput[type=\"text\"]::placeholder,\ninput[type=\"password\"]::placeholder {\n  color: #38a2c0;\n}\n\n/* JSでlogin-info/login-errorクラスをトグルしてメッセージ表示をON/OFF */\n.login-info #login-error-msg {\n  display: none;\n}\n.login-error #login-info-msg {\n  display: none;\n}\n.version {\n  position: absolute;\n  right: 25px;\n  bottom: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RegistPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RegistPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RegistPage.vue?vue&type=template&id=248b654f&scoped=true&\"\nimport script from \"./RegistPage.vue?vue&type=script&lang=js&\"\nexport * from \"./RegistPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RegistPage.vue?vue&type=style&index=0&id=248b654f&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"248b654f\",\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\n// import HomePage from \"@/views/HomePage.vue\";\nimport Home from \"@/views/HomePage.vue\";\nimport LoginPage from \"@/views/LoginPage.vue\";\nimport RegistPage from \"@/views/RegistPage.vue\";\n// import ReviewPage from \"@/views/ReviewPage.vue\";\nimport $store from \"@/store/index.js\";\n\nVue.use(VueRouter);\n\nconst routes = [\n  //ルーティングの設定\n  {\n    path: \"/\", //ブラウザに表示されるURL\n    component: Home, //表示するコンポーネント\n    name: \"home\", //ルートの名前を指定\n  },\n  // {\n  //   path: \"/review\", //ブラウザに表示されるURL\n  //   component: ReviewPage, //表示するコンポーネント\n  //   name: \"review\", //ルートの名前を指定\n  // },\n  {\n    path: \"/Login\",\n    component: LoginPage,\n    name: \"login\",\n    meta: { isPublic: true },\n  },\n  {\n    path: \"/Regist\",\n    component: RegistPage,\n    name: \"regist\",\n    meta: { isPublic: true },\n  },\n];\n\nconst router = new VueRouter({\n  mode: \"history\",\n  base: process.env.BASE_URL,\n  routes,\n});\n\nrouter.beforeEach((to, from, next) => {\n  if (to.matched.some((record) => !record.meta.isPublic)) {\n    if (!$store.state.isLogined) {\n      console.log(\"そうはさせない！\");\n      next({\n        path: \"/Login\",\n        query: {\n          redirect: to.fullPath,\n        },\n      });\n    } else {\n      next();\n    }\n  } else {\n    next();\n  }\n});\n\nexport default router;\n","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport store from \"./store\";\nimport router from \"./router\";\nimport * as localforage from \"localforage\";\n\nimport BootstrapVue from \"bootstrap-vue\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"bootstrap-vue/dist/bootstrap-vue.css\";\n// import \"./registerServiceWorker\";\nVue.use(BootstrapVue);\n\nconst ldb = localforage.createInstance({\n  driver: localforage.INDEXEDDB,\n  name: \"AuthDB\",\n  storeName: \"name_space\",\n  version: 1,\n});\nVue.prototype.ldb = ldb;\n\nVue.config.productionTip = false;\n\nnew Vue({\n  store,\n  router,\n  render: function (h) {\n    return h(App);\n  },\n}).$mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + (chunkId === 94 ? \"pdfjsWorker\" : chunkId) + \".\" + {\"7\":\"0c9aa363\",\"87\":\"c21d2c26\",\"94\":\"db714a32\",\"125\":\"fb7927de\",\"162\":\"d2ebe2e6\",\"770\":\"d9129aaf\",\"790\":\"5c3d99bc\",\"852\":\"294ad009\",\"853\":\"693f6d49\",\"881\":\"26b6c787\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"amt81:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t};\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkamt81\"] = self[\"webpackChunkamt81\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(98633); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","webpackEmptyContext","render","_vm","this","_c","_self","attrs","staticRenderFns","script","component","componentId","namespaced","state","myPosition","layerComponents","position","lat","lng","altitude","accuracy","altitudeAccuracy","heading","speed","inSubMenu","showed_exit_dialog","layer","registedLayers","isSearchComponent","isSearchComponentList","isSearchComponentSmall","searchDevice","searchTargetDevice","searchTrack","searchMemo","searchLayer","isSearchSelectDevice","isSearchSelectLayer","getters","rootState","rootGetters","socketio","users","myId","patrolState","workStatus","subMenu","exit_dialog","layers","actions","async","context","userId","begin","end","res","url","data","ctx","axios","err","console","log","text","hideMyPosition","commit","showMyPosition","setLayerVisible","layerName","visible","setVisible","setLayerOpacity","opacity","setOpacity","setLayerZIndex","zIndex","setZIndex","setSearchDevice","device","resetSearchDevice","setSearchTrack","track","inputData","push","setSearchLayer","resetSearchLayer","resetSearchTrack","setSearchMemo","memo","resetSearchMemo","showSearchComponent","hideSearchComponent","showSearchComponentList","hideSearchComponentList","showSearchComponentDevice","hideSearchComponentDevice","showSearchComponentSmall","hideSearchComponentSmall","showSearchComponentLayer","hideSearchComponentLayer","mutations","addComponent","every","c","vue","comfirme_exit","val","removeComponent","filter","toggleComponent","setSubMenu","name","registLayer","setSearchTargetDevice","touchPTT","nativePTT","keyPTT","peers","audioDests","audioSrc","recv_active","count","connectionState","trackState","ptt_keycode","rtt_alert","devices_len","local_audio_stream","remote_audio_stream","pttState","pttEnabled","gtters","users_length","pttActive","pttRecv","peerState","peerTrackState","callStatus","set_audioDests","set_ontrack_src","set_recv_active","set_connectionState","set_trackState","set_rtt_over","set_devices_len","initPTT","visibilityChange","window","onPressStatusChanged","document","addEventListener","textInput","target","closest","keyCode","repeat","activeElement","blur","hidden","mozHidden","msHidden","webkitHidden","touchStart","touchEnd","classify_list","classify_name","is_visible_dialog","error_dialog","is_visible","msg","msg_dialog","viewlayer_status","memo_makes_view","clicked_memo","error_msg","is_visible_error_dialog","is_memo_makes_view","set_clicked_memo","set_classify_list","set_classify_name","show_dialog","set_error_dialog","setClickedMemo","setMemoMakesView","local_stream","local_video_stream","remote_video_stream","dummy_video_stream","remote_show","local_show","personal_id","is_front_cam","func_toggle_cam","func_mic_on_off","out_level","local_audio_track","getAudioTracks","local_video_track","getVideoTracks","set_local_stream","set_local_audio_stream","set_remote_audio_stream","set_local_video_stream","video_constraint","getSettings","facingMode","set_dummy_video_stream","set_remote_video_stream","set_remote_show","set_local_show","set_personal_id","set_func_toggole_cam","set_func_mic_on_off","set_out_level","Vue","Vuex","modules","amt","ptt","rtc","isLogined","page","atMap","atPhone","phoneQuering","phoneQuered","p2p","userLocation","activeId","kind","prevActiveId","personalDest","per","mLevel","sLevel","user_type","memoLayer","groups","myName","myFullName","myIcon","terminalInfo","myCompanyId","myCompanyName","initial_lng","initial_lat","initial_time","BASE_ICON_ID","show_track","active_share","center_trace","sound_el","video_frame","video_width","video_rate","video_encode","sound_on","sound_src","toast_on","sip_connecting","mapChangeEvent","logger","debug","info","error","mask","mapWindowLock","phoneStatusNo","phoneStatusStr","timeStr","alert","show","header","body","confirm","funcYes","funcNo","screen_landscape","matchMedia","matches","watch_timerId","renew_timerId","memo_recording","memo_classify","groupListShow","memo_update","click_targets","map_click_visible","view_layers_device","view_layers_device_info","memo_downloadable","review","rec_flag","on_chronology","_users","same_group_members","group_id","length","stun_server","tel_type","tel_code","sip_server","sip","speech_recognition","auto_play","check_connection_period","map_urls","setWatchTimerId","setRenewTimerId","setMemmo_recording","setPage","setAtMap","toggleAtMap","setMap","mapObj","setMyId","setUsers","newUsers","setPer","set_screen_landscape","setAtPhone","toggleAtPhone","setAtNativePhone","atNativePhone","setActiveId","sendRenewNow","clearPrevActiveId","backActiveId","setPersonalDest","clearPersonalDest","setMLevel","level","setSLevel","setMemoLayer","setTrackLayer","trackLayer","setShareLayer","shareLayer","setSocketio","setP2p","setUserLocation","setWorkStatus","setMyIcon","setPhoneQuering","setPhoneQuered","setLogMode","logMode","setLogger","setCenterTrace","setMask","setMapWindowLock","setPhoneStatusNo","setPhoneStatusStr","setTimeStr","alertOn","alertOff","confirmOn","confirmOff","set_sound_el","set_sound_on","set_sound_src","set_toast_on","set_sip_connecting","addClickTargets","setClickTargets","resetClickTargets","displayClickList","hiddenClickList","setGroupListShow","setMemoClassify","setMemoUpdate","resetMemoUpdate","resetMemoUpdateDetail","setViewLayersDevice","setViewLayersDeviceInfo","resetViewLayersDeviceInfo","setAuth","user","setReview","set_rec_flag","set_on_chronology","dispatch","fetch","method","JSON","stringify","headers","json","dir","fixed_pos","last_position","default_lng","default_lat","datetime","group","g","group_name","is_active","is_person","user_id","user_name","user_full_name","company_id","company_name","gps_timeout_ms","logLevel","myColor","track_point","gps_server","volume","tiles_url","callrec","callrec_display","ptt_type","color_picker","isNaN","draw_color","match","parseInt","ready","staticClass","ref","$store","_e","on","$event","slot","_v","_s","is_dialog_visible","close_msg_dialog","sound_file","gps_socket","userLocationMaker","geoOptions","gps_server_addr","gps_timeout","logError","icon","status","emit","enableHighAccuracy","maximumAge","timeout","errorMessage","pos_rounddown","pos","digit","Math","round","pow","initPos","uid","uname","is_valid","timestamp","expires","clearInterval","off","close","io","connected","fix","Date","now","alt","pos_success","coords","latitude","longitude","pos_error","setInterval","navigator","geolocation","getCurrentPosition","now_time","getMyPosition","pageName","loggerMaker","exec","logMsg","setLevel","getLevel","setMode","mode","getMode","onBackLogin","leftButtonSrc","staticStyle","my_video_show","require","my_memo_classify","headerName","isLandscape","classify_disp_name","onVideoButton","directives","rawName","value","expression","workListShowing","show_msg_dialog","classifyListObj","model","callback","$$v","ok_classify_memo","_l","kinds","key","no","style","backgroundColor","colorLine","onClickKind","flagSrc","selectedNo","methods","endDelay","clearTimeout","computed","mounted","wl","toggleGroupSel","selGroupName","groupListShowing","groupSelected","myGroup","grp","colorGroup","onClickGroup","persons","stopPropagation","togglePerson","psn","groupShowing","bgPerson","color","colorPerson","onClickPerson","endTimer","at_pttRecv","title","toaster","variant","autoHideDelay","appendToast","colorNoSel","beforeCreate","h","left","gl","components","groupList","logDebug","setGroupShow","_t","$emit","clickable","classify_userAgent","workList","GroupSelect","modalDialog","watch","path","force","onWorkStatusButton","el","obj","options","is_local_video_showed","beforeDestroy","phoneButtonSrc","phoneTouchStart","phoneTouchEnd","mic_class","mic","audio_url","clearId","audio_level","last_audio_level","audio_press","top","width","in_level","AudioContext","webkitAudioContext","audio_ctx","in_init","input","out_init","get_in_level","get_out_level","timeSec","timer_id","at_send","at_recv","s","startTimer","stopTimer","renewTime","levelField","phoneButton","TimeDisp","toCenter","onMapVideoBtn","onMapTelBtn","onMapSipBtn","dialog_msg","is_serveralive_dialog_visible","serveralive_dialog_msg","is_remote_showed","tag","class","btnClass","toggle_center_mode","backButtonTitle","backBtnClick","backButtonSrc","menus","showMapMenu","addMenu","displayname","activate","show_daialog","share_owner","share_start_yes","share_start_no","exit_dialog_no","exit_dialog_yes","menu_enable","isActive","active_share_desktop","active_share_pdf","page_menu","pdf","prev","next","scale_menu","scale_dec","scale_inc","w","move","canvas_style","show_video","elm","canvas","createElement","getContext","page_num","scale","started","readFileAsync","Promise","reject","reader","FileReader","onload","result","onerror","readAsArrayBuffer","file_obj","func_name","all_off","forEach","renderPDF","pdfDoc","getPage","viewport","getViewport","height","canvasContext","promise","cleanup","readFileAsync_url","blob","fileData","pdfjsLib","type","accept","onchange","files","open","click","destroy","numPages","set_scale","onclick","selected_kind","sizeBtnClick","drawLineSize","lineSizeTicks","change_size","drawLineColor","colorBtnClick","picker","change_color","mode_move","mode_write","toggle_mode_write","toggle_mode_move","pos_style","sdb","show_share_submenu","size","at_erase","at_line","at_move","last_p","array_lines","remote_array_lines","move_timer_id","array_send_point","vueSlider","props","_uuidv4","v","isTouch","ev","getPoint","x","y","getPos","ajust","erase_hit","line","hit","erase","p","send_point","_send_points","src","points","resize","clear","draw","all_draw","start","r_lines","P2P","args","self","LOG","NO_DISP","includes","my_id","iceServers","remote_id","closed","socket","stream","direction","EVENT_KEY","recv_audio_track","recv_video_track","timerIds","pc","RTCPeerConnection","check_types","reports","getStats","catch","flag","res_str","check_items","report","check_type","toLocaleTimeString","item","addTrack","onicecandidate","onsignalingstatechange","oniceconnectionstatechange","ontrack","call_in","call_out","offer_addTrack","answer_addTrack","recv_msg","setStream","local_direction","audio_track","video_track","a_transceiver","sender","replaceTrack","getTransceivers","find","tr","v_transceiver","addTransceiver","streams","MediaStream","receiver","candidate","dest","signalingState","iceConnectionState","parse","setRemoteDescription","createAnswer","then","answer","setLocalDescription","_data","sdp","localDescription","addIceCandidate","remote_direction","createOffer","offer","last_stream","onmute","getDesktopStream","mConstruction","construction","video","displaySurface","frameRate","audio","mediaDevices","getDisplayMedia","srcObject","play","P2G","userHash","last_user_ids","remotes","callbacks","event_name","callback_func","on_renew","new_users","del_users","user_ids","splice","indexOf","peer","captureStream","current_stream_src","pdf_ctx","p2g","playing","img","org_w","org_h","scale_period","canvasDraw","call_in_canvas","on_call_in_canvas","exit_subMenu","ShareLayer","noop","infos","add","get_info","ShareComponent","setActive","active","my_group_id","getActive","remove","update","remote_users","is_showed","zIndex_down","call_end","styleObj","videoStyleObj","pre_mdown","mmove","mup","gripStyleObj","preventDefault","rdown","apply","arguments","rmove","rup","move_flag","move_once","resize_flag","init_pos","last_pos","watching","pre_mup","mdown","borderRadius","Opacity","border","minWidth","overflow","borderBottomColor","is_group_in_local","titleStyleObj","img_menu","talk_mode","onTitleClick","rotate90","downButtonSrc","is_private_in_local","stop","img_close","is_loading","_m","remote_video_none","onC360play","domProps","fullscreen","$refs","remote_video","settings_height","settings_frameRate","show_audio","style_remote_audio","audio_on_off","img_mic","draw_level","target_id","err_flag","last_remoteTimestamp","codecs","RTCRtpSender","getCapabilities","_mimeType_list","codec","mimeType","mimeType_list","Set","create_peer","on_icecandidate","on_track","on_iceconnectionstatechange","onconnectionstatechange","on_connectionstatechange","on_signalingstatechange","delete_peer","recved_msg","cb_name","muted","iceState","con_state_emit","get_currentDirection","on_failed","sig_state_emit","currentDirection","get_stats","_stats","recv","getReceivers","_type","replace","res_stats","audioLevel","change_stream","change_encode","encode","selected_codecs","setCodecPreferences","change_rate","rate","get_sender","params","getParameters","encodings","maxBitrate","setParameters","start_offer","getTracks","first_times","send_msg","recv_offer","getSenders","recv_answer","recv_candidate","recv_reconnect","recv_aggree","setTimeout","sv_start","scene","camera","controls","renderer","geometry","texture","isAndroid","isIOS","handleResize","setOrbitControls","setOrientationControls","requestAnimationFrame","audio_on_once","audio_on_off_flag","start_audio_once","offer_video_peer","offer_audio_peer","answer_video_peer","answer_audio_peer","audio_sender","remote_video_settings","remote_settings_id","levelMeter","c360Elm","offer_video_peer_sender","remote_video_id","is_offer_video_available","is_group_in_remote","dummy_video_staream","aspectRatio","oncanplay","start_get_audio_level","stats","start_stop_video","audio_restart","videoUnit","remoteVideo","child_elms","vm","is_in_private","personal_remote_id","is_callee_dialog_visible","media_type","hook_down","call_accept","hook_up","show_select_btns","on_click_memo","icon_memo","on_click_photo","icon_photo","on_click_movie","icon_movie","ol","Map","View","Overlay","Feature","control","interaction","proj","source","geom","show_memo_box","show_video_box","show_photo_box","memoEvent","element","positioning","autoPan","autoPanAnimation","duration","re_stream","reset","show_memo","end_flag","show_photo","show_movie","close_button","text_memo","composing","text_area_focus","is_not_ios","mic_btn_color","on_click_mic","icon_mic","on_UPLOAD","icon_upload","dialog_yes","dialog_no","SpeechRecognition","webkitSpeechRecognition","recognition","sp_start","speech_text","before","lang","result_text","onresult","i","resultIndex","results","transcript","isFinal","onend","sp_stop","memo_common","ua","userAgent","toLowerCase","ontouchend","mic_btn_flag","mic_on_off","is_front","is_left","rect","querySelector","getBoundingClientRect","video_rect","getElementById","center","right","left_view","recorder","init_clear","err_exit","message","$nextTick","txt_elm","classList","gen_file_name","_d","toLocaleString","split","cur_date","last_date","count_date","post_file","file_name","b64","formData","FormData","append","encodeURIComponent","entries","response","toBlob","base64","myType","bin","atob","buffer","Uint8Array","charCodeAt","Blob","drawCanvas","$parent","IMG_LENGTH","clearRect","drawImage","toDataURL","imageCapture","ImageCapture","imageBitmap","grabFrame","videoWidth","videoHeight","mixins","imageDataBuf","front_class","movie_btn_state","on_REC","on_STOP","btn_title","movieDataBuf","moveDataChunks","on_end_recorder","history","MediaRecorder","takePhoto","createImageBitmap","resizeWidth","resizeHeight","photo_btn_state","on_PHOTO","icon_shatter","now_keep_out","StrMake","MovieMake","PhotoMake","toggleReplay","now_on_replay","toggleStartDateTime","start_time","toLocaleDateString","isVisbleStartTime","popup_top","popup_left","start_times","stime","selectStartTime","Number","min","max","scopedSlots","_u","fn","classBox1","no_display","t_value","end_time","errMessage","dialogClose","isRecord","on_record","easing","Observable","t_id","isVisbleEndTime","end_times","toast","sort","arr","num_start_time","pre_t","cur_t","arr_t","event","evEmitter_s","on_record_state","reviewEvent","send_fns","recv_fns","evEmitter_client","delete","disconnect","evEmitter_serv","evEmitter","vecLayer","olLayer","olControl","olInteraction","olProj","olSource","olStyle","olGeom","memo_popup_elm","memoPop","view_popup_elm","currentMemos","isVisible","memoPos","memoLayerPopup","memoMake","Vector","features","addLayer","_onMapClick","on_memo","_currentMemos","classify","_updateIcons","$on","memo_id","deleteMemo","updateMemo","send_json","init_memoPop","removeOverlay","parentNode","removeChild","removeLayer","un","getOpacity","setPosition","undefined","getVisible","_pos","transform","getUiComponent","data_json","gid","date","display_flag","up_memo","m","memos","iconFeatures","coordinate","parseFloat","iconFeature","Point","userName","setStyle","Style","image","Icon","anchor","getSource","feature","getFeatures","removeFeature","addFeatures","forEachFeatureAtPixel","pixel","_onIconClick","get","memo_info","param","memo_image","is_caller_dialog_visible","caller_name","call_to_remote","on_call_from_remote","on_call_end","drawLineWidth","drawShape","toggleWrite","toggleErase","hex","updateDrawShape","circleBtnSelected","selectedWriteItem","shapeBtnClick","shapeButtonSrc","selectShape","eraserBtnClick","setWriteItem","drawEvent","selectedShapeText","popup_msg_username","popup_msg_timestamp","popup_msg_url","map_popup","last_feature","init_map_popup","hide","on_click","vecLayerSource","minDist","minFeature","on_featureTouch","stroke","format","drawStartFlag","multiTouch","drawX","drawY","lineId","timerId","tiimerCnt","drawLayer","eraseLayer","freeDraw","freeErase","writeMode","eraseMode","multitouch","drawMenue","mapPopup","createDrawLayer","createEraseLayer","createFreeErase","freehand","createDrawShape","maxPoints","minPoints","geometryFunction","onDrawFreeStart","currentFeature","onDrawStart","onDrawEnd","onEraseStart","onEraseEnd","getLineUniqueStr","sendDraw","eraseBtnStart","eraseBtnEnd","eraseNearest","drawLayerSource","onReceiveDraw","onReceiveAllDraw","dataSet","onReceiveErase","onWindowTouchStart","onMapDrag","initDraw","$","DrawLayer","DrawComponent","minimize_button","startDate","endDate","clickDevice","displayDevice","clickLayer","textArea","search_start","error_message","searchSelectDevice","searchSelectLayer","searchComponentSmall","searchEvent","clickTrack","searchTracks","tmpSearchTracks","track_color","radius","selectAll","Array","isArray","_i","$$a","$$el","$$c","checked","$$i","concat","slice","devices","checkNames","clickSelect","clickCancel","allSelect","set","checkArray","layer_search","showSearchLayer","closeSearchLayer","searchComponentList","searchComponentDevice","searchComponentLayer","returnValeuDevices","returnValeuLayers","device_id","dvice","SearchLayer","vecLayer_memo","vecLayerTrackInfo","vecLayerMemoInfo","track_layer","vecLayerTrack","memo_layer","SearchComponent","pnt","substr","_on_track_draw","LineString","Stroke","addFeature","manageLayer_closebutton","dragstart","dragenter","dragend","dragging","layer_box","draggingNow","layer_box_select","toggle_switch","layer_rotate","onRangeChange","onDragging","Layers","draggingLayer","manageLayerList","draggable","manageEvent","layerList","getLayerList","ManageLayer","ManageComponent","css","icons_location","icons_location_click","locationLayer","commuDialogTimerId","iconMenuOverlay","mapMenuTimer","personalDestCan","beaconTimer","createLocationLayer","fill","textAlign","textBaseline","offsetY","font","rotation","getLocationKind","changeMapIcon","new_user","deleteMapIcon","addMapIcon","newFeature","location","updateIcons","initLocationLayer","click_info","getPersonalDest","isOpenSubMenu","locationEvent","locationComponent","TRACK_PERIOD","SPEED_LIMIT","DOWN_TIME","colors","tracks","last_timestamp","last_pt","state_point_num","distance","lat1","lng1","lat2","lng2","user_color","init","trackEvent","datas","on_inittrack","_track","cur_time","on_track_erase","video_file","first_pt","lineDash","trackLayerModule","weatherLayer","createWeatherLayer","LAYERS","TRANSPARENT","FORMAT","KIND","VERSION","tm","visibility","initWeatherLayer","refreshNowcast","refreshNowcastLayer","weatherEvent","weatherComponent","hazardMapLayer","hazardMapEvent","hazardMapComponent","_k","send","btn_send_img","chatMessages","chatMessage","index","time","nack","href","is_me","c_time","api_url","balloon","chatLayer","chatEvent","chatLayerModule","isDisplayLayerMenue","comfirme","search","showWriteMenu","currentModule","writeBtnClick","backFromWriteBtnClick","layerModules","toggle","is_showed_rec_btn","btnOnRec","on_rec","video_devices","video_device","devideId","deviceId","cur_constraints","select_device","label","URL_UPLOAD","URL_FILE_NAME","TIMESLICE","ModalDialog","facingModeId","userConstraints","envConstraints","theta_constraints","audio_stream","video_stream","last_last_timestamp","local_settings","clear_id","video_devices_len","whiteNoise","video_construction","audio_construction","stop_stream","resolev","init_rec","chunks","on_video","$set","ViewLayersLightbox","show_text_box","view_content_text","lightbox_video","video_vertical","lightbox_img","img_vertical","classify_change","memo_status","memo_download","memo_delete","back_memo","delete_memo","field_width","field_height","videoElem","click_target","result2","windowResize","img_rate","tel_icon","tel_button","video_icon","video_button","BUFFER_SIZE","audioDatas","sampleRate","audioContext","scriptProcessor","rec_pcm","createMediaStreamSource","createScriptProcessor","onaudioprocess","copyAudioPerUnit","inputBuffer","getChannelData","connect","destination","mergeData","mergeBuffers","dataview","encodeToWAV","audioBlob","writeString","view","offset","string","char","setUint8","floatTo16BitPCM","output","datum","pcm","setInt16","samples","headerSize","outputDataLength","outBuffer","DataView","ArrayBuffer","setUint32","setUint16","bufferSize","totalBufferSize","totalBuffer","Float32Array","bufferData","on_msg","speech","speechSynthesis","noAutoHide","init_recognition","audio_file","text_file","wakeupLock","wakeLock","requestWakeLock","request","onrelease","handleVisibilityChange","visibilityState","mapView","mainLayer","mapCenterCoord","zoomVal","dests","destsNotRest","screen_portrait","info_json","serveralive","httpsalive","mapWindow_display","rightButton","mapMenu","rtcGroup","rtcPrivate","callRec","StreamIo","mapClickList","viewLayersDevice","viewLayersLightbox","reviewComp","on_stream","menuBtnClick","mapCenter","myCoord","toCenterTrial","showMap","projection","zoom","attribution","attributionOptions","collapsible","rotate","interactions","altShiftDragRotate","pinchRotate","togglePeepDisp","renew","last_renew_time","created","mqlDisp","amtHeader","baseField","mapField","initExec","toFullScreen","docEl","requestFullScreen","display","client_id","_newUsers","ptt_type_socketio","challenge","privateKey","Accept","sign","res_json","ab2str","authId","post","authPass","pri_pem","pub_pem","password","publicKey","modulusLength","publicExponent","hash","signature","str2ab","bufView","pemHeader","pem","binaryDer","VueRouter","routes","Home","LoginPage","meta","isPublic","RegistPage","router","base","process","beforeEach","to","from","matched","some","record","query","redirect","fullPath","BootstrapVue","ldb","localforage","createInstance","driver","INDEXEDDB","storeName","version","store","App","$mount","__webpack_module_cache__","moduleId","cachedModule","loaded","__webpack_modules__","call","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","r","n","getter","__esModule","d","a","definition","defineProperty","enumerable","f","chunkId","all","reduce","promises","u","miniCssF","globalThis","Function","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","done","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","setAttribute","onScriptComplete","doneFns","bind","head","appendChild","Symbol","toStringTag","nmd","paths","children","installedChunks","installedChunkData","loadingEnded","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}